<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MindPal v10 Field Mapping Audit</title>
<style>
  :root {
    --green: #d4edda;
    --green-text: #155724;
    --amber: #fff3cd;
    --amber-text: #856404;
    --red: #f8d7da;
    --red-text: #721c24;
    --gray: #e2e3e5;
    --gray-text: #383d41;
    --border: #dee2e6;
    --bg: #f8f9fa;
    --header-bg: #1a1a2e;
    --header-text: #e0e0e0;
    --accent: #4361ee;
    --accent-hover: #3a56d4;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    background: var(--bg);
    color: #212529;
    line-height: 1.6;
  }

  header {
    background: var(--header-bg);
    color: var(--header-text);
    padding: 24px 32px;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  }

  header h1 {
    font-size: 1.5rem;
    font-weight: 700;
    color: #fff;
    margin-bottom: 4px;
  }

  header .subtitle {
    font-size: 0.85rem;
    color: #adb5bd;
  }

  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 24px 32px 64px;
  }

  /* Stats bar */
  .stats-bar {
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
    margin-bottom: 32px;
    padding: 16px 20px;
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  }

  .stat-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9rem;
    font-weight: 600;
  }

  .stat-item .stat-count {
    font-size: 1.3rem;
    font-weight: 800;
  }

  .stat-match { color: var(--green-text); }
  .stat-mismatch { color: var(--amber-text); }
  .stat-missing { color: var(--red-text); }
  .stat-notdisplayed { color: var(--gray-text); }
  .stat-total { color: #212529; }

  .stat-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    display: inline-block;
  }

  .stat-dot.green { background: #28a745; }
  .stat-dot.amber { background: #ffc107; }
  .stat-dot.red { background: #dc3545; }
  .stat-dot.gray { background: #6c757d; }
  .stat-dot.blue { background: var(--accent); }

  /* TOC */
  .toc {
    background: #fff;
    border-radius: 8px;
    padding: 20px 24px;
    margin-bottom: 32px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  }

  .toc h2 {
    font-size: 1.1rem;
    margin-bottom: 12px;
    color: var(--header-bg);
  }

  .toc-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 6px 24px;
  }

  .toc a {
    color: var(--accent);
    text-decoration: none;
    font-size: 0.9rem;
    padding: 2px 0;
    display: block;
  }

  .toc a:hover {
    text-decoration: underline;
    color: var(--accent-hover);
  }

  /* How to Read */
  .info-section {
    background: #fff;
    border-radius: 8px;
    padding: 20px 24px;
    margin-bottom: 32px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  }

  .info-section h2 {
    font-size: 1.1rem;
    margin-bottom: 12px;
    color: var(--header-bg);
  }

  .info-section p, .info-section li {
    font-size: 0.9rem;
    margin-bottom: 4px;
  }

  .info-section ul {
    padding-left: 20px;
    margin-bottom: 8px;
  }

  /* Accordion */
  .accordion {
    margin-bottom: 16px;
  }

  .accordion-header {
    background: #fff;
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 16px 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--header-bg);
    transition: background 0.15s, border-radius 0.15s;
    user-select: none;
    box-shadow: 0 1px 2px rgba(0,0,0,0.06);
  }

  .accordion-header:hover {
    background: #eef0f5;
  }

  .accordion-header.open {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
  }

  .accordion-chevron {
    transition: transform 0.2s;
    font-size: 0.8rem;
    color: #6c757d;
  }

  .accordion-header.open .accordion-chevron {
    transform: rotate(180deg);
  }

  .accordion-body {
    display: none;
    background: #fff;
    border: 1px solid var(--border);
    border-top: none;
    border-radius: 0 0 8px 8px;
    padding: 20px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.06);
  }

  .accordion-body.open {
    display: block;
  }

  .accordion-body > p {
    font-size: 0.9rem;
    margin-bottom: 12px;
    color: #495057;
  }

  .sub-heading {
    font-size: 1rem;
    font-weight: 600;
    color: var(--header-bg);
    margin: 20px 0 8px;
    padding-bottom: 4px;
    border-bottom: 2px solid var(--accent);
    display: inline-block;
  }

  .sub-heading:first-child {
    margin-top: 0;
  }

  /* Table wrapper */
  .table-wrapper {
    overflow-x: auto;
    margin: 8px 0 20px;
    border: 1px solid var(--border);
    border-radius: 6px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.85rem;
    min-width: 800px;
  }

  thead th {
    background: #343a40;
    color: #fff;
    padding: 10px 12px;
    text-align: left;
    font-weight: 600;
    position: sticky;
    top: 0;
    z-index: 10;
    white-space: nowrap;
  }

  tbody tr:nth-child(even) {
    background: #f4f6f8;
  }

  tbody tr:nth-child(odd) {
    background: #fff;
  }

  tbody tr:hover {
    background: #e8ecf1;
  }

  td {
    padding: 8px 12px;
    border-top: 1px solid #e9ecef;
    vertical-align: top;
  }

  td:first-child {
    position: sticky;
    left: 0;
    z-index: 5;
    background: inherit;
    font-weight: 600;
    min-width: 220px;
    max-width: 280px;
    border-right: 2px solid var(--border);
  }

  tbody tr:nth-child(even) td:first-child { background: #f4f6f8; }
  tbody tr:nth-child(odd) td:first-child { background: #fff; }
  tbody tr:hover td:first-child { background: #e8ecf1; }

  /* Status cells */
  .status-match {
    background: var(--green) !important;
    color: var(--green-text);
    font-weight: 600;
    white-space: nowrap;
  }

  .status-mismatch {
    background: var(--amber) !important;
    color: var(--amber-text);
    font-weight: 600;
    white-space: nowrap;
  }

  .status-missing {
    background: var(--red) !important;
    color: var(--red-text);
    font-weight: 600;
    white-space: nowrap;
  }

  .status-notdisplayed {
    background: var(--gray) !important;
    color: var(--gray-text);
    font-weight: 600;
    white-space: nowrap;
  }

  /* Inline code */
  code {
    background: #e9ecef;
    padding: 1px 5px;
    border-radius: 3px;
    font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
    font-size: 0.82rem;
    color: #c7254e;
  }

  /* Critical issues section */
  .critical-section {
    background: #fff;
    border-radius: 8px;
    padding: 24px;
    margin-top: 32px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.12);
    border-left: 6px solid #dc3545;
  }

  .critical-section h2 {
    font-size: 1.3rem;
    color: var(--header-bg);
    margin-bottom: 20px;
  }

  .severity-group {
    margin-bottom: 24px;
  }

  .severity-group:last-child {
    margin-bottom: 0;
  }

  .severity-badge {
    display: inline-block;
    padding: 4px 14px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 12px;
  }

  .badge-critical {
    background: #dc3545;
    color: #fff;
  }

  .badge-high {
    background: #ffc107;
    color: #664d03;
  }

  .badge-medium {
    background: #fd7e14;
    color: #fff;
  }

  .issue-list {
    list-style: none;
    padding: 0;
  }

  .issue-list li {
    padding: 10px 16px;
    margin-bottom: 8px;
    border-radius: 6px;
    font-size: 0.9rem;
    line-height: 1.5;
  }

  .issue-critical {
    background: #fef2f2;
    border-left: 4px solid #dc3545;
  }

  .issue-high {
    background: #fffbeb;
    border-left: 4px solid #ffc107;
  }

  .issue-medium {
    background: #fff7ed;
    border-left: 4px solid #fd7e14;
  }

  .issue-number {
    font-weight: 800;
    margin-right: 6px;
  }

  /* Node 9 fields list */
  .field-list {
    font-size: 0.9rem;
    padding-left: 20px;
    margin-bottom: 12px;
  }

  .field-list li {
    margin-bottom: 2px;
  }

  .note-box {
    background: #e3f2fd;
    border-left: 4px solid var(--accent);
    padding: 12px 16px;
    border-radius: 0 6px 6px 0;
    margin: 12px 0;
    font-size: 0.9rem;
    font-weight: 500;
  }

  .note-box.critical-note {
    background: #fef2f2;
    border-left-color: #dc3545;
  }

  .note-box.warn-note {
    background: #fffbeb;
    border-left-color: #ffc107;
  }

  .empty-node {
    font-style: italic;
    color: #6c757d;
    padding: 8px 0;
  }
</style>
</head>
<body>

<header>
  <h1>MindPal v10 Workflow &rarr; Supabase &rarr; Front-End: Complete Field Mapping Audit</h1>
  <div class="subtitle">Generated: 2026-02-21 &nbsp;|&nbsp; Workflow File: MindPal Workflow - BidSmart Analyzer v10 (26).json</div>
</header>

<div class="container">

  <!-- Stats Bar -->
  <div class="stats-bar">
    <div class="stat-item stat-total">
      <span class="stat-dot blue"></span>
      <span>Total Fields:</span>
      <span class="stat-count">162</span>
    </div>
    <div class="stat-item stat-match">
      <span class="stat-dot green"></span>
      <span>Match:</span>
      <span class="stat-count">52</span>
    </div>
    <div class="stat-item stat-mismatch">
      <span class="stat-dot amber"></span>
      <span>Mismatch:</span>
      <span class="stat-count">73</span>
    </div>
    <div class="stat-item stat-missing">
      <span class="stat-dot red"></span>
      <span>Missing:</span>
      <span class="stat-count">27</span>
    </div>
    <div class="stat-item stat-notdisplayed">
      <span class="stat-dot gray"></span>
      <span>Not Displayed:</span>
      <span class="stat-count">10</span>
    </div>
  </div>

  <!-- Table of Contents -->
  <div class="toc">
    <h2>Table of Contents</h2>
    <div class="toc-grid">
      <a href="#node0">NODE 0: API Input (HUMAN_INPUT)</a>
      <a href="#node1">NODE 1: Extract All Bids (LOOP)</a>
      <a href="#node2">NODE 2: Equipment Researcher (LOOP)</a>
      <a href="#node3">NODE 3: Contractor Researcher (LOOP)</a>
      <a href="#node4">NODE 4: Incentive Finder (AGENT)</a>
      <a href="#node5">NODE 5: Scoring Engine (LOOP)</a>
      <a href="#node6">NODE 6: Question Generator (LOOP)</a>
      <a href="#node7">NODE 7: Per-Bid FAQ Generator (LOOP)</a>
      <a href="#node8">NODE 8: Overall FAQ Generator (AGENT)</a>
      <a href="#node9">NODE 9: Send Data to Supabase (AGENT)</a>
      <a href="#node10">NODE 10: Supabase Real Insert (CODE)</a>
      <a href="#node11">NODE 11: Send Results (WEBHOOK)</a>
      <a href="#unpopulated">DB Columns Never Populated by v10</a>
      <a href="#frontend-not-in-db">Front-End Types Not in DB</a>
      <a href="#critical-issues">Critical Issues Summary</a>
    </div>
  </div>

  <!-- How to Read -->
  <div class="info-section">
    <h2>How to Read This Document</h2>
    <p>Each section is organized by <strong>MindPal Workflow Node</strong>. For every field that node outputs:</p>
    <div class="table-wrapper" style="margin-top:12px;">
      <table>
        <thead>
          <tr>
            <th>Column</th>
            <th>Meaning</th>
          </tr>
        </thead>
        <tbody>
          <tr><td><strong>MindPal Field</strong></td><td>The exact field name in the MindPal node's output JSON</td></tr>
          <tr><td><strong>Supabase Column</strong></td><td>The exact column name in the database</td></tr>
          <tr><td><strong>Table</strong></td><td>The Supabase table this column belongs to</td></tr>
          <tr><td><strong>Insert Path</strong></td><td>How the data gets from MindPal to DB (Node 9 direct, callback, v8Mapper)</td></tr>
          <tr><td><strong>Front-End Display</strong></td><td>Which React component displays this field and how</td></tr>
          <tr><td><strong>Status</strong></td><td>Match, Mismatch, Missing, or Not displayed</td></tr>
        </tbody>
      </table>
    </div>
    <h2 style="margin-top:16px;">Insert Paths Reference</h2>
    <ul>
      <li><strong>Node 9 (Direct)</strong> = MindPal "Send data to supabase" agent node &mdash; inserts directly via Supabase REST API</li>
      <li><strong>Callback</strong> = <code>mindpal-callback</code> edge function &mdash; receives webhook POST, maps nested v8 format</li>
      <li><strong>v8Mapper</strong> = <code>make-webhook</code> edge function using <code>v8Mapper.ts</code> &mdash; handles both v8 nested and v10 flat</li>
      <li><strong>Frontend</strong> = <code>mindpalService.ts</code> <code>mapExtractionToBid()</code> &mdash; client-side mapping (v8 nested format only)</li>
    </ul>
  </div>

  <!-- ===================== NODE 0 ===================== -->
  <div class="accordion" id="node0">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <span>NODE 0: API Input (HUMAN_INPUT)</span>
      <span class="accordion-chevron">&#9660;</span>
    </div>
    <div class="accordion-body">
      <p>Input fields provided to the workflow. These are NOT extracted &mdash; they come from BidSmart when triggering the analysis.</p>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr><th>MindPal Field</th><th>Supabase Column</th><th>Table</th><th>Insert Path</th><th>Front-End Display</th><th>Status</th></tr>
          </thead>
          <tbody>
            <tr><td><code>document_urls</code></td><td>&mdash;</td><td>&mdash;</td><td>Used to feed PDFs to Extract All Bids</td><td>Not displayed</td><td class="status-match">&#10003; Internal</td></tr>
            <tr><td><code>user_priorities</code></td><td><code>priority_price</code>, <code>priority_warranty</code>, etc.</td><td><code>project_requirements</code></td><td>Pre-existing in DB; passed TO MindPal</td><td>HomeownerQuestionnaire.tsx &mdash; sliders</td><td class="status-match">&#10003; Internal</td></tr>
            <tr><td><code>user_notes</code></td><td><code>project_details</code></td><td><code>projects</code></td><td>Pre-existing in DB; passed TO MindPal</td><td>Not displayed after submission</td><td class="status-match">&#10003; Internal</td></tr>
            <tr><td><code>project_id</code></td><td><code>project_id</code></td><td><code>projects</code></td><td>Used as FK for all inserts</td><td>Not directly displayed (URL param)</td><td class="status-match">&#10003; Internal</td></tr>
            <tr><td><code>request_id</code></td><td><code>id</code> (of <code>pdf_uploads</code>)</td><td><code>pdf_uploads</code></td><td>Used to correlate callback</td><td>Not displayed</td><td class="status-match">&#10003; Internal</td></tr>
            <tr><td><code>callback_url</code></td><td>&mdash;</td><td>&mdash;</td><td>URL for MindPal to POST results back</td><td>Not displayed</td><td class="status-match">&#10003; Internal</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ===================== NODE 1 ===================== -->
  <div class="accordion" id="node1">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <span>NODE 1: Extract All Bids (LOOP)</span>
      <span class="accordion-chevron">&#9660;</span>
    </div>
    <div class="accordion-body">
      <p>Iterates over each PDF URL. Extracts structured bid data from each document.</p>

      <div class="sub-heading">&rarr; <code>contractor_bids</code> table</div>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr><th>MindPal Field</th><th>Supabase Column</th><th>Table</th><th>Insert Path</th><th>Front-End Display</th><th>Status</th></tr>
          </thead>
          <tbody>
            <tr><td><code>contractor_name</code></td><td><code>contractor_name</code></td><td><code>contractor_bids</code></td><td>Node 9: direct / Callback: via <code>contractor_info.company_name</code> / v8Mapper: flat or nested / Frontend: via <code>contractor_info.company_name</code></td><td>BidCard.tsx (header), BidComparisonTable.tsx (header), ClarificationQuestionsSection.tsx (tabs)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>contractor_company</code></td><td><code>contractor_company</code></td><td><code>contractor_bids</code></td><td>Node 9: not shown / Callback: via <code>contractor_info.company_name</code> / v8Mapper: flat or nested / Frontend: via <code>contractor_info.company_name</code></td><td>Not displayed</td><td class="status-mismatch">&#9888; v10 outputs flat, callback expects nested</td></tr>
            <tr><td><code>contractor_contact_name</code></td><td><code>contractor_contact_name</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: not mapped / v8Mapper: flat or nested</td><td>Not displayed</td><td class="status-mismatch">&#9888; Node 9 doesn't include it; callback doesn't map it</td></tr>
            <tr><td><code>contractor_phone</code></td><td><code>contractor_phone</code></td><td><code>contractor_bids</code></td><td>Node 9: direct / Callback: via <code>contractor_info.phone</code> / v8Mapper: flat or nested / Frontend: via <code>contractor_info.phone</code></td><td>BidCard.tsx (clickable phone link)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>contractor_email</code></td><td><code>contractor_email</code></td><td><code>contractor_bids</code></td><td>Node 9: direct / Callback: via <code>contractor_info.email</code> / v8Mapper: flat or nested / Frontend: via <code>contractor_info.email</code></td><td>BidCard.tsx (clickable email link)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>contractor_address</code></td><td><code>contractor_address</code></td><td><code>contractor_bids</code></td><td>Node 9: direct / Callback: not mapped / v8Mapper: flat or nested</td><td>Not displayed</td><td class="status-mismatch">&#9888; Callback doesn't map this</td></tr>
            <tr><td><code>contractor_license</code></td><td><code>contractor_license</code></td><td><code>contractor_bids</code></td><td>Node 9: direct / Callback: via <code>contractor_info.license_number</code> / v8Mapper: flat or nested / Frontend: via <code>contractor_info.license_number</code></td><td>BidCard.tsx, BidComparisonTable.tsx (license display)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>contractor_license_state</code></td><td><code>contractor_license_state</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>contractor_info.license_state</code> / v8Mapper: flat or nested / Frontend: NOT MAPPED</td><td>BidCard.tsx, BidComparisonTable.tsx (appended to license)</td><td class="status-mismatch">&#9888; Node 9 missing; Frontend missing</td></tr>
            <tr><td><code>contractor_website</code></td><td><code>contractor_website</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>contractor_info.website</code> / v8Mapper: flat or nested / Frontend: via <code>contractor_info.website</code></td><td>BidCard.tsx (clickable link)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>contractor_years_in_business</code></td><td><code>contractor_years_in_business</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: not mapped / v8Mapper: flat or nested</td><td>BidCard.tsx, BidComparisonTable.tsx (quick stats)</td><td class="status-mismatch">&#9888; Node 9 missing; Callback missing</td></tr>
            <tr><td><code>contractor_certifications</code></td><td><code>contractor_certifications</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: not mapped / v8Mapper: flat or nested</td><td>BidCard.tsx (comma list), BidComparisonTable.tsx (badge tags)</td><td class="status-mismatch">&#9888; Node 9 missing; Callback missing</td></tr>
            <tr><td><code>total_bid_amount</code></td><td><code>total_bid_amount</code></td><td><code>contractor_bids</code></td><td>Node 9: direct / Callback: via <code>pricing.total_amount</code> / v8Mapper: flat or nested / Frontend: via <code>pricing.total_amount</code></td><td>BidCard.tsx (large price header), BidComparisonTable.tsx</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>labor_cost</code></td><td><code>labor_cost</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>pricing.labor_cost</code> / v8Mapper: flat or nested</td><td>BidComparisonTable.tsx (pricing section)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>equipment_cost</code></td><td><code>equipment_cost</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>pricing.equipment_cost</code> / v8Mapper: flat or nested</td><td>BidComparisonTable.tsx (pricing section)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>materials_cost</code></td><td><code>materials_cost</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>pricing.materials_cost</code> / v8Mapper: flat or nested</td><td>BidComparisonTable.tsx (pricing section)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>permit_cost</code></td><td><code>permit_cost</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>pricing.permit_cost</code> / v8Mapper: flat or nested</td><td>BidComparisonTable.tsx (pricing section)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>disposal_cost</code></td><td><code>disposal_cost</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: not mapped / v8Mapper: flat or nested</td><td>BidComparisonTable.tsx (pricing section)</td><td class="status-mismatch">&#9888; Node 9 missing; Callback missing</td></tr>
            <tr><td><code>electrical_cost</code></td><td><code>electrical_cost</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: not mapped / v8Mapper: flat or nested</td><td>BidComparisonTable.tsx (pricing section)</td><td class="status-mismatch">&#9888; Node 9 missing; Callback missing</td></tr>
            <tr><td><code>total_before_rebates</code></td><td><code>total_before_rebates</code></td><td><code>contractor_bids</code></td><td>Node 9: direct / Callback: via <code>pricing.price_before_rebates</code> / v8Mapper: flat or nested</td><td>Not directly displayed (used in calculations)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>estimated_rebates</code></td><td><code>estimated_rebates</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: calculated sum of <code>pricing.rebates_mentioned[].amount</code> / v8Mapper: flat or sum</td><td>BidCard.tsx (green text), BidComparisonTable.tsx</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>total_after_rebates</code></td><td><code>total_after_rebates</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>pricing.price_after_rebates</code> / v8Mapper: flat or nested</td><td>BidCard.tsx (green pricing), BidComparisonTable.tsx</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>rebates_mentioned</code></td><td><code>rebates_mentioned</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: not mapped as array / v8Mapper: flat or nested</td><td>Not displayed</td><td class="status-mismatch">&#9888; Node 9 missing; Callback doesn't store array</td></tr>
            <tr><td><code>labor_warranty_years</code></td><td><code>labor_warranty_years</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>warranty.labor_warranty_years</code> / v8Mapper: nested only</td><td>BidCard.tsx, BidComparisonTable.tsx (warranty row)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>equipment_warranty_years</code></td><td><code>equipment_warranty_years</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>warranty.equipment_warranty_years</code> / v8Mapper: nested only</td><td>BidCard.tsx, BidComparisonTable.tsx (warranty row)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>compressor_warranty_years</code></td><td><code>compressor_warranty_years</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: NOT MAPPED / v8Mapper: NOT MAPPED</td><td>Not displayed (used in comparisonService.ts)</td><td class="status-missing">&#10007; Never inserted from any path</td></tr>
            <tr><td><code>additional_warranty_details</code></td><td><code>additional_warranty_details</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>warranty.warranty_details</code> / v8Mapper: nested only</td><td>Not displayed</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>estimated_days</code></td><td><code>estimated_days</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>timeline.estimated_days</code> / v8Mapper: nested only</td><td>BidCard.tsx (quick stats), BidComparisonTable.tsx (timeline)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>start_date_available</code></td><td><code>start_date_available</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>timeline.start_date_available</code></td><td>Not displayed</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>scope_summary</code></td><td><code>scope_summary</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>scope_of_work.summary</code> / v8Mapper: flat or nested</td><td>BidCard.tsx (scope paragraph)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>inclusions</code></td><td><code>inclusions</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>scope_of_work.inclusions</code> / v8Mapper: flat or nested</td><td>BidCard.tsx (green checkmark list)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>exclusions</code></td><td><code>exclusions</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>scope_of_work.exclusions</code> / v8Mapper: flat or nested</td><td>BidCard.tsx (red X list)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>scope_permit_included</code></td><td><code>scope_permit_included</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>scope_of_work.permit_included</code> / v8Mapper: flat or nested / Frontend: NOT MAPPED</td><td>BidComparisonTable.tsx (check/X icons)</td><td class="status-mismatch">&#9888; Node 9 missing; Frontend missing</td></tr>
            <tr><td><code>scope_electrical_included</code></td><td><code>scope_electrical_included</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>scope_of_work.electrical_work_included</code> / v8Mapper: flat or nested / Frontend: NOT MAPPED</td><td>BidComparisonTable.tsx (check/X icons)</td><td class="status-mismatch">&#9888; Node 9 missing; Frontend missing</td></tr>
            <tr><td><code>scope_disposal_included</code></td><td><code>scope_disposal_included</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>scope_of_work.disposal_included</code> / v8Mapper: flat or nested / Frontend: NOT MAPPED</td><td>BidComparisonTable.tsx (check/X icons)</td><td class="status-mismatch">&#9888; Node 9 missing; Frontend missing</td></tr>
            <tr><td><code>scope_thermostat_included</code></td><td><code>scope_thermostat_included</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>scope_of_work.thermostat_included</code> / v8Mapper: flat or nested / Frontend: NOT MAPPED</td><td>BidComparisonTable.tsx (check/X icons)</td><td class="status-mismatch">&#9888; Node 9 missing; Frontend missing</td></tr>
            <tr><td><code>scope_ductwork_included</code> (hardcoded null)</td><td><code>scope_ductwork_included</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>scope_of_work.ductwork_included</code> / v8Mapper: flat or nested / Frontend: NOT MAPPED</td><td>BidComparisonTable.tsx (check/X icons)</td><td class="status-mismatch">&#9888; v10 always null; Node 9 missing; Frontend missing</td></tr>
            <tr><td><code>scope_manual_j_included</code> (hardcoded null)</td><td><code>scope_manual_j_included</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>scope_of_work.manual_j_included</code> / v8Mapper: flat or nested / Frontend: NOT MAPPED</td><td>BidComparisonTable.tsx (check/X icons)</td><td class="status-mismatch">&#9888; v10 always null; Node 9 missing; Frontend missing</td></tr>
            <tr><td><code>scope_commissioning_included</code> (hardcoded null)</td><td><code>scope_commissioning_included</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>scope_of_work.commissioning_included</code> / v8Mapper: flat or nested / Frontend: NOT MAPPED</td><td>BidComparisonTable.tsx (check/X icons)</td><td class="status-mismatch">&#9888; v10 always null; Node 9 missing; Frontend missing</td></tr>
            <tr><td><code>scope_air_handler_included</code> (hardcoded null)</td><td><code>scope_air_handler_included</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>scope_of_work.air_handler_included</code> / v8Mapper: flat or nested / Frontend: NOT MAPPED</td><td>BidComparisonTable.tsx (check/X icons)</td><td class="status-mismatch">&#9888; v10 always null; Node 9 missing; Frontend missing</td></tr>
            <tr><td><code>scope_line_set_included</code> (hardcoded null)</td><td><code>scope_line_set_included</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>scope_of_work.line_set_included</code> / v8Mapper: flat or nested / Frontend: NOT MAPPED</td><td>BidComparisonTable.tsx (check/X icons)</td><td class="status-mismatch">&#9888; v10 always null; Node 9 missing; Frontend missing</td></tr>
            <tr><td><code>scope_disconnect_included</code> (hardcoded null)</td><td><code>scope_disconnect_included</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>scope_of_work.disconnect_included</code> / v8Mapper: flat or nested / Frontend: NOT MAPPED</td><td>BidComparisonTable.tsx (check/X icons)</td><td class="status-mismatch">&#9888; v10 always null; Node 9 missing; Frontend missing</td></tr>
            <tr><td><code>scope_pad_included</code> (hardcoded null)</td><td><code>scope_pad_included</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>scope_of_work.pad_included</code> / v8Mapper: flat or nested / Frontend: NOT MAPPED</td><td>BidComparisonTable.tsx (check/X icons)</td><td class="status-mismatch">&#9888; v10 always null; Node 9 missing; Frontend missing</td></tr>
            <tr><td><code>scope_drain_line_included</code> (hardcoded null)</td><td><code>scope_drain_line_included</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>scope_of_work.drain_line_included</code> / v8Mapper: flat or nested / Frontend: NOT MAPPED</td><td>BidComparisonTable.tsx (check/X icons)</td><td class="status-mismatch">&#9888; v10 always null; Node 9 missing; Frontend missing</td></tr>
            <tr><td><code>electrical_panel_assessment_included</code></td><td><code>electrical_panel_assessment_included</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: not mapped / v8Mapper: flat or nested</td><td>BidComparisonTable.tsx, ElectricalComparisonTable.tsx</td><td class="status-mismatch">&#9888; Node 9 missing; Callback missing</td></tr>
            <tr><td><code>electrical_panel_upgrade_included</code></td><td><code>electrical_panel_upgrade_included</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: not mapped / v8Mapper: flat or nested</td><td>BidComparisonTable.tsx</td><td class="status-mismatch">&#9888; Node 9 missing; Callback missing</td></tr>
            <tr><td><code>electrical_panel_upgrade_cost</code></td><td><code>electrical_panel_upgrade_cost</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: not mapped / v8Mapper: flat or nested</td><td>BidComparisonTable.tsx (currency display)</td><td class="status-mismatch">&#9888; Node 9 missing; Callback missing</td></tr>
            <tr><td><code>electrical_existing_panel_amps</code></td><td><code>electrical_existing_panel_amps</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: not mapped / v8Mapper: flat or nested</td><td>BidComparisonTable.tsx, ElectricalComparisonTable.tsx ("XA" format)</td><td class="status-mismatch">&#9888; Node 9 missing; Callback missing</td></tr>
            <tr><td><code>electrical_proposed_panel_amps</code></td><td><code>electrical_proposed_panel_amps</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: not mapped / v8Mapper: flat or nested</td><td>BidComparisonTable.tsx ("XA" format)</td><td class="status-mismatch">&#9888; Node 9 missing; Callback missing</td></tr>
            <tr><td><code>electrical_breaker_size_required</code></td><td><code>electrical_breaker_size_required</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: not mapped / v8Mapper: flat or nested</td><td>BidComparisonTable.tsx, ElectricalComparisonTable.tsx ("XA" format)</td><td class="status-mismatch">&#9888; Node 9 missing; Callback missing</td></tr>
            <tr><td><code>electrical_dedicated_circuit_included</code></td><td><code>electrical_dedicated_circuit_included</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: not mapped / v8Mapper: flat or nested</td><td>BidComparisonTable.tsx (check/X icons)</td><td class="status-mismatch">&#9888; Node 9 missing; Callback missing</td></tr>
            <tr><td><code>electrical_permit_included</code></td><td><code>electrical_permit_included</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: not mapped / v8Mapper: flat or nested</td><td>BidComparisonTable.tsx (check/X icons)</td><td class="status-mismatch">&#9888; Node 9 missing; Callback missing</td></tr>
            <tr><td><code>electrical_load_calculation_included</code></td><td><code>electrical_load_calculation_included</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: not mapped / v8Mapper: flat or nested</td><td>BidComparisonTable.tsx (check/X icons)</td><td class="status-mismatch">&#9888; Node 9 missing; Callback missing</td></tr>
            <tr><td><code>electrical_notes</code></td><td><code>electrical_notes</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: not mapped / v8Mapper: flat or nested</td><td>BidComparisonTable.tsx (truncated text with tooltip)</td><td class="status-mismatch">&#9888; Node 9 missing; Callback missing</td></tr>
            <tr><td><code>deposit_amount</code></td><td><code>deposit_required</code></td><td><code>contractor_bids</code></td><td>Node 9: uses <code>deposit_amount</code> (not a column) / Callback: via <code>payment_terms.deposit_amount</code> &rarr; <code>deposit_required</code> / v8Mapper: maps correctly</td><td>BidCard.tsx ("Deposit: $X")</td><td class="status-missing">&#10007; NAME MISMATCH in Node 9</td></tr>
            <tr><td><code>deposit_percentage</code></td><td><code>deposit_percentage</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>payment_terms.deposit_percentage</code> / v8Mapper: flat or nested</td><td>BidCard.tsx (parenthetical %)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>payment_schedule</code></td><td><code>payment_schedule</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>payment_terms.payment_schedule</code> / v8Mapper: flat or nested</td><td>comparisonService.ts (missing info detection)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>financing_offered</code></td><td><code>financing_offered</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>payment_terms.financing_offered</code> / v8Mapper: flat or nested</td><td>BidCard.tsx, BidComparisonTable.tsx ("Financing available")</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>financing_terms</code></td><td><code>financing_terms</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>payment_terms.financing_terms</code> / v8Mapper: flat or nested</td><td>BidCard.tsx (appended text)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>bid_date</code></td><td><code>bid_date</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: via <code>dates.bid_date</code></td><td>Not displayed</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>quote_date</code></td><td><code>quote_date</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: fallback for <code>bid_date</code></td><td>Not displayed</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>extraction_confidence</code></td><td><code>extraction_confidence</code></td><td><code>contractor_bids</code></td><td>Node 9: direct / Callback: <code>mapConfidenceToLevel()</code> / v8Mapper: <code>mapConfidenceToLevel()</code></td><td>BidCard.tsx (confidence badge: Verified/High/Medium/Low)</td><td class="status-mismatch">&#9888; v10 outputs "high"/"medium"/"low" strings; Callback expects numeric 0-100</td></tr>
            <tr><td><code>extraction_notes</code></td><td><code>extraction_notes</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / Callback: joins array with <code>\n</code> as <code>[type] message</code></td><td>Not displayed</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td>&mdash; (not in v10)</td><td><code>deposit_required_flag</code></td><td><code>contractor_bids</code></td><td>v8Mapper: auto-calculates <code>deposit_amount &gt; 0</code> / Callback: NOT CALCULATED</td><td>Not displayed</td><td class="status-missing">&#10007; Only v8Mapper sets this</td></tr>
            <tr><td>&mdash; (not in v10)</td><td><code>valid_until</code></td><td><code>contractor_bids</code></td><td>Callback: via <code>dates.valid_until</code> or <code>timeline.bid_valid_until</code></td><td>Not displayed</td><td class="status-mismatch">&#9888; v10 doesn't output this field</td></tr>
          </tbody>
        </table>
      </div>

      <div class="sub-heading">&rarr; <code>bid_equipment</code> table</div>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr><th>MindPal Field</th><th>Supabase Column</th><th>Table</th><th>Insert Path</th><th>Front-End Display</th><th>Status</th></tr>
          </thead>
          <tbody>
            <tr><td><code>equipment[].equipment_type</code></td><td><code>equipment_type</code></td><td><code>bid_equipment</code></td><td>All paths: direct</td><td>BidComparisonTable.tsx (used to find outdoor_unit for SEER)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>equipment[].brand</code></td><td><code>brand</code></td><td><code>bid_equipment</code></td><td>All paths: direct</td><td>Not directly displayed in comparison</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>equipment[].model_number</code></td><td><code>model_number</code></td><td><code>bid_equipment</code></td><td>All paths: direct</td><td>Not directly displayed in comparison</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>equipment[].capacity_tons</code></td><td><code>capacity_tons</code></td><td><code>bid_equipment</code></td><td>All paths: direct</td><td>BidComparisonTable.tsx (specs row)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>equipment[].seer2_rating</code></td><td><code>seer2_rating</code></td><td><code>bid_equipment</code></td><td>All paths: direct</td><td>BidComparisonTable.tsx (SEER/SEER2 row, best value highlight)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>equipment[].hspf2_rating</code></td><td><code>hspf2_rating</code></td><td><code>bid_equipment</code></td><td>All paths: direct</td><td>BidComparisonTable.tsx (HSPF/HSPF2 row, best value highlight)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>equipment[].variable_speed</code></td><td><code>variable_speed</code></td><td><code>bid_equipment</code></td><td>All paths: direct</td><td>BidComparisonTable.tsx (check/X icon)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>equipment[].refrigerant_type</code></td><td><code>refrigerant_type</code></td><td><code>bid_equipment</code></td><td>Node 9: direct / Callback: reads <code>eq.refrigerant</code> / v8Mapper: <code>eq.refrigerant_type</code> / Frontend: reads <code>eq.refrigerant</code></td><td>BidComparisonTable.tsx (text)</td><td class="status-mismatch">&#9888; v10 outputs <code>refrigerant_type</code>; Callback &amp; Frontend read <code>refrigerant</code></td></tr>
            <tr><td><code>equipment[].voltage</code></td><td><code>voltage</code></td><td><code>bid_equipment</code></td><td>All paths: direct</td><td>Not displayed</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>equipment[].amperage_draw</code></td><td><code>amperage_draw</code></td><td><code>bid_equipment</code></td><td>All paths: direct</td><td>BidComparisonTable.tsx ("XA" format)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>equipment[].minimum_circuit_amperage</code></td><td><code>minimum_circuit_amperage</code></td><td><code>bid_equipment</code></td><td>All paths: direct</td><td>BidComparisonTable.tsx ("XA" format)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>equipment[].confidence</code></td><td><code>confidence</code></td><td><code>bid_equipment</code></td><td>All paths: <code>mapConfidenceToLevel()</code></td><td>Not displayed</td><td class="status-mismatch">&#9888; v10 outputs "high"/"medium"/"low"; Callback expects numeric</td></tr>
            <tr><td>&mdash; (not in v10 Extract)</td><td><code>model_name</code></td><td><code>bid_equipment</code></td><td>Callback/v8Mapper: mapped</td><td>Not displayed</td><td class="status-mismatch">&#9888; v10 doesn't extract this</td></tr>
            <tr><td>&mdash; (not in v10 Extract)</td><td><code>capacity_btu</code></td><td><code>bid_equipment</code></td><td>Callback/v8Mapper: mapped</td><td>BidComparisonTable.tsx (converted to tons)</td><td class="status-mismatch">&#9888; v10 doesn't extract this</td></tr>
            <tr><td>&mdash; (not in v10 Extract)</td><td><code>seer_rating</code></td><td><code>bid_equipment</code></td><td>Callback/v8Mapper: mapped</td><td>BidComparisonTable.tsx (fallback if seer2 missing)</td><td class="status-mismatch">&#9888; v10 only outputs seer2</td></tr>
            <tr><td>&mdash; (not in v10 Extract)</td><td><code>hspf_rating</code></td><td><code>bid_equipment</code></td><td>Callback/v8Mapper: mapped</td><td>BidComparisonTable.tsx (fallback if hspf2 missing)</td><td class="status-mismatch">&#9888; v10 only outputs hspf2</td></tr>
            <tr><td>&mdash; (not in v10 Extract)</td><td><code>eer_rating</code></td><td><code>bid_equipment</code></td><td>Callback/v8Mapper: mapped</td><td>BidComparisonTable.tsx (EER row)</td><td class="status-mismatch">&#9888; v10 doesn't extract this (Equipment Researcher adds it)</td></tr>
            <tr><td>&mdash; (not in v10 Extract)</td><td><code>cop</code></td><td><code>bid_equipment</code></td><td>v8Mapper: mapped / Callback: NOT MAPPED</td><td>BidComparisonTable.tsx (COP row)</td><td class="status-missing">&#10007; Callback never maps <code>cop</code></td></tr>
            <tr><td>&mdash; (not in v10 Extract)</td><td><code>sound_level_db</code></td><td><code>bid_equipment</code></td><td>Callback/v8Mapper: mapped</td><td>BidComparisonTable.tsx ("XdB")</td><td class="status-mismatch">&#9888; v10 doesn't extract this (Equipment Researcher adds it)</td></tr>
            <tr><td>&mdash; (not in v10 Extract)</td><td><code>energy_star_certified</code></td><td><code>bid_equipment</code></td><td>Callback: reads <code>eq.energy_star</code> / v8Mapper: reads <code>eq.energy_star</code></td><td>BidComparisonTable.tsx (ENERGY STAR badge)</td><td class="status-mismatch">&#9888; v10 doesn't extract this (Equipment Researcher adds it); name mismatch <code>energy_star</code> vs <code>energy_star_certified</code></td></tr>
            <tr><td>&mdash; (not in v10 Extract)</td><td><code>energy_star_most_efficient</code></td><td><code>bid_equipment</code></td><td>Callback/v8Mapper: mapped</td><td>BidComparisonTable.tsx (part of ES badge)</td><td class="status-mismatch">&#9888; v10 doesn't extract this</td></tr>
            <tr><td>&mdash; (not in v10 Extract)</td><td><code>equipment_cost</code> (per equipment)</td><td><code>bid_equipment</code></td><td>Callback/v8Mapper: mapped</td><td>Not displayed separately</td><td class="status-mismatch">&#9888; v10 doesn't extract per-equipment cost</td></tr>
          </tbody>
        </table>
      </div>

      <div class="sub-heading">&rarr; <code>bid_line_items</code> table</div>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr><th>MindPal Field</th><th>Supabase Column</th><th>Table</th><th>Insert Path</th><th>Front-End Display</th><th>Status</th></tr>
          </thead>
          <tbody>
            <tr><td><code>line_items[].item_type</code></td><td><code>item_type</code></td><td><code>bid_line_items</code></td><td>All paths: <code>mapLineItemType()</code></td><td>Not directly displayed (pricing breakdown uses bid-level costs)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>line_items[].description</code></td><td><code>description</code></td><td><code>bid_line_items</code></td><td>All paths: direct</td><td>Not directly displayed</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>line_items[].quantity</code></td><td><code>quantity</code></td><td><code>bid_line_items</code></td><td>All paths: fallback 1</td><td>Not directly displayed</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>line_items[].unit_price</code></td><td><code>unit_price</code></td><td><code>bid_line_items</code></td><td>All paths: direct</td><td>Not directly displayed</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>line_items[].total_price</code></td><td><code>total_price</code></td><td><code>bid_line_items</code></td><td>All paths: direct</td><td>Not directly displayed</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>line_items[].brand</code></td><td><code>brand</code></td><td><code>bid_line_items</code></td><td>All paths: direct</td><td>Not directly displayed</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>line_items[].model_number</code></td><td><code>model_number</code></td><td><code>bid_line_items</code></td><td>All paths: direct</td><td>Not directly displayed</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>line_items[].confidence</code></td><td><code>confidence</code></td><td><code>bid_line_items</code></td><td>All paths: <code>mapConfidenceToLevel()</code></td><td>Not directly displayed</td><td class="status-mismatch">&#9888; v10 outputs string; Callback expects numeric</td></tr>
            <tr><td><code>line_items[].line_order</code></td><td><code>line_order</code></td><td><code>bid_line_items</code></td><td>All paths: array index</td><td>Not directly displayed</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td>&mdash; (not in v10)</td><td><code>source_text</code></td><td><code>bid_line_items</code></td><td>Callback: mapped / Frontend: mapped</td><td>Not directly displayed</td><td class="status-mismatch">&#9888; v10 prompt doesn't include this field</td></tr>
            <tr><td>&mdash; (not in v10)</td><td><code>notes</code></td><td><code>bid_line_items</code></td><td>None: never mapped</td><td>Not displayed</td><td class="status-notdisplayed">DB column exists but never populated</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ===================== NODE 2 ===================== -->
  <div class="accordion" id="node2">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <span>NODE 2: Equipment Researcher (LOOP)</span>
      <span class="accordion-chevron">&#9660;</span>
    </div>
    <div class="accordion-body">
      <p>Enhances equipment specs via web research. Returns the COMPLETE bid object with enhanced <code>equipment[]</code> array.</p>

      <div class="sub-heading">&rarr; <code>bid_equipment</code> table (enhancements to Node 1 equipment)</div>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr><th>MindPal Field</th><th>Supabase Column</th><th>Table</th><th>Insert Path</th><th>Front-End Display</th><th>Status</th></tr>
          </thead>
          <tbody>
            <tr><td><code>equipment[].seer2_rating</code></td><td><code>seer2_rating</code></td><td><code>bid_equipment</code></td><td>Same as Node 1 (merged into bid object)</td><td>BidComparisonTable.tsx (SEER/SEER2 row)</td><td class="status-match">&#10003; Enhanced</td></tr>
            <tr><td><code>equipment[].hspf2_rating</code></td><td><code>hspf2_rating</code></td><td><code>bid_equipment</code></td><td>Same as Node 1</td><td>BidComparisonTable.tsx (HSPF/HSPF2 row)</td><td class="status-match">&#10003; Enhanced</td></tr>
            <tr><td><code>equipment[].eer_rating</code></td><td><code>eer_rating</code></td><td><code>bid_equipment</code></td><td>Same as Node 1</td><td>BidComparisonTable.tsx (EER row)</td><td class="status-match">&#10003; Enhanced</td></tr>
            <tr><td><code>equipment[].cop</code></td><td><code>cop</code></td><td><code>bid_equipment</code></td><td>v8Mapper: mapped / Callback: NOT MAPPED</td><td>BidComparisonTable.tsx (COP row)</td><td class="status-missing">&#10007; Callback drops this</td></tr>
            <tr><td><code>equipment[].sound_level_db</code></td><td><code>sound_level_db</code></td><td><code>bid_equipment</code></td><td>Same as Node 1</td><td>BidComparisonTable.tsx ("XdB")</td><td class="status-match">&#10003; Enhanced</td></tr>
            <tr><td><code>equipment[].refrigerant_type</code></td><td><code>refrigerant_type</code></td><td><code>bid_equipment</code></td><td>Node 9/v8Mapper: <code>refrigerant_type</code> / Callback: reads <code>refrigerant</code></td><td>BidComparisonTable.tsx (text)</td><td class="status-mismatch">&#9888; Callback reads wrong field name</td></tr>
            <tr><td><code>equipment[].energy_star_certified</code></td><td><code>energy_star_certified</code></td><td><code>bid_equipment</code></td><td>Callback/Frontend: reads <code>energy_star</code> / v8Mapper: reads <code>energy_star</code></td><td>BidComparisonTable.tsx (ES badge)</td><td class="status-mismatch">&#9888; All paths read <code>energy_star</code> but v10 outputs <code>energy_star_certified</code></td></tr>
            <tr><td><code>equipment[].energy_star_most_efficient</code></td><td><code>energy_star_most_efficient</code></td><td><code>bid_equipment</code></td><td>All paths: direct</td><td>BidComparisonTable.tsx</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>equipment[].amperage_draw</code></td><td><code>amperage_draw</code></td><td><code>bid_equipment</code></td><td>All paths: direct</td><td>BidComparisonTable.tsx ("XA")</td><td class="status-match">&#10003; Enhanced</td></tr>
            <tr><td><code>equipment[].minimum_circuit_amperage</code></td><td><code>minimum_circuit_amperage</code></td><td><code>bid_equipment</code></td><td>All paths: direct</td><td>BidComparisonTable.tsx ("XA")</td><td class="status-match">&#10003; Enhanced</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ===================== NODE 3 ===================== -->
  <div class="accordion" id="node3">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <span>NODE 3: Contractor Researcher (LOOP)</span>
      <span class="accordion-chevron">&#9660;</span>
    </div>
    <div class="accordion-body">
      <p>Researches contractor reputation online. Outputs a separate JSON per contractor.</p>

      <div class="sub-heading">&rarr; <code>contractor_bids</code> table (contractor reputation fields)</div>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr><th>MindPal Field</th><th>Supabase Column</th><th>Table</th><th>Insert Path</th><th>Front-End Display</th><th>Status</th></tr>
          </thead>
          <tbody>
            <tr><td><code>contractor_name</code></td><td><code>contractor_name</code></td><td><code>contractor_bids</code></td><td>Matching key (not re-inserted)</td><td>&mdash;</td><td class="status-match">&#10003; Used for matching</td></tr>
            <tr><td><code>license_number</code></td><td><code>contractor_license</code></td><td><code>contractor_bids</code></td><td>Node 9: listed as <code>contractor_license</code> / v8Mapper: nested or flat</td><td>BidCard.tsx, BidComparisonTable.tsx</td><td class="status-mismatch">&#9888; NAME MISMATCH: v10 outputs <code>license_number</code>, DB column is <code>contractor_license</code></td></tr>
            <tr><td><code>license_status</code></td><td>NO COLUMN</td><td>&mdash;</td><td>&mdash;</td><td>Not displayed</td><td class="status-missing">&#10007; DB has no column for this</td></tr>
            <tr><td><code>license_expiration_date</code></td><td>NO COLUMN</td><td>&mdash;</td><td>&mdash;</td><td>Not displayed</td><td class="status-missing">&#10007; DB has no column for this</td></tr>
            <tr><td><code>years_in_business</code></td><td><code>contractor_years_in_business</code></td><td><code>contractor_bids</code></td><td>Node 9: must prefix <code>contractor_</code> / v8Mapper: flat or nested</td><td>BidCard.tsx, BidComparisonTable.tsx</td><td class="status-mismatch">&#9888; NAME MISMATCH if Node 9 inserts as-is</td></tr>
            <tr><td><code>employee_count</code></td><td><code>contractor_employee_count</code></td><td><code>contractor_bids</code></td><td>Node 9: must prefix <code>contractor_</code> / v8Mapper: not mapped</td><td>BidComparisonTable.tsx</td><td class="status-mismatch">&#9888; NAME MISMATCH; v8Mapper doesn't map this</td></tr>
            <tr><td><code>service_area</code></td><td><code>contractor_service_area</code></td><td><code>contractor_bids</code></td><td>Node 9: must prefix <code>contractor_</code> / v8Mapper: not mapped</td><td>BidComparisonTable.tsx (truncated with tooltip)</td><td class="status-mismatch">&#9888; NAME MISMATCH; v8Mapper doesn't map this</td></tr>
            <tr><td><code>google_rating</code></td><td><code>contractor_google_rating</code></td><td><code>contractor_bids</code></td><td>Node 9: listed as <code>contractor_google_rating</code> / v8Mapper: nested or flat</td><td>BidCard.tsx, BidComparisonTable.tsx (star emoji)</td><td class="status-mismatch">&#9888; NAME MISMATCH if Node 9 inserts as-is</td></tr>
            <tr><td><code>google_review_count</code></td><td><code>contractor_google_review_count</code></td><td><code>contractor_bids</code></td><td>Node 9: listed as <code>contractor_google_review_count</code> / v8Mapper: nested or flat</td><td>BidCard.tsx, BidComparisonTable.tsx (count in parens)</td><td class="status-mismatch">&#9888; NAME MISMATCH if Node 9 inserts as-is</td></tr>
            <tr><td><code>yelp_rating</code></td><td><code>contractor_yelp_rating</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / v8Mapper: not mapped / Callback: not mapped</td><td>BidComparisonTable.tsx (star emoji)</td><td class="status-missing">&#10007; Never inserted from v10</td></tr>
            <tr><td><code>yelp_review_count</code></td><td><code>contractor_yelp_review_count</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / v8Mapper: not mapped / Callback: not mapped</td><td>BidComparisonTable.tsx (count in parens)</td><td class="status-missing">&#10007; Never inserted from v10</td></tr>
            <tr><td><code>bbb_rating</code></td><td><code>contractor_bbb_rating</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / v8Mapper: not mapped / Callback: not mapped</td><td>BidComparisonTable.tsx</td><td class="status-missing">&#10007; Never inserted from v10</td></tr>
            <tr><td><code>bbb_accredited</code></td><td><code>contractor_bbb_accredited</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / v8Mapper: not mapped / Callback: not mapped</td><td>BidComparisonTable.tsx ("Accredited" badge)</td><td class="status-missing">&#10007; Never inserted from v10</td></tr>
            <tr><td><code>bbb_complaints_3yr</code></td><td><code>contractor_bbb_complaints_3yr</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / v8Mapper: not mapped / Callback: not mapped</td><td>Not displayed</td><td class="status-missing">&#10007; Never inserted from v10</td></tr>
            <tr><td><code>bonded</code></td><td><code>contractor_bonded</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / v8Mapper: not mapped / Callback: not mapped</td><td>BidComparisonTable.tsx (check/X icon)</td><td class="status-missing">&#10007; Never inserted from v10</td></tr>
            <tr><td><code>certifications</code></td><td><code>contractor_certifications</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / v8Mapper: flat or nested</td><td>BidCard.tsx, BidComparisonTable.tsx (badge tags)</td><td class="status-mismatch">&#9888; NAME MISMATCH; Node 9 missing</td></tr>
            <tr><td><code>red_flags</code></td><td><code>red_flags</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / v8Mapper: mapped / Callback: not mapped</td><td>BidComparisonTable.tsx (alert icon + count)</td><td class="status-mismatch">&#9888; Node 9 missing; Callback missing</td></tr>
            <tr><td><code>positive_indicators</code></td><td><code>positive_indicators</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / v8Mapper: mapped / Callback: not mapped</td><td>BidComparisonTable.tsx (thumbs up + count)</td><td class="status-mismatch">&#9888; Node 9 missing; Callback missing</td></tr>
            <tr><td><code>research_confidence</code></td><td>NO COLUMN on <code>contractor_bids</code></td><td>&mdash;</td><td>&mdash;</td><td>Not displayed</td><td class="status-missing">&#10007; DB has no column (only <code>incentive_research_confidence</code> exists)</td></tr>
            <tr><td><code>verification_date</code></td><td>NO COLUMN</td><td>&mdash;</td><td>&mdash;</td><td>Not displayed</td><td class="status-missing">&#10007; DB has no column</td></tr>
            <tr><td><code>research_notes</code></td><td>NO COLUMN on <code>contractor_bids</code></td><td>&mdash;</td><td>&mdash;</td><td>Not displayed</td><td class="status-missing">&#10007; DB has no column (only <code>incentive_research_notes</code> exists)</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ===================== NODE 4 ===================== -->
  <div class="accordion" id="node4">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <span>NODE 4: Incentive Finder (AGENT)</span>
      <span class="accordion-chevron">&#9660;</span>
    </div>
    <div class="accordion-body">
      <p>Finds federal/state/utility incentives. Outputs ONE JSON for all bids.</p>

      <div class="sub-heading">&rarr; <code>incentive_programs</code> table (per-bid child records)</div>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr><th>MindPal Field</th><th>Supabase Column</th><th>Table</th><th>Insert Path</th><th>Front-End Display</th><th>Status</th></tr>
          </thead>
          <tbody>
            <tr><td><code>incentives[].program_name</code></td><td><code>program_name</code></td><td><code>incentive_programs</code></td><td>Node 9: direct</td><td>IncentivesTable.tsx (heading)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>incentives[].program_type</code></td><td><code>program_type</code></td><td><code>incentive_programs</code></td><td>Node 9: direct</td><td>IncentivesTable.tsx (gray badge)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>incentives[].incentive_amount</code></td><td>NO COLUMN (string/number hybrid)</td><td>&mdash;</td><td>&mdash;</td><td>Not displayed</td><td class="status-missing">&#10007; v10 outputs string like "2000-4000"; DB has no column for this</td></tr>
            <tr><td><code>incentives[].incentive_amount_numeric_min</code></td><td><code>incentive_amount_numeric_min</code></td><td><code>incentive_programs</code></td><td>Node 9: direct</td><td>Not directly displayed</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>incentives[].incentive_amount_numeric_max</code></td><td><code>incentive_amount_numeric_max</code></td><td><code>incentive_programs</code></td><td>Node 9: direct</td><td>IncentivesTable.tsx ("Up to $X")</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>incentives[].equipment_requirements</code></td><td><code>equipment_requirements</code></td><td><code>incentive_programs</code></td><td>Node 9: not in schema</td><td>Not displayed</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>incentives[].eligibility_requirements</code></td><td><code>eligibility_requirements</code></td><td><code>incentive_programs</code></td><td>Node 9: not in schema</td><td>Not displayed</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>incentives[].income_limits</code></td><td><code>income_limits</code></td><td><code>incentive_programs</code></td><td>Node 9: not in schema</td><td>IncentivesTable.tsx ("Income Qualified" badge)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>incentives[].application_process</code></td><td><code>application_process</code></td><td><code>incentive_programs</code></td><td>Node 9: not in schema</td><td>IncentivesTable.tsx (expanded section text)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>incentives[].can_stack_with_other_incentives</code></td><td><code>can_stack_with_other_incentives</code></td><td><code>incentive_programs</code></td><td>Node 9: not in schema</td><td>Not displayed</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>incentives[].stacking_notes</code></td><td><code>stacking_notes</code></td><td><code>incentive_programs</code></td><td>Node 9: not in schema</td><td>Not displayed</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>incentives[].verification_source</code></td><td><code>verification_source</code></td><td><code>incentive_programs</code></td><td>Node 9: not in schema</td><td>Not displayed</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>incentives[].still_active</code></td><td><code>still_active</code></td><td><code>incentive_programs</code></td><td>Node 9: direct</td><td>DecidePhase.tsx (filter: only active shown)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>incentives[].research_confidence</code></td><td><code>research_confidence</code></td><td><code>incentive_programs</code></td><td>Node 9: not in schema</td><td>Not displayed</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>incentives[].research_notes</code></td><td><code>research_notes</code></td><td><code>incentive_programs</code></td><td>Node 9: not in schema</td><td>Not displayed</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td>&mdash; (not in v10)</td><td><code>incentive_amount_string</code></td><td><code>incentive_programs</code></td><td>&mdash;</td><td>Not displayed</td><td class="status-notdisplayed">DB column exists but v10 doesn't output this</td></tr>
          </tbody>
        </table>
      </div>

      <div class="sub-heading">&rarr; <code>contractor_bids</code> table (incentive summary fields)</div>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr><th>MindPal Field</th><th>Supabase Column</th><th>Table</th><th>Insert Path</th><th>Front-End Display</th><th>Status</th></tr>
          </thead>
          <tbody>
            <tr><td><code>utilities.electric_utility</code></td><td><code>incentive_electric_utility</code></td><td><code>contractor_bids</code></td><td>Node 9: listed</td><td>Not displayed</td><td class="status-mismatch">&#9888; Not in front-end types</td></tr>
            <tr><td><code>utilities.gas_utility</code></td><td><code>incentive_gas_utility</code></td><td><code>contractor_bids</code></td><td>Node 9: listed</td><td>Not displayed</td><td class="status-mismatch">&#9888; Not in front-end types</td></tr>
            <tr><td><code>utilities.cca</code></td><td><code>incentive_cca</code></td><td><code>contractor_bids</code></td><td>Node 9: listed</td><td>Not displayed</td><td class="status-mismatch">&#9888; Not in front-end types</td></tr>
            <tr><td><code>utilities.ren</code></td><td><code>incentive_ren</code></td><td><code>contractor_bids</code></td><td>Node 9: listed</td><td>Not displayed</td><td class="status-mismatch">&#9888; Not in front-end types</td></tr>
            <tr><td><code>summary.total_incentive_potential_low</code></td><td><code>incentive_total_potential_low</code></td><td><code>contractor_bids</code></td><td>Node 9: listed</td><td>Not displayed</td><td class="status-mismatch">&#9888; Not in front-end types</td></tr>
            <tr><td><code>summary.total_incentive_potential_high</code></td><td><code>incentive_total_potential_high</code></td><td><code>contractor_bids</code></td><td>Node 9: listed</td><td>Not displayed</td><td class="status-mismatch">&#9888; Not in front-end types</td></tr>
            <tr><td>&mdash; (not in v10)</td><td><code>incentive_programs_found_count</code></td><td><code>contractor_bids</code></td><td>&mdash;</td><td>Not displayed</td><td class="status-notdisplayed">DB column exists but never populated</td></tr>
            <tr><td><code>summary.research_confidence</code></td><td><code>incentive_research_confidence</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema</td><td>Not displayed</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>summary.research_notes</code></td><td><code>incentive_research_notes</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema</td><td>Not displayed</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ===================== NODE 5 ===================== -->
  <div class="accordion" id="node5">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <span>NODE 5: Scoring Engine (LOOP)</span>
      <span class="accordion-chevron">&#9660;</span>
    </div>
    <div class="accordion-body">
      <p>Scores each bid on multiple dimensions.</p>

      <div class="sub-heading">&rarr; <code>contractor_bids</code> table (score columns)</div>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr><th>MindPal Field</th><th>Supabase Column</th><th>Table</th><th>Insert Path</th><th>Front-End Display</th><th>Status</th></tr>
          </thead>
          <tbody>
            <tr><td><code>overall_score</code></td><td><code>overall_score</code></td><td><code>contractor_bids</code></td><td>Node 9: direct / v8Mapper: via <code>scores.overall</code></td><td>BidCard.tsx (color-coded score badge), BidComparisonTable.tsx (header)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>value_score</code></td><td><code>value_score</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / v8Mapper: via <code>scores.price</code></td><td>Not displayed (used in comparisonService.ts calculations)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>quality_score</code></td><td><code>quality_score</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / v8Mapper: via <code>scores.efficiency</code></td><td>Not displayed (used in comparisonService.ts calculations)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>completeness_score</code></td><td><code>completeness_score</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / v8Mapper: via <code>scores.completeness</code></td><td>Not displayed (used in comparisonService.ts calculations)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>score_confidence</code></td><td><code>score_confidence</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / v8Mapper: NOT MAPPED</td><td>Not displayed</td><td class="status-missing">&#10007; Never inserted; not in front-end types</td></tr>
            <tr><td><code>scoring_notes</code></td><td><code>scoring_notes</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / v8Mapper: NOT MAPPED</td><td>Not displayed</td><td class="status-missing">&#10007; Never inserted; not in front-end types</td></tr>
            <tr><td><code>ranking_recommendation</code></td><td><code>ranking_recommendation</code></td><td><code>contractor_bids</code></td><td>Node 9: not in schema / v8Mapper: NOT MAPPED</td><td>Not displayed</td><td class="status-missing">&#10007; Never inserted; not in front-end types</td></tr>
            <tr><td><code>bid_id</code></td><td>&mdash;</td><td>&mdash;</td><td>Used for matching only</td><td>&mdash;</td><td class="status-match">&#10003; Internal</td></tr>
            <tr><td><code>contractor_name</code></td><td>&mdash;</td><td>&mdash;</td><td>Used for matching only</td><td>&mdash;</td><td class="status-match">&#10003; Internal</td></tr>
            <tr><td><code>total_bid_amount</code></td><td>&mdash;</td><td>&mdash;</td><td>Used for matching only</td><td>&mdash;</td><td class="status-match">&#10003; Internal</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ===================== NODE 6 ===================== -->
  <div class="accordion" id="node6">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <span>NODE 6: Question Generator (LOOP)</span>
      <span class="accordion-chevron">&#9660;</span>
    </div>
    <div class="accordion-body">
      <p>Generates clarifying questions per bid.</p>

      <div class="sub-heading">&rarr; <code>bid_questions</code> table</div>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr><th>MindPal Field</th><th>Supabase Column</th><th>Table</th><th>Insert Path</th><th>Front-End Display</th><th>Status</th></tr>
          </thead>
          <tbody>
            <tr><td><code>questions[].question_text</code></td><td><code>question_text</code></td><td><code>bid_questions</code></td><td>Node 9: direct / Callback: direct</td><td>ClarificationQuestionsSection.tsx (main text), ContractorQuestions.tsx</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>questions[].category</code></td><td><code>category</code></td><td><code>bid_questions</code></td><td>Node 9: direct / Callback: maps to <code>question_category</code></td><td>ClarificationQuestionsSection.tsx (category badge)</td><td class="status-mismatch">&#9888; v10 outputs <code>category</code>; DB has BOTH <code>category</code> and <code>question_category</code>; Callback maps to <code>question_category</code></td></tr>
            <tr><td><code>questions[].priority</code></td><td><code>priority</code></td><td><code>bid_questions</code></td><td>Node 9: direct / Callback: direct</td><td>ClarificationQuestionsSection.tsx (priority badge with icon)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>questions[].display_order</code></td><td><code>display_order</code></td><td><code>bid_questions</code></td><td>Node 9: direct / Callback: direct</td><td>ClarificationQuestionsSection.tsx, ContractorQuestions.tsx (sorting)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>generation_notes</code></td><td><code>generation_notes</code></td><td><code>bid_questions</code></td><td>Node 9: not in schema / Callback: NOT MAPPED</td><td>Not displayed</td><td class="status-mismatch">&#9888; v10 outputs at wrapper level; never stored</td></tr>
            <tr><td>&mdash; (not in v10)</td><td><code>context</code></td><td><code>bid_questions</code></td><td>&mdash;</td><td>ClarificationQuestionsSection.tsx (blue context box)</td><td class="status-missing">&#10007; v10 doesn't output this; DISPLAYED but always null</td></tr>
            <tr><td>&mdash; (not in v10)</td><td><code>triggered_by</code></td><td><code>bid_questions</code></td><td>&mdash;</td><td>ClarificationQuestionsSection.tsx (small text)</td><td class="status-missing">&#10007; v10 doesn't output this; DISPLAYED but always null</td></tr>
            <tr><td>&mdash; (not in v10)</td><td><code>good_answer_looks_like</code></td><td><code>bid_questions</code></td><td>&mdash;</td><td>ClarificationQuestionsSection.tsx (green box)</td><td class="status-missing">&#10007; v10 doesn't output this; DISPLAYED but always null</td></tr>
            <tr><td>&mdash; (not in v10)</td><td><code>concerning_answer_looks_like</code></td><td><code>bid_questions</code></td><td>&mdash;</td><td>ClarificationQuestionsSection.tsx (red box)</td><td class="status-missing">&#10007; v10 doesn't output this; DISPLAYED but always null</td></tr>
            <tr><td>&mdash; (not in v10)</td><td><code>missing_field</code></td><td><code>bid_questions</code></td><td>Callback: mapped</td><td>Not displayed</td><td class="status-mismatch">&#9888; v10 doesn't output this</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ===================== NODE 7 ===================== -->
  <div class="accordion" id="node7">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <span>NODE 7: Per-Bid FAQ Generator (LOOP)</span>
      <span class="accordion-chevron">&#9660;</span>
    </div>
    <div class="accordion-body">
      <p>Generates FAQ Q&amp;A pairs for each bid.</p>

      <div class="sub-heading">&rarr; <code>bid_faqs</code> table</div>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr><th>MindPal Field</th><th>Supabase Column</th><th>Table</th><th>Insert Path</th><th>Front-End Display</th><th>Status</th></tr>
          </thead>
          <tbody>
            <tr><td><code>faqs[].question</code></td><td><code>question</code></td><td><code>bid_faqs</code></td><td>Node 9: direct</td><td>BidFaqSection.tsx, BidSpecificFaqsCard.tsx (FAQ question text)</td><td class="status-match">&#10003; Match for Node 9</td></tr>
            <tr><td><code>faqs[].answer</code></td><td><code>answer</code></td><td><code>bid_faqs</code></td><td>Node 9: direct</td><td>BidFaqSection.tsx, BidSpecificFaqsCard.tsx (expandable answer)</td><td class="status-match">&#10003; Match for Node 9</td></tr>
            <tr><td><code>faqs[].category</code></td><td><code>category</code></td><td><code>bid_faqs</code></td><td>Node 9: not in schema</td><td>BidFaqSection.tsx (grouping by category)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>faqs[].answer_confidence</code></td><td><code>answer_confidence</code></td><td><code>bid_faqs</code></td><td>Node 9: direct</td><td>BidFaqSection.tsx, ProjectFAQSection.tsx (confidence badge)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>faqs[].sources</code></td><td><code>sources</code></td><td><code>bid_faqs</code></td><td>Node 9: not in schema</td><td>Not displayed</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>faqs[].display_order</code></td><td><code>display_order</code></td><td><code>bid_faqs</code></td><td>Node 9: not in schema</td><td>ProjectFAQSection.tsx (sorting)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>faq_generation_confidence</code></td><td>NO COLUMN</td><td>&mdash;</td><td>&mdash;</td><td>Not displayed</td><td class="status-missing">&#10007; Metadata not stored</td></tr>
          </tbody>
        </table>
      </div>

      <div class="note-box critical-note">
        <strong>CRITICAL CALLBACK MISMATCH:</strong> The <code>mindpal-callback</code> expects v8 FAQ format:
      </div>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr><th>Callback Expects</th><th>v10 Outputs</th><th>DB Column</th><th>Status</th></tr>
          </thead>
          <tbody>
            <tr><td><code>faq_key</code></td><td>Not in v10</td><td>Not a DB column</td><td class="status-missing">&#10007; Callback tries to insert non-existent column</td></tr>
            <tr><td><code>question_text</code></td><td><code>question</code></td><td><code>question</code></td><td class="status-missing">&#10007; NAME MISMATCH</td></tr>
            <tr><td><code>answer_text</code></td><td><code>answer</code></td><td><code>answer</code></td><td class="status-missing">&#10007; NAME MISMATCH</td></tr>
            <tr><td><code>is_answered</code></td><td>Not in v10</td><td>Not a DB column</td><td class="status-missing">&#10007; Callback tries to insert non-existent column</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ===================== NODE 8 ===================== -->
  <div class="accordion" id="node8">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <span>NODE 8: Overall FAQ Generator (AGENT)</span>
      <span class="accordion-chevron">&#9660;</span>
    </div>
    <div class="accordion-body">
      <p>Generates project-wide comparison FAQs.</p>

      <div class="sub-heading">&rarr; <code>project_faqs</code> table</div>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr><th>MindPal Field</th><th>Supabase Column</th><th>Table</th><th>Insert Path</th><th>Front-End Display</th><th>Status</th></tr>
          </thead>
          <tbody>
            <tr><td><code>overall_faq_output.faqs[].question</code></td><td><code>question</code></td><td><code>project_faqs</code></td><td>Node 9: direct</td><td>ProjectFAQSection.tsx (FAQ question text)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>overall_faq_output.faqs[].answer</code></td><td><code>answer</code></td><td><code>project_faqs</code></td><td>Node 9: direct</td><td>ProjectFAQSection.tsx (expandable prose answer)</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>overall_faq_output.faqs[].category</code></td><td><code>category</code></td><td><code>project_faqs</code></td><td>Node 9: direct</td><td>Used internally for grouping</td><td class="status-match">&#10003; Match</td></tr>
            <tr><td><code>overall_faq_output.faqs[].sources</code></td><td><code>sources</code></td><td><code>project_faqs</code></td><td>Node 9: direct</td><td>Not displayed</td><td class="status-match">&#10003; Match (stored)</td></tr>
            <tr><td><code>overall_faq_output.faqs[].display_order</code></td><td><code>display_order</code></td><td><code>project_faqs</code></td><td>Node 9: not in schema</td><td>ProjectFAQSection.tsx (sorting)</td><td class="status-mismatch">&#9888; Node 9 missing</td></tr>
            <tr><td><code>overall_faq_output.faq_count</code></td><td>NO COLUMN</td><td>&mdash;</td><td>&mdash;</td><td>Not displayed</td><td class="status-missing">&#10007; Metadata not stored</td></tr>
            <tr><td><code>overall_faq_output.generation_confidence</code></td><td>NO COLUMN</td><td>&mdash;</td><td>&mdash;</td><td>Not displayed</td><td class="status-missing">&#10007; Metadata not stored</td></tr>
          </tbody>
        </table>
      </div>

      <div class="note-box">
        <strong>NOTE:</strong> v10 wraps output in <code>{ "overall_faq_output": { "faqs": [...] } }</code>. Node 9 must unwrap this.
      </div>
    </div>
  </div>

  <!-- ===================== NODE 9 ===================== -->
  <div class="accordion" id="node9">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <span>NODE 9: Send Data to Supabase (AGENT)</span>
      <span class="accordion-chevron">&#9660;</span>
    </div>
    <div class="accordion-body">
      <p>This is the primary insert path for v10. It's an AI agent that uses Supabase REST tools.</p>

      <div class="note-box critical-note">
        <strong>CRITICAL NOTE:</strong> Node 9's prompt only shows a SUBSET of fields in its example schemas. The actual fields it inserts depend on what data the AI agent passes through. The schemas in the prompt are EXAMPLES, not exhaustive.
      </div>

      <div class="sub-heading">Fields explicitly shown in Node 9's prompt</div>

      <p style="margin:12px 0 4px;font-weight:600;"><code>contractor_bids</code> insert:</p>
      <ul class="field-list">
        <li><code>project_id</code></li>
        <li><code>contractor_name</code></li>
        <li><code>total_bid_amount</code></li>
        <li><code>overall_score</code></li>
        <li><code>contractor_phone</code></li>
        <li><code>contractor_email</code></li>
        <li><code>contractor_address</code></li>
        <li><code>total_before_rebates</code></li>
        <li><code>contractor_license</code></li>
        <li><code>contractor_google_rating</code></li>
        <li><code>contractor_google_review_count</code></li>
        <li><code>incentive_total_potential_low</code></li>
        <li><code>incentive_total_potential_high</code></li>
        <li><code>extraction_confidence</code></li>
      </ul>

      <p style="margin:12px 0 4px;font-weight:600;"><code>bid_equipment</code> insert:</p>
      <ul class="field-list">
        <li><code>bid_id</code></li>
        <li><code>equipment_type</code></li>
        <li><code>brand</code></li>
        <li><code>model_number</code></li>
        <li><code>seer2_rating</code></li>
        <li><code>hspf2_rating</code></li>
        <li><code>energy_star_certified</code></li>
      </ul>

      <p style="margin:12px 0 4px;font-weight:600;"><code>bid_line_items</code> insert:</p>
      <ul class="field-list">
        <li><code>bid_id</code></li>
        <li><code>item_type</code></li>
        <li><code>description</code></li>
        <li><code>total_price</code></li>
        <li><code>quantity</code></li>
        <li><code>line_order</code></li>
      </ul>

      <p style="margin:12px 0 4px;font-weight:600;"><code>incentive_programs</code> insert:</p>
      <ul class="field-list">
        <li><code>bid_id</code></li>
        <li><code>program_name</code></li>
        <li><code>program_type</code></li>
        <li><code>incentive_amount_numeric_min</code></li>
        <li><code>incentive_amount_numeric_max</code></li>
        <li><code>still_active</code></li>
      </ul>

      <p style="margin:12px 0 4px;font-weight:600;"><code>bid_questions</code> insert:</p>
      <ul class="field-list">
        <li><code>bid_id</code></li>
        <li><code>question_text</code></li>
        <li><code>category</code></li>
        <li><code>priority</code></li>
      </ul>

      <p style="margin:12px 0 4px;font-weight:600;"><code>bid_faqs</code> insert:</p>
      <ul class="field-list">
        <li><code>bid_id</code></li>
        <li><code>question</code></li>
        <li><code>answer</code></li>
        <li><code>answer_confidence</code></li>
      </ul>

      <p style="margin:12px 0 4px;font-weight:600;"><code>project_faqs</code> insert:</p>
      <ul class="field-list">
        <li><code>project_id</code></li>
        <li><code>question</code></li>
        <li><code>answer</code></li>
        <li><code>category</code></li>
        <li><code>sources</code></li>
      </ul>
    </div>
  </div>

  <!-- ===================== NODE 10 ===================== -->
  <div class="accordion" id="node10">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <span>NODE 10: Supabase Real Insert (CODE)</span>
      <span class="accordion-chevron">&#9660;</span>
    </div>
    <div class="accordion-body">
      <p class="empty-node"><strong>Status: EMPTY</strong> &mdash; No code exists in this node. It's wired after Node 9 but does nothing.</p>
    </div>
  </div>

  <!-- ===================== NODE 11 ===================== -->
  <div class="accordion" id="node11">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <span>NODE 11: Send Results (WEBHOOK)</span>
      <span class="accordion-chevron">&#9660;</span>
    </div>
    <div class="accordion-body">
      <p>Sends completion notification. No data mapping issues &mdash; this is a notification trigger.</p>
    </div>
  </div>

  <!-- ===================== DB COLUMNS NEVER POPULATED ===================== -->
  <div class="accordion" id="unpopulated">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <span>DB Columns That Exist But Are Never Populated by Any v10 Path</span>
      <span class="accordion-chevron">&#9660;</span>
    </div>
    <div class="accordion-body">
      <div class="table-wrapper">
        <table>
          <thead>
            <tr><th>Table</th><th>Column</th><th>Front-End Display</th><th>Notes</th></tr>
          </thead>
          <tbody>
            <tr><td><code>contractor_bids</code></td><td><code>contractor_year_established</code></td><td>Not displayed</td><td>No node outputs this</td></tr>
            <tr><td><code>contractor_bids</code></td><td><code>contractor_total_installs</code></td><td>Not displayed</td><td>No node outputs this</td></tr>
            <tr><td><code>contractor_bids</code></td><td><code>contractor_switch_rating</code></td><td>Not displayed</td><td>No node outputs this</td></tr>
            <tr><td><code>contractor_bids</code></td><td><code>contractor_is_switch_preferred</code></td><td>BidCard.tsx ("Preferred" badge)</td><td>No node outputs this</td></tr>
            <tr><td><code>contractor_bids</code></td><td><code>contractor_certifications_detailed</code></td><td>Not displayed</td><td>No node outputs this</td></tr>
            <tr><td><code>contractor_bids</code></td><td><code>bid_index</code></td><td>ClarificationQuestionsSection.tsx, ProjectFAQSection.tsx</td><td>v8 only; not in v10 extraction</td></tr>
            <tr><td><code>contractor_bids</code></td><td><code>incentive_programs_found_count</code></td><td>Not displayed</td><td>No node outputs this</td></tr>
            <tr><td><code>contractor_bids</code></td><td><code>score_confidence</code></td><td>Not displayed</td><td>Scoring Engine outputs it but no insert path maps it</td></tr>
            <tr><td><code>contractor_bids</code></td><td><code>scoring_notes</code></td><td>Not displayed</td><td>Scoring Engine outputs it but no insert path maps it</td></tr>
            <tr><td><code>contractor_bids</code></td><td><code>ranking_recommendation</code></td><td>Not displayed</td><td>Scoring Engine outputs it but no insert path maps it</td></tr>
            <tr><td><code>bid_equipment</code></td><td><code>warranty_years</code></td><td>Not displayed</td><td>No node outputs per-equipment warranty</td></tr>
            <tr><td><code>bid_equipment</code></td><td><code>compressor_warranty_years</code> (equip)</td><td>comparisonService.ts (warranty calc)</td><td>No node outputs per-equipment warranty</td></tr>
            <tr><td><code>bid_equipment</code></td><td><code>stages</code></td><td>Not displayed</td><td>v10 doesn't extract this; v8 stages is numeric</td></tr>
            <tr><td><code>bid_line_items</code></td><td><code>notes</code></td><td>Not displayed</td><td>No node outputs this</td></tr>
            <tr><td><code>bid_questions</code></td><td><code>context</code></td><td>ClarificationQuestionsSection.tsx (blue box)</td><td class="status-missing">DISPLAYED but v10 never populates</td></tr>
            <tr><td><code>bid_questions</code></td><td><code>triggered_by</code></td><td>ClarificationQuestionsSection.tsx (small text)</td><td class="status-missing">DISPLAYED but v10 never populates</td></tr>
            <tr><td><code>bid_questions</code></td><td><code>good_answer_looks_like</code></td><td>ClarificationQuestionsSection.tsx (green box)</td><td class="status-missing">DISPLAYED but v10 never populates</td></tr>
            <tr><td><code>bid_questions</code></td><td><code>concerning_answer_looks_like</code></td><td>ClarificationQuestionsSection.tsx (red box)</td><td class="status-missing">DISPLAYED but v10 never populates</td></tr>
            <tr><td><code>bid_questions</code></td><td><code>generation_notes</code></td><td>Not displayed</td><td>v10 outputs at wrapper level but never stored</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ===================== FRONT-END TYPES NOT IN DB ===================== -->
  <div class="accordion" id="frontend-not-in-db">
    <div class="accordion-header" onclick="toggleAccordion(this)">
      <span>Front-End Types Not in DB</span>
      <span class="accordion-chevron">&#9660;</span>
    </div>
    <div class="accordion-body">
      <div class="table-wrapper">
        <table>
          <thead>
            <tr><th>TypeScript Field</th><th>Table Expected</th><th>Notes</th></tr>
          </thead>
          <tbody>
            <tr><td><code>scope_permit_detail</code></td><td><code>contractor_bids</code></td><td>In types but NO DB COLUMN</td></tr>
            <tr><td><code>scope_disposal_detail</code></td><td><code>contractor_bids</code></td><td>In types but NO DB COLUMN</td></tr>
            <tr><td><code>scope_electrical_detail</code></td><td><code>contractor_bids</code></td><td>In types but NO DB COLUMN</td></tr>
            <tr><td><code>scope_ductwork_detail</code></td><td><code>contractor_bids</code></td><td>In types but NO DB COLUMN</td></tr>
            <tr><td><code>scope_thermostat_detail</code></td><td><code>contractor_bids</code></td><td>In types but NO DB COLUMN</td></tr>
            <tr><td><code>scope_manual_j_detail</code></td><td><code>contractor_bids</code></td><td>In types but NO DB COLUMN</td></tr>
            <tr><td><code>scope_commissioning_detail</code></td><td><code>contractor_bids</code></td><td>In types but NO DB COLUMN</td></tr>
            <tr><td><code>scope_air_handler_detail</code></td><td><code>contractor_bids</code></td><td>In types but NO DB COLUMN</td></tr>
            <tr><td><code>scope_line_set_detail</code></td><td><code>contractor_bids</code></td><td>In types but NO DB COLUMN</td></tr>
            <tr><td><code>scope_disconnect_detail</code></td><td><code>contractor_bids</code></td><td>In types but NO DB COLUMN</td></tr>
            <tr><td><code>scope_pad_detail</code></td><td><code>contractor_bids</code></td><td>In types but NO DB COLUMN</td></tr>
            <tr><td><code>scope_drain_line_detail</code></td><td><code>contractor_bids</code></td><td>In types but NO DB COLUMN</td></tr>
            <tr><td>All <code>incentive_*</code> fields</td><td><code>contractor_bids</code></td><td>In DB but NOT IN FRONT-END TYPES</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ===================== CRITICAL ISSUES SUMMARY ===================== -->
  <div class="critical-section" id="critical-issues">
    <h2>Critical Issues Summary (ordered by severity)</h2>

    <div class="severity-group">
      <span class="severity-badge badge-critical">CRITICAL</span>
      <ol class="issue-list">
        <li class="issue-critical">
          <span class="issue-number">1.</span>
          <strong>Callback FAQ field names don't match v10 output OR DB columns</strong> &mdash; Callback inserts <code>faq_key</code>, <code>question_text</code>, <code>answer_text</code>, <code>is_answered</code> but DB columns are <code>question</code>, <code>answer</code> and <code>faq_key</code>/<code>is_answered</code> don't exist. This will cause silent insert failures.
        </li>
        <li class="issue-critical">
          <span class="issue-number">2.</span>
          <strong>Node 9 only shows ~14 contractor_bids fields</strong> but DB has 90+ columns. The AI agent must infer which fields to include. Many fields will be silently dropped.
        </li>
        <li class="issue-critical">
          <span class="issue-number">3.</span>
          <strong><code>deposit_amount</code> &rarr; <code>deposit_required</code> name mismatch</strong> &mdash; v10 outputs <code>deposit_amount</code>; DB column is <code>deposit_required</code>. Node 9 direct insert will silently drop this.
        </li>
        <li class="issue-critical">
          <span class="issue-number">4.</span>
          <strong>Equipment <code>energy_star_certified</code> vs <code>energy_star</code></strong> &mdash; v10 Equipment Researcher outputs <code>energy_star_certified</code>; Callback and Frontend read <code>energy_star</code> (wrong name). Data never reaches DB through Callback.
        </li>
        <li class="issue-critical">
          <span class="issue-number">5.</span>
          <strong>Equipment <code>refrigerant_type</code> vs <code>refrigerant</code></strong> &mdash; v10 outputs <code>refrigerant_type</code>; Callback reads <code>eq.refrigerant</code> (wrong name). Data never reaches DB through Callback.
        </li>
      </ol>
    </div>

    <div class="severity-group">
      <span class="severity-badge badge-high">HIGH</span>
      <ol class="issue-list" start="6">
        <li class="issue-high">
          <span class="issue-number">6.</span>
          <strong>Contractor Researcher field names missing <code>contractor_</code> prefix</strong> &mdash; v10 outputs <code>google_rating</code>, <code>yelp_rating</code>, <code>bonded</code>, etc. DB columns are <code>contractor_google_rating</code>, <code>contractor_yelp_rating</code>, <code>contractor_bonded</code>. Node 9 must rename; other paths don't handle this.
        </li>
        <li class="issue-high">
          <span class="issue-number">7.</span>
          <strong>8 scope booleans hardcoded to null in v10</strong> &mdash; v10 explicitly sets <code>scope_ductwork_included</code> through <code>scope_drain_line_included</code> to null. These are all DISPLAYED in BidComparisonTable.tsx and will always show as unknown.
        </li>
        <li class="issue-high">
          <span class="issue-number">8.</span>
          <strong>Question Generator dropped 4 displayed fields</strong> &mdash; <code>context</code>, <code>triggered_by</code>, <code>good_answer_looks_like</code>, <code>concerning_answer_looks_like</code> are all rendered in ClarificationQuestionsSection.tsx but v10 never outputs them. Users see empty UI sections.
        </li>
        <li class="issue-high">
          <span class="issue-number">9.</span>
          <strong>Yelp/BBB/bonded data never inserted</strong> &mdash; Contractor Researcher outputs these but NO insert path maps them to DB. Front-end displays them.
        </li>
        <li class="issue-high">
          <span class="issue-number">10.</span>
          <strong><code>cop</code> never reaches DB via Callback</strong> &mdash; Equipment Researcher enhances this but Callback doesn't map it. Only v8Mapper handles <code>cop</code>.
        </li>
      </ol>
    </div>

    <div class="severity-group">
      <span class="severity-badge badge-medium">MEDIUM</span>
      <ol class="issue-list" start="11">
        <li class="issue-medium">
          <span class="issue-number">11.</span>
          <strong>Frontend <code>mindpalService.ts</code> is stale</strong> &mdash; Still expects v8 nested format (<code>contractor_info.company_name</code>, <code>pricing.total_amount</code>). Won't work with v10 flat output.
        </li>
        <li class="issue-medium">
          <span class="issue-number">12.</span>
          <strong><code>compressor_warranty_years</code> never inserted</strong> &mdash; v10 extracts it but NO insert path maps it. comparisonService.ts uses it for scoring.
        </li>
        <li class="issue-medium">
          <span class="issue-number">13.</span>
          <strong>Extraction confidence type mismatch</strong> &mdash; v10 outputs "high"/"medium"/"low" strings; Callback's <code>mapConfidenceToLevel()</code> expects numeric 0-100.
        </li>
        <li class="issue-medium">
          <span class="issue-number">14.</span>
          <strong>Scoring Engine's <code>score_confidence</code>, <code>scoring_notes</code>, <code>ranking_recommendation</code></strong> &mdash; Output by v10 but never mapped by any insert path. DB columns exist but are always null.
        </li>
        <li class="issue-medium">
          <span class="issue-number">15.</span>
          <strong><code>incentive_programs_found_count</code></strong> &mdash; DB column exists but never populated by any node.
        </li>
        <li class="issue-medium">
          <span class="issue-number">16.</span>
          <strong>12 <code>scope_*_detail</code> fields</strong> &mdash; Exist in front-end TypeScript types but have NO DB columns and are not output by any MindPal node.
        </li>
      </ol>
    </div>
  </div>

</div>

<script>
function toggleAccordion(header) {
  header.classList.toggle('open');
  var body = header.nextElementSibling;
  body.classList.toggle('open');
}
</script>

</body>
</html>