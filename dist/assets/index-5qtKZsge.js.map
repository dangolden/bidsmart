{"version":3,"file":"index-5qtKZsge.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../src/lib/supabaseClient.ts","../../src/hooks/useUser.ts","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/alert-circle.js","../../node_modules/lucide-react/dist/esm/icons/alert-triangle.js","../../node_modules/lucide-react/dist/esm/icons/arrow-left.js","../../node_modules/lucide-react/dist/esm/icons/arrow-right.js","../../node_modules/lucide-react/dist/esm/icons/arrow-up-down.js","../../node_modules/lucide-react/dist/esm/icons/award.js","../../node_modules/lucide-react/dist/esm/icons/bar-chart-3.js","../../node_modules/lucide-react/dist/esm/icons/check-circle-2.js","../../node_modules/lucide-react/dist/esm/icons/check.js","../../node_modules/lucide-react/dist/esm/icons/chevron-down.js","../../node_modules/lucide-react/dist/esm/icons/chevron-up.js","../../node_modules/lucide-react/dist/esm/icons/circle.js","../../node_modules/lucide-react/dist/esm/icons/clipboard-check.js","../../node_modules/lucide-react/dist/esm/icons/clock.js","../../node_modules/lucide-react/dist/esm/icons/copy.js","../../node_modules/lucide-react/dist/esm/icons/dollar-sign.js","../../node_modules/lucide-react/dist/esm/icons/file-text.js","../../node_modules/lucide-react/dist/esm/icons/globe.js","../../node_modules/lucide-react/dist/esm/icons/help-circle.js","../../node_modules/lucide-react/dist/esm/icons/info.js","../../node_modules/lucide-react/dist/esm/icons/loader-2.js","../../node_modules/lucide-react/dist/esm/icons/mail.js","../../node_modules/lucide-react/dist/esm/icons/message-square-text.js","../../node_modules/lucide-react/dist/esm/icons/phone.js","../../node_modules/lucide-react/dist/esm/icons/plus.js","../../node_modules/lucide-react/dist/esm/icons/printer.js","../../node_modules/lucide-react/dist/esm/icons/refresh-cw.js","../../node_modules/lucide-react/dist/esm/icons/shield.js","../../node_modules/lucide-react/dist/esm/icons/star-off.js","../../node_modules/lucide-react/dist/esm/icons/star.js","../../node_modules/lucide-react/dist/esm/icons/thermometer-sun.js","../../node_modules/lucide-react/dist/esm/icons/trash-2.js","../../node_modules/lucide-react/dist/esm/icons/upload.js","../../node_modules/lucide-react/dist/esm/icons/user.js","../../node_modules/lucide-react/dist/esm/icons/x-circle.js","../../node_modules/lucide-react/dist/esm/icons/x.js","../../node_modules/lucide-react/dist/esm/icons/zap.js","../../src/lib/database/bidsmartService.ts","../../src/lib/services/mindpalService.ts","../../src/components/BidUploadZone.tsx","../../src/components/BidComparisonTable.tsx","../../src/components/ContractorQuestions.tsx","../../src/components/QIIChecklist.tsx","../../src/components/BidCard.tsx","../../src/pages/ProjectPage.tsx","../../src/pages/DashboardPage.tsx","../../src/components/UserIndicator.tsx","../../src/components/EmbeddedLayout.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * Supabase Client Configuration\n * \n * Bolt Database automatically provisions Supabase and injects these \n * environment variables. No manual setup required when using Bolt.\n */\n\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\nconst supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\n// Bolt auto-injects these - only warn in development if missing\nif (!supabaseUrl || !supabaseAnonKey) {\n  console.warn(\n    'Supabase environment variables not found. ' +\n    'If using Bolt, make sure Bolt Database is enabled for your project.'\n  );\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n  auth: {\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n  },\n});\n\n/**\n * Get the current authenticated user\n */\nexport async function getCurrentUser() {\n  const { data: { user }, error } = await supabase.auth.getUser();\n  if (error) {\n    console.error('Error getting current user:', error);\n    return null;\n  }\n  return user;\n}\n\n/**\n * Get or create user extension record\n */\nexport async function getOrCreateUserExt(authUserId: string, email: string) {\n  // First try to get existing record\n  const { data: existing, error: fetchError } = await supabase\n    .from('users_ext')\n    .select('*')\n    .eq('auth_user_id', authUserId)\n    .maybeSingle();\n\n  if (fetchError) {\n    console.error('Error fetching user_ext:', fetchError);\n    throw fetchError;\n  }\n\n  if (existing) {\n    return existing;\n  }\n\n  // Create new record\n  const { data: created, error: createError } = await supabase\n    .from('users_ext')\n    .insert({\n      auth_user_id: authUserId,\n      email: email,\n    })\n    .select()\n    .single();\n\n  if (createError) {\n    console.error('Error creating user_ext:', createError);\n    throw createError;\n  }\n\n  return created;\n}\n\nexport default supabase;\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabaseClient';\nimport type { UserExt } from '../lib/types';\n\nconst STORAGE_KEY = 'bidsmart_user';\nconst DEFAULT_EMAIL = 'demo@theswitchison.org';\nconst DEFAULT_NAME = 'Demo User';\n\ninterface StoredUser {\n  email: string;\n  name: string;\n}\n\nfunction getUrlParams(): StoredUser | null {\n  if (typeof window === 'undefined') return null;\n\n  const params = new URLSearchParams(window.location.search);\n  const email = params.get('user_email');\n  const name = params.get('user_name');\n\n  if (email) {\n    return { email, name: name || email.split('@')[0] };\n  }\n  return null;\n}\n\nfunction getStoredUser(): StoredUser | null {\n  try {\n    const stored = localStorage.getItem(STORAGE_KEY);\n    if (stored) {\n      return JSON.parse(stored);\n    }\n  } catch {\n    // Ignore parse errors\n  }\n  return null;\n}\n\nfunction storeUser(user: StoredUser): void {\n  try {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(user));\n  } catch {\n    // Ignore storage errors\n  }\n}\n\nasync function getOrCreateUserByEmail(email: string, fullName: string): Promise<UserExt> {\n  const { data: existing, error: fetchError } = await supabase\n    .from('users_ext')\n    .select('*')\n    .eq('email', email)\n    .maybeSingle();\n\n  if (fetchError) {\n    console.error('Error fetching user:', fetchError);\n    throw fetchError;\n  }\n\n  if (existing) {\n    return existing;\n  }\n\n  const { data: created, error: createError } = await supabase\n    .from('users_ext')\n    .insert({\n      email: email,\n      full_name: fullName,\n    })\n    .select()\n    .single();\n\n  if (createError) {\n    console.error('Error creating user:', createError);\n    throw createError;\n  }\n\n  return created;\n}\n\nexport interface UseUserResult {\n  user: UserExt | null;\n  loading: boolean;\n  isReturningUser: boolean;\n  error: Error | null;\n}\n\nexport function useUser(): UseUserResult {\n  const [user, setUser] = useState<UserExt | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [isReturningUser, setIsReturningUser] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  useEffect(() => {\n    async function initializeUser() {\n      try {\n        const urlParams = getUrlParams();\n        const storedUser = getStoredUser();\n\n        let userInfo: StoredUser;\n\n        if (urlParams) {\n          userInfo = urlParams;\n          storeUser(urlParams);\n        } else if (storedUser) {\n          userInfo = storedUser;\n        } else {\n          userInfo = { email: DEFAULT_EMAIL, name: DEFAULT_NAME };\n          storeUser(userInfo);\n        }\n\n        const dbUser = await getOrCreateUserByEmail(userInfo.email, userInfo.name);\n\n        const isExisting = dbUser.created_at !== dbUser.updated_at ||\n          new Date(dbUser.created_at).getTime() < Date.now() - 5000;\n\n        setUser(dbUser);\n        setIsReturningUser(isExisting);\n      } catch (err) {\n        console.error('Error initializing user:', err);\n        setError(err instanceof Error ? err : new Error('Failed to initialize user'));\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    initializeUser();\n  }, []);\n\n  return { user, loading, isReturningUser, error };\n}\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase().trim();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ color = \"currentColor\", size = 24, strokeWidth = 2, absoluteStrokeWidth, className = \"\", children, ...rest }, ref) => createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: [\"lucide\", `lucide-${toKebabCase(iconName)}`, className].join(\" \"),\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...Array.isArray(children) ? children : [children]\n      ]\n    )\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertCircle = createLucideIcon(\"AlertCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n]);\n\nexport { AlertCircle as default };\n//# sourceMappingURL=alert-circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertTriangle = createLucideIcon(\"AlertTriangle\", [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\",\n      key: \"c3ski4\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { AlertTriangle as default };\n//# sourceMappingURL=alert-triangle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowLeft = createLucideIcon(\"ArrowLeft\", [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n]);\n\nexport { ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowRight = createLucideIcon(\"ArrowRight\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"m12 5 7 7-7 7\", key: \"xquz4c\" }]\n]);\n\nexport { ArrowRight as default };\n//# sourceMappingURL=arrow-right.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowUpDown = createLucideIcon(\"ArrowUpDown\", [\n  [\"path\", { d: \"m21 16-4 4-4-4\", key: \"f6ql7i\" }],\n  [\"path\", { d: \"M17 20V4\", key: \"1ejh1v\" }],\n  [\"path\", { d: \"m3 8 4-4 4 4\", key: \"11wl7u\" }],\n  [\"path\", { d: \"M7 4v16\", key: \"1glfcx\" }]\n]);\n\nexport { ArrowUpDown as default };\n//# sourceMappingURL=arrow-up-down.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Award = createLucideIcon(\"Award\", [\n  [\"circle\", { cx: \"12\", cy: \"8\", r: \"6\", key: \"1vp47v\" }],\n  [\"path\", { d: \"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11\", key: \"em7aur\" }]\n]);\n\nexport { Award as default };\n//# sourceMappingURL=award.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BarChart3 = createLucideIcon(\"BarChart3\", [\n  [\"path\", { d: \"M3 3v18h18\", key: \"1s2lah\" }],\n  [\"path\", { d: \"M18 17V9\", key: \"2bz60n\" }],\n  [\"path\", { d: \"M13 17V5\", key: \"1frdt8\" }],\n  [\"path\", { d: \"M8 17v-3\", key: \"17ska0\" }]\n]);\n\nexport { BarChart3 as default };\n//# sourceMappingURL=bar-chart-3.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCircle2 = createLucideIcon(\"CheckCircle2\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n]);\n\nexport { CheckCircle2 as default };\n//# sourceMappingURL=check-circle-2.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Check = createLucideIcon(\"Check\", [[\"path\", { d: \"M20 6 9 17l-5-5\", key: \"1gmf2c\" }]]);\n\nexport { Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronDown = createLucideIcon(\"ChevronDown\", [\n  [\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]\n]);\n\nexport { ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronUp = createLucideIcon(\"ChevronUp\", [[\"path\", { d: \"m18 15-6-6-6 6\", key: \"153udz\" }]]);\n\nexport { ChevronUp as default };\n//# sourceMappingURL=chevron-up.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Circle = createLucideIcon(\"Circle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n]);\n\nexport { Circle as default };\n//# sourceMappingURL=circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ClipboardCheck = createLucideIcon(\"ClipboardCheck\", [\n  [\"rect\", { width: \"8\", height: \"4\", x: \"8\", y: \"2\", rx: \"1\", ry: \"1\", key: \"tgr4d6\" }],\n  [\n    \"path\",\n    {\n      d: \"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\",\n      key: \"116196\"\n    }\n  ],\n  [\"path\", { d: \"m9 14 2 2 4-4\", key: \"df797q\" }]\n]);\n\nexport { ClipboardCheck as default };\n//# sourceMappingURL=clipboard-check.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Clock = createLucideIcon(\"Clock\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"polyline\", { points: \"12 6 12 12 16 14\", key: \"68esgv\" }]\n]);\n\nexport { Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Copy = createLucideIcon(\"Copy\", [\n  [\"rect\", { width: \"14\", height: \"14\", x: \"8\", y: \"8\", rx: \"2\", ry: \"2\", key: \"17jyea\" }],\n  [\"path\", { d: \"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\", key: \"zix9uf\" }]\n]);\n\nexport { Copy as default };\n//# sourceMappingURL=copy.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst DollarSign = createLucideIcon(\"DollarSign\", [\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"2\", y2: \"22\", key: \"7eqyqh\" }],\n  [\"path\", { d: \"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6\", key: \"1b0p4s\" }]\n]);\n\nexport { DollarSign as default };\n//# sourceMappingURL=dollar-sign.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileText = createLucideIcon(\"FileText\", [\n  [\n    \"path\",\n    { d: \"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\", key: \"1nnpy2\" }\n  ],\n  [\"polyline\", { points: \"14 2 14 8 20 8\", key: \"1ew0cm\" }],\n  [\"line\", { x1: \"16\", x2: \"8\", y1: \"13\", y2: \"13\", key: \"14keom\" }],\n  [\"line\", { x1: \"16\", x2: \"8\", y1: \"17\", y2: \"17\", key: \"17nazh\" }],\n  [\"line\", { x1: \"10\", x2: \"8\", y1: \"9\", y2: \"9\", key: \"1a5vjj\" }]\n]);\n\nexport { FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Globe = createLucideIcon(\"Globe\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20\", key: \"13o1zl\" }],\n  [\"path\", { d: \"M2 12h20\", key: \"9i4pu4\" }]\n]);\n\nexport { Globe as default };\n//# sourceMappingURL=globe.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst HelpCircle = createLucideIcon(\"HelpCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\", key: \"1u773s\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { HelpCircle as default };\n//# sourceMappingURL=help-circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Info = createLucideIcon(\"Info\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 16v-4\", key: \"1dtifu\" }],\n  [\"path\", { d: \"M12 8h.01\", key: \"e9boi3\" }]\n]);\n\nexport { Info as default };\n//# sourceMappingURL=info.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Loader2 = createLucideIcon(\"Loader2\", [\n  [\"path\", { d: \"M21 12a9 9 0 1 1-6.219-8.56\", key: \"13zald\" }]\n]);\n\nexport { Loader2 as default };\n//# sourceMappingURL=loader-2.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Mail = createLucideIcon(\"Mail\", [\n  [\"rect\", { width: \"20\", height: \"16\", x: \"2\", y: \"4\", rx: \"2\", key: \"18n3k1\" }],\n  [\"path\", { d: \"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7\", key: \"1ocrg3\" }]\n]);\n\nexport { Mail as default };\n//# sourceMappingURL=mail.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MessageSquareText = createLucideIcon(\"MessageSquareText\", [\n  [\"path\", { d: \"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\", key: \"1lielz\" }],\n  [\"path\", { d: \"M13 8H7\", key: \"14i4kc\" }],\n  [\"path\", { d: \"M17 12H7\", key: \"16if0g\" }]\n]);\n\nexport { MessageSquareText as default };\n//# sourceMappingURL=message-square-text.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Phone = createLucideIcon(\"Phone\", [\n  [\n    \"path\",\n    {\n      d: \"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\",\n      key: \"foiqr5\"\n    }\n  ]\n]);\n\nexport { Phone as default };\n//# sourceMappingURL=phone.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Plus = createLucideIcon(\"Plus\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n]);\n\nexport { Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Printer = createLucideIcon(\"Printer\", [\n  [\"polyline\", { points: \"6 9 6 2 18 2 18 9\", key: \"1306q4\" }],\n  [\n    \"path\",\n    {\n      d: \"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2\",\n      key: \"143wyd\"\n    }\n  ],\n  [\"rect\", { width: \"12\", height: \"8\", x: \"6\", y: \"14\", key: \"5ipwut\" }]\n]);\n\nexport { Printer as default };\n//# sourceMappingURL=printer.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCw = createLucideIcon(\"RefreshCw\", [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shield = createLucideIcon(\"Shield\", [\n  [\"path\", { d: \"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10\", key: \"1irkt0\" }]\n]);\n\nexport { Shield as default };\n//# sourceMappingURL=shield.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst StarOff = createLucideIcon(\"StarOff\", [\n  [\"path\", { d: \"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43\", key: \"16m0ql\" }],\n  [\"path\", { d: \"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91\", key: \"1vt8nq\" }],\n  [\"line\", { x1: \"2\", x2: \"22\", y1: \"2\", y2: \"22\", key: \"a6p6uj\" }]\n]);\n\nexport { StarOff as default };\n//# sourceMappingURL=star-off.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Star = createLucideIcon(\"Star\", [\n  [\n    \"polygon\",\n    {\n      points: \"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\",\n      key: \"8f66p6\"\n    }\n  ]\n]);\n\nexport { Star as default };\n//# sourceMappingURL=star.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ThermometerSun = createLucideIcon(\"ThermometerSun\", [\n  [\"path\", { d: \"M12 9a4 4 0 0 0-2 7.5\", key: \"1jvsq6\" }],\n  [\"path\", { d: \"M12 3v2\", key: \"1w22ol\" }],\n  [\"path\", { d: \"m6.6 18.4-1.4 1.4\", key: \"w2yidj\" }],\n  [\"path\", { d: \"M20 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z\", key: \"iof6y5\" }],\n  [\"path\", { d: \"M4 13H2\", key: \"118le4\" }],\n  [\"path\", { d: \"M6.34 7.34 4.93 5.93\", key: \"1brd51\" }]\n]);\n\nexport { ThermometerSun as default };\n//# sourceMappingURL=thermometer-sun.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trash2 = createLucideIcon(\"Trash2\", [\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\", key: \"4alrt4\" }],\n  [\"path\", { d: \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\", key: \"v07s0e\" }],\n  [\"line\", { x1: \"10\", x2: \"10\", y1: \"11\", y2: \"17\", key: \"1uufr5\" }],\n  [\"line\", { x1: \"14\", x2: \"14\", y1: \"11\", y2: \"17\", key: \"xtxkd\" }]\n]);\n\nexport { Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Upload = createLucideIcon(\"Upload\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"17 8 12 3 7 8\", key: \"t8dd8p\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"3\", y2: \"15\", key: \"widbto\" }]\n]);\n\nexport { Upload as default };\n//# sourceMappingURL=upload.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst User = createLucideIcon(\"User\", [\n  [\"path\", { d: \"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\", key: \"975kel\" }],\n  [\"circle\", { cx: \"12\", cy: \"7\", r: \"4\", key: \"17ys0d\" }]\n]);\n\nexport { User as default };\n//# sourceMappingURL=user.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst XCircle = createLucideIcon(\"XCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m15 9-6 6\", key: \"1uzhvr\" }],\n  [\"path\", { d: \"m9 9 6 6\", key: \"z0biqf\" }]\n]);\n\nexport { XCircle as default };\n//# sourceMappingURL=x-circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Zap = createLucideIcon(\"Zap\", [\n  [\"polygon\", { points: \"13 2 3 14 12 14 11 22 21 10 12 10 13 2\", key: \"45s27k\" }]\n]);\n\nexport { Zap as default };\n//# sourceMappingURL=zap.js.map\n","/**\n * BidSmart Database Service\n * \n * Core CRUD operations for projects, bids, and related data.\n */\n\nimport { supabase } from '../supabaseClient';\nimport type {\n  Project,\n  ContractorBid,\n  BidLineItem,\n  BidEquipment,\n  BidAnalysis,\n  PdfUpload,\n  MindPalExtraction,\n  RebateProgram,\n  ProjectRebate,\n  UserExt,\n  ProjectStatus,\n  PdfStatus,\n  ProjectSummary,\n  BidComparisonTableRow,\n} from '../types';\n\n// ============================================\n// USERS\n// ============================================\n\nexport async function getUserById(userId: string): Promise<UserExt | null> {\n  const { data, error } = await supabase\n    .from('users_ext')\n    .select('*')\n    .eq('id', userId)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateUser(\n  userId: string,\n  updates: Partial<UserExt>\n): Promise<UserExt | null> {\n  const { data, error } = await supabase\n    .from('users_ext')\n    .update(updates)\n    .eq('id', userId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// PROJECTS\n// ============================================\n\nexport async function createProject(\n  userId: string,\n  projectData: Partial<Project> = {}\n): Promise<Project> {\n  const { data, error } = await supabase\n    .from('projects')\n    .insert({\n      user_id: userId,\n      project_name: projectData.project_name || 'My Heat Pump Project',\n      status: projectData.status || 'draft',\n      ...projectData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getProject(projectId: string): Promise<Project | null> {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .eq('id', projectId)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getProjectsByUser(userId: string): Promise<Project[]> {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .eq('user_id', userId)\n    .order('created_at', { ascending: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updateProject(\n  projectId: string,\n  updates: Partial<Project>\n): Promise<Project | null> {\n  const { data, error } = await supabase\n    .from('projects')\n    .update(updates)\n    .eq('id', projectId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateProjectStatus(\n  projectId: string,\n  status: ProjectStatus\n): Promise<Project | null> {\n  return updateProject(projectId, { status });\n}\n\nexport async function deleteProject(projectId: string): Promise<void> {\n  const { error } = await supabase\n    .from('projects')\n    .delete()\n    .eq('id', projectId);\n\n  if (error) throw error;\n}\n\n// ============================================\n// CONTRACTOR BIDS\n// ============================================\n\nexport async function createBid(\n  projectId: string,\n  bidData: Partial<ContractorBid>\n): Promise<ContractorBid> {\n  const { data, error } = await supabase\n    .from('contractor_bids')\n    .insert({\n      project_id: projectId,\n      contractor_name: bidData.contractor_name || 'Unknown Contractor',\n      total_bid_amount: bidData.total_bid_amount || 0,\n      extraction_confidence: bidData.extraction_confidence || 'manual',\n      financing_offered: bidData.financing_offered || false,\n      verified_by_user: bidData.verified_by_user || false,\n      is_favorite: bidData.is_favorite || false,\n      ...bidData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getBid(bidId: string): Promise<ContractorBid | null> {\n  const { data, error } = await supabase\n    .from('contractor_bids')\n    .select('*')\n    .eq('id', bidId)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getBidsByProject(projectId: string): Promise<ContractorBid[]> {\n  const { data, error } = await supabase\n    .from('contractor_bids')\n    .select('*')\n    .eq('project_id', projectId)\n    .order('overall_score', { ascending: false, nullsFirst: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updateBid(\n  bidId: string,\n  updates: Partial<ContractorBid>\n): Promise<ContractorBid | null> {\n  const { data, error } = await supabase\n    .from('contractor_bids')\n    .update(updates)\n    .eq('id', bidId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function deleteBid(bidId: string): Promise<void> {\n  const { error } = await supabase\n    .from('contractor_bids')\n    .delete()\n    .eq('id', bidId);\n\n  if (error) throw error;\n}\n\nexport async function toggleBidFavorite(bidId: string): Promise<ContractorBid | null> {\n  const bid = await getBid(bidId);\n  if (!bid) return null;\n\n  return updateBid(bidId, { is_favorite: !bid.is_favorite });\n}\n\nexport async function verifyBid(bidId: string): Promise<ContractorBid | null> {\n  return updateBid(bidId, {\n    verified_by_user: true,\n    verified_at: new Date().toISOString(),\n  });\n}\n\n// ============================================\n// BID LINE ITEMS\n// ============================================\n\nexport async function createLineItem(\n  bidId: string,\n  itemData: Partial<BidLineItem>\n): Promise<BidLineItem> {\n  const { data, error } = await supabase\n    .from('bid_line_items')\n    .insert({\n      bid_id: bidId,\n      item_type: itemData.item_type || 'other',\n      description: itemData.description || '',\n      quantity: itemData.quantity || 1,\n      total_price: itemData.total_price || 0,\n      confidence: itemData.confidence || 'manual',\n      ...itemData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getLineItemsByBid(bidId: string): Promise<BidLineItem[]> {\n  const { data, error } = await supabase\n    .from('bid_line_items')\n    .select('*')\n    .eq('bid_id', bidId)\n    .order('line_order', { nullsFirst: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updateLineItem(\n  itemId: string,\n  updates: Partial<BidLineItem>\n): Promise<BidLineItem | null> {\n  const { data, error } = await supabase\n    .from('bid_line_items')\n    .update(updates)\n    .eq('id', itemId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function deleteLineItem(itemId: string): Promise<void> {\n  const { error } = await supabase\n    .from('bid_line_items')\n    .delete()\n    .eq('id', itemId);\n\n  if (error) throw error;\n}\n\nexport async function bulkCreateLineItems(\n  bidId: string,\n  items: Partial<BidLineItem>[]\n): Promise<BidLineItem[]> {\n  const itemsToInsert = items.map((item, index) => ({\n    bid_id: bidId,\n    item_type: item.item_type || 'other',\n    description: item.description || '',\n    quantity: item.quantity || 1,\n    total_price: item.total_price || 0,\n    confidence: item.confidence || 'manual',\n    line_order: index,\n    ...item,\n  }));\n\n  const { data, error } = await supabase\n    .from('bid_line_items')\n    .insert(itemsToInsert)\n    .select();\n\n  if (error) throw error;\n  return data || [];\n}\n\n// ============================================\n// BID EQUIPMENT\n// ============================================\n\nexport async function createEquipment(\n  bidId: string,\n  equipmentData: Partial<BidEquipment>\n): Promise<BidEquipment> {\n  const { data, error } = await supabase\n    .from('bid_equipment')\n    .insert({\n      bid_id: bidId,\n      equipment_type: equipmentData.equipment_type || 'other',\n      brand: equipmentData.brand || 'Unknown',\n      confidence: equipmentData.confidence || 'manual',\n      ...equipmentData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getEquipmentByBid(bidId: string): Promise<BidEquipment[]> {\n  const { data, error } = await supabase\n    .from('bid_equipment')\n    .select('*')\n    .eq('bid_id', bidId);\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updateEquipment(\n  equipmentId: string,\n  updates: Partial<BidEquipment>\n): Promise<BidEquipment | null> {\n  const { data, error } = await supabase\n    .from('bid_equipment')\n    .update(updates)\n    .eq('id', equipmentId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function deleteEquipment(equipmentId: string): Promise<void> {\n  const { error } = await supabase\n    .from('bid_equipment')\n    .delete()\n    .eq('id', equipmentId);\n\n  if (error) throw error;\n}\n\nexport async function bulkCreateEquipment(\n  bidId: string,\n  equipment: Partial<BidEquipment>[]\n): Promise<BidEquipment[]> {\n  const equipmentToInsert = equipment.map((eq) => ({\n    bid_id: bidId,\n    equipment_type: eq.equipment_type || 'other',\n    brand: eq.brand || 'Unknown',\n    confidence: eq.confidence || 'manual',\n    ...eq,\n  }));\n\n  const { data, error } = await supabase\n    .from('bid_equipment')\n    .insert(equipmentToInsert)\n    .select();\n\n  if (error) throw error;\n  return data || [];\n}\n\n// ============================================\n// BID ANALYSIS\n// ============================================\n\nexport async function createAnalysis(\n  projectId: string,\n  analysisData: Partial<BidAnalysis>\n): Promise<BidAnalysis> {\n  const { data, error } = await supabase\n    .from('bid_analysis')\n    .insert({\n      project_id: projectId,\n      analysis_version: '1.0',\n      ...analysisData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getLatestAnalysis(projectId: string): Promise<BidAnalysis | null> {\n  const { data, error } = await supabase\n    .from('bid_analysis')\n    .select('*')\n    .eq('project_id', projectId)\n    .order('created_at', { ascending: false })\n    .limit(1)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateAnalysis(\n  analysisId: string,\n  updates: Partial<BidAnalysis>\n): Promise<BidAnalysis | null> {\n  const { data, error } = await supabase\n    .from('bid_analysis')\n    .update(updates)\n    .eq('id', analysisId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// PDF UPLOADS\n// ============================================\n\nexport async function createPdfUpload(\n  projectId: string,\n  uploadData: Partial<PdfUpload>\n): Promise<PdfUpload> {\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .insert({\n      project_id: projectId,\n      file_name: uploadData.file_name || 'unknown.pdf',\n      file_path: uploadData.file_path || '',\n      status: uploadData.status || 'uploaded',\n      retry_count: 0,\n      ...uploadData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getPdfUpload(uploadId: string): Promise<PdfUpload | null> {\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .select('*')\n    .eq('id', uploadId)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getPdfUploadsByProject(projectId: string): Promise<PdfUpload[]> {\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .select('*')\n    .eq('project_id', projectId)\n    .order('uploaded_at', { ascending: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updatePdfUploadStatus(\n  uploadId: string,\n  status: PdfStatus,\n  additionalData: Partial<PdfUpload> = {}\n): Promise<PdfUpload | null> {\n  const updateData: Partial<PdfUpload> & { status: PdfStatus } = {\n    status,\n    ...additionalData,\n  };\n  if (status === 'processing') {\n    updateData.processing_started_at = new Date().toISOString();\n  }\n  if (status === 'extracted' || status === 'failed') {\n    updateData.processing_completed_at = new Date().toISOString();\n  }\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .update(updateData)\n    .eq('id', uploadId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function incrementPdfRetryCount(uploadId: string): Promise<PdfUpload | null> {\n  const upload = await getPdfUpload(uploadId);\n  if (!upload) return null;\n\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .update({ retry_count: upload.retry_count + 1 })\n    .eq('id', uploadId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// MINDPAL EXTRACTIONS\n// ============================================\n\nexport async function createMindPalExtraction(\n  pdfUploadId: string,\n  rawJson: Record<string, unknown>\n): Promise<MindPalExtraction> {\n  const { data, error } = await supabase\n    .from('mindpal_extractions')\n    .insert({\n      pdf_upload_id: pdfUploadId,\n      raw_json: rawJson,\n      parsed_successfully: false,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateMindPalExtraction(\n  extractionId: string,\n  updates: Partial<MindPalExtraction>\n): Promise<MindPalExtraction | null> {\n  const { data, error } = await supabase\n    .from('mindpal_extractions')\n    .update(updates)\n    .eq('id', extractionId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getExtractionByPdfUpload(\n  pdfUploadId: string\n): Promise<MindPalExtraction | null> {\n  const { data, error } = await supabase\n    .from('mindpal_extractions')\n    .select('*')\n    .eq('pdf_upload_id', pdfUploadId)\n    .order('extracted_at', { ascending: false })\n    .limit(1)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// REBATE PROGRAMS\n// ============================================\n\nexport async function getActiveRebates(): Promise<RebateProgram[]> {\n  const { data, error } = await supabase\n    .from('rebate_programs')\n    .select('*')\n    .eq('is_active', true)\n    .order('program_name');\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function getRebatesByState(stateCode: string): Promise<RebateProgram[]> {\n  const { data, error } = await supabase\n    .from('rebate_programs')\n    .select('*')\n    .eq('is_active', true)\n    .or(`available_nationwide.eq.true,available_states.cs.{${stateCode}}`);\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function getProjectRebates(projectId: string): Promise<Array<{\n  program: RebateProgram;\n  projectRebate: ProjectRebate;\n}>> {\n  const { data, error } = await supabase\n    .from('project_rebates')\n    .select(`\n      *,\n      rebate_programs (*)\n    `)\n    .eq('project_id', projectId);\n\n  if (error) throw error;\n\n  return (data || []).map((item: any) => ({\n    program: item.rebate_programs,\n    projectRebate: {\n      id: item.id,\n      project_id: item.project_id,\n      rebate_program_id: item.rebate_program_id,\n      is_eligible: item.is_eligible,\n      eligibility_notes: item.eligibility_notes,\n      estimated_amount: item.estimated_amount,\n      applied_amount: item.applied_amount,\n      application_status: item.application_status,\n      application_date: item.application_date,\n      approval_date: item.approval_date,\n      created_at: item.created_at,\n      updated_at: item.updated_at,\n    },\n  }));\n}\n\nexport async function addProjectRebate(\n  projectId: string,\n  rebateProgramId: string,\n  estimatedAmount?: number\n): Promise<ProjectRebate> {\n  const { data, error } = await supabase\n    .from('project_rebates')\n    .insert({\n      project_id: projectId,\n      rebate_program_id: rebateProgramId,\n      is_eligible: true,\n      estimated_amount: estimatedAmount,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// COMPOSITE QUERIES\n// ============================================\n\nexport async function getProjectSummary(projectId: string): Promise<ProjectSummary | null> {\n  // Get project\n  const project = await getProject(projectId);\n  if (!project) return null;\n\n  // Get bids with their line items and equipment\n  const bids = await getBidsByProject(projectId);\n  const bidsWithDetails: BidComparisonTableRow[] = await Promise.all(\n    bids.map(async (bid) => {\n      const [lineItems, equipment] = await Promise.all([\n        getLineItemsByBid(bid.id),\n        getEquipmentByBid(bid.id),\n      ]);\n\n      return {\n        bid,\n        equipment,\n        lineItems,\n        scores: {\n          overall: bid.overall_score || 0,\n          price: 0, // Calculated from price comparison\n          quality: bid.quality_score || 0,\n          value: bid.value_score || 0,\n          completeness: bid.completeness_score || 0,\n        },\n      };\n    })\n  );\n\n  // Get analysis\n  const analysis = await getLatestAnalysis(projectId);\n\n  // Get rebates\n  const rebates = await getProjectRebates(projectId);\n\n  // Calculate stats\n  const prices = bids.map((b) => b.total_bid_amount).filter((p) => p > 0);\n  const stats = {\n    totalBids: bids.length,\n    averagePrice: prices.length > 0 ? prices.reduce((a, b) => a + b, 0) / prices.length : 0,\n    lowestPrice: prices.length > 0 ? Math.min(...prices) : 0,\n    highestPrice: prices.length > 0 ? Math.max(...prices) : 0,\n    bestValueBidId: bids.reduce((best, bid) =>\n      (bid.value_score || 0) > (best?.value_score || 0) ? bid : best,\n      bids[0]\n    )?.id || null,\n    bestQualityBidId: bids.reduce((best, bid) =>\n      (bid.quality_score || 0) > (best?.quality_score || 0) ? bid : best,\n      bids[0]\n    )?.id || null,\n  };\n\n  return {\n    project,\n    bids: bidsWithDetails,\n    analysis,\n    rebates,\n    stats,\n  };\n}\n\n/**\n * Get project summary using the database function\n * This is more efficient as it does a single round trip\n */\nexport async function getProjectSummaryRPC(projectId: string): Promise<any> {\n  const { data, error } = await supabase.rpc('get_project_summary', {\n    p_project_id: projectId,\n  });\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// STORAGE\n// ============================================\n\nexport async function uploadPdfToStorage(\n  projectId: string,\n  file: File\n): Promise<{ path: string; url: string }> {\n  const fileExt = file.name.split('.').pop();\n  const fileName = `${Date.now()}_${Math.random().toString(36).substring(7)}.${fileExt}`;\n  const filePath = `bids/${projectId}/${fileName}`;\n\n  const { error: uploadError } = await supabase.storage\n    .from('bid-pdfs')\n    .upload(filePath, file);\n\n  if (uploadError) throw uploadError;\n\n  // Get signed URL for MindPal (expires in 1 hour)\n  const { data: urlData, error: urlError } = await supabase.storage\n    .from('bid-pdfs')\n    .createSignedUrl(filePath, 3600);\n\n  if (urlError) throw urlError;\n\n  return {\n    path: filePath,\n    url: urlData.signedUrl,\n  };\n}\n\nexport async function getPdfSignedUrl(filePath: string): Promise<string> {\n  const { data, error } = await supabase.storage\n    .from('bid-pdfs')\n    .createSignedUrl(filePath, 3600);\n\n  if (error) throw error;\n  return data.signedUrl;\n}\n\nexport async function deletePdfFromStorage(filePath: string): Promise<void> {\n  const { error } = await supabase.storage\n    .from('bid-pdfs')\n    .remove([filePath]);\n\n  if (error) throw error;\n}\n","/**\n * MindPal Integration Service\n * \n * Handles communication with MindPal for PDF extraction\n * and processing of extraction results.\n */\n\nimport { supabase } from '../supabaseClient';\nimport * as db from '../database/bidsmartService';\nimport type {\n  MindPalExtractionRequest,\n  MindPalExtractionResponse,\n  ContractorBid,\n  Project,\n  ConfidenceLevel,\n  LineItemType,\n} from '../types';\n\n// Configuration\nconst MINDPAL_WEBHOOK_URL = import.meta.env.VITE_MINDPAL_WEBHOOK_URL;\nconst MINDPAL_API_KEY = import.meta.env.VITE_MINDPAL_API_KEY;\nconst CALLBACK_BASE_URL = import.meta.env.VITE_CALLBACK_BASE_URL || window.location.origin;\n\ninterface TriggerExtractionResult {\n  success: boolean;\n  pdfUploadId: string;\n  error?: string;\n}\n\n/**\n * Upload a PDF and trigger MindPal extraction\n */\nexport async function uploadAndExtract(\n  projectId: string,\n  file: File\n): Promise<TriggerExtractionResult> {\n  try {\n    // 1. Upload file to storage\n    const { path, url } = await db.uploadPdfToStorage(projectId, file);\n\n    // 2. Create PDF upload record\n    const pdfUpload = await db.createPdfUpload(projectId, {\n      file_name: file.name,\n      file_path: path,\n      file_size_bytes: file.size,\n      status: 'uploaded',\n    });\n\n    // 3. Get project context\n    const project = await db.getProject(projectId);\n    if (!project) {\n      throw new Error('Project not found');\n    }\n\n    // 4. Build extraction request\n    const request = buildExtractionRequest(pdfUpload.id, url, project);\n\n    // 5. Trigger MindPal extraction\n    await triggerMindPalExtraction(request);\n\n    // 6. Update status\n    await db.updatePdfUploadStatus(pdfUpload.id, 'processing', {\n      mindpal_status: 'triggered',\n    });\n\n    return {\n      success: true,\n      pdfUploadId: pdfUpload.id,\n    };\n  } catch (error) {\n    console.error('Error in uploadAndExtract:', error);\n    return {\n      success: false,\n      pdfUploadId: '',\n      error: error instanceof Error ? error.message : 'Unknown error',\n    };\n  }\n}\n\n/**\n * Build the extraction request for MindPal\n */\nfunction buildExtractionRequest(\n  pdfUploadId: string,\n  pdfUrl: string,\n  project: Project\n): MindPalExtractionRequest {\n  // Get user's property info from project's user\n  // In a real app, you'd also fetch the user record\n  \n  return {\n    request_id: pdfUploadId,\n    pdf_url: pdfUrl,\n    callback_url: `${CALLBACK_BASE_URL}/api/mindpal/callback`,\n    project_context: {\n      project_id: project.id,\n      heat_pump_type: project.heat_pump_type,\n      system_size_tons: project.system_size_tons ?? undefined,\n      property_state: undefined,\n      property_zip: undefined,\n      square_footage: undefined,\n      preferred_brands: undefined,\n    },\n    extraction_options: {\n      extract_line_items: true,\n      extract_equipment_specs: true,\n      include_raw_text: false,\n    },\n  };\n}\n\n/**\n * Send extraction request to MindPal webhook\n */\nasync function triggerMindPalExtraction(\n  request: MindPalExtractionRequest\n): Promise<void> {\n  if (!MINDPAL_WEBHOOK_URL) {\n    console.warn('MindPal webhook URL not configured, skipping trigger');\n    return;\n  }\n\n  const response = await fetch(MINDPAL_WEBHOOK_URL, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'X-BidSmart-API-Key': MINDPAL_API_KEY || '',\n      'X-BidSmart-Timestamp': new Date().toISOString(),\n    },\n    body: JSON.stringify(request),\n  });\n\n  if (!response.ok) {\n    throw new Error(`MindPal trigger failed: ${response.status} ${response.statusText}`);\n  }\n}\n\n/**\n * Process callback from MindPal with extraction results\n */\nexport async function processMindPalCallback(\n  extraction: MindPalExtractionResponse\n): Promise<{ success: boolean; bidId?: string; error?: string }> {\n  const { request_id } = extraction;\n\n  try {\n    // 1. Get the PDF upload record\n    const pdfUpload = await db.getPdfUpload(request_id);\n    if (!pdfUpload) {\n      throw new Error(`PDF upload not found: ${request_id}`);\n    }\n\n    // 2. Store the raw extraction\n    const storedExtraction = await db.createMindPalExtraction(\n      pdfUpload.id,\n      extraction as unknown as Record<string, unknown>\n    );\n\n    // 3. Check extraction status\n    if (extraction.status === 'failed') {\n      await db.updatePdfUploadStatus(pdfUpload.id, 'failed', {\n        error_message: extraction.error?.message || 'Extraction failed',\n      });\n      await db.updateMindPalExtraction(storedExtraction.id, {\n        parsed_successfully: false,\n        parsing_errors: [extraction.error?.message || 'Extraction failed'],\n      });\n      return { success: false, error: extraction.error?.message };\n    }\n\n    // 4. Map extraction to bid\n    const bid = await mapExtractionToBid(pdfUpload.project_id, extraction);\n\n    // 5. Update PDF upload with result\n    const needsReview = extraction.overall_confidence < 70 || extraction.status === 'partial';\n    await db.updatePdfUploadStatus(\n      pdfUpload.id,\n      needsReview ? 'review_needed' : 'extracted',\n      {\n        extracted_bid_id: bid.id,\n        extraction_confidence: extraction.overall_confidence,\n      }\n    );\n\n    // 6. Update extraction record\n    await db.updateMindPalExtraction(storedExtraction.id, {\n      parsed_successfully: true,\n      mapped_bid_id: bid.id,\n      overall_confidence: extraction.overall_confidence,\n      field_confidences: extraction.field_confidences,\n      processed_at: new Date().toISOString(),\n    });\n\n    // 7. Recalculate project scores\n    await recalculateProjectScores(pdfUpload.project_id);\n\n    return { success: true, bidId: bid.id };\n  } catch (error) {\n    console.error('Error processing MindPal callback:', error);\n    \n    // Update status to failed\n    try {\n      await db.updatePdfUploadStatus(request_id, 'failed', {\n        error_message: error instanceof Error ? error.message : 'Processing failed',\n      });\n    } catch (e) {\n      console.error('Failed to update PDF status:', e);\n    }\n\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Processing failed',\n    };\n  }\n}\n\n/**\n * Map MindPal extraction response to our database models\n */\nasync function mapExtractionToBid(\n  projectId: string,\n  extraction: MindPalExtractionResponse\n): Promise<ContractorBid> {\n  // Determine confidence level\n  const confidenceLevel = mapConfidenceToLevel(extraction.overall_confidence);\n\n  // Create the bid\n  const bid = await db.createBid(projectId, {\n    // Contractor info\n    contractor_name: extraction.contractor_info?.company_name || 'Unknown Contractor',\n    contractor_company: extraction.contractor_info?.company_name,\n    contractor_phone: extraction.contractor_info?.phone,\n    contractor_email: extraction.contractor_info?.email,\n    contractor_license: extraction.contractor_info?.license_number,\n    contractor_website: extraction.contractor_info?.website,\n\n    // Pricing\n    total_bid_amount: extraction.pricing?.total_amount || 0,\n    labor_cost: extraction.pricing?.labor_cost,\n    equipment_cost: extraction.pricing?.equipment_cost,\n    materials_cost: extraction.pricing?.materials_cost,\n    permit_cost: extraction.pricing?.permit_cost,\n    total_before_rebates: extraction.pricing?.price_before_rebates,\n    estimated_rebates: extraction.pricing?.rebates_mentioned?.reduce(\n      (sum, r) => sum + (r.amount || 0),\n      0\n    ),\n    total_after_rebates: extraction.pricing?.price_after_rebates,\n\n    // Timeline\n    estimated_days: extraction.timeline?.estimated_days,\n    start_date_available: extraction.timeline?.start_date_available,\n\n    // Warranty\n    labor_warranty_years: extraction.warranty?.labor_warranty_years,\n    equipment_warranty_years: extraction.warranty?.equipment_warranty_years,\n    additional_warranty_details: extraction.warranty?.warranty_details,\n\n    // Payment\n    deposit_required: extraction.payment_terms?.deposit_amount,\n    deposit_percentage: extraction.payment_terms?.deposit_percentage,\n    payment_schedule: extraction.payment_terms?.payment_schedule,\n    financing_offered: extraction.payment_terms?.financing_offered || false,\n    financing_terms: extraction.payment_terms?.financing_terms,\n\n    // Scope\n    scope_summary: extraction.scope_of_work?.summary,\n    inclusions: extraction.scope_of_work?.inclusions,\n    exclusions: extraction.scope_of_work?.exclusions,\n\n    // Dates\n    bid_date: extraction.dates?.bid_date || extraction.dates?.quote_date,\n    valid_until: extraction.dates?.valid_until || extraction.timeline?.bid_valid_until,\n\n    // Extraction metadata\n    extraction_confidence: confidenceLevel,\n    extraction_notes: extraction.extraction_notes\n      ?.map((n) => `[${n.type}] ${n.message}`)\n      .join('\\n'),\n  });\n\n  // Create line items\n  if (extraction.line_items && extraction.line_items.length > 0) {\n    const lineItems = extraction.line_items.map((item, index) => ({\n      item_type: mapLineItemType(item.item_type),\n      description: item.description,\n      quantity: item.quantity || 1,\n      unit_price: item.unit_price,\n      total_price: item.total_price,\n      brand: item.brand,\n      model_number: item.model_number,\n      confidence: mapConfidenceToLevel(item.confidence || extraction.overall_confidence),\n      source_text: item.source_text,\n      line_order: index,\n    }));\n\n    await db.bulkCreateLineItems(bid.id, lineItems);\n  }\n\n  // Create equipment records\n  if (extraction.equipment && extraction.equipment.length > 0) {\n    const equipment = extraction.equipment.map((eq) => ({\n      equipment_type: eq.equipment_type,\n      brand: eq.brand,\n      model_number: eq.model_number,\n      model_name: eq.model_name,\n      capacity_btu: eq.capacity_btu,\n      capacity_tons: eq.capacity_tons,\n      seer_rating: eq.seer_rating,\n      seer2_rating: eq.seer2_rating,\n      hspf_rating: eq.hspf_rating,\n      hspf2_rating: eq.hspf2_rating,\n      eer_rating: eq.eer_rating,\n      variable_speed: eq.variable_speed,\n      stages: eq.stages === 'single' ? 1 : eq.stages === 'two' ? 2 : eq.stages === 'variable' ? 99 : undefined,\n      refrigerant_type: eq.refrigerant,\n      sound_level_db: eq.sound_level_db,\n      voltage: eq.voltage,\n      energy_star_certified: eq.energy_star,\n      energy_star_most_efficient: eq.energy_star_most_efficient,\n      equipment_cost: eq.equipment_cost,\n      confidence: mapConfidenceToLevel(eq.confidence || extraction.overall_confidence),\n    }));\n\n    await db.bulkCreateEquipment(bid.id, equipment);\n  }\n\n  return bid;\n}\n\n/**\n * Map numeric confidence to our enum\n */\nfunction mapConfidenceToLevel(confidence: number | undefined): ConfidenceLevel {\n  if (confidence === undefined) return 'low';\n  if (confidence >= 90) return 'high';\n  if (confidence >= 70) return 'medium';\n  return 'low';\n}\n\n/**\n * Map extracted line item type to our enum\n */\nfunction mapLineItemType(type: string | undefined): LineItemType {\n  if (!type) return 'other';\n  \n  const typeMap: Record<string, LineItemType> = {\n    equipment: 'equipment',\n    labor: 'labor',\n    materials: 'materials',\n    permit: 'permit',\n    disposal: 'disposal',\n    electrical: 'electrical',\n    ductwork: 'ductwork',\n    thermostat: 'thermostat',\n    rebate_processing: 'rebate_processing',\n    warranty: 'warranty',\n  };\n\n  return typeMap[type.toLowerCase()] || 'other';\n}\n\n/**\n * Recalculate scores for all bids in a project\n * This triggers the database function\n */\nasync function recalculateProjectScores(projectId: string): Promise<void> {\n  const bids = await db.getBidsByProject(projectId);\n  \n  for (const bid of bids) {\n    // The database trigger handles this, but we can manually call the function\n    await supabase.rpc('calculate_bid_scores', { p_bid_id: bid.id });\n  }\n}\n\n/**\n * Retry a failed extraction\n */\nexport async function retryExtraction(pdfUploadId: string): Promise<TriggerExtractionResult> {\n  const pdfUpload = await db.getPdfUpload(pdfUploadId);\n  if (!pdfUpload) {\n    return { success: false, pdfUploadId, error: 'PDF upload not found' };\n  }\n\n  // Check retry count\n  if (pdfUpload.retry_count >= 3) {\n    return { success: false, pdfUploadId, error: 'Maximum retries exceeded' };\n  }\n\n  // Increment retry count\n  await db.incrementPdfRetryCount(pdfUploadId);\n\n  // Get signed URL\n  const url = await db.getPdfSignedUrl(pdfUpload.file_path);\n\n  // Get project\n  const project = await db.getProject(pdfUpload.project_id);\n  if (!project) {\n    return { success: false, pdfUploadId, error: 'Project not found' };\n  }\n\n  // Build and send request\n  const request = buildExtractionRequest(pdfUploadId, url, project);\n  \n  try {\n    await triggerMindPalExtraction(request);\n    await db.updatePdfUploadStatus(pdfUploadId, 'processing', {\n      mindpal_status: 'retry_triggered',\n      error_message: null,\n    });\n    return { success: true, pdfUploadId };\n  } catch (error) {\n    return {\n      success: false,\n      pdfUploadId,\n      error: error instanceof Error ? error.message : 'Retry failed',\n    };\n  }\n}\n\n/**\n * Get extraction status for a PDF upload\n */\nexport async function getExtractionStatus(pdfUploadId: string): Promise<{\n  status: string;\n  confidence?: number;\n  bidId?: string;\n  error?: string;\n}> {\n  const pdfUpload = await db.getPdfUpload(pdfUploadId);\n  if (!pdfUpload) {\n    return { status: 'not_found' };\n  }\n\n  return {\n    status: pdfUpload.status,\n    confidence: pdfUpload.extraction_confidence ?? undefined,\n    bidId: pdfUpload.extracted_bid_id ?? undefined,\n    error: pdfUpload.error_message ?? undefined,\n  };\n}\n","import { useState, useRef } from 'react';\nimport { Upload, FileText, Loader2 } from 'lucide-react';\n\ninterface BidUploadZoneProps {\n  onUpload: (files: FileList) => void;\n  uploading: boolean;\n}\n\nexport function BidUploadZone({ onUpload, uploading }: BidUploadZoneProps) {\n  const [dragOver, setDragOver] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  function handleDragOver(e: React.DragEvent) {\n    e.preventDefault();\n    setDragOver(true);\n  }\n\n  function handleDragLeave(e: React.DragEvent) {\n    e.preventDefault();\n    setDragOver(false);\n  }\n\n  function handleDrop(e: React.DragEvent) {\n    e.preventDefault();\n    setDragOver(false);\n    \n    if (e.dataTransfer.files.length > 0) {\n      onUpload(e.dataTransfer.files);\n    }\n  }\n\n  function handleClick() {\n    fileInputRef.current?.click();\n  }\n\n  function handleFileChange(e: React.ChangeEvent<HTMLInputElement>) {\n    if (e.target.files && e.target.files.length > 0) {\n      onUpload(e.target.files);\n      e.target.value = ''; // Reset input\n    }\n  }\n\n  return (\n    <div\n      className={`upload-zone ${dragOver ? 'dragover' : ''}`}\n      onDragOver={handleDragOver}\n      onDragLeave={handleDragLeave}\n      onDrop={handleDrop}\n      onClick={handleClick}\n    >\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\".pdf\"\n        multiple\n        onChange={handleFileChange}\n        className=\"hidden\"\n      />\n      \n      {uploading ? (\n        <div className=\"flex flex-col items-center\">\n          <Loader2 className=\"w-12 h-12 text-switch-blue-500 animate-spin mb-4\" />\n          <p className=\"text-lg font-medium text-gray-900\">Uploading and analyzing...</p>\n          <p className=\"text-sm text-gray-500 mt-1\">This may take a minute</p>\n        </div>\n      ) : (\n        <div className=\"flex flex-col items-center\">\n          <div className=\"w-16 h-16 bg-switch-green-100 rounded-full flex items-center justify-center mb-4\">\n            <Upload className=\"w-8 h-8 text-switch-green-600\" />\n          </div>\n          <p className=\"text-lg font-medium text-gray-900 mb-1\">\n            Drop contractor bid PDFs here\n          </p>\n          <p className=\"text-sm text-gray-500 mb-4\">\n            or click to browse\n          </p>\n          <div className=\"flex items-center gap-2 text-xs text-gray-400\">\n            <FileText className=\"w-4 h-4\" />\n            <span>PDF files only  Multiple files supported</span>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { \n  ArrowUpDown, Check, X, AlertTriangle, Award, Star,\n  Zap, Shield, Clock, DollarSign, ThermometerSun\n} from 'lucide-react';\nimport * as db from '../lib/database/bidsmartService';\nimport type { ContractorBid, BidEquipment } from '../lib/types';\n\ninterface BidComparisonTableProps {\n  projectId: string;\n  bids: ContractorBid[];\n}\n\ntype CompareView = 'specs' | 'contractor' | 'pricing';\n\nexport function BidComparisonTable({ projectId: _projectId, bids }: BidComparisonTableProps) {\n  const [equipment, setEquipment] = useState<Record<string, BidEquipment[]>>({});\n  const [loading, setLoading] = useState(true);\n  const [view, setView] = useState<CompareView>('specs');\n  const [sortBy, setSortBy] = useState<string>('overall_score');\n  const [sortDir, setSortDir] = useState<'asc' | 'desc'>('desc');\n\n  useEffect(() => {\n    loadEquipment();\n  }, [bids]);\n\n  async function loadEquipment() {\n    const equipMap: Record<string, BidEquipment[]> = {};\n    for (const bid of bids) {\n      equipMap[bid.id] = await db.getEquipmentByBid(bid.id);\n    }\n    setEquipment(equipMap);\n    setLoading(false);\n  }\n\n  function formatCurrency(amount: number | null | undefined) {\n    if (amount == null) return '';\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n    }).format(amount);\n  }\n\n  function getBestValue(values: (number | null | undefined)[], higherIsBetter = true): number | null {\n    const valid = values.filter((v): v is number => v != null && v > 0);\n    if (valid.length === 0) return null;\n    return higherIsBetter ? Math.max(...valid) : Math.min(...valid);\n  }\n\n  function isBestValue(value: number | null | undefined, best: number | null, higherIsBetter = true): boolean {\n    if (value == null || best == null) return false;\n    return higherIsBetter ? value >= best : value <= best;\n  }\n\n  // Sort bids\n  const sortedBids = [...bids].sort((a, b) => {\n    let aVal: number | null = null;\n    let bVal: number | null = null;\n\n    switch (sortBy) {\n      case 'overall_score':\n        aVal = a.overall_score ?? null;\n        bVal = b.overall_score ?? null;\n        break;\n      case 'total_bid_amount':\n        aVal = a.total_bid_amount;\n        bVal = b.total_bid_amount;\n        break;\n      case 'warranty':\n        aVal = (a.labor_warranty_years || 0) + (a.equipment_warranty_years || 0);\n        bVal = (b.labor_warranty_years || 0) + (b.equipment_warranty_years || 0);\n        break;\n      case 'timeline':\n        aVal = a.estimated_days || 999;\n        bVal = b.estimated_days || 999;\n        break;\n    }\n\n    if (aVal == null && bVal == null) return 0;\n    if (aVal == null) return 1;\n    if (bVal == null) return -1;\n\n    return sortDir === 'desc' ? bVal - aVal : aVal - bVal;\n  });\n\n  function handleSort(field: string) {\n    if (sortBy === field) {\n      setSortDir(sortDir === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortBy(field);\n      setSortDir(field === 'total_bid_amount' || field === 'timeline' ? 'asc' : 'desc');\n    }\n  }\n\n  // Calculate best values for highlighting\n  const bestPrice = getBestValue(bids.map(b => b.total_bid_amount), false);\n  const bestWarranty = getBestValue(bids.map(b => (b.labor_warranty_years || 0) + (b.equipment_warranty_years || 0)));\n  const bestTimeline = getBestValue(bids.map(b => b.estimated_days), false);\n  const bestScore = getBestValue(bids.map(b => b.overall_score));\n\n  // Get SEER ratings from equipment\n  function getSeerRating(bidId: string): number | null {\n    const equip = equipment[bidId]?.find(e => e.equipment_type === 'outdoor_unit' || e.seer_rating || e.seer2_rating);\n    return equip?.seer2_rating || equip?.seer_rating || null;\n  }\n\n  function getHspfRating(bidId: string): number | null {\n    const equip = equipment[bidId]?.find(e => e.equipment_type === 'outdoor_unit' || e.hspf_rating || e.hspf2_rating);\n    return equip?.hspf2_rating || equip?.hspf_rating || null;\n  }\n\n  function getCapacity(bidId: string): number | null {\n    const equip = equipment[bidId]?.find(e => e.capacity_tons || e.capacity_btu);\n    return equip?.capacity_tons || (equip?.capacity_btu ? equip.capacity_btu / 12000 : null);\n  }\n\n  function isVariableSpeed(bidId: string): boolean {\n    return equipment[bidId]?.some(e => e.variable_speed) || false;\n  }\n\n  function isEnergyStar(bidId: string): boolean {\n    return equipment[bidId]?.some(e => e.energy_star_certified) || false;\n  }\n\n  const bestSeer = getBestValue(bids.map(b => getSeerRating(b.id)));\n  const bestHspf = getBestValue(bids.map(b => getHspfRating(b.id)));\n\n  if (loading) {\n    return <div className=\"text-center py-8 text-gray-500\">Loading comparison...</div>;\n  }\n\n  if (bids.length < 2) {\n    return (\n      <div className=\"text-center py-12\">\n        <AlertTriangle className=\"w-12 h-12 text-amber-400 mx-auto mb-4\" />\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Need More Bids</h3>\n        <p className=\"text-gray-600\">Upload at least 2 bids to see a comparison.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* View Toggle */}\n      <div className=\"flex items-center gap-2\">\n        <span className=\"text-sm text-gray-500\">Compare:</span>\n        <div className=\"flex bg-gray-100 rounded-lg p-1\">\n          {[\n            { id: 'specs', label: 'Equipment Specs', icon: ThermometerSun },\n            { id: 'contractor', label: 'Contractor Info', icon: Shield },\n            { id: 'pricing', label: 'Pricing Breakdown', icon: DollarSign },\n          ].map((tab) => (\n            <button\n              key={tab.id}\n              onClick={() => setView(tab.id as CompareView)}\n              className={`px-3 py-1.5 text-sm font-medium rounded-md transition-colors flex items-center gap-1.5 ${\n                view === tab.id\n                  ? 'bg-white text-gray-900 shadow-sm'\n                  : 'text-gray-600 hover:text-gray-900'\n              }`}\n            >\n              <tab.icon className=\"w-4 h-4\" />\n              {tab.label}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Comparison Table */}\n      <div className=\"card overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"comparison-table\">\n            <thead>\n              <tr>\n                <th className=\"sticky left-0 bg-gray-50 z-10\">Contractor</th>\n                {sortedBids.map((bid) => (\n                  <th key={bid.id} className=\"min-w-[200px]\">\n                    <div className=\"flex items-center gap-2\">\n                      {bid.contractor_name}\n                      {bid.is_favorite && <Star className=\"w-4 h-4 text-yellow-500 fill-current\" />}\n                      {bid.contractor_is_switch_preferred && <Award className=\"w-4 h-4 text-switch-green-600\" />}\n                    </div>\n                  </th>\n                ))}\n              </tr>\n            </thead>\n            <tbody>\n              {/* Overall Score Row */}\n              <tr className=\"bg-gray-50\">\n                <td className=\"sticky left-0 bg-gray-50 font-medium\">\n                  <button onClick={() => handleSort('overall_score')} className=\"flex items-center gap-1 hover:text-switch-green-600\">\n                    Overall Score\n                    <ArrowUpDown className=\"w-3 h-3\" />\n                  </button>\n                </td>\n                {sortedBids.map((bid) => (\n                  <td key={bid.id}>\n                    {bid.overall_score ? (\n                      <span className={`score-badge ${\n                        isBestValue(bid.overall_score, bestScore) ? 'score-high font-bold' :\n                        bid.overall_score >= 60 ? 'score-medium' : 'score-low'\n                      }`}>\n                        {bid.overall_score.toFixed(0)}/100\n                        {isBestValue(bid.overall_score, bestScore) && ' '}\n                      </span>\n                    ) : ''}\n                  </td>\n                ))}\n              </tr>\n\n              {/* Price Row */}\n              <tr>\n                <td className=\"sticky left-0 bg-white font-medium\">\n                  <button onClick={() => handleSort('total_bid_amount')} className=\"flex items-center gap-1 hover:text-switch-green-600\">\n                    <DollarSign className=\"w-4 h-4\" />\n                    Total Price\n                    <ArrowUpDown className=\"w-3 h-3\" />\n                  </button>\n                </td>\n                {sortedBids.map((bid) => (\n                  <td key={bid.id} className={isBestValue(bid.total_bid_amount, bestPrice, false) ? 'best-value' : ''}>\n                    <span className=\"font-semibold\">{formatCurrency(bid.total_bid_amount)}</span>\n                    {isBestValue(bid.total_bid_amount, bestPrice, false) && (\n                      <span className=\"ml-2 text-xs text-green-600 font-medium\">LOWEST</span>\n                    )}\n                  </td>\n                ))}\n              </tr>\n\n              {view === 'specs' && (\n                <>\n                  {/* SEER Rating */}\n                  <tr>\n                    <td className=\"sticky left-0 bg-white font-medium\">\n                      <div className=\"flex items-center gap-1\">\n                        <Zap className=\"w-4 h-4 text-amber-500\" />\n                        SEER / SEER2\n                      </div>\n                      <span className=\"text-xs text-gray-400 font-normal\">Cooling efficiency</span>\n                    </td>\n                    {sortedBids.map((bid) => {\n                      const seer = getSeerRating(bid.id);\n                      return (\n                        <td key={bid.id} className={isBestValue(seer, bestSeer) ? 'best-value' : ''}>\n                          {seer ? (\n                            <>\n                              <span className=\"font-semibold\">{seer}</span>\n                              {isBestValue(seer, bestSeer) && (\n                                <span className=\"ml-2 text-xs text-green-600 font-medium\">BEST</span>\n                              )}\n                            </>\n                          ) : ''}\n                        </td>\n                      );\n                    })}\n                  </tr>\n\n                  {/* HSPF Rating */}\n                  <tr>\n                    <td className=\"sticky left-0 bg-white font-medium\">\n                      <div className=\"flex items-center gap-1\">\n                        <ThermometerSun className=\"w-4 h-4 text-orange-500\" />\n                        HSPF / HSPF2\n                      </div>\n                      <span className=\"text-xs text-gray-400 font-normal\">Heating efficiency</span>\n                    </td>\n                    {sortedBids.map((bid) => {\n                      const hspf = getHspfRating(bid.id);\n                      return (\n                        <td key={bid.id} className={isBestValue(hspf, bestHspf) ? 'best-value' : ''}>\n                          {hspf ? (\n                            <>\n                              <span className=\"font-semibold\">{hspf}</span>\n                              {isBestValue(hspf, bestHspf) && (\n                                <span className=\"ml-2 text-xs text-green-600 font-medium\">BEST</span>\n                              )}\n                            </>\n                          ) : ''}\n                        </td>\n                      );\n                    })}\n                  </tr>\n\n                  {/* Capacity */}\n                  <tr>\n                    <td className=\"sticky left-0 bg-white font-medium\">Capacity (tons)</td>\n                    {sortedBids.map((bid) => (\n                      <td key={bid.id}>\n                        {getCapacity(bid.id)?.toFixed(1) || ''}\n                      </td>\n                    ))}\n                  </tr>\n\n                  {/* Variable Speed */}\n                  <tr>\n                    <td className=\"sticky left-0 bg-white font-medium\">Variable Speed</td>\n                    {sortedBids.map((bid) => (\n                      <td key={bid.id}>\n                        {isVariableSpeed(bid.id) ? (\n                          <Check className=\"w-5 h-5 text-green-600\" />\n                        ) : (\n                          <X className=\"w-5 h-5 text-gray-300\" />\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n\n                  {/* Energy Star */}\n                  <tr>\n                    <td className=\"sticky left-0 bg-white font-medium\">ENERGY STAR</td>\n                    {sortedBids.map((bid) => (\n                      <td key={bid.id}>\n                        {isEnergyStar(bid.id) ? (\n                          <span className=\"inline-flex items-center gap-1 text-green-600\">\n                            <Check className=\"w-5 h-5\" />\n                            Certified\n                          </span>\n                        ) : (\n                          <X className=\"w-5 h-5 text-gray-300\" />\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n                </>\n              )}\n\n              {view === 'contractor' && (\n                <>\n                  {/* Years in Business */}\n                  <tr>\n                    <td className=\"sticky left-0 bg-white font-medium\">Years in Business</td>\n                    {sortedBids.map((bid) => (\n                      <td key={bid.id}>\n                        {bid.contractor_years_in_business ? (\n                          <span className={bid.contractor_years_in_business >= 10 ? 'text-green-600 font-medium' : ''}>\n                            {bid.contractor_years_in_business} years\n                          </span>\n                        ) : ''}\n                      </td>\n                    ))}\n                  </tr>\n\n                  {/* Google Rating */}\n                  <tr>\n                    <td className=\"sticky left-0 bg-white font-medium\">Google Rating</td>\n                    {sortedBids.map((bid) => (\n                      <td key={bid.id}>\n                        {bid.contractor_google_rating ? (\n                          <span className={bid.contractor_google_rating >= 4.5 ? 'text-green-600 font-medium' : ''}>\n                            {bid.contractor_google_rating.toFixed(1)} \n                            {bid.contractor_google_review_count && (\n                              <span className=\"text-gray-400 text-sm ml-1\">\n                                ({bid.contractor_google_review_count})\n                              </span>\n                            )}\n                          </span>\n                        ) : ''}\n                      </td>\n                    ))}\n                  </tr>\n\n                  {/* License */}\n                  <tr>\n                    <td className=\"sticky left-0 bg-white font-medium\">License #</td>\n                    {sortedBids.map((bid) => (\n                      <td key={bid.id}>\n                        {bid.contractor_license ? (\n                          <>\n                            {bid.contractor_license}\n                            {bid.contractor_license_state && ` (${bid.contractor_license_state})`}\n                          </>\n                        ) : (\n                          <span className=\"text-amber-600 flex items-center gap-1\">\n                            <AlertTriangle className=\"w-4 h-4\" />\n                            Not provided\n                          </span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n\n                  {/* Certifications */}\n                  <tr>\n                    <td className=\"sticky left-0 bg-white font-medium\">Certifications</td>\n                    {sortedBids.map((bid) => (\n                      <td key={bid.id}>\n                        {bid.contractor_certifications && bid.contractor_certifications.length > 0 ? (\n                          <div className=\"flex flex-wrap gap-1\">\n                            {bid.contractor_certifications.map((cert, i) => (\n                              <span key={i} className=\"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded\">\n                                {cert}\n                              </span>\n                            ))}\n                          </div>\n                        ) : ''}\n                      </td>\n                    ))}\n                  </tr>\n\n                  {/* Insurance */}\n                  <tr>\n                    <td className=\"sticky left-0 bg-white font-medium\">Insurance Verified</td>\n                    {sortedBids.map((bid) => (\n                      <td key={bid.id}>\n                        {bid.contractor_insurance_verified ? (\n                          <Check className=\"w-5 h-5 text-green-600\" />\n                        ) : (\n                          <span className=\"text-gray-400\">Unknown</span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n                </>\n              )}\n\n              {view === 'pricing' && (\n                <>\n                  {/* Equipment Cost */}\n                  <tr>\n                    <td className=\"sticky left-0 bg-white font-medium\">Equipment</td>\n                    {sortedBids.map((bid) => (\n                      <td key={bid.id}>{formatCurrency(bid.equipment_cost)}</td>\n                    ))}\n                  </tr>\n\n                  {/* Labor Cost */}\n                  <tr>\n                    <td className=\"sticky left-0 bg-white font-medium\">Labor</td>\n                    {sortedBids.map((bid) => (\n                      <td key={bid.id}>{formatCurrency(bid.labor_cost)}</td>\n                    ))}\n                  </tr>\n\n                  {/* Materials */}\n                  <tr>\n                    <td className=\"sticky left-0 bg-white font-medium\">Materials</td>\n                    {sortedBids.map((bid) => (\n                      <td key={bid.id}>{formatCurrency(bid.materials_cost)}</td>\n                    ))}\n                  </tr>\n\n                  {/* Permits */}\n                  <tr>\n                    <td className=\"sticky left-0 bg-white font-medium\">Permits</td>\n                    {sortedBids.map((bid) => (\n                      <td key={bid.id}>{formatCurrency(bid.permit_cost)}</td>\n                    ))}\n                  </tr>\n\n                  {/* Rebates */}\n                  <tr>\n                    <td className=\"sticky left-0 bg-white font-medium text-green-600\">Est. Rebates</td>\n                    {sortedBids.map((bid) => (\n                      <td key={bid.id} className=\"text-green-600\">\n                        {bid.estimated_rebates ? `-${formatCurrency(bid.estimated_rebates)}` : ''}\n                      </td>\n                    ))}\n                  </tr>\n\n                  {/* After Rebates */}\n                  <tr className=\"bg-green-50\">\n                    <td className=\"sticky left-0 bg-green-50 font-medium\">After Rebates</td>\n                    {sortedBids.map((bid) => (\n                      <td key={bid.id} className=\"font-semibold\">\n                        {formatCurrency(bid.total_after_rebates || bid.total_bid_amount)}\n                      </td>\n                    ))}\n                  </tr>\n                </>\n              )}\n\n              {/* Warranty Row */}\n              <tr>\n                <td className=\"sticky left-0 bg-white font-medium\">\n                  <button onClick={() => handleSort('warranty')} className=\"flex items-center gap-1 hover:text-switch-green-600\">\n                    <Shield className=\"w-4 h-4\" />\n                    Warranty\n                    <ArrowUpDown className=\"w-3 h-3\" />\n                  </button>\n                </td>\n                {sortedBids.map((bid) => {\n                  const totalWarranty = (bid.labor_warranty_years || 0) + (bid.equipment_warranty_years || 0);\n                  return (\n                    <td key={bid.id} className={isBestValue(totalWarranty, bestWarranty) ? 'best-value' : ''}>\n                      {bid.labor_warranty_years || bid.equipment_warranty_years ? (\n                        <>\n                          {bid.labor_warranty_years && `${bid.labor_warranty_years}yr labor`}\n                          {bid.labor_warranty_years && bid.equipment_warranty_years && ' / '}\n                          {bid.equipment_warranty_years && `${bid.equipment_warranty_years}yr equip`}\n                          {isBestValue(totalWarranty, bestWarranty) && (\n                            <span className=\"ml-2 text-xs text-green-600 font-medium\">BEST</span>\n                          )}\n                        </>\n                      ) : ''}\n                    </td>\n                  );\n                })}\n              </tr>\n\n              {/* Timeline Row */}\n              <tr>\n                <td className=\"sticky left-0 bg-white font-medium\">\n                  <button onClick={() => handleSort('timeline')} className=\"flex items-center gap-1 hover:text-switch-green-600\">\n                    <Clock className=\"w-4 h-4\" />\n                    Timeline\n                    <ArrowUpDown className=\"w-3 h-3\" />\n                  </button>\n                </td>\n                {sortedBids.map((bid) => (\n                  <td key={bid.id} className={isBestValue(bid.estimated_days, bestTimeline, false) ? 'best-value' : ''}>\n                    {bid.estimated_days ? (\n                      <>\n                        {bid.estimated_days} days\n                        {isBestValue(bid.estimated_days, bestTimeline, false) && (\n                          <span className=\"ml-2 text-xs text-green-600 font-medium\">FASTEST</span>\n                        )}\n                      </>\n                    ) : ''}\n                  </td>\n                ))}\n              </tr>\n\n              {/* Financing */}\n              <tr>\n                <td className=\"sticky left-0 bg-white font-medium\">Financing</td>\n                {sortedBids.map((bid) => (\n                  <td key={bid.id}>\n                    {bid.financing_offered ? (\n                      <span className=\"text-green-600 flex items-center gap-1\">\n                        <Check className=\"w-4 h-4\" />\n                        Available\n                      </span>\n                    ) : (\n                      <X className=\"w-5 h-5 text-gray-300\" />\n                    )}\n                  </td>\n                ))}\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Legend */}\n      <div className=\"flex items-center gap-6 text-sm text-gray-500\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-4 h-4 bg-green-50 border-l-4 border-green-500\"></div>\n          <span>Best in category</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Star className=\"w-4 h-4 text-yellow-500 fill-current\" />\n          <span>Your favorite</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Award className=\"w-4 h-4 text-switch-green-600\" />\n          <span>Switch Preferred Contractor</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { \n  MessageSquareText, CheckCircle2, AlertTriangle, ChevronDown, ChevronUp,\n  Copy, Check, HelpCircle\n} from 'lucide-react';\nimport { supabase } from '../lib/supabaseClient';\nimport type { ContractorBid, BidQuestion, QuestionPriority } from '../lib/types';\n\ninterface ContractorQuestionsProps {\n  projectId: string;\n  bids: ContractorBid[];\n}\n\ninterface GeneratedQuestion {\n  text: string;\n  category: string;\n  priority: QuestionPriority;\n  missingField: string;\n}\n\nexport function ContractorQuestions({ projectId: _projectId, bids }: ContractorQuestionsProps) {\n  const [questions, setQuestions] = useState<Record<string, BidQuestion[]>>({});\n  const [expandedBid, setExpandedBid] = useState<string | null>(bids[0]?.id || null);\n  const [loading, setLoading] = useState(true);\n  const [copiedId, setCopiedId] = useState<string | null>(null);\n\n  useEffect(() => {\n    loadOrGenerateQuestions();\n  }, [bids]);\n\n  async function loadOrGenerateQuestions() {\n    const questionsMap: Record<string, BidQuestion[]> = {};\n\n    for (const bid of bids) {\n      // Try to load existing questions\n      const { data: existingQuestions } = await supabase\n        .from('bid_questions')\n        .select('*')\n        .eq('bid_id', bid.id)\n        .order('priority', { ascending: true })\n        .order('display_order', { ascending: true });\n\n      if (existingQuestions && existingQuestions.length > 0) {\n        questionsMap[bid.id] = existingQuestions;\n      } else {\n        // Generate questions based on missing info\n        const generated = generateQuestionsForBid(bid);\n        \n        // Save to database\n        if (generated.length > 0) {\n          const toInsert = generated.map((q, i) => ({\n            bid_id: bid.id,\n            question_text: q.text,\n            question_category: q.category,\n            priority: q.priority,\n            missing_field: q.missingField,\n            auto_generated: true,\n            display_order: i,\n          }));\n\n          const { data: inserted } = await supabase\n            .from('bid_questions')\n            .insert(toInsert)\n            .select();\n\n          questionsMap[bid.id] = inserted || [];\n        } else {\n          questionsMap[bid.id] = [];\n        }\n      }\n    }\n\n    setQuestions(questionsMap);\n    setLoading(false);\n  }\n\n  function generateQuestionsForBid(bid: ContractorBid): GeneratedQuestion[] {\n    const questions: GeneratedQuestion[] = [];\n\n    // Pricing questions\n    if (!bid.equipment_cost && !bid.labor_cost) {\n      questions.push({\n        text: 'Can you provide a breakdown of equipment vs. labor costs?',\n        category: 'pricing',\n        priority: 'medium',\n        missingField: 'cost_breakdown',\n      });\n    }\n\n    // Warranty questions\n    if (!bid.labor_warranty_years) {\n      questions.push({\n        text: 'What is your labor warranty period?',\n        category: 'warranty',\n        priority: 'high',\n        missingField: 'labor_warranty_years',\n      });\n    }\n\n    if (!bid.equipment_warranty_years) {\n      questions.push({\n        text: 'What is the equipment/manufacturer warranty period?',\n        category: 'warranty',\n        priority: 'high',\n        missingField: 'equipment_warranty_years',\n      });\n    }\n\n    // Timeline questions\n    if (!bid.estimated_days) {\n      questions.push({\n        text: 'How many days will the installation take?',\n        category: 'timeline',\n        priority: 'medium',\n        missingField: 'estimated_days',\n      });\n    }\n\n    if (!bid.start_date_available) {\n      questions.push({\n        text: 'What is your earliest available start date?',\n        category: 'timeline',\n        priority: 'medium',\n        missingField: 'start_date_available',\n      });\n    }\n\n    // Credentials questions\n    if (!bid.contractor_license) {\n      questions.push({\n        text: \"What is your contractor's license number?\",\n        category: 'credentials',\n        priority: 'high',\n        missingField: 'contractor_license',\n      });\n    }\n\n    if (!bid.contractor_years_in_business) {\n      questions.push({\n        text: 'How many years has your company been in business?',\n        category: 'credentials',\n        priority: 'low',\n        missingField: 'contractor_years_in_business',\n      });\n    }\n\n    if (!bid.contractor_certifications || bid.contractor_certifications.length === 0) {\n      questions.push({\n        text: 'What professional certifications do your technicians hold (NATE, EPA 608, manufacturer certifications)?',\n        category: 'credentials',\n        priority: 'medium',\n        missingField: 'contractor_certifications',\n      });\n    }\n\n    // Scope questions\n    if (!bid.scope_summary) {\n      questions.push({\n        text: 'Can you provide a detailed scope of work for this installation?',\n        category: 'scope',\n        priority: 'high',\n        missingField: 'scope_summary',\n      });\n    }\n\n    // Equipment questions - these are important for spec comparison\n    questions.push({\n      text: 'What is the SEER2 and HSPF2 rating of the proposed equipment?',\n      category: 'equipment',\n      priority: 'high',\n      missingField: 'efficiency_ratings',\n    });\n\n    // Standard quality questions (always ask)\n    questions.push({\n      text: 'Will you perform a Manual J load calculation for my home?',\n      category: 'scope',\n      priority: 'high',\n      missingField: 'manual_j',\n    });\n\n    questions.push({\n      text: 'Will the installation include a commissioning report with all measurements documented?',\n      category: 'scope',\n      priority: 'medium',\n      missingField: 'commissioning',\n    });\n\n    questions.push({\n      text: 'Are permits and inspections included in the bid?',\n      category: 'scope',\n      priority: 'high',\n      missingField: 'permits',\n    });\n\n    // Remove duplicates based on missing field\n    const seen = new Set<string>();\n    return questions.filter(q => {\n      if (seen.has(q.missingField)) return false;\n      seen.add(q.missingField);\n      return true;\n    });\n  }\n\n  async function markAsAnswered(questionId: string, bidId: string) {\n    await supabase\n      .from('bid_questions')\n      .update({ \n        is_answered: true, \n        answered_at: new Date().toISOString() \n      })\n      .eq('id', questionId);\n\n    setQuestions(prev => ({\n      ...prev,\n      [bidId]: prev[bidId].map(q => \n        q.id === questionId ? { ...q, is_answered: true, answered_at: new Date().toISOString() } : q\n      ),\n    }));\n  }\n\n  async function copyAllQuestions(bidId: string) {\n    const bidQuestions = questions[bidId]?.filter(q => !q.is_answered) || [];\n    const text = bidQuestions.map((q, i) => `${i + 1}. ${q.question_text}`).join('\\n');\n    \n    await navigator.clipboard.writeText(text);\n    setCopiedId(bidId);\n    setTimeout(() => setCopiedId(null), 2000);\n  }\n\n  function getPriorityBadge(priority: QuestionPriority) {\n    const config = {\n      high: { label: 'Important', className: 'bg-red-100 text-red-800' },\n      medium: { label: 'Recommended', className: 'bg-yellow-100 text-yellow-800' },\n      low: { label: 'Nice to know', className: 'bg-gray-100 text-gray-700' },\n    };\n    const { label, className } = config[priority];\n    return <span className={`text-xs px-2 py-0.5 rounded-full ${className}`}>{label}</span>;\n  }\n\n  if (loading) {\n    return <div className=\"text-center py-8 text-gray-500\">Loading questions...</div>;\n  }\n\n  if (bids.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <HelpCircle className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Bids Yet</h3>\n        <p className=\"text-gray-600\">Upload some bids to see personalized questions for each contractor.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n        <h3 className=\"font-medium text-blue-900 mb-1\">Questions to Ask Each Contractor</h3>\n        <p className=\"text-sm text-blue-700\">\n          Based on what's missing from each bid, here are personalized questions to ask. \n          Getting answers will help you make a more informed comparison.\n        </p>\n      </div>\n\n      <div className=\"space-y-4\">\n        {bids.map((bid) => {\n          const bidQuestions = questions[bid.id] || [];\n          const unanswered = bidQuestions.filter(q => !q.is_answered);\n          const answered = bidQuestions.filter(q => q.is_answered);\n          const isExpanded = expandedBid === bid.id;\n\n          return (\n            <div key={bid.id} className=\"card overflow-hidden\">\n              {/* Header */}\n              <button\n                onClick={() => setExpandedBid(isExpanded ? null : bid.id)}\n                className=\"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors\"\n              >\n                <div className=\"flex items-center gap-3\">\n                  <MessageSquareText className=\"w-5 h-5 text-gray-400\" />\n                  <div className=\"text-left\">\n                    <h3 className=\"font-semibold text-gray-900\">{bid.contractor_name}</h3>\n                    <p className=\"text-sm text-gray-500\">\n                      {unanswered.length} question{unanswered.length !== 1 ? 's' : ''} to ask\n                      {answered.length > 0 && `  ${answered.length} answered`}\n                    </p>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  {unanswered.length === 0 ? (\n                    <span className=\"status-badge status-complete\">\n                      <CheckCircle2 className=\"w-3 h-3 mr-1\" />\n                      Complete\n                    </span>\n                  ) : (\n                    <span className=\"status-badge status-review\">\n                      <AlertTriangle className=\"w-3 h-3 mr-1\" />\n                      {unanswered.filter(q => q.priority === 'high').length} important\n                    </span>\n                  )}\n                  {isExpanded ? (\n                    <ChevronUp className=\"w-5 h-5 text-gray-400\" />\n                  ) : (\n                    <ChevronDown className=\"w-5 h-5 text-gray-400\" />\n                  )}\n                </div>\n              </button>\n\n              {/* Content */}\n              {isExpanded && (\n                <div className=\"border-t border-gray-100 p-4 space-y-4\">\n                  {/* Copy All Button */}\n                  {unanswered.length > 0 && (\n                    <div className=\"flex justify-end\">\n                      <button\n                        onClick={() => copyAllQuestions(bid.id)}\n                        className=\"btn btn-secondary text-sm\"\n                      >\n                        {copiedId === bid.id ? (\n                          <>\n                            <Check className=\"w-4 h-4 text-green-600\" />\n                            Copied!\n                          </>\n                        ) : (\n                          <>\n                            <Copy className=\"w-4 h-4\" />\n                            Copy All Questions\n                          </>\n                        )}\n                      </button>\n                    </div>\n                  )}\n\n                  {/* Unanswered Questions */}\n                  {unanswered.length > 0 && (\n                    <div className=\"space-y-3\">\n                      {unanswered.map((question, index) => (\n                        <div \n                          key={question.id} \n                          className={`question-card ${question.priority === 'high' ? 'high-priority' : ''}`}\n                        >\n                          <div className=\"flex items-start justify-between gap-4\">\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center gap-2 mb-1\">\n                                <span className=\"text-sm font-medium text-gray-500\">#{index + 1}</span>\n                                {getPriorityBadge(question.priority)}\n                              </div>\n                              <p className=\"text-gray-900\">{question.question_text}</p>\n                            </div>\n                            <button\n                              onClick={() => markAsAnswered(question.id, bid.id)}\n                              className=\"btn btn-ghost text-sm text-gray-500 hover:text-green-600\"\n                              title=\"Mark as answered\"\n                            >\n                              <CheckCircle2 className=\"w-4 h-4\" />\n                            </button>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n\n                  {/* Answered Questions */}\n                  {answered.length > 0 && (\n                    <div className=\"mt-6\">\n                      <h4 className=\"text-sm font-medium text-gray-500 mb-3\">\n                        Answered ({answered.length})\n                      </h4>\n                      <div className=\"space-y-2\">\n                        {answered.map((question) => (\n                          <div key={question.id} className=\"question-card answered opacity-60\">\n                            <div className=\"flex items-center gap-2\">\n                              <CheckCircle2 className=\"w-4 h-4 text-green-600\" />\n                              <p className=\"text-gray-600 line-through\">{question.question_text}</p>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* All Answered State */}\n                  {unanswered.length === 0 && answered.length > 0 && (\n                    <div className=\"text-center py-4 text-green-600\">\n                      <CheckCircle2 className=\"w-8 h-8 mx-auto mb-2\" />\n                      <p className=\"font-medium\">All questions answered!</p>\n                    </div>\n                  )}\n\n                  {/* No Questions */}\n                  {bidQuestions.length === 0 && (\n                    <div className=\"text-center py-4 text-gray-500\">\n                      <p>This bid appears to be complete - no additional questions needed.</p>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport {\n  ClipboardCheck, CheckCircle2, Circle, AlertTriangle, Info,\n  ChevronDown, ChevronUp, Printer\n} from 'lucide-react';\nimport { supabase } from '../lib/supabaseClient';\nimport type { QIIChecklistItem, ProjectQIIChecklist, QIICategory } from '../lib/types';\n\ninterface QIIChecklistProps {\n  projectId: string;\n}\n\ninterface ChecklistItemWithStatus extends QIIChecklistItem {\n  status?: ProjectQIIChecklist;\n}\n\nconst CATEGORY_INFO: Record<QIICategory, { label: string; description: string; icon: string }> = {\n  pre_installation: {\n    label: 'Pre-Installation',\n    description: 'Verify these items before work begins',\n    icon: '',\n  },\n  equipment: {\n    label: 'Equipment Verification',\n    description: 'Confirm the right equipment was delivered and installed',\n    icon: '',\n  },\n  airflow: {\n    label: 'Airflow',\n    description: 'Proper airflow is critical for efficiency and comfort',\n    icon: '',\n  },\n  refrigerant: {\n    label: 'Refrigerant',\n    description: 'Correct refrigerant charge affects efficiency and equipment life',\n    icon: '',\n  },\n  electrical: {\n    label: 'Electrical',\n    description: 'Safe and proper electrical connections',\n    icon: '',\n  },\n  commissioning: {\n    label: 'Commissioning & Closeout',\n    description: 'Final steps to ensure everything is documented',\n    icon: '',\n  },\n};\n\nexport function QIIChecklist({ projectId }: QIIChecklistProps) {\n  const [items, setItems] = useState<ChecklistItemWithStatus[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [expandedCategory, setExpandedCategory] = useState<QIICategory | null>('pre_installation');\n\n  useEffect(() => {\n    loadChecklist();\n  }, [projectId]);\n\n  async function loadChecklist() {\n    // Load all checklist items\n    const { data: allItems } = await supabase\n      .from('qii_checklist_items')\n      .select('*')\n      .order('display_order', { ascending: true });\n\n    // Load project-specific status\n    const { data: projectStatus } = await supabase\n      .from('project_qii_checklist')\n      .select('*')\n      .eq('project_id', projectId);\n\n    // Merge status with items\n    const statusMap = new Map(projectStatus?.map(s => [s.checklist_item_id, s]) || []);\n    \n    const itemsWithStatus = (allItems || []).map(item => ({\n      ...item,\n      status: statusMap.get(item.id),\n    }));\n\n    setItems(itemsWithStatus);\n    setLoading(false);\n  }\n\n  async function toggleItem(item: ChecklistItemWithStatus) {\n    const isCurrentlyVerified = item.status?.is_verified || false;\n\n    if (item.status) {\n      // Update existing status\n      await supabase\n        .from('project_qii_checklist')\n        .update({ \n          is_verified: !isCurrentlyVerified,\n          verified_at: !isCurrentlyVerified ? new Date().toISOString() : null,\n          verified_by: !isCurrentlyVerified ? 'homeowner' : null,\n        })\n        .eq('id', item.status.id);\n    } else {\n      // Create new status\n      await supabase\n        .from('project_qii_checklist')\n        .insert({\n          project_id: projectId,\n          checklist_item_id: item.id,\n          is_verified: true,\n          verified_at: new Date().toISOString(),\n          verified_by: 'homeowner',\n        });\n    }\n\n    // Reload to get updated data\n    loadChecklist();\n  }\n\n  function getProgress() {\n    const total = items.length;\n    const verified = items.filter(i => i.status?.is_verified).length;\n    const critical = items.filter(i => i.is_critical);\n    const criticalVerified = critical.filter(i => i.status?.is_verified).length;\n\n    return {\n      total,\n      verified,\n      percentage: total > 0 ? Math.round((verified / total) * 100) : 0,\n      critical: critical.length,\n      criticalVerified,\n      criticalComplete: criticalVerified === critical.length,\n    };\n  }\n\n  function getCategoryItems(category: QIICategory) {\n    return items.filter(i => i.category === category);\n  }\n\n  function getCategoryProgress(category: QIICategory) {\n    const categoryItems = getCategoryItems(category);\n    const verified = categoryItems.filter(i => i.status?.is_verified).length;\n    return { total: categoryItems.length, verified };\n  }\n\n  function handlePrint() {\n    window.print();\n  }\n\n  const progress = getProgress();\n  const categories = Object.keys(CATEGORY_INFO) as QIICategory[];\n\n  if (loading) {\n    return <div className=\"text-center py-8 text-gray-500\">Loading checklist...</div>;\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-gradient-to-r from-switch-green-50 to-blue-50 border border-switch-green-200 rounded-xl p-6\">\n        <div className=\"flex items-start justify-between\">\n          <div>\n            <h2 className=\"text-xl font-bold text-gray-900 flex items-center gap-2\">\n              <ClipboardCheck className=\"w-6 h-6 text-switch-green-600\" />\n              Quality Installation Checklist\n            </h2>\n            <p className=\"text-gray-600 mt-1\">\n              Use this checklist to verify your heat pump was installed correctly.\n              Based on ACCA/ANSI Quality Installation standards.\n            </p>\n          </div>\n          <button onClick={handlePrint} className=\"btn btn-secondary text-sm print:hidden\">\n            <Printer className=\"w-4 h-4\" />\n            Print\n          </button>\n        </div>\n\n        {/* Progress */}\n        <div className=\"mt-6 grid md:grid-cols-2 gap-4\">\n          <div className=\"bg-white rounded-lg p-4\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <span className=\"text-sm font-medium text-gray-700\">Overall Progress</span>\n              <span className=\"text-sm font-bold text-gray-900\">{progress.verified}/{progress.total}</span>\n            </div>\n            <div className=\"progress-bar\">\n              <div \n                className=\"progress-fill\"\n                style={{ width: `${progress.percentage}%` }}\n              />\n            </div>\n            <p className=\"text-xs text-gray-500 mt-1\">{progress.percentage}% complete</p>\n          </div>\n\n          <div className={`rounded-lg p-4 ${progress.criticalComplete ? 'bg-green-50' : 'bg-amber-50'}`}>\n            <div className=\"flex items-center gap-2\">\n              {progress.criticalComplete ? (\n                <CheckCircle2 className=\"w-5 h-5 text-green-600\" />\n              ) : (\n                <AlertTriangle className=\"w-5 h-5 text-amber-600\" />\n              )}\n              <span className=\"font-medium text-gray-900\">Critical Items</span>\n            </div>\n            <p className={`text-sm mt-1 ${progress.criticalComplete ? 'text-green-700' : 'text-amber-700'}`}>\n              {progress.criticalVerified} of {progress.critical} critical items verified\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Categories */}\n      <div className=\"space-y-4\">\n        {categories.map((category) => {\n          const info = CATEGORY_INFO[category];\n          const categoryProgress = getCategoryProgress(category);\n          const isExpanded = expandedCategory === category;\n          const categoryItems = getCategoryItems(category);\n          const allVerified = categoryProgress.verified === categoryProgress.total;\n\n          return (\n            <div key={category} className=\"card overflow-hidden\">\n              {/* Category Header */}\n              <button\n                onClick={() => setExpandedCategory(isExpanded ? null : category)}\n                className=\"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors\"\n              >\n                <div className=\"flex items-center gap-3\">\n                  <span className=\"text-2xl\">{info.icon}</span>\n                  <div className=\"text-left\">\n                    <h3 className=\"font-semibold text-gray-900\">{info.label}</h3>\n                    <p className=\"text-sm text-gray-500\">{info.description}</p>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <span className={`text-sm font-medium ${allVerified ? 'text-green-600' : 'text-gray-500'}`}>\n                    {categoryProgress.verified}/{categoryProgress.total}\n                  </span>\n                  {allVerified && <CheckCircle2 className=\"w-5 h-5 text-green-600\" />}\n                  {isExpanded ? (\n                    <ChevronUp className=\"w-5 h-5 text-gray-400\" />\n                  ) : (\n                    <ChevronDown className=\"w-5 h-5 text-gray-400\" />\n                  )}\n                </div>\n              </button>\n\n              {/* Category Items */}\n              {isExpanded && (\n                <div className=\"border-t border-gray-100 divide-y divide-gray-100\">\n                  {categoryItems.map((item) => (\n                    <div\n                      key={item.id}\n                      className={`checklist-item ${item.status?.is_verified ? 'verified' : ''} ${item.is_critical ? 'critical' : ''}`}\n                    >\n                      <button\n                        onClick={() => toggleItem(item)}\n                        className=\"flex-shrink-0 mt-0.5\"\n                      >\n                        {item.status?.is_verified ? (\n                          <CheckCircle2 className=\"w-6 h-6 text-green-600\" />\n                        ) : (\n                          <Circle className=\"w-6 h-6 text-gray-300 hover:text-gray-400\" />\n                        )}\n                      </button>\n                      \n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center gap-2\">\n                          <p className={`font-medium ${item.status?.is_verified ? 'text-gray-500 line-through' : 'text-gray-900'}`}>\n                            {item.item_text}\n                          </p>\n                          {item.is_critical && (\n                            <span className=\"text-xs bg-red-100 text-red-800 px-2 py-0.5 rounded-full\">\n                              Critical\n                            </span>\n                          )}\n                        </div>\n                        {item.description && (\n                          <p className=\"text-sm text-gray-500 mt-1\">{item.description}</p>\n                        )}\n                        {item.why_it_matters && (\n                          <div className=\"mt-2 flex items-start gap-2 text-sm text-blue-700 bg-blue-50 rounded-lg p-2\">\n                            <Info className=\"w-4 h-4 flex-shrink-0 mt-0.5\" />\n                            <span><strong>Why it matters:</strong> {item.why_it_matters}</span>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Completion Message */}\n      {progress.percentage === 100 && (\n        <div className=\"bg-green-50 border border-green-200 rounded-xl p-6 text-center\">\n          <CheckCircle2 className=\"w-12 h-12 text-green-600 mx-auto mb-3\" />\n          <h3 className=\"text-lg font-bold text-green-900\">Installation Verified!</h3>\n          <p className=\"text-green-700 mt-1\">\n            All quality installation items have been checked. Keep this checklist for your records.\n          </p>\n        </div>\n      )}\n\n      {/* Tips */}\n      <div className=\"bg-gray-50 border border-gray-200 rounded-xl p-6\">\n        <h3 className=\"font-semibold text-gray-900 mb-3\">Tips for Using This Checklist</h3>\n        <ul className=\"text-sm text-gray-600 space-y-2\">\n          <li className=\"flex items-start gap-2\">\n            <span className=\"text-switch-green-600\"></span>\n            Ask your contractor to walk through critical items with you before they leave\n          </li>\n          <li className=\"flex items-start gap-2\">\n            <span className=\"text-switch-green-600\"></span>\n            Request documentation for items like load calculations and commissioning reports\n          </li>\n          <li className=\"flex items-start gap-2\">\n            <span className=\"text-switch-green-600\"></span>\n            Take photos of equipment labels showing model numbers and serial numbers\n          </li>\n          <li className=\"flex items-start gap-2\">\n            <span className=\"text-switch-green-600\"></span>\n            Don't sign off on the final payment until critical items are verified\n          </li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { \n  FileText, Star, StarOff, CheckCircle2, AlertTriangle, XCircle,\n  ChevronDown, ChevronUp, Phone, Mail, Globe, Award\n} from 'lucide-react';\nimport * as db from '../lib/database/bidsmartService';\nimport type { ContractorBid, PdfUpload } from '../lib/types';\n\ninterface BidCardProps {\n  bid: ContractorBid;\n  pdfUpload?: PdfUpload;\n  onUpdate: () => void;\n}\n\nexport function BidCard({ bid, pdfUpload: _pdfUpload, onUpdate }: BidCardProps) {\n  const [expanded, setExpanded] = useState(false);\n\n  async function toggleFavorite() {\n    await db.toggleBidFavorite(bid.id);\n    onUpdate();\n  }\n\n  function getConfidenceBadge() {\n    if (bid.verified_by_user) {\n      return <span className=\"status-badge status-complete\"><CheckCircle2 className=\"w-3 h-3 mr-1\" /> Verified</span>;\n    }\n    \n    const confidenceConfig = {\n      high: { label: 'High Confidence', className: 'status-complete' },\n      medium: { label: 'Medium Confidence', className: 'status-review' },\n      low: { label: 'Low Confidence', className: 'status-error' },\n      manual: { label: 'Manual Entry', className: 'bg-gray-100 text-gray-700' },\n    };\n    \n    const config = confidenceConfig[bid.extraction_confidence];\n    return <span className={`status-badge ${config.className}`}>{config.label}</span>;\n  }\n\n  function formatCurrency(amount: number | null | undefined) {\n    if (amount == null) return '';\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(amount);\n  }\n\n  return (\n    <div className={`card ${bid.is_favorite ? 'border-switch-green-300 bg-switch-green-50/30' : ''}`}>\n      {/* Header */}\n      <div className=\"p-4 flex items-start justify-between\">\n        <div className=\"flex items-start gap-4\">\n          <div className=\"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0\">\n            <FileText className=\"w-6 h-6 text-gray-500\" />\n          </div>\n          <div>\n            <div className=\"flex items-center gap-2\">\n              <h3 className=\"font-semibold text-gray-900\">{bid.contractor_name}</h3>\n              {bid.contractor_is_switch_preferred && (\n                <span className=\"status-badge bg-switch-green-100 text-switch-green-800\">\n                  <Award className=\"w-3 h-3 mr-1\" />\n                  Preferred\n                </span>\n              )}\n            </div>\n            <div className=\"flex items-center gap-3 mt-1 text-sm text-gray-500\">\n              {bid.contractor_phone && (\n                <a href={`tel:${bid.contractor_phone}`} className=\"flex items-center gap-1 hover:text-switch-green-600\">\n                  <Phone className=\"w-3 h-3\" />\n                  {bid.contractor_phone}\n                </a>\n              )}\n              {bid.contractor_email && (\n                <a href={`mailto:${bid.contractor_email}`} className=\"flex items-center gap-1 hover:text-switch-green-600\">\n                  <Mail className=\"w-3 h-3\" />\n                  Email\n                </a>\n              )}\n              {bid.contractor_website && (\n                <a href={bid.contractor_website} target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center gap-1 hover:text-switch-green-600\">\n                  <Globe className=\"w-3 h-3\" />\n                  Website\n                </a>\n              )}\n            </div>\n            <div className=\"flex items-center gap-2 mt-2\">\n              {getConfidenceBadge()}\n              {bid.extraction_confidence === 'low' && (\n                <span className=\"text-xs text-amber-600 flex items-center gap-1\">\n                  <AlertTriangle className=\"w-3 h-3\" />\n                  Review recommended\n                </span>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-4\">\n          <div className=\"text-right\">\n            <p className=\"text-2xl font-bold text-gray-900\">\n              {formatCurrency(bid.total_bid_amount)}\n            </p>\n            {bid.total_after_rebates && bid.total_after_rebates !== bid.total_bid_amount && (\n              <p className=\"text-sm text-switch-green-600\">\n                {formatCurrency(bid.total_after_rebates)} after rebates\n              </p>\n            )}\n          </div>\n          <button\n            onClick={toggleFavorite}\n            className={`p-2 rounded-lg transition-colors ${\n              bid.is_favorite \n                ? 'bg-yellow-100 text-yellow-600' \n                : 'hover:bg-gray-100 text-gray-400'\n            }`}\n            title={bid.is_favorite ? 'Remove from favorites' : 'Add to favorites'}\n          >\n            {bid.is_favorite ? <Star className=\"w-5 h-5 fill-current\" /> : <StarOff className=\"w-5 h-5\" />}\n          </button>\n        </div>\n      </div>\n\n      {/* Quick Stats */}\n      <div className=\"px-4 pb-4 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\n        <div>\n          <p className=\"text-gray-500\">Warranty</p>\n          <p className=\"font-medium text-gray-900\">\n            {bid.labor_warranty_years || bid.equipment_warranty_years ? (\n              <>\n                {bid.labor_warranty_years && `${bid.labor_warranty_years}yr labor`}\n                {bid.labor_warranty_years && bid.equipment_warranty_years && ' / '}\n                {bid.equipment_warranty_years && `${bid.equipment_warranty_years}yr equip`}\n              </>\n            ) : ''}\n          </p>\n        </div>\n        <div>\n          <p className=\"text-gray-500\">Timeline</p>\n          <p className=\"font-medium text-gray-900\">\n            {bid.estimated_days ? `${bid.estimated_days} days` : ''}\n          </p>\n        </div>\n        <div>\n          <p className=\"text-gray-500\">Years in Business</p>\n          <p className=\"font-medium text-gray-900\">\n            {bid.contractor_years_in_business ? `${bid.contractor_years_in_business} years` : ''}\n          </p>\n        </div>\n        <div>\n          <p className=\"text-gray-500\">Score</p>\n          <p className=\"font-medium text-gray-900\">\n            {bid.overall_score ? (\n              <span className={`score-badge ${\n                bid.overall_score >= 80 ? 'score-high' : \n                bid.overall_score >= 60 ? 'score-medium' : 'score-low'\n              }`}>\n                {bid.overall_score.toFixed(0)}/100\n              </span>\n            ) : ''}\n          </p>\n        </div>\n      </div>\n\n      {/* Expand/Collapse */}\n      <button\n        onClick={() => setExpanded(!expanded)}\n        className=\"w-full px-4 py-2 border-t border-gray-100 flex items-center justify-center gap-2 text-sm text-gray-600 hover:bg-gray-50 transition-colors\"\n      >\n        {expanded ? (\n          <>\n            <ChevronUp className=\"w-4 h-4\" />\n            Show less\n          </>\n        ) : (\n          <>\n            <ChevronDown className=\"w-4 h-4\" />\n            Show details\n          </>\n        )}\n      </button>\n\n      {/* Expanded Details */}\n      {expanded && (\n        <div className=\"px-4 pb-4 border-t border-gray-100 pt-4 space-y-4\">\n          {/* Contractor Credentials */}\n          <div className=\"grid md:grid-cols-3 gap-4 text-sm\">\n            <div>\n              <p className=\"text-gray-500\">License</p>\n              <p className=\"font-medium text-gray-900\">\n                {bid.contractor_license ? (\n                  <>\n                    {bid.contractor_license}\n                    {bid.contractor_license_state && ` (${bid.contractor_license_state})`}\n                  </>\n                ) : ''}\n              </p>\n            </div>\n            <div>\n              <p className=\"text-gray-500\">Google Rating</p>\n              <p className=\"font-medium text-gray-900\">\n                {bid.contractor_google_rating ? (\n                  <>\n                    {bid.contractor_google_rating.toFixed(1)} \n                    {bid.contractor_google_review_count && ` (${bid.contractor_google_review_count} reviews)`}\n                  </>\n                ) : ''}\n              </p>\n            </div>\n            <div>\n              <p className=\"text-gray-500\">Certifications</p>\n              <p className=\"font-medium text-gray-900\">\n                {bid.contractor_certifications && bid.contractor_certifications.length > 0\n                  ? bid.contractor_certifications.join(', ')\n                  : ''}\n              </p>\n            </div>\n          </div>\n\n          {/* Scope */}\n          {bid.scope_summary && (\n            <div>\n              <h4 className=\"text-sm font-medium text-gray-700 mb-1\">Scope of Work</h4>\n              <p className=\"text-sm text-gray-600\">{bid.scope_summary}</p>\n            </div>\n          )}\n\n          {/* Inclusions/Exclusions */}\n          <div className=\"grid md:grid-cols-2 gap-4\">\n            {bid.inclusions && bid.inclusions.length > 0 && (\n              <div>\n                <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Included</h4>\n                <ul className=\"text-sm text-gray-600 space-y-1\">\n                  {bid.inclusions.map((item, i) => (\n                    <li key={i} className=\"flex items-start gap-2\">\n                      <CheckCircle2 className=\"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5\" />\n                      {item}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            )}\n            {bid.exclusions && bid.exclusions.length > 0 && (\n              <div>\n                <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Not Included</h4>\n                <ul className=\"text-sm text-gray-600 space-y-1\">\n                  {bid.exclusions.map((item, i) => (\n                    <li key={i} className=\"flex items-start gap-2\">\n                      <XCircle className=\"w-4 h-4 text-red-400 flex-shrink-0 mt-0.5\" />\n                      {item}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            )}\n          </div>\n\n          {/* Payment Terms */}\n          {(bid.deposit_required || bid.financing_offered) && (\n            <div>\n              <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Payment</h4>\n              <div className=\"text-sm text-gray-600 space-y-1\">\n                {bid.deposit_required && (\n                  <p>Deposit: {formatCurrency(bid.deposit_required)} {bid.deposit_percentage && `(${bid.deposit_percentage}%)`}</p>\n                )}\n                {bid.financing_offered && (\n                  <p className=\"text-switch-green-600\"> Financing available {bid.financing_terms && `- ${bid.financing_terms}`}</p>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Notes */}\n          {bid.extraction_notes && (\n            <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-3\">\n              <h4 className=\"text-sm font-medium text-amber-800 mb-1\">Extraction Notes</h4>\n              <p className=\"text-sm text-amber-700\">{bid.extraction_notes}</p>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { \n  ArrowLeft, Upload, BarChart3, MessageSquareText, ClipboardCheck,\n  Loader2, RefreshCw, AlertCircle\n} from 'lucide-react';\nimport * as db from '../lib/database/bidsmartService';\nimport { uploadAndExtract } from '../lib/services/mindpalService';\nimport type { UserExt, Project, ContractorBid, PdfUpload } from '../lib/types';\n\n// Components\nimport { BidUploadZone } from '../components/BidUploadZone';\nimport { BidComparisonTable } from '../components/BidComparisonTable';\nimport { ContractorQuestions } from '../components/ContractorQuestions';\nimport { QIIChecklist } from '../components/QIIChecklist';\nimport { BidCard } from '../components/BidCard';\n\ninterface ProjectPageProps {\n  user: UserExt;\n}\n\ntype TabId = 'bids' | 'compare' | 'questions' | 'checklist';\n\nexport function ProjectPage({ user: _user }: ProjectPageProps) {\n  const { projectId } = useParams<{ projectId: string }>();\n  const navigate = useNavigate();\n  \n  const [project, setProject] = useState<Project | null>(null);\n  const [bids, setBids] = useState<ContractorBid[]>([]);\n  const [pdfUploads, setPdfUploads] = useState<PdfUpload[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState<TabId>('bids');\n  const [uploading, setUploading] = useState(false);\n\n  useEffect(() => {\n    if (projectId) {\n      loadProjectData();\n    }\n  }, [projectId]);\n\n  async function loadProjectData() {\n    if (!projectId) return;\n    \n    try {\n      const [projectData, bidsData, uploadsData] = await Promise.all([\n        db.getProject(projectId),\n        db.getBidsByProject(projectId),\n        db.getPdfUploadsByProject(projectId),\n      ]);\n      \n      setProject(projectData);\n      setBids(bidsData);\n      setPdfUploads(uploadsData);\n      \n      // Auto-switch to compare tab if we have bids\n      if (bidsData.length >= 2) {\n        setActiveTab('compare');\n      }\n    } catch (error) {\n      console.error('Error loading project:', error);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function handleFileUpload(files: FileList) {\n    if (!projectId) return;\n    \n    setUploading(true);\n    \n    for (const file of Array.from(files)) {\n      if (file.type !== 'application/pdf') {\n        alert(`${file.name} is not a PDF file`);\n        continue;\n      }\n\n      try {\n        const result = await uploadAndExtract(projectId, file);\n        if (result.success) {\n          // Refresh data\n          await loadProjectData();\n        } else {\n          alert(`Error uploading ${file.name}: ${result.error}`);\n        }\n      } catch (error) {\n        console.error('Upload error:', error);\n        alert(`Error uploading ${file.name}`);\n      }\n    }\n    \n    setUploading(false);\n  }\n\n  const tabs = [\n    { id: 'bids' as TabId, label: 'Bids', icon: Upload, count: bids.length },\n    { id: 'compare' as TabId, label: 'Compare', icon: BarChart3, disabled: bids.length < 2 },\n    { id: 'questions' as TabId, label: 'Questions', icon: MessageSquareText, disabled: bids.length === 0 },\n    { id: 'checklist' as TabId, label: 'QII Checklist', icon: ClipboardCheck },\n  ];\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-20\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-switch-green-600\" />\n      </div>\n    );\n  }\n\n  if (!project) {\n    return (\n      <div className=\"text-center py-20\">\n        <AlertCircle className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n        <h2 className=\"text-lg font-semibold text-gray-900\">Project not found</h2>\n        <button onClick={() => navigate('/dashboard')} className=\"btn btn-primary mt-4\">\n          Back to Dashboard\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-4\">\n          <button \n            onClick={() => navigate('/dashboard')}\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n          >\n            <ArrowLeft className=\"w-5 h-5 text-gray-600\" />\n          </button>\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">{project.project_name}</h1>\n            <p className=\"text-gray-600\">{bids.length} bid{bids.length !== 1 ? 's' : ''} uploaded</p>\n          </div>\n        </div>\n        <button\n          onClick={loadProjectData}\n          className=\"btn btn-secondary\"\n          title=\"Refresh data\"\n        >\n          <RefreshCw className=\"w-4 h-4\" />\n          Refresh\n        </button>\n      </div>\n\n      {/* Processing Status Banner */}\n      {pdfUploads.some(u => u.status === 'processing') && (\n        <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-center gap-3\">\n          <Loader2 className=\"w-5 h-5 animate-spin text-blue-600\" />\n          <div>\n            <p className=\"font-medium text-blue-900\">Processing bids...</p>\n            <p className=\"text-sm text-blue-700\">\n              {pdfUploads.filter(u => u.status === 'processing').length} bid(s) are being analyzed. \n              This usually takes 1-2 minutes.\n            </p>\n          </div>\n        </div>\n      )}\n\n      {/* Tabs */}\n      <div className=\"tab-nav\">\n        {tabs.map((tab) => (\n          <button\n            key={tab.id}\n            onClick={() => !tab.disabled && setActiveTab(tab.id)}\n            disabled={tab.disabled}\n            className={`tab-btn ${activeTab === tab.id ? 'active' : ''} ${tab.disabled ? 'opacity-50 cursor-not-allowed' : ''}`}\n          >\n            <tab.icon className=\"w-4 h-4 inline mr-2\" />\n            {tab.label}\n            {tab.count !== undefined && (\n              <span className=\"ml-2 bg-gray-200 text-gray-700 text-xs px-2 py-0.5 rounded-full\">\n                {tab.count}\n              </span>\n            )}\n          </button>\n        ))}\n      </div>\n\n      {/* Tab Content */}\n      <div className=\"mt-6\">\n        {activeTab === 'bids' && (\n          <div className=\"space-y-6\">\n            {/* Upload Zone */}\n            <BidUploadZone \n              onUpload={handleFileUpload}\n              uploading={uploading}\n            />\n\n            {/* Uploaded Bids */}\n            {bids.length > 0 && (\n              <div className=\"space-y-4\">\n                <h2 className=\"text-lg font-semibold text-gray-900\">Uploaded Bids</h2>\n                <div className=\"grid gap-4\">\n                  {bids.map((bid) => (\n                    <BidCard \n                      key={bid.id} \n                      bid={bid} \n                      pdfUpload={pdfUploads.find(u => u.extracted_bid_id === bid.id)}\n                      onUpdate={loadProjectData}\n                    />\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Processing PDFs */}\n            {pdfUploads.filter(u => u.status === 'processing' || u.status === 'uploaded').length > 0 && (\n              <div className=\"space-y-4\">\n                <h2 className=\"text-lg font-semibold text-gray-900\">Processing</h2>\n                {pdfUploads\n                  .filter(u => u.status === 'processing' || u.status === 'uploaded')\n                  .map((upload) => (\n                    <div key={upload.id} className=\"card p-4 flex items-center gap-4\">\n                      <Loader2 className=\"w-5 h-5 animate-spin text-blue-600\" />\n                      <div>\n                        <p className=\"font-medium text-gray-900\">{upload.file_name}</p>\n                        <p className=\"text-sm text-gray-500\">Extracting bid information...</p>\n                      </div>\n                    </div>\n                  ))}\n              </div>\n            )}\n\n            {/* Empty State */}\n            {bids.length === 0 && pdfUploads.filter(u => u.status !== 'extracted').length === 0 && (\n              <div className=\"text-center py-8 text-gray-500\">\n                <p>Upload your first contractor bid PDF to get started</p>\n              </div>\n            )}\n          </div>\n        )}\n\n        {activeTab === 'compare' && (\n          <BidComparisonTable \n            projectId={projectId!}\n            bids={bids}\n          />\n        )}\n\n        {activeTab === 'questions' && (\n          <ContractorQuestions \n            projectId={projectId!}\n            bids={bids}\n          />\n        )}\n\n        {activeTab === 'checklist' && (\n          <QIIChecklist projectId={projectId!} />\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Plus, FileText, ArrowRight, Loader2, Trash2 } from 'lucide-react';\nimport * as db from '../lib/database/bidsmartService';\nimport type { UserExt, Project } from '../lib/types';\n\ninterface DashboardPageProps {\n  user: UserExt;\n  isReturningUser?: boolean;\n}\n\nexport function DashboardPage({ user, isReturningUser = false }: DashboardPageProps) {\n  const navigate = useNavigate();\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [creating, setCreating] = useState(false);\n\n  useEffect(() => {\n    loadProjects();\n  }, [user.id]);\n\n  async function loadProjects() {\n    try {\n      const data = await db.getProjectsByUser(user.id);\n      setProjects(data);\n    } catch (error) {\n      console.error('Error loading projects:', error);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function handleCreateProject() {\n    setCreating(true);\n    try {\n      const project = await db.createProject(user.id, {\n        project_name: 'My Heat Pump Project',\n        status: 'collecting_bids',\n      });\n      navigate(`/project/${project.id}`);\n    } catch (error) {\n      console.error('Error creating project:', error);\n      setCreating(false);\n    }\n  }\n\n  async function handleDeleteProject(projectId: string, e: React.MouseEvent) {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (!confirm('Are you sure you want to delete this project? This cannot be undone.')) {\n      return;\n    }\n\n    try {\n      await db.deleteProject(projectId);\n      setProjects(projects.filter(p => p.id !== projectId));\n    } catch (error) {\n      console.error('Error deleting project:', error);\n    }\n  }\n\n  function getStatusBadge(status: string) {\n    const statusConfig: Record<string, { label: string; className: string }> = {\n      draft: { label: 'Draft', className: 'bg-gray-100 text-gray-700' },\n      specifications: { label: 'Setting Up', className: 'bg-blue-100 text-blue-700' },\n      collecting_bids: { label: 'Collecting Bids', className: 'bg-yellow-100 text-yellow-700' },\n      analyzing: { label: 'Analyzing', className: 'status-processing' },\n      comparing: { label: 'Ready to Compare', className: 'status-complete' },\n      decided: { label: 'Decision Made', className: 'bg-green-100 text-green-700' },\n      in_progress: { label: 'In Progress', className: 'bg-purple-100 text-purple-700' },\n      completed: { label: 'Completed', className: 'bg-green-100 text-green-700' },\n      cancelled: { label: 'Cancelled', className: 'bg-gray-100 text-gray-500' },\n    };\n\n    const config = statusConfig[status] || statusConfig.draft;\n    return (\n      <span className={`status-badge ${config.className}`}>\n        {config.label}\n      </span>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-20\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-switch-green-600\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">My Projects</h1>\n          <p className=\"text-gray-600 mt-1\">\n            {isReturningUser && projects.length > 0\n              ? 'Here are your saved bid comparisons'\n              : 'Compare heat pump bids and make informed decisions'}\n          </p>\n        </div>\n        <button\n          onClick={handleCreateProject}\n          disabled={creating}\n          className=\"btn btn-primary\"\n        >\n          {creating ? (\n            <Loader2 className=\"w-4 h-4 animate-spin\" />\n          ) : (\n            <Plus className=\"w-4 h-4\" />\n          )}\n          New Project\n        </button>\n      </div>\n\n      {/* Projects List */}\n      {projects.length === 0 ? (\n        <div className=\"card text-center py-16\">\n          <FileText className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-2\">No projects yet</h2>\n          <p className=\"text-gray-600 mb-6 max-w-md mx-auto\">\n            Create your first project to start comparing heat pump bids from contractors.\n          </p>\n          <button\n            onClick={handleCreateProject}\n            disabled={creating}\n            className=\"btn btn-primary\"\n          >\n            {creating ? (\n              <Loader2 className=\"w-4 h-4 animate-spin\" />\n            ) : (\n              <Plus className=\"w-4 h-4\" />\n            )}\n            Create Your First Project\n          </button>\n        </div>\n      ) : (\n        <div className=\"grid gap-4\">\n          {projects.map((project) => (\n            <Link\n              key={project.id}\n              to={`/project/${project.id}`}\n              className=\"card p-6 hover:border-switch-green-300 hover:shadow-md transition-all group\"\n            >\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"w-12 h-12 bg-switch-green-100 rounded-lg flex items-center justify-center\">\n                    <FileText className=\"w-6 h-6 text-switch-green-600\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold text-gray-900 group-hover:text-switch-green-600 transition-colors\">\n                      {project.project_name}\n                    </h3>\n                    <div className=\"flex items-center gap-3 mt-1\">\n                      {getStatusBadge(project.status)}\n                      <span className=\"text-sm text-gray-500\">\n                        Created {new Date(project.created_at).toLocaleDateString()}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center gap-2\">\n                  <button\n                    onClick={(e) => handleDeleteProject(project.id, e)}\n                    className=\"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                    title=\"Delete project\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </button>\n                  <ArrowRight className=\"w-5 h-5 text-gray-400 group-hover:text-switch-green-600 transition-colors\" />\n                </div>\n              </div>\n            </Link>\n          ))}\n        </div>\n      )}\n\n      {/* Tips */}\n      <div className=\"bg-switch-green-50 border border-switch-green-200 rounded-xl p-6\">\n        <h3 className=\"font-semibold text-switch-green-900 mb-2\">Tips for Getting Good Bids</h3>\n        <ul className=\"text-sm text-switch-green-800 space-y-1\">\n          <li> Get at least 3 bids to have a good basis for comparison</li>\n          <li> Ask contractors to provide detailed line-item pricing</li>\n          <li> Request equipment model numbers and efficiency ratings</li>\n          <li> Verify license numbers with your state licensing board</li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n","import { User } from 'lucide-react';\nimport type { UserExt } from '../lib/types';\n\ninterface UserIndicatorProps {\n  user: UserExt;\n  isReturningUser: boolean;\n}\n\nfunction getInitials(name: string | null | undefined, email: string): string {\n  if (name) {\n    const parts = name.split(' ');\n    if (parts.length >= 2) {\n      return (parts[0][0] + parts[1][0]).toUpperCase();\n    }\n    return name.substring(0, 2).toUpperCase();\n  }\n  return email.substring(0, 2).toUpperCase();\n}\n\nexport function UserIndicator({ user, isReturningUser }: UserIndicatorProps) {\n  const displayName = user.full_name || user.email.split('@')[0];\n  const initials = getInitials(user.full_name, user.email);\n  const greeting = isReturningUser ? 'Welcome back' : 'Hello';\n\n  return (\n    <div className=\"bg-white border-b border-gray-100 px-4 py-2\">\n      <div className=\"max-w-7xl mx-auto flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-8 h-8 bg-switch-green-100 rounded-full flex items-center justify-center\">\n            {initials ? (\n              <span className=\"text-sm font-medium text-switch-green-700\">{initials}</span>\n            ) : (\n              <User className=\"w-4 h-4 text-switch-green-600\" />\n            )}\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-sm text-gray-600\">\n              {greeting}, <span className=\"font-medium text-gray-900\">{displayName}</span>\n            </span>\n            {isReturningUser && (\n              <span className=\"text-xs bg-switch-green-50 text-switch-green-700 px-2 py-0.5 rounded-full\">\n                Your projects are saved\n              </span>\n            )}\n          </div>\n        </div>\n        <span className=\"text-xs text-gray-400 hidden sm:block\">{user.email}</span>\n      </div>\n    </div>\n  );\n}\n","import { Outlet } from 'react-router-dom';\nimport { UserIndicator } from './UserIndicator';\nimport type { UserExt } from '../lib/types';\n\ninterface EmbeddedLayoutProps {\n  user: UserExt;\n  isReturningUser: boolean;\n}\n\nexport function EmbeddedLayout({ user, isReturningUser }: EmbeddedLayoutProps) {\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col\">\n      <UserIndicator user={user} isReturningUser={isReturningUser} />\n\n      <main className=\"flex-1 max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n        <Outlet />\n      </main>\n\n      <footer className=\"border-t border-gray-100 bg-white py-3\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-center gap-2 text-xs text-gray-400\">\n            <span>Powered by</span>\n            <a\n              href=\"https://theswitchison.org\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"hover:opacity-80 transition-opacity\"\n            >\n              <img\n                src=\"/sio_logo.png\"\n                alt=\"The Switch Is On\"\n                className=\"h-4\"\n              />\n            </a>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}\n","import { Routes, Route, Navigate } from 'react-router-dom';\nimport { useUser } from './hooks/useUser';\n\nimport { ProjectPage } from './pages/ProjectPage';\nimport { DashboardPage } from './pages/DashboardPage';\nimport { EmbeddedLayout } from './components/EmbeddedLayout';\n\nfunction App() {\n  const { user, loading, isReturningUser, error } = useUser();\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-switch-green-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading BidSmart...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center max-w-md mx-auto px-4\">\n          <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <span className=\"text-2xl text-red-600\">!</span>\n          </div>\n          <h1 className=\"text-xl font-semibold text-gray-900 mb-2\">Unable to Load</h1>\n          <p className=\"text-gray-600 mb-4\">\n            There was a problem connecting to the database. Please try refreshing the page.\n          </p>\n          <button\n            onClick={() => window.location.reload()}\n            className=\"btn btn-primary\"\n          >\n            Refresh Page\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Routes>\n      <Route element={<EmbeddedLayout user={user} isReturningUser={isReturningUser} />}>\n        <Route path=\"/\" element={<DashboardPage user={user} isReturningUser={isReturningUser} />} />\n        <Route path=\"/dashboard\" element={<DashboardPage user={user} isReturningUser={isReturningUser} />} />\n        <Route path=\"/project/:projectId\" element={<ProjectPage user={user} />} />\n      </Route>\n\n      <Route path=\"*\" element={<Navigate to=\"/\" />} />\n    </Routes>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>\n);\n"],"names":["f","require$$0","k","l","m","n","p","q","c","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","supabaseUrl","supabaseAnonKey","supabase","createClient","STORAGE_KEY","DEFAULT_EMAIL","DEFAULT_NAME","getUrlParams","params","email","name","getStoredUser","stored","storeUser","user","getOrCreateUserByEmail","fullName","existing","fetchError","created","createError","useUser","setUser","useState","loading","setLoading","isReturningUser","setIsReturningUser","error","setError","useEffect","initializeUser","urlParams","storedUser","userInfo","dbUser","isExisting","err","defaultAttributes","toKebabCase","string","createLucideIcon","iconName","iconNode","Component","forwardRef","color","size","strokeWidth","absoluteStrokeWidth","className","children","rest","ref","createElement","tag","attrs","AlertCircle","AlertTriangle","ArrowLeft","ArrowRight","ArrowUpDown","Award","BarChart3","CheckCircle2","Check","ChevronDown","ChevronUp","Circle","ClipboardCheck","Clock","Copy","DollarSign","FileText","Globe","HelpCircle","Info","Loader2","Mail","MessageSquareText","Phone","Plus","Printer","RefreshCw","Shield","StarOff","Star","ThermometerSun","Trash2","Upload","User","XCircle","X","Zap","createProject","userId","projectData","data","getProject","projectId","getProjectsByUser","deleteProject","getBid","bidId","getBidsByProject","updateBid","updates","toggleBidFavorite","bid","getEquipmentByBid","createPdfUpload","uploadData","getPdfUploadsByProject","updatePdfUploadStatus","uploadId","status","additionalData","updateData","uploadPdfToStorage","file","fileExt","fileName","filePath","uploadError","urlData","urlError","CALLBACK_BASE_URL","uploadAndExtract","path","url","db.uploadPdfToStorage","pdfUpload","db.createPdfUpload","project","db.getProject","request","buildExtractionRequest","triggerMindPalExtraction","db.updatePdfUploadStatus","pdfUploadId","pdfUrl","BidUploadZone","onUpload","uploading","dragOver","setDragOver","fileInputRef","useRef","handleDragOver","handleDragLeave","handleDrop","handleClick","_a","handleFileChange","jsxs","jsx","BidComparisonTable","_projectId","bids","equipment","setEquipment","view","setView","sortBy","setSortBy","sortDir","setSortDir","loadEquipment","equipMap","db.getEquipmentByBid","formatCurrency","amount","getBestValue","values","higherIsBetter","valid","v","isBestValue","value","best","sortedBids","a","aVal","bVal","handleSort","field","bestPrice","bestWarranty","bestTimeline","bestScore","getSeerRating","equip","getHspfRating","getCapacity","isVariableSpeed","isEnergyStar","bestSeer","bestHspf","tab","Fragment","seer","hspf","cert","i","totalWarranty","ContractorQuestions","questions","setQuestions","expandedBid","setExpandedBid","copiedId","setCopiedId","loadOrGenerateQuestions","questionsMap","existingQuestions","generated","generateQuestionsForBid","toInsert","inserted","seen","markAsAnswered","questionId","prev","copyAllQuestions","text","getPriorityBadge","priority","config","label","bidQuestions","unanswered","answered","isExpanded","question","index","CATEGORY_INFO","QIIChecklist","items","setItems","expandedCategory","setExpandedCategory","loadChecklist","allItems","projectStatus","statusMap","s","itemsWithStatus","item","toggleItem","isCurrentlyVerified","getProgress","total","verified","critical","criticalVerified","getCategoryItems","category","getCategoryProgress","categoryItems","handlePrint","progress","categories","info","categoryProgress","allVerified","_b","_c","BidCard","_pdfUpload","onUpdate","expanded","setExpanded","toggleFavorite","db.toggleBidFavorite","getConfidenceBadge","ProjectPage","_user","useParams","navigate","useNavigate","setProject","setBids","pdfUploads","setPdfUploads","activeTab","setActiveTab","setUploading","loadProjectData","bidsData","uploadsData","db.getBidsByProject","db.getPdfUploadsByProject","handleFileUpload","files","result","tabs","u","upload","DashboardPage","projects","setProjects","creating","setCreating","loadProjects","db.getProjectsByUser","handleCreateProject","db.createProject","handleDeleteProject","db.deleteProject","getStatusBadge","statusConfig","Link","getInitials","parts","UserIndicator","displayName","initials","greeting","EmbeddedLayout","Outlet","App","Routes","Route","Navigate","ReactDOM","React","BrowserRouter"],"mappings":"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","x_google_ignoreList":[0,1,2,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43]}