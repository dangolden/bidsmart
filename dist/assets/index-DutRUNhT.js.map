{"version":3,"file":"index-DutRUNhT.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../src/lib/supabaseClient.ts","../../src/hooks/useUser.ts","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/alert-circle.js","../../node_modules/lucide-react/dist/esm/icons/alert-triangle.js","../../node_modules/lucide-react/dist/esm/icons/arrow-right.js","../../node_modules/lucide-react/dist/esm/icons/award.js","../../node_modules/lucide-react/dist/esm/icons/bar-chart-3.js","../../node_modules/lucide-react/dist/esm/icons/calendar.js","../../node_modules/lucide-react/dist/esm/icons/check-circle-2.js","../../node_modules/lucide-react/dist/esm/icons/check-circle.js","../../node_modules/lucide-react/dist/esm/icons/check-square.js","../../node_modules/lucide-react/dist/esm/icons/check.js","../../node_modules/lucide-react/dist/esm/icons/chevron-down.js","../../node_modules/lucide-react/dist/esm/icons/chevron-right.js","../../node_modules/lucide-react/dist/esm/icons/chevron-up.js","../../node_modules/lucide-react/dist/esm/icons/circle.js","../../node_modules/lucide-react/dist/esm/icons/clipboard-check.js","../../node_modules/lucide-react/dist/esm/icons/clock.js","../../node_modules/lucide-react/dist/esm/icons/copy.js","../../node_modules/lucide-react/dist/esm/icons/dollar-sign.js","../../node_modules/lucide-react/dist/esm/icons/external-link.js","../../node_modules/lucide-react/dist/esm/icons/file-text.js","../../node_modules/lucide-react/dist/esm/icons/folder-open.js","../../node_modules/lucide-react/dist/esm/icons/globe.js","../../node_modules/lucide-react/dist/esm/icons/help-circle.js","../../node_modules/lucide-react/dist/esm/icons/home.js","../../node_modules/lucide-react/dist/esm/icons/info.js","../../node_modules/lucide-react/dist/esm/icons/mail.js","../../node_modules/lucide-react/dist/esm/icons/phone.js","../../node_modules/lucide-react/dist/esm/icons/play.js","../../node_modules/lucide-react/dist/esm/icons/plus.js","../../node_modules/lucide-react/dist/esm/icons/printer.js","../../node_modules/lucide-react/dist/esm/icons/shield.js","../../node_modules/lucide-react/dist/esm/icons/square.js","../../node_modules/lucide-react/dist/esm/icons/star.js","../../node_modules/lucide-react/dist/esm/icons/upload.js","../../node_modules/lucide-react/dist/esm/icons/users.js","../../node_modules/lucide-react/dist/esm/icons/x-circle.js","../../node_modules/lucide-react/dist/esm/icons/zap.js","../../src/lib/database/bidsmartService.ts","../../src/lib/services/sampleDataService.ts","../../src/components/DashboardPhasePreview.tsx","../../src/components/WelcomeScreen.tsx","../../src/context/PhaseContext.tsx","../../src/components/PhaseLayout.tsx","../../src/components/phases/GatherPhase.tsx","../../src/components/phases/ComparePhase.tsx","../../src/components/IncentivesTable.tsx","../../src/components/phases/DecidePhase.tsx","../../src/components/phases/VerifyPhase.tsx","../../src/components/BidSmartFlow.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * Supabase Client Configuration\n * \n * Bolt Database automatically provisions Supabase and injects these \n * environment variables. No manual setup required when using Bolt.\n */\n\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\nconst supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\n// Bolt auto-injects these - only warn in development if missing\nif (!supabaseUrl || !supabaseAnonKey) {\n  console.warn(\n    'Supabase environment variables not found. ' +\n    'If using Bolt, make sure Bolt Database is enabled for your project.'\n  );\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n  auth: {\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n  },\n});\n\n/**\n * Get the current authenticated user\n */\nexport async function getCurrentUser() {\n  const { data: { user }, error } = await supabase.auth.getUser();\n  if (error) {\n    console.error('Error getting current user:', error);\n    return null;\n  }\n  return user;\n}\n\n/**\n * Get or create user extension record\n */\nexport async function getOrCreateUserExt(authUserId: string, email: string) {\n  // First try to get existing record\n  const { data: existing, error: fetchError } = await supabase\n    .from('users_ext')\n    .select('*')\n    .eq('auth_user_id', authUserId)\n    .maybeSingle();\n\n  if (fetchError) {\n    console.error('Error fetching user_ext:', fetchError);\n    throw fetchError;\n  }\n\n  if (existing) {\n    return existing;\n  }\n\n  // Create new record\n  const { data: created, error: createError } = await supabase\n    .from('users_ext')\n    .insert({\n      auth_user_id: authUserId,\n      email: email,\n    })\n    .select()\n    .single();\n\n  if (createError) {\n    console.error('Error creating user_ext:', createError);\n    throw createError;\n  }\n\n  return created;\n}\n\nexport default supabase;\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabaseClient';\nimport type { UserExt } from '../lib/types';\n\nconst STORAGE_KEY = 'bidsmart_user';\nconst DEFAULT_EMAIL = 'demo@theswitchison.org';\nconst DEFAULT_NAME = 'Demo User';\n\ninterface StoredUser {\n  email: string;\n  name: string;\n}\n\nfunction getUrlParams(): StoredUser | null {\n  if (typeof window === 'undefined') return null;\n\n  const params = new URLSearchParams(window.location.search);\n  const email = params.get('user_email');\n  const name = params.get('user_name');\n\n  if (email) {\n    return { email, name: name || email.split('@')[0] };\n  }\n  return null;\n}\n\nfunction getStoredUser(): StoredUser | null {\n  try {\n    const stored = localStorage.getItem(STORAGE_KEY);\n    if (stored) {\n      return JSON.parse(stored);\n    }\n  } catch {\n    // Ignore parse errors\n  }\n  return null;\n}\n\nfunction storeUser(user: StoredUser): void {\n  try {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(user));\n  } catch {\n    // Ignore storage errors\n  }\n}\n\nasync function getOrCreateUserByEmail(email: string, fullName: string): Promise<UserExt> {\n  const { data: existing, error: fetchError } = await supabase\n    .from('users_ext')\n    .select('*')\n    .eq('email', email)\n    .maybeSingle();\n\n  if (fetchError) {\n    console.error('Error fetching user:', fetchError);\n    throw fetchError;\n  }\n\n  if (existing) {\n    return existing;\n  }\n\n  const { data: created, error: createError } = await supabase\n    .from('users_ext')\n    .insert({\n      email: email,\n      full_name: fullName,\n    })\n    .select()\n    .single();\n\n  if (createError) {\n    console.error('Error creating user:', createError);\n    throw createError;\n  }\n\n  return created;\n}\n\nexport interface UseUserResult {\n  user: UserExt | null;\n  loading: boolean;\n  isReturningUser: boolean;\n  error: Error | null;\n}\n\nexport function useUser(): UseUserResult {\n  const [user, setUser] = useState<UserExt | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [isReturningUser, setIsReturningUser] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  useEffect(() => {\n    async function initializeUser() {\n      try {\n        const urlParams = getUrlParams();\n        const storedUser = getStoredUser();\n\n        let userInfo: StoredUser;\n\n        if (urlParams) {\n          userInfo = urlParams;\n          storeUser(urlParams);\n        } else if (storedUser) {\n          userInfo = storedUser;\n        } else {\n          userInfo = { email: DEFAULT_EMAIL, name: DEFAULT_NAME };\n          storeUser(userInfo);\n        }\n\n        const dbUser = await getOrCreateUserByEmail(userInfo.email, userInfo.name);\n\n        const isExisting = dbUser.created_at !== dbUser.updated_at ||\n          new Date(dbUser.created_at).getTime() < Date.now() - 5000;\n\n        setUser(dbUser);\n        setIsReturningUser(isExisting);\n      } catch (err) {\n        console.error('Error initializing user:', err);\n        setError(err instanceof Error ? err : new Error('Failed to initialize user'));\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    initializeUser();\n  }, []);\n\n  return { user, loading, isReturningUser, error };\n}\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase().trim();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ color = \"currentColor\", size = 24, strokeWidth = 2, absoluteStrokeWidth, className = \"\", children, ...rest }, ref) => createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: [\"lucide\", `lucide-${toKebabCase(iconName)}`, className].join(\" \"),\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...Array.isArray(children) ? children : [children]\n      ]\n    )\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertCircle = createLucideIcon(\"AlertCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n]);\n\nexport { AlertCircle as default };\n//# sourceMappingURL=alert-circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertTriangle = createLucideIcon(\"AlertTriangle\", [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\",\n      key: \"c3ski4\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { AlertTriangle as default };\n//# sourceMappingURL=alert-triangle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowRight = createLucideIcon(\"ArrowRight\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"m12 5 7 7-7 7\", key: \"xquz4c\" }]\n]);\n\nexport { ArrowRight as default };\n//# sourceMappingURL=arrow-right.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Award = createLucideIcon(\"Award\", [\n  [\"circle\", { cx: \"12\", cy: \"8\", r: \"6\", key: \"1vp47v\" }],\n  [\"path\", { d: \"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11\", key: \"em7aur\" }]\n]);\n\nexport { Award as default };\n//# sourceMappingURL=award.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BarChart3 = createLucideIcon(\"BarChart3\", [\n  [\"path\", { d: \"M3 3v18h18\", key: \"1s2lah\" }],\n  [\"path\", { d: \"M18 17V9\", key: \"2bz60n\" }],\n  [\"path\", { d: \"M13 17V5\", key: \"1frdt8\" }],\n  [\"path\", { d: \"M8 17v-3\", key: \"17ska0\" }]\n]);\n\nexport { BarChart3 as default };\n//# sourceMappingURL=bar-chart-3.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Calendar = createLucideIcon(\"Calendar\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"4\", rx: \"2\", ry: \"2\", key: \"eu3xkr\" }],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"2\", y2: \"6\", key: \"m3sa8f\" }],\n  [\"line\", { x1: \"8\", x2: \"8\", y1: \"2\", y2: \"6\", key: \"18kwsl\" }],\n  [\"line\", { x1: \"3\", x2: \"21\", y1: \"10\", y2: \"10\", key: \"xt86sb\" }]\n]);\n\nexport { Calendar as default };\n//# sourceMappingURL=calendar.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCircle2 = createLucideIcon(\"CheckCircle2\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n]);\n\nexport { CheckCircle2 as default };\n//# sourceMappingURL=check-circle-2.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCircle = createLucideIcon(\"CheckCircle\", [\n  [\"path\", { d: \"M22 11.08V12a10 10 0 1 1-5.93-9.14\", key: \"g774vq\" }],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n]);\n\nexport { CheckCircle as default };\n//# sourceMappingURL=check-circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckSquare = createLucideIcon(\"CheckSquare\", [\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }],\n  [\"path\", { d: \"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11\", key: \"1jnkn4\" }]\n]);\n\nexport { CheckSquare as default };\n//# sourceMappingURL=check-square.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Check = createLucideIcon(\"Check\", [[\"path\", { d: \"M20 6 9 17l-5-5\", key: \"1gmf2c\" }]]);\n\nexport { Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronDown = createLucideIcon(\"ChevronDown\", [\n  [\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]\n]);\n\nexport { ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronRight = createLucideIcon(\"ChevronRight\", [\n  [\"path\", { d: \"m9 18 6-6-6-6\", key: \"mthhwq\" }]\n]);\n\nexport { ChevronRight as default };\n//# sourceMappingURL=chevron-right.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronUp = createLucideIcon(\"ChevronUp\", [[\"path\", { d: \"m18 15-6-6-6 6\", key: \"153udz\" }]]);\n\nexport { ChevronUp as default };\n//# sourceMappingURL=chevron-up.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Circle = createLucideIcon(\"Circle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n]);\n\nexport { Circle as default };\n//# sourceMappingURL=circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ClipboardCheck = createLucideIcon(\"ClipboardCheck\", [\n  [\"rect\", { width: \"8\", height: \"4\", x: \"8\", y: \"2\", rx: \"1\", ry: \"1\", key: \"tgr4d6\" }],\n  [\n    \"path\",\n    {\n      d: \"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\",\n      key: \"116196\"\n    }\n  ],\n  [\"path\", { d: \"m9 14 2 2 4-4\", key: \"df797q\" }]\n]);\n\nexport { ClipboardCheck as default };\n//# sourceMappingURL=clipboard-check.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Clock = createLucideIcon(\"Clock\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"polyline\", { points: \"12 6 12 12 16 14\", key: \"68esgv\" }]\n]);\n\nexport { Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Copy = createLucideIcon(\"Copy\", [\n  [\"rect\", { width: \"14\", height: \"14\", x: \"8\", y: \"8\", rx: \"2\", ry: \"2\", key: \"17jyea\" }],\n  [\"path\", { d: \"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\", key: \"zix9uf\" }]\n]);\n\nexport { Copy as default };\n//# sourceMappingURL=copy.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst DollarSign = createLucideIcon(\"DollarSign\", [\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"2\", y2: \"22\", key: \"7eqyqh\" }],\n  [\"path\", { d: \"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6\", key: \"1b0p4s\" }]\n]);\n\nexport { DollarSign as default };\n//# sourceMappingURL=dollar-sign.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ExternalLink = createLucideIcon(\"ExternalLink\", [\n  [\"path\", { d: \"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\", key: \"a6xqqp\" }],\n  [\"polyline\", { points: \"15 3 21 3 21 9\", key: \"mznyad\" }],\n  [\"line\", { x1: \"10\", x2: \"21\", y1: \"14\", y2: \"3\", key: \"18c3s4\" }]\n]);\n\nexport { ExternalLink as default };\n//# sourceMappingURL=external-link.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileText = createLucideIcon(\"FileText\", [\n  [\n    \"path\",\n    { d: \"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\", key: \"1nnpy2\" }\n  ],\n  [\"polyline\", { points: \"14 2 14 8 20 8\", key: \"1ew0cm\" }],\n  [\"line\", { x1: \"16\", x2: \"8\", y1: \"13\", y2: \"13\", key: \"14keom\" }],\n  [\"line\", { x1: \"16\", x2: \"8\", y1: \"17\", y2: \"17\", key: \"17nazh\" }],\n  [\"line\", { x1: \"10\", x2: \"8\", y1: \"9\", y2: \"9\", key: \"1a5vjj\" }]\n]);\n\nexport { FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FolderOpen = createLucideIcon(\"FolderOpen\", [\n  [\n    \"path\",\n    {\n      d: \"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2\",\n      key: \"usdka0\"\n    }\n  ]\n]);\n\nexport { FolderOpen as default };\n//# sourceMappingURL=folder-open.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Globe = createLucideIcon(\"Globe\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20\", key: \"13o1zl\" }],\n  [\"path\", { d: \"M2 12h20\", key: \"9i4pu4\" }]\n]);\n\nexport { Globe as default };\n//# sourceMappingURL=globe.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst HelpCircle = createLucideIcon(\"HelpCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\", key: \"1u773s\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { HelpCircle as default };\n//# sourceMappingURL=help-circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Home = createLucideIcon(\"Home\", [\n  [\"path\", { d: \"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\", key: \"y5dka4\" }],\n  [\"polyline\", { points: \"9 22 9 12 15 12 15 22\", key: \"e2us08\" }]\n]);\n\nexport { Home as default };\n//# sourceMappingURL=home.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Info = createLucideIcon(\"Info\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 16v-4\", key: \"1dtifu\" }],\n  [\"path\", { d: \"M12 8h.01\", key: \"e9boi3\" }]\n]);\n\nexport { Info as default };\n//# sourceMappingURL=info.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Mail = createLucideIcon(\"Mail\", [\n  [\"rect\", { width: \"20\", height: \"16\", x: \"2\", y: \"4\", rx: \"2\", key: \"18n3k1\" }],\n  [\"path\", { d: \"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7\", key: \"1ocrg3\" }]\n]);\n\nexport { Mail as default };\n//# sourceMappingURL=mail.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Phone = createLucideIcon(\"Phone\", [\n  [\n    \"path\",\n    {\n      d: \"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\",\n      key: \"foiqr5\"\n    }\n  ]\n]);\n\nexport { Phone as default };\n//# sourceMappingURL=phone.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Play = createLucideIcon(\"Play\", [\n  [\"polygon\", { points: \"5 3 19 12 5 21 5 3\", key: \"191637\" }]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Plus = createLucideIcon(\"Plus\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n]);\n\nexport { Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Printer = createLucideIcon(\"Printer\", [\n  [\"polyline\", { points: \"6 9 6 2 18 2 18 9\", key: \"1306q4\" }],\n  [\n    \"path\",\n    {\n      d: \"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2\",\n      key: \"143wyd\"\n    }\n  ],\n  [\"rect\", { width: \"12\", height: \"8\", x: \"6\", y: \"14\", key: \"5ipwut\" }]\n]);\n\nexport { Printer as default };\n//# sourceMappingURL=printer.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shield = createLucideIcon(\"Shield\", [\n  [\"path\", { d: \"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10\", key: \"1irkt0\" }]\n]);\n\nexport { Shield as default };\n//# sourceMappingURL=shield.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Square = createLucideIcon(\"Square\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }]\n]);\n\nexport { Square as default };\n//# sourceMappingURL=square.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Star = createLucideIcon(\"Star\", [\n  [\n    \"polygon\",\n    {\n      points: \"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\",\n      key: \"8f66p6\"\n    }\n  ]\n]);\n\nexport { Star as default };\n//# sourceMappingURL=star.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Upload = createLucideIcon(\"Upload\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"17 8 12 3 7 8\", key: \"t8dd8p\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"3\", y2: \"15\", key: \"widbto\" }]\n]);\n\nexport { Upload as default };\n//# sourceMappingURL=upload.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Users = createLucideIcon(\"Users\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"path\", { d: \"M22 21v-2a4 4 0 0 0-3-3.87\", key: \"kshegd\" }],\n  [\"path\", { d: \"M16 3.13a4 4 0 0 1 0 7.75\", key: \"1da9ce\" }]\n]);\n\nexport { Users as default };\n//# sourceMappingURL=users.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst XCircle = createLucideIcon(\"XCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m15 9-6 6\", key: \"1uzhvr\" }],\n  [\"path\", { d: \"m9 9 6 6\", key: \"z0biqf\" }]\n]);\n\nexport { XCircle as default };\n//# sourceMappingURL=x-circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Zap = createLucideIcon(\"Zap\", [\n  [\"polygon\", { points: \"13 2 3 14 12 14 11 22 21 10 12 10 13 2\", key: \"45s27k\" }]\n]);\n\nexport { Zap as default };\n//# sourceMappingURL=zap.js.map\n","/**\n * BidSmart Database Service\n * \n * Core CRUD operations for projects, bids, and related data.\n */\n\nimport { supabase } from '../supabaseClient';\nimport type {\n  Project,\n  ContractorBid,\n  BidLineItem,\n  BidEquipment,\n  BidAnalysis,\n  PdfUpload,\n  MindPalExtraction,\n  RebateProgram,\n  ProjectRebate,\n  ProjectRequirements,\n  UserExt,\n  ProjectStatus,\n  PdfStatus,\n  ProjectSummary,\n  BidComparisonTableRow,\n} from '../types';\n\n// ============================================\n// USERS\n// ============================================\n\nexport async function getUserById(userId: string): Promise<UserExt | null> {\n  const { data, error } = await supabase\n    .from('users_ext')\n    .select('*')\n    .eq('id', userId)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateUser(\n  userId: string,\n  updates: Partial<UserExt>\n): Promise<UserExt | null> {\n  const { data, error } = await supabase\n    .from('users_ext')\n    .update(updates)\n    .eq('id', userId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// PROJECTS\n// ============================================\n\nexport async function createProject(\n  userId: string,\n  projectData: Partial<Project> = {}\n): Promise<Project> {\n  const { data, error } = await supabase\n    .from('projects')\n    .insert({\n      user_id: userId,\n      project_name: projectData.project_name || 'My Heat Pump Project',\n      status: projectData.status || 'draft',\n      ...projectData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getProject(projectId: string): Promise<Project | null> {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .eq('id', projectId)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getProjectsByUser(userId: string): Promise<Project[]> {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .eq('user_id', userId)\n    .order('created_at', { ascending: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function getDemoProject(userId: string): Promise<Project | null> {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .eq('user_id', userId)\n    .eq('project_name', 'Demo: Heat Pump Comparison')\n    .order('created_at', { ascending: false })\n    .limit(1)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateProject(\n  projectId: string,\n  updates: Partial<Project>\n): Promise<Project | null> {\n  const { data, error } = await supabase\n    .from('projects')\n    .update(updates)\n    .eq('id', projectId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateProjectStatus(\n  projectId: string,\n  status: ProjectStatus\n): Promise<Project | null> {\n  return updateProject(projectId, { status });\n}\n\nexport async function updateProjectDataSharingConsent(\n  projectId: string,\n  consent: boolean\n): Promise<Project | null> {\n  const updates: Partial<Project> = {\n    data_sharing_consent: consent,\n  };\n  if (consent) {\n    updates.data_sharing_consented_at = new Date().toISOString();\n  }\n  return updateProject(projectId, updates);\n}\n\nexport async function deleteProject(projectId: string): Promise<void> {\n  const { error } = await supabase\n    .from('projects')\n    .delete()\n    .eq('id', projectId);\n\n  if (error) throw error;\n}\n\n// ============================================\n// CONTRACTOR BIDS\n// ============================================\n\nexport async function createBid(\n  projectId: string,\n  bidData: Partial<ContractorBid>\n): Promise<ContractorBid> {\n  const { data, error } = await supabase\n    .from('contractor_bids')\n    .insert({\n      project_id: projectId,\n      contractor_name: bidData.contractor_name || 'Unknown Contractor',\n      total_bid_amount: bidData.total_bid_amount || 0,\n      extraction_confidence: bidData.extraction_confidence || 'manual',\n      financing_offered: bidData.financing_offered || false,\n      verified_by_user: bidData.verified_by_user || false,\n      is_favorite: bidData.is_favorite || false,\n      ...bidData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getBid(bidId: string): Promise<ContractorBid | null> {\n  const { data, error } = await supabase\n    .from('contractor_bids')\n    .select('*')\n    .eq('id', bidId)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getBidsByProject(projectId: string): Promise<ContractorBid[]> {\n  const { data, error } = await supabase\n    .from('contractor_bids')\n    .select('*')\n    .eq('project_id', projectId)\n    .order('overall_score', { ascending: false, nullsFirst: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updateBid(\n  bidId: string,\n  updates: Partial<ContractorBid>\n): Promise<ContractorBid | null> {\n  const { data, error } = await supabase\n    .from('contractor_bids')\n    .update(updates)\n    .eq('id', bidId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function deleteBid(bidId: string): Promise<void> {\n  const { error } = await supabase\n    .from('contractor_bids')\n    .delete()\n    .eq('id', bidId);\n\n  if (error) throw error;\n}\n\nexport async function toggleBidFavorite(bidId: string): Promise<ContractorBid | null> {\n  const bid = await getBid(bidId);\n  if (!bid) return null;\n\n  return updateBid(bidId, { is_favorite: !bid.is_favorite });\n}\n\nexport async function verifyBid(bidId: string): Promise<ContractorBid | null> {\n  return updateBid(bidId, {\n    verified_by_user: true,\n    verified_at: new Date().toISOString(),\n  });\n}\n\n// ============================================\n// BID LINE ITEMS\n// ============================================\n\nexport async function createLineItem(\n  bidId: string,\n  itemData: Partial<BidLineItem>\n): Promise<BidLineItem> {\n  const { data, error } = await supabase\n    .from('bid_line_items')\n    .insert({\n      bid_id: bidId,\n      item_type: itemData.item_type || 'other',\n      description: itemData.description || '',\n      quantity: itemData.quantity || 1,\n      total_price: itemData.total_price || 0,\n      confidence: itemData.confidence || 'manual',\n      ...itemData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getLineItemsByBid(bidId: string): Promise<BidLineItem[]> {\n  const { data, error } = await supabase\n    .from('bid_line_items')\n    .select('*')\n    .eq('bid_id', bidId)\n    .order('line_order', { nullsFirst: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updateLineItem(\n  itemId: string,\n  updates: Partial<BidLineItem>\n): Promise<BidLineItem | null> {\n  const { data, error } = await supabase\n    .from('bid_line_items')\n    .update(updates)\n    .eq('id', itemId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function deleteLineItem(itemId: string): Promise<void> {\n  const { error } = await supabase\n    .from('bid_line_items')\n    .delete()\n    .eq('id', itemId);\n\n  if (error) throw error;\n}\n\nexport async function bulkCreateLineItems(\n  bidId: string,\n  items: Partial<BidLineItem>[]\n): Promise<BidLineItem[]> {\n  const itemsToInsert = items.map((item, index) => ({\n    bid_id: bidId,\n    item_type: item.item_type || 'other',\n    description: item.description || '',\n    quantity: item.quantity || 1,\n    total_price: item.total_price || 0,\n    confidence: item.confidence || 'manual',\n    line_order: index,\n    ...item,\n  }));\n\n  const { data, error } = await supabase\n    .from('bid_line_items')\n    .insert(itemsToInsert)\n    .select();\n\n  if (error) throw error;\n  return data || [];\n}\n\n// ============================================\n// BID EQUIPMENT\n// ============================================\n\nexport async function createEquipment(\n  bidId: string,\n  equipmentData: Partial<BidEquipment>\n): Promise<BidEquipment> {\n  const { data, error } = await supabase\n    .from('bid_equipment')\n    .insert({\n      bid_id: bidId,\n      equipment_type: equipmentData.equipment_type || 'other',\n      brand: equipmentData.brand || 'Unknown',\n      confidence: equipmentData.confidence || 'manual',\n      ...equipmentData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getEquipmentByBid(bidId: string): Promise<BidEquipment[]> {\n  const { data, error } = await supabase\n    .from('bid_equipment')\n    .select('*')\n    .eq('bid_id', bidId);\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updateEquipment(\n  equipmentId: string,\n  updates: Partial<BidEquipment>\n): Promise<BidEquipment | null> {\n  const { data, error } = await supabase\n    .from('bid_equipment')\n    .update(updates)\n    .eq('id', equipmentId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function deleteEquipment(equipmentId: string): Promise<void> {\n  const { error } = await supabase\n    .from('bid_equipment')\n    .delete()\n    .eq('id', equipmentId);\n\n  if (error) throw error;\n}\n\nexport async function bulkCreateEquipment(\n  bidId: string,\n  equipment: Partial<BidEquipment>[]\n): Promise<BidEquipment[]> {\n  const equipmentToInsert = equipment.map((eq) => ({\n    bid_id: bidId,\n    equipment_type: eq.equipment_type || 'other',\n    brand: eq.brand || 'Unknown',\n    confidence: eq.confidence || 'manual',\n    ...eq,\n  }));\n\n  const { data, error } = await supabase\n    .from('bid_equipment')\n    .insert(equipmentToInsert)\n    .select();\n\n  if (error) throw error;\n  return data || [];\n}\n\n// ============================================\n// BID ANALYSIS\n// ============================================\n\nexport async function createAnalysis(\n  projectId: string,\n  analysisData: Partial<BidAnalysis>\n): Promise<BidAnalysis> {\n  const { data, error } = await supabase\n    .from('bid_analysis')\n    .insert({\n      project_id: projectId,\n      analysis_version: '1.0',\n      ...analysisData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getLatestAnalysis(projectId: string): Promise<BidAnalysis | null> {\n  const { data, error } = await supabase\n    .from('bid_analysis')\n    .select('*')\n    .eq('project_id', projectId)\n    .order('created_at', { ascending: false })\n    .limit(1)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateAnalysis(\n  analysisId: string,\n  updates: Partial<BidAnalysis>\n): Promise<BidAnalysis | null> {\n  const { data, error } = await supabase\n    .from('bid_analysis')\n    .update(updates)\n    .eq('id', analysisId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// PDF UPLOADS\n// ============================================\n\nexport async function createPdfUpload(\n  projectId: string,\n  uploadData: Partial<PdfUpload>\n): Promise<PdfUpload> {\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .insert({\n      project_id: projectId,\n      file_name: uploadData.file_name || 'unknown.pdf',\n      file_path: uploadData.file_path || '',\n      status: uploadData.status || 'uploaded',\n      retry_count: 0,\n      ...uploadData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getPdfUpload(uploadId: string): Promise<PdfUpload | null> {\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .select('*')\n    .eq('id', uploadId)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getPdfUploadsByProject(projectId: string): Promise<PdfUpload[]> {\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .select('*')\n    .eq('project_id', projectId)\n    .order('uploaded_at', { ascending: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updatePdfUploadStatus(\n  uploadId: string,\n  status: PdfStatus,\n  additionalData: Partial<PdfUpload> = {}\n): Promise<PdfUpload | null> {\n  const updateData: Partial<PdfUpload> & { status: PdfStatus } = {\n    status,\n    ...additionalData,\n  };\n  if (status === 'processing') {\n    updateData.processing_started_at = new Date().toISOString();\n  }\n  if (status === 'extracted' || status === 'failed') {\n    updateData.processing_completed_at = new Date().toISOString();\n  }\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .update(updateData)\n    .eq('id', uploadId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function incrementPdfRetryCount(uploadId: string): Promise<PdfUpload | null> {\n  const upload = await getPdfUpload(uploadId);\n  if (!upload) return null;\n\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .update({ retry_count: upload.retry_count + 1 })\n    .eq('id', uploadId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// MINDPAL EXTRACTIONS\n// ============================================\n\nexport async function createMindPalExtraction(\n  pdfUploadId: string,\n  rawJson: Record<string, unknown>\n): Promise<MindPalExtraction> {\n  const { data, error } = await supabase\n    .from('mindpal_extractions')\n    .insert({\n      pdf_upload_id: pdfUploadId,\n      raw_json: rawJson,\n      parsed_successfully: false,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateMindPalExtraction(\n  extractionId: string,\n  updates: Partial<MindPalExtraction>\n): Promise<MindPalExtraction | null> {\n  const { data, error } = await supabase\n    .from('mindpal_extractions')\n    .update(updates)\n    .eq('id', extractionId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getExtractionByPdfUpload(\n  pdfUploadId: string\n): Promise<MindPalExtraction | null> {\n  const { data, error } = await supabase\n    .from('mindpal_extractions')\n    .select('*')\n    .eq('pdf_upload_id', pdfUploadId)\n    .order('extracted_at', { ascending: false })\n    .limit(1)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// REBATE PROGRAMS\n// ============================================\n\nexport async function getActiveRebates(): Promise<RebateProgram[]> {\n  const { data, error } = await supabase\n    .from('rebate_programs')\n    .select('*')\n    .eq('is_active', true)\n    .order('program_name');\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function getRebatesByState(stateCode: string): Promise<RebateProgram[]> {\n  const { data, error } = await supabase\n    .from('rebate_programs')\n    .select('*')\n    .eq('is_active', true)\n    .or(`available_nationwide.eq.true,available_states.cs.{${stateCode}}`);\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function getProjectRebates(projectId: string): Promise<Array<{\n  program: RebateProgram;\n  projectRebate: ProjectRebate;\n}>> {\n  const { data, error } = await supabase\n    .from('project_rebates')\n    .select(`\n      *,\n      rebate_programs (*)\n    `)\n    .eq('project_id', projectId);\n\n  if (error) throw error;\n\n  return (data || []).map((item: any) => ({\n    program: item.rebate_programs,\n    projectRebate: {\n      id: item.id,\n      project_id: item.project_id,\n      rebate_program_id: item.rebate_program_id,\n      is_eligible: item.is_eligible,\n      eligibility_notes: item.eligibility_notes,\n      estimated_amount: item.estimated_amount,\n      applied_amount: item.applied_amount,\n      application_status: item.application_status,\n      application_date: item.application_date,\n      approval_date: item.approval_date,\n      created_at: item.created_at,\n      updated_at: item.updated_at,\n    },\n  }));\n}\n\nexport async function addProjectRebate(\n  projectId: string,\n  rebateProgramId: string,\n  estimatedAmount?: number\n): Promise<ProjectRebate> {\n  const { data, error } = await supabase\n    .from('project_rebates')\n    .insert({\n      project_id: projectId,\n      rebate_program_id: rebateProgramId,\n      is_eligible: true,\n      estimated_amount: estimatedAmount,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// COMPOSITE QUERIES\n// ============================================\n\nexport async function getProjectSummary(projectId: string): Promise<ProjectSummary | null> {\n  // Get project\n  const project = await getProject(projectId);\n  if (!project) return null;\n\n  // Get bids with their line items and equipment\n  const bids = await getBidsByProject(projectId);\n  const bidsWithDetails: BidComparisonTableRow[] = await Promise.all(\n    bids.map(async (bid) => {\n      const [lineItems, equipment] = await Promise.all([\n        getLineItemsByBid(bid.id),\n        getEquipmentByBid(bid.id),\n      ]);\n\n      return {\n        bid,\n        equipment,\n        lineItems,\n        scores: {\n          overall: bid.overall_score || 0,\n          price: 0, // Calculated from price comparison\n          quality: bid.quality_score || 0,\n          value: bid.value_score || 0,\n          completeness: bid.completeness_score || 0,\n        },\n      };\n    })\n  );\n\n  // Get analysis\n  const analysis = await getLatestAnalysis(projectId);\n\n  // Get rebates\n  const rebates = await getProjectRebates(projectId);\n\n  // Calculate stats\n  const prices = bids.map((b) => b.total_bid_amount).filter((p) => p > 0);\n  const stats = {\n    totalBids: bids.length,\n    averagePrice: prices.length > 0 ? prices.reduce((a, b) => a + b, 0) / prices.length : 0,\n    lowestPrice: prices.length > 0 ? Math.min(...prices) : 0,\n    highestPrice: prices.length > 0 ? Math.max(...prices) : 0,\n    bestValueBidId: bids.reduce((best, bid) =>\n      (bid.value_score || 0) > (best?.value_score || 0) ? bid : best,\n      bids[0]\n    )?.id || null,\n    bestQualityBidId: bids.reduce((best, bid) =>\n      (bid.quality_score || 0) > (best?.quality_score || 0) ? bid : best,\n      bids[0]\n    )?.id || null,\n  };\n\n  return {\n    project,\n    bids: bidsWithDetails,\n    analysis,\n    rebates,\n    stats,\n  };\n}\n\n/**\n * Get project summary using the database function\n * This is more efficient as it does a single round trip\n */\nexport async function getProjectSummaryRPC(projectId: string): Promise<any> {\n  const { data, error } = await supabase.rpc('get_project_summary', {\n    p_project_id: projectId,\n  });\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// STORAGE\n// ============================================\n\nexport async function uploadPdfToStorage(\n  projectId: string,\n  file: File\n): Promise<{ path: string; url: string }> {\n  const fileExt = file.name.split('.').pop();\n  const fileName = `${Date.now()}_${Math.random().toString(36).substring(7)}.${fileExt}`;\n  const filePath = `bids/${projectId}/${fileName}`;\n\n  const { error: uploadError } = await supabase.storage\n    .from('bid-pdfs')\n    .upload(filePath, file);\n\n  if (uploadError) throw uploadError;\n\n  // Get signed URL for MindPal (expires in 1 hour)\n  const { data: urlData, error: urlError } = await supabase.storage\n    .from('bid-pdfs')\n    .createSignedUrl(filePath, 3600);\n\n  if (urlError) throw urlError;\n\n  return {\n    path: filePath,\n    url: urlData.signedUrl,\n  };\n}\n\nexport async function getPdfSignedUrl(filePath: string): Promise<string> {\n  const { data, error } = await supabase.storage\n    .from('bid-pdfs')\n    .createSignedUrl(filePath, 3600);\n\n  if (error) throw error;\n  return data.signedUrl;\n}\n\nexport async function deletePdfFromStorage(filePath: string): Promise<void> {\n  const { error } = await supabase.storage\n    .from('bid-pdfs')\n    .remove([filePath]);\n\n  if (error) throw error;\n}\n\n// ============================================\n// PROJECT REQUIREMENTS\n// ============================================\n\nexport async function getProjectRequirements(\n  projectId: string\n): Promise<ProjectRequirements | null> {\n  const { data, error } = await supabase\n    .from('project_requirements')\n    .select('*')\n    .eq('project_id', projectId)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function createProjectRequirements(\n  projectId: string,\n  requirements: Partial<ProjectRequirements> = {}\n): Promise<ProjectRequirements> {\n  const { data, error } = await supabase\n    .from('project_requirements')\n    .insert({\n      project_id: projectId,\n      priority_price: requirements.priority_price ?? 3,\n      priority_warranty: requirements.priority_warranty ?? 3,\n      priority_efficiency: requirements.priority_efficiency ?? 3,\n      priority_timeline: requirements.priority_timeline ?? 3,\n      priority_reputation: requirements.priority_reputation ?? 3,\n      timeline_urgency: requirements.timeline_urgency ?? 'flexible',\n      specific_concerns: requirements.specific_concerns ?? [],\n      must_have_features: requirements.must_have_features ?? [],\n      nice_to_have_features: requirements.nice_to_have_features ?? [],\n      ...requirements,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateProjectRequirements(\n  projectId: string,\n  updates: Partial<ProjectRequirements>\n): Promise<ProjectRequirements | null> {\n  const { data, error } = await supabase\n    .from('project_requirements')\n    .update({\n      ...updates,\n      updated_at: new Date().toISOString(),\n    })\n    .eq('project_id', projectId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function saveProjectRequirements(\n  projectId: string,\n  requirements: Partial<ProjectRequirements>\n): Promise<ProjectRequirements> {\n  const existing = await getProjectRequirements(projectId);\n\n  if (existing) {\n    const updated = await updateProjectRequirements(projectId, {\n      ...requirements,\n      completed_at: new Date().toISOString(),\n    });\n    if (!updated) throw new Error('Failed to update requirements');\n    return updated;\n  }\n\n  return createProjectRequirements(projectId, {\n    ...requirements,\n    completed_at: new Date().toISOString(),\n  });\n}\n","import type { ContractorBid, BidEquipment, BidQuestion } from '../types';\n\nexport interface SampleBidData {\n  bid: Partial<ContractorBid>;\n  equipment: Partial<BidEquipment>[];\n  questions: Partial<BidQuestion>[];\n}\n\nexport const SAMPLE_BIDS: SampleBidData[] = [\n  {\n    bid: {\n      contractor_name: 'Bay Area Heat Pump Pros',\n      contractor_company: 'Bay Area Heat Pump Pros LLC',\n      contractor_phone: '(415) 555-1234',\n      contractor_email: 'info@baheatpumppros.com',\n      contractor_license: 'CSLB #1234567',\n      contractor_license_state: 'CA',\n      contractor_website: 'https://baheatpumppros.com',\n      contractor_years_in_business: 15,\n      contractor_google_rating: 4.8,\n      contractor_google_review_count: 247,\n      contractor_certifications: ['NATE Certified', 'EPA 608', 'Carrier Factory Authorized'],\n      contractor_is_switch_preferred: true,\n      total_bid_amount: 18500,\n      labor_cost: 4500,\n      equipment_cost: 9800,\n      materials_cost: 1200,\n      permit_cost: 850,\n      total_before_rebates: 18500,\n      estimated_rebates: 3500,\n      total_after_rebates: 15000,\n      estimated_days: 2,\n      labor_warranty_years: 2,\n      equipment_warranty_years: 10,\n      deposit_required: 3700,\n      deposit_percentage: 20,\n      financing_offered: true,\n      financing_terms: '0% APR for 24 months through GreenSky',\n      scope_summary: 'Complete heat pump system installation with panel upgrade',\n      inclusions: [\n        'Remove existing gas furnace and AC',\n        'Install Carrier Infinity 26 heat pump',\n        'Install new air handler',\n        'Install Infinity Touch thermostat',\n        '200A electrical panel upgrade',\n        'Permits and inspections',\n        'System commissioning',\n        'Homeowner training',\n      ],\n      exclusions: [\n        'Ductwork modifications',\n        'Drywall repair',\n        'Landscaping restoration',\n      ],\n      extraction_confidence: 'high',\n      verified_by_user: false,\n      is_favorite: false,\n    },\n    equipment: [\n      {\n        equipment_type: 'outdoor_unit',\n        brand: 'Carrier',\n        model_number: '25VNA836A003',\n        model_name: 'Infinity 26 Heat Pump',\n        capacity_btu: 36000,\n        capacity_tons: 3.0,\n        seer_rating: 26,\n        seer2_rating: 24.5,\n        hspf_rating: 13,\n        hspf2_rating: 10.5,\n        variable_speed: true,\n        stages: 99,\n        refrigerant_type: 'R-410A',\n        sound_level_db: 51,\n        voltage: 240,\n        energy_star_certified: true,\n        energy_star_most_efficient: true,\n        equipment_cost: 7200,\n        confidence: 'high',\n      },\n      {\n        equipment_type: 'indoor_unit',\n        brand: 'Carrier',\n        model_number: 'FV4CNB003',\n        model_name: 'Infinity Series Air Handler',\n        variable_speed: true,\n        equipment_cost: 2600,\n        confidence: 'high',\n      },\n    ],\n    questions: [\n      {\n        question_text: 'What is the exact start date availability?',\n        question_category: 'timeline',\n        priority: 'high',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'Is the 10-year warranty transferable to a new homeowner?',\n        question_category: 'warranty',\n        priority: 'medium',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'Will you perform a Manual J load calculation before installation?',\n        question_category: 'scope',\n        priority: 'high',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'What happens if the 200A panel upgrade reveals additional electrical issues?',\n        question_category: 'pricing',\n        priority: 'high',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'Can you provide references from recent heat pump installations?',\n        question_category: 'credentials',\n        priority: 'medium',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'What commissioning tests will you perform after installation?',\n        question_category: 'scope',\n        priority: 'medium',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'How does the 0% APR financing work and are there any hidden fees?',\n        question_category: 'pricing',\n        priority: 'low',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'What is your process if the system does not perform as expected?',\n        question_category: 'warranty',\n        priority: 'medium',\n        is_answered: false,\n        auto_generated: true,\n      },\n    ],\n  },\n  {\n    bid: {\n      contractor_name: 'GreenTech HVAC Solutions',\n      contractor_company: 'GreenTech HVAC Solutions Inc',\n      contractor_phone: '(510) 555-9876',\n      contractor_email: 'sales@greentechhvac.com',\n      contractor_license: 'CSLB #9876543',\n      contractor_license_state: 'CA',\n      contractor_website: 'https://greentechhvac.com',\n      contractor_years_in_business: 8,\n      contractor_google_rating: 4.6,\n      contractor_google_review_count: 156,\n      contractor_certifications: ['NATE Certified', 'EPA 608', 'Mitsubishi Diamond Contractor'],\n      contractor_is_switch_preferred: false,\n      total_bid_amount: 16800,\n      labor_cost: 3800,\n      equipment_cost: 9200,\n      materials_cost: 1000,\n      permit_cost: 750,\n      total_before_rebates: 16800,\n      estimated_rebates: 3200,\n      total_after_rebates: 13600,\n      estimated_days: 3,\n      labor_warranty_years: 1,\n      equipment_warranty_years: 12,\n      deposit_required: 5040,\n      deposit_percentage: 30,\n      financing_offered: true,\n      financing_terms: '5.99% APR for 60 months',\n      scope_summary: 'Heat pump installation with existing electrical panel',\n      inclusions: [\n        'Remove existing HVAC system',\n        'Install Mitsubishi heat pump',\n        'Install air handler',\n        'Ecobee smart thermostat',\n        'Permits and inspections',\n        'System startup',\n      ],\n      exclusions: [\n        'Electrical panel upgrade (additional $2,500)',\n        'Ductwork modifications',\n        'Drywall repair',\n      ],\n      extraction_confidence: 'high',\n      verified_by_user: false,\n      is_favorite: false,\n    },\n    equipment: [\n      {\n        equipment_type: 'outdoor_unit',\n        brand: 'Mitsubishi',\n        model_number: 'SUZ-KA36NAHZ',\n        model_name: 'Hyper-Heating INVERTER',\n        capacity_btu: 36000,\n        capacity_tons: 3.0,\n        seer_rating: 20,\n        seer2_rating: 18.5,\n        hspf_rating: 12.5,\n        hspf2_rating: 10.2,\n        variable_speed: true,\n        stages: 99,\n        refrigerant_type: 'R-410A',\n        sound_level_db: 48,\n        voltage: 230,\n        energy_star_certified: true,\n        energy_star_most_efficient: false,\n        equipment_cost: 6800,\n        confidence: 'high',\n      },\n      {\n        equipment_type: 'indoor_unit',\n        brand: 'Mitsubishi',\n        model_number: 'SVZ-KP36NA',\n        model_name: 'Multi-Position Air Handler',\n        variable_speed: true,\n        equipment_cost: 2400,\n        confidence: 'high',\n      },\n    ],\n    questions: [\n      {\n        question_text: 'Will the existing electrical panel support the heat pump?',\n        question_category: 'scope',\n        priority: 'high',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'Why is the labor warranty only 1 year?',\n        question_category: 'warranty',\n        priority: 'high',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'What is included in the electrical panel upgrade if needed ($2,500)?',\n        question_category: 'pricing',\n        priority: 'high',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'Will you perform airflow measurements and duct testing?',\n        question_category: 'scope',\n        priority: 'medium',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'What is the cold weather performance of this Mitsubishi model?',\n        question_category: 'equipment',\n        priority: 'medium',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'Can you extend the labor warranty for an additional fee?',\n        question_category: 'warranty',\n        priority: 'medium',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'Why is the 30% deposit higher than typical?',\n        question_category: 'pricing',\n        priority: 'low',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'What maintenance is required to keep the 12-year warranty valid?',\n        question_category: 'warranty',\n        priority: 'medium',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'Do you offer any post-installation support or maintenance plans?',\n        question_category: 'scope',\n        priority: 'low',\n        is_answered: false,\n        auto_generated: true,\n      },\n    ],\n  },\n  {\n    bid: {\n      contractor_name: 'Comfort First Heating & Cooling',\n      contractor_company: 'Comfort First H&C',\n      contractor_phone: '(408) 555-4321',\n      contractor_email: 'quotes@comfortfirst.com',\n      contractor_license: 'CSLB #5678901',\n      contractor_license_state: 'CA',\n      contractor_years_in_business: 22,\n      contractor_google_rating: 4.9,\n      contractor_google_review_count: 412,\n      contractor_certifications: ['NATE Certified', 'EPA 608', 'Lennox Premier Dealer', 'BPI Certified'],\n      contractor_is_switch_preferred: true,\n      total_bid_amount: 21500,\n      labor_cost: 5500,\n      equipment_cost: 11500,\n      materials_cost: 1500,\n      permit_cost: 950,\n      total_before_rebates: 21500,\n      estimated_rebates: 4000,\n      total_after_rebates: 17500,\n      estimated_days: 2,\n      labor_warranty_years: 5,\n      equipment_warranty_years: 10,\n      deposit_required: 4300,\n      deposit_percentage: 20,\n      financing_offered: true,\n      financing_terms: '0% APR for 36 months or 2.99% for 72 months',\n      scope_summary: 'Premium installation with load calculation and duct sealing',\n      inclusions: [\n        'Manual J load calculation',\n        'Remove existing system',\n        'Install Lennox XP25 heat pump',\n        'Install air handler with ECM motor',\n        'iComfort S30 smart thermostat',\n        'Electrical circuit upgrade',\n        'Duct sealing and testing',\n        'Permits and inspections',\n        'Professional commissioning',\n        'First year maintenance included',\n      ],\n      exclusions: [\n        'Full ductwork replacement',\n        'Drywall repair',\n      ],\n      extraction_confidence: 'high',\n      verified_by_user: false,\n      is_favorite: false,\n    },\n    equipment: [\n      {\n        equipment_type: 'outdoor_unit',\n        brand: 'Lennox',\n        model_number: 'XP25-036-230',\n        model_name: 'XP25 Variable Capacity Heat Pump',\n        capacity_btu: 36000,\n        capacity_tons: 3.0,\n        seer_rating: 25.5,\n        seer2_rating: 23.5,\n        hspf_rating: 11.5,\n        hspf2_rating: 9.8,\n        variable_speed: true,\n        stages: 99,\n        refrigerant_type: 'R-410A',\n        sound_level_db: 59,\n        voltage: 230,\n        energy_star_certified: true,\n        energy_star_most_efficient: true,\n        equipment_cost: 8500,\n        confidence: 'high',\n      },\n      {\n        equipment_type: 'indoor_unit',\n        brand: 'Lennox',\n        model_number: 'CBX40UHV-036',\n        model_name: 'Variable Speed Air Handler',\n        variable_speed: true,\n        equipment_cost: 3000,\n        confidence: 'high',\n      },\n    ],\n    questions: [\n      {\n        question_text: 'What does the Manual J load calculation include?',\n        question_category: 'scope',\n        priority: 'medium',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'What is the justification for the higher price compared to other bids?',\n        question_category: 'pricing',\n        priority: 'high',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'What does the 5-year labor warranty cover specifically?',\n        question_category: 'warranty',\n        priority: 'high',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'What does the duct sealing and testing process involve?',\n        question_category: 'scope',\n        priority: 'medium',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'What is included in the first year maintenance?',\n        question_category: 'scope',\n        priority: 'medium',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'How does the XP25 compare to the Carrier Infinity 26 in cold weather?',\n        question_category: 'equipment',\n        priority: 'low',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'What is the sound level of this equipment compared to my current system?',\n        question_category: 'equipment',\n        priority: 'low',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'Can you walk me through the professional commissioning process?',\n        question_category: 'scope',\n        priority: 'medium',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'What happens after the first year of maintenance - what are ongoing costs?',\n        question_category: 'pricing',\n        priority: 'medium',\n        is_answered: false,\n        auto_generated: true,\n      },\n      {\n        question_text: 'Are there any additional rebates you can help me apply for?',\n        question_category: 'pricing',\n        priority: 'low',\n        is_answered: false,\n        auto_generated: true,\n      },\n    ],\n  },\n];\n\nexport const SAMPLE_REBATE_PROGRAMS = [\n  {\n    program_name: 'Federal 25C Tax Credit',\n    program_code: 'FED-25C',\n    description: 'Tax credit for energy efficient home improvements',\n    program_type: 'federal',\n    available_nationwide: true,\n    rebate_percentage: 30,\n    max_rebate: 2000,\n    income_qualified: false,\n    stackable: true,\n    is_active: true,\n  },\n  {\n    program_name: 'BayREN Home+ Rebate',\n    program_code: 'BAYREN-HP',\n    description: 'Bay Area regional heat pump rebate program',\n    program_type: 'utility',\n    available_states: ['CA'],\n    rebate_amount: 1500,\n    income_qualified: false,\n    stackable: true,\n    is_active: true,\n  },\n];\n","import { Upload, BarChart3, CheckCircle, ClipboardCheck, Play } from 'lucide-react';\n\nconst PHASES = [\n  {\n    number: 1,\n    label: 'GATHER',\n    title: 'Upload & Prioritize',\n    description: 'Upload contractor bids and set your priorities',\n    icon: Upload,\n    color: 'bg-switch-green-100 text-switch-green-700',\n  },\n  {\n    number: 2,\n    label: 'COMPARE',\n    title: 'Analyze Options',\n    description: 'Compare equipment, costs, and contractors side-by-side',\n    icon: BarChart3,\n    color: 'bg-blue-100 text-blue-700',\n  },\n  {\n    number: 3,\n    label: 'DECIDE',\n    title: 'Make Your Choice',\n    description: 'Review incentives and select your contractor',\n    icon: CheckCircle,\n    color: 'bg-amber-100 text-amber-700',\n  },\n  {\n    number: 4,\n    label: 'VERIFY',\n    title: 'Quality Check',\n    description: 'Ensure proper installation with our checklist',\n    icon: ClipboardCheck,\n    color: 'bg-purple-100 text-purple-700',\n  },\n];\n\ninterface DashboardPhasePreviewProps {\n  onStartProject?: () => void;\n  onStartDemo?: () => void;\n}\n\nexport function DashboardPhasePreview({ onStartProject, onStartDemo }: DashboardPhasePreviewProps) {\n  return (\n    <div className=\"bg-white rounded-xl border border-gray-200 p-6 mb-6\">\n      <div className=\"text-center mb-6\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-2\">\n          Your Bid Comparison Journey\n        </h2>\n        <p className=\"text-gray-600 text-sm\">\n          Follow these four simple steps to confidently choose the right heat pump contractor\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n        {PHASES.map((phase, index) => {\n          const Icon = phase.icon;\n          return (\n            <div key={phase.number} className=\"relative\">\n              <div className=\"bg-gray-50 rounded-lg p-4 h-full flex flex-col items-center text-center transition-all hover:shadow-md hover:bg-gray-100 cursor-default\">\n                <div className={`w-12 h-12 rounded-full ${phase.color} flex items-center justify-center mb-3`}>\n                  <Icon className=\"w-6 h-6\" />\n                </div>\n                <div className=\"mb-2\">\n                  <div className=\"text-xs font-semibold text-gray-500 mb-1\">\n                    STEP {phase.number}\n                  </div>\n                  <h3 className=\"font-semibold text-gray-900 text-sm mb-1\">\n                    {phase.title}\n                  </h3>\n                </div>\n                <p className=\"text-xs text-gray-600 leading-relaxed\">\n                  {phase.description}\n                </p>\n              </div>\n              {index < PHASES.length - 1 && (\n                <div className=\"hidden md:block absolute top-1/4 -right-2 w-4 h-4\">\n                  <svg\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                    className=\"w-full h-full text-gray-300\"\n                  >\n                    <path\n                      d=\"M9 5l7 7-7 7\"\n                      stroke=\"currentColor\"\n                      strokeWidth=\"2\"\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                    />\n                  </svg>\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n\n      {(onStartProject || onStartDemo) && (\n        <div className=\"text-center pt-4 border-t border-gray-100\">\n          <div className=\"flex flex-col sm:flex-row items-center justify-center gap-3\">\n            {onStartProject && (\n              <button\n                onClick={onStartProject}\n                className=\"inline-flex items-center gap-2 px-6 py-2.5 bg-switch-green-600 text-white rounded-lg font-medium hover:bg-switch-green-700 transition-colors\"\n              >\n                <Upload className=\"w-4 h-4\" />\n                Get Started with Your Bids\n              </button>\n            )}\n            {onStartDemo && (\n              <button\n                onClick={onStartDemo}\n                className=\"inline-flex items-center gap-2 px-6 py-2.5 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors\"\n              >\n                <Play className=\"w-4 h-4\" />\n                Try Demo Mode\n              </button>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { FolderOpen, Calendar, FileText, ChevronRight } from 'lucide-react';\nimport { getProjectsByUser, getDemoProject, createProject, createBid, bulkCreateEquipment } from '../lib/database/bidsmartService';\nimport { SAMPLE_BIDS, SAMPLE_REBATE_PROGRAMS } from '../lib/services/sampleDataService';\nimport { supabase } from '../lib/supabaseClient';\nimport type { UserExt, Project } from '../lib/types';\nimport { DashboardPhasePreview } from './DashboardPhasePreview';\n\ninterface WelcomeScreenProps {\n  user: UserExt;\n  onSelectProject: (projectId: string) => void;\n  onCreateProject: (projectId: string) => void;\n}\n\nexport function WelcomeScreen({ user, onSelectProject, onCreateProject }: WelcomeScreenProps) {\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadProjects();\n  }, [user.id]);\n\n  async function loadProjects() {\n    try {\n      const userProjects = await getProjectsByUser(user.id);\n      setProjects(userProjects);\n    } catch (err) {\n      console.error('Failed to load projects:', err);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function handleNewProject() {\n    try {\n      const project = await createProject(user.id, {\n        project_name: 'My Heat Pump Project',\n        status: 'collecting_bids',\n      });\n      onCreateProject(project.id);\n    } catch (err) {\n      console.error('Failed to create project:', err);\n    }\n  }\n\n  async function handleLoadDemoData() {\n    try {\n      const existingDemo = await getDemoProject(user.id);\n\n      if (existingDemo) {\n        onCreateProject(existingDemo.id);\n        return;\n      }\n\n      const project = await createProject(user.id, {\n        project_name: 'Demo: Heat Pump Comparison',\n        status: 'collecting_bids',\n        heat_pump_type: 'air_source',\n        system_size_tons: 3,\n      });\n\n      await supabase.from('project_requirements').insert({\n        project_id: project.id,\n        priority_price: 4,\n        priority_warranty: 3,\n        priority_efficiency: 4,\n        priority_timeline: 2,\n        priority_reputation: 5,\n        timeline_urgency: 'within_month',\n        specific_concerns: ['Energy efficiency', 'Long-term reliability'],\n        must_have_features: ['Variable speed compressor', 'Smart thermostat compatible'],\n        nice_to_have_features: ['Low noise operation'],\n        completed_at: new Date().toISOString(),\n      });\n\n      for (const sample of SAMPLE_BIDS) {\n        const bid = await createBid(project.id, sample.bid);\n\n        if (sample.equipment.length > 0) {\n          await bulkCreateEquipment(bid.id, sample.equipment);\n        }\n\n        if (sample.questions.length > 0) {\n          const questions = sample.questions.map((q, i) => ({\n            bid_id: bid.id,\n            ...q,\n            display_order: i,\n          }));\n          await supabase.from('bid_questions').insert(questions);\n        }\n      }\n\n      for (const rebate of SAMPLE_REBATE_PROGRAMS) {\n        const { data: existingRebate } = await supabase\n          .from('rebate_programs')\n          .select('id')\n          .eq('program_code', rebate.program_code)\n          .maybeSingle();\n\n        if (!existingRebate) {\n          await supabase.from('rebate_programs').insert(rebate);\n        }\n      }\n\n      onCreateProject(project.id);\n    } catch (err) {\n      console.error('Failed to create demo project:', err);\n    }\n  }\n\n  function formatDate(dateString: string) {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n    });\n  }\n\n  function getStatusBadge(status: string) {\n    const statusConfig: Record<string, { label: string; className: string }> = {\n      draft: { label: 'Draft', className: 'bg-gray-100 text-gray-600' },\n      collecting_bids: { label: 'Gathering Bids', className: 'bg-blue-100 text-blue-700' },\n      analyzing: { label: 'Analyzing', className: 'bg-amber-100 text-amber-700' },\n      comparing: { label: 'Comparing', className: 'bg-switch-green-100 text-switch-green-700' },\n      decided: { label: 'Decision Made', className: 'bg-switch-green-100 text-switch-green-700' },\n      completed: { label: 'Completed', className: 'bg-gray-100 text-gray-600' },\n    };\n\n    const config = statusConfig[status] || statusConfig.draft;\n    return (\n      <span className={`text-xs px-2 py-1 rounded-full font-medium ${config.className}`}>\n        {config.label}\n      </span>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-switch-green-600 mx-auto mb-4\" />\n          <p className=\"text-gray-500\">Loading your projects...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-4xl mx-auto px-4 py-12\">\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Welcome to BidSmart</h1>\n          <p className=\"text-gray-600\">\n            Compare heat pump bids with confidence.\n          </p>\n          {user.email && (\n            <p className=\"text-sm text-gray-500 mt-2\">\n              Signed in as <span className=\"font-medium\">{user.email}</span>\n            </p>\n          )}\n        </div>\n\n        <DashboardPhasePreview onStartProject={handleNewProject} onStartDemo={handleLoadDemoData} />\n\n        {projects.length > 0 && (\n          <div className=\"max-w-2xl mx-auto\">\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2\">\n              <FolderOpen className=\"w-5 h-5 text-gray-400\" />\n              Your Projects\n            </h2>\n            <div className=\"space-y-3\">\n              {projects.map((project) => (\n                <button\n                  key={project.id}\n                  onClick={() => onSelectProject(project.id)}\n                  className=\"w-full bg-white rounded-xl border border-gray-200 p-4 flex items-center gap-4 hover:border-gray-300 hover:shadow-sm transition-all text-left group\"\n                >\n                  <div className=\"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center\">\n                    <FileText className=\"w-5 h-5 text-gray-500\" />\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <h3 className=\"font-medium text-gray-900 truncate\">\n                        {project.project_name}\n                      </h3>\n                      {getStatusBadge(project.status)}\n                    </div>\n                    <div className=\"flex items-center gap-3 text-sm text-gray-500\">\n                      <span className=\"flex items-center gap-1\">\n                        <Calendar className=\"w-3.5 h-3.5\" />\n                        {formatDate(project.created_at)}\n                      </span>\n                    </div>\n                  </div>\n                  <ChevronRight className=\"w-5 h-5 text-gray-400 group-hover:text-gray-600\" />\n                </button>\n              ))}\n            </div>\n          </div>\n        )}\n\n        <div className=\"mt-12 text-center\">\n          <p className=\"text-xs text-gray-400\">\n            Powered by TheSwitchIsOn.org\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { createContext, useContext, useState, useEffect, useCallback, ReactNode } from 'react';\nimport type { Project, ContractorBid, BidEquipment, ProjectRequirements, BidQuestion } from '../lib/types';\nimport {\n  createProject,\n  getProjectsByUser,\n  getBidsByProject,\n  getEquipmentByBid,\n  getProjectRequirements,\n} from '../lib/database/bidsmartService';\nimport { supabase } from '../lib/supabaseClient';\n\nexport type Phase = 1 | 2 | 3 | 4;\nexport type PhaseStatus = 'locked' | 'active' | 'completed';\n\nconst PHASE_LABELS: Record<Phase, string> = {\n  1: 'GATHER',\n  2: 'COMPARE',\n  3: 'DECIDE',\n  4: 'VERIFY',\n};\n\ninterface BidWithEquipment {\n  bid: ContractorBid;\n  equipment: BidEquipment[];\n}\n\ninterface PhaseState {\n  currentPhase: Phase;\n  phaseStatus: Record<Phase, PhaseStatus>;\n  projectId: string | null;\n  project: Project | null;\n  bids: BidWithEquipment[];\n  requirements: ProjectRequirements | null;\n  questions: BidQuestion[];\n  loading: boolean;\n  error: string | null;\n}\n\ninterface PhaseContextValue extends PhaseState {\n  goToPhase: (phase: Phase) => void;\n  completePhase: (phase: Phase) => void;\n  canAccessPhase: (phase: Phase) => boolean;\n  refreshBids: () => Promise<void>;\n  refreshRequirements: () => Promise<void>;\n  refreshQuestions: () => Promise<void>;\n  getPhaseLabel: (phase: Phase) => string;\n}\n\nconst PhaseContext = createContext<PhaseContextValue | null>(null);\n\nconst STORAGE_KEY = 'bidsmart_phase_state';\n\ninterface StoredPhaseState {\n  currentPhase: Phase;\n  projectId: string | null;\n  phaseStatus: Record<Phase, PhaseStatus>;\n}\n\nfunction loadStoredState(): StoredPhaseState | null {\n  try {\n    const stored = localStorage.getItem(STORAGE_KEY);\n    if (stored) {\n      return JSON.parse(stored);\n    }\n  } catch {\n  }\n  return null;\n}\n\nfunction saveStoredState(state: StoredPhaseState): void {\n  try {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(state));\n  } catch {\n  }\n}\n\ninterface PhaseProviderProps {\n  children: ReactNode;\n  userId: string;\n  initialProjectId?: string;\n}\n\nexport function PhaseProvider({ children, userId, initialProjectId }: PhaseProviderProps) {\n  const [state, setState] = useState<PhaseState>({\n    currentPhase: 1,\n    phaseStatus: {\n      1: 'active',\n      2: 'locked',\n      3: 'locked',\n      4: 'locked',\n    },\n    projectId: null,\n    project: null,\n    bids: [],\n    requirements: null,\n    questions: [],\n    loading: true,\n    error: null,\n  });\n\n  useEffect(() => {\n    async function initializeProject() {\n      try {\n        const storedState = loadStoredState();\n        const existingProjects = await getProjectsByUser(userId);\n\n        let projectId: string;\n        let project: Project;\n\n        if (initialProjectId) {\n          const foundProject = existingProjects.find(p => p.id === initialProjectId);\n          if (foundProject) {\n            projectId = initialProjectId;\n            project = foundProject;\n          } else {\n            throw new Error('Project not found');\n          }\n        } else if (storedState?.projectId && existingProjects.find(p => p.id === storedState.projectId)) {\n          projectId = storedState.projectId;\n          project = existingProjects.find(p => p.id === storedState.projectId)!;\n        } else if (existingProjects.length > 0) {\n          project = existingProjects[0];\n          projectId = project.id;\n        } else {\n          project = await createProject(userId, {\n            project_name: 'My Heat Pump Project',\n            status: 'collecting_bids',\n          });\n          projectId = project.id;\n        }\n\n        const bids = await getBidsByProject(projectId);\n        const bidsWithEquipment = await Promise.all(\n          bids.map(async (bid) => ({\n            bid,\n            equipment: await getEquipmentByBid(bid.id),\n          }))\n        );\n\n        const requirements = await getProjectRequirements(projectId);\n\n        const { data: questions } = await supabase\n          .from('bid_questions')\n          .select('*')\n          .in('bid_id', bids.map(b => b.id))\n          .order('display_order', { ascending: true });\n\n        let currentPhase: Phase = 1;\n        let phaseStatus: Record<Phase, PhaseStatus> = {\n          1: 'active',\n          2: 'locked',\n          3: 'locked',\n          4: 'locked',\n        };\n\n        if (storedState && storedState.projectId === projectId) {\n          currentPhase = storedState.currentPhase;\n          phaseStatus = storedState.phaseStatus;\n        } else if (bidsWithEquipment.length >= 2 && requirements?.completed_at) {\n          phaseStatus[1] = 'completed';\n          phaseStatus[2] = 'active';\n          phaseStatus[3] = 'active';\n          phaseStatus[4] = 'active';\n          currentPhase = 2;\n        }\n\n        setState({\n          currentPhase,\n          phaseStatus,\n          projectId,\n          project,\n          bids: bidsWithEquipment,\n          requirements,\n          questions: questions || [],\n          loading: false,\n          error: null,\n        });\n\n        saveStoredState({ currentPhase, projectId, phaseStatus });\n      } catch (err) {\n        console.error('Failed to initialize project:', err);\n        setState(prev => ({\n          ...prev,\n          loading: false,\n          error: 'Failed to load project data',\n        }));\n      }\n    }\n\n    initializeProject();\n  }, [userId, initialProjectId]);\n\n  const canAccessPhase = useCallback((phase: Phase): boolean => {\n    return state.phaseStatus[phase] !== 'locked';\n  }, [state.phaseStatus]);\n\n  const goToPhase = useCallback((phase: Phase) => {\n    if (!canAccessPhase(phase)) return;\n\n    setState(prev => {\n      const newState = { ...prev, currentPhase: phase };\n      saveStoredState({\n        currentPhase: phase,\n        projectId: prev.projectId,\n        phaseStatus: prev.phaseStatus,\n      });\n      return newState;\n    });\n  }, [canAccessPhase]);\n\n  const completePhase = useCallback((phase: Phase) => {\n    setState(prev => {\n      const newPhaseStatus = { ...prev.phaseStatus };\n      newPhaseStatus[phase] = 'completed';\n\n      if (phase === 1) {\n        newPhaseStatus[2] = 'active';\n        newPhaseStatus[3] = 'active';\n        newPhaseStatus[4] = 'active';\n      } else {\n        const nextPhase = (phase + 1) as Phase;\n        if (nextPhase <= 4 && newPhaseStatus[nextPhase] === 'locked') {\n          newPhaseStatus[nextPhase] = 'active';\n        }\n      }\n\n      const nextPhase = (phase + 1) as Phase;\n      const newCurrentPhase = nextPhase <= 4 ? nextPhase : phase;\n\n      saveStoredState({\n        currentPhase: newCurrentPhase,\n        projectId: prev.projectId,\n        phaseStatus: newPhaseStatus,\n      });\n\n      return {\n        ...prev,\n        currentPhase: newCurrentPhase,\n        phaseStatus: newPhaseStatus,\n      };\n    });\n  }, []);\n\n  const refreshBids = useCallback(async () => {\n    if (!state.projectId) return;\n\n    const bids = await getBidsByProject(state.projectId);\n    const bidsWithEquipment = await Promise.all(\n      bids.map(async (bid) => ({\n        bid,\n        equipment: await getEquipmentByBid(bid.id),\n      }))\n    );\n\n    setState(prev => ({ ...prev, bids: bidsWithEquipment }));\n  }, [state.projectId]);\n\n  const refreshRequirements = useCallback(async () => {\n    if (!state.projectId) return;\n\n    const requirements = await getProjectRequirements(state.projectId);\n    setState(prev => ({ ...prev, requirements }));\n  }, [state.projectId]);\n\n  const refreshQuestions = useCallback(async () => {\n    if (!state.projectId || state.bids.length === 0) return;\n\n    const { data: questions } = await supabase\n      .from('bid_questions')\n      .select('*')\n      .in('bid_id', state.bids.map(b => b.bid.id))\n      .order('display_order', { ascending: true });\n\n    setState(prev => ({ ...prev, questions: questions || [] }));\n  }, [state.projectId, state.bids]);\n\n  const getPhaseLabel = useCallback((phase: Phase): string => {\n    return PHASE_LABELS[phase];\n  }, []);\n\n  const value: PhaseContextValue = {\n    ...state,\n    goToPhase,\n    completePhase,\n    canAccessPhase,\n    refreshBids,\n    refreshRequirements,\n    refreshQuestions,\n    getPhaseLabel,\n  };\n\n  return (\n    <PhaseContext.Provider value={value}>\n      {children}\n    </PhaseContext.Provider>\n  );\n}\n\nexport function usePhase(): PhaseContextValue {\n  const context = useContext(PhaseContext);\n  if (!context) {\n    throw new Error('usePhase must be used within a PhaseProvider');\n  }\n  return context;\n}\n","import { ReactNode } from 'react';\nimport { Check, Home, ChevronRight } from 'lucide-react';\nimport { usePhase, Phase } from '../context/PhaseContext';\n\ninterface PhaseLayoutProps {\n  children: ReactNode;\n  onNavigateHome?: () => void;\n  projectName?: string;\n}\n\nconst PHASES: { phase: Phase; label: string }[] = [\n  { phase: 1, label: 'GATHER' },\n  { phase: 2, label: 'COMPARE' },\n  { phase: 3, label: 'DECIDE' },\n  { phase: 4, label: 'VERIFY' },\n];\n\nexport function PhaseLayout({ children, onNavigateHome, projectName }: PhaseLayoutProps) {\n  const { currentPhase, phaseStatus, goToPhase, canAccessPhase } = usePhase();\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col\">\n      <div className=\"bg-white border-b border-gray-200 sticky top-0 z-10\">\n        <div className=\"max-w-4xl mx-auto px-4 py-4\">\n          {onNavigateHome && (\n            <div className=\"flex items-center gap-2 mb-4 pb-3 border-b border-gray-100\">\n              <button\n                onClick={onNavigateHome}\n                className=\"flex items-center gap-2 text-gray-600 hover:text-switch-green-600 transition-colors group\"\n                aria-label=\"Return to Bid Compare Dashboard\"\n              >\n                <div className=\"w-8 h-8 rounded-lg bg-gray-100 group-hover:bg-switch-green-100 flex items-center justify-center transition-colors\">\n                  <Home className=\"w-4 h-4\" />\n                </div>\n                <span className=\"text-sm font-medium hidden sm:inline\">Dashboard</span>\n              </button>\n              <ChevronRight className=\"w-4 h-4 text-gray-300\" />\n              <span className=\"text-sm font-medium text-gray-900 truncate max-w-[200px] sm:max-w-none\">\n                {projectName || 'Current Project'}\n              </span>\n            </div>\n          )}\n          <div className=\"flex items-center justify-between\">\n            {PHASES.map((item, index) => {\n              const status = phaseStatus[item.phase];\n              const isActive = currentPhase === item.phase;\n              const isClickable = canAccessPhase(item.phase);\n\n              return (\n                <div key={item.phase} className=\"flex items-center flex-1\">\n                  <button\n                    onClick={() => isClickable && goToPhase(item.phase)}\n                    disabled={!isClickable}\n                    className={`\n                      flex items-center gap-2 transition-all\n                      ${isClickable ? 'cursor-pointer' : 'cursor-not-allowed'}\n                      ${isActive ? 'opacity-100' : isClickable ? 'opacity-70 hover:opacity-100' : 'opacity-40'}\n                    `}\n                  >\n                    <div\n                      className={`\n                        w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold transition-colors\n                        ${status === 'completed' ? 'bg-switch-green-600 text-white' : ''}\n                        ${status === 'active' && isActive ? 'bg-switch-green-600 text-white' : ''}\n                        ${status === 'active' && !isActive ? 'bg-switch-green-100 text-switch-green-700 border-2 border-switch-green-600' : ''}\n                        ${status === 'locked' ? 'bg-gray-200 text-gray-400' : ''}\n                      `}\n                    >\n                      {status === 'completed' ? (\n                        <Check className=\"w-4 h-4\" />\n                      ) : (\n                        item.phase\n                      )}\n                    </div>\n                    <span\n                      className={`\n                        text-sm font-medium hidden sm:block\n                        ${isActive ? 'text-gray-900' : 'text-gray-500'}\n                      `}\n                    >\n                      {item.label}\n                    </span>\n                  </button>\n\n                  {index < PHASES.length - 1 && (\n                    <div className=\"flex-1 mx-3\">\n                      <div\n                        className={`\n                          h-0.5 transition-colors\n                          ${phaseStatus[(index + 2) as Phase] !== 'locked' || phaseStatus[(index + 1) as Phase] === 'completed'\n                            ? 'bg-switch-green-600'\n                            : 'bg-gray-200'\n                          }\n                        `}\n                      />\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n\n          <div className=\"mt-3\">\n            <div className=\"h-1 bg-gray-100 rounded-full overflow-hidden\">\n              <div\n                className=\"h-full bg-switch-green-600 transition-all duration-500\"\n                style={{\n                  width: `${((currentPhase - 1) / 3) * 100 + (phaseStatus[currentPhase] === 'completed' ? 25 : 0)}%`,\n                }}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <main className=\"flex-1 max-w-4xl w-full mx-auto px-4 py-6\">\n        {children}\n      </main>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { Upload, FileText, CheckCircle2, Clock, AlertCircle, Plus, ArrowRight, Users, Shield } from 'lucide-react';\nimport { usePhase } from '../../context/PhaseContext';\nimport { saveProjectRequirements, updateProjectDataSharingConsent } from '../../lib/database/bidsmartService';\n\ninterface PrioritySliderProps {\n  label: string;\n  value: number;\n  onChange: (value: number) => void;\n  description: string;\n}\n\nfunction PrioritySlider({ label, value, onChange, description }: PrioritySliderProps) {\n  return (\n    <div className=\"space-y-2\">\n      <div className=\"flex items-center justify-between\">\n        <label className=\"text-sm font-medium text-gray-700\">{label}</label>\n        <span className=\"text-sm text-gray-500\">{value}/5</span>\n      </div>\n      <input\n        type=\"range\"\n        min=\"1\"\n        max=\"5\"\n        value={value}\n        onChange={(e) => onChange(parseInt(e.target.value))}\n        className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-switch-green-600\"\n      />\n      <p className=\"text-xs text-gray-500\">{description}</p>\n    </div>\n  );\n}\n\nexport function GatherPhase() {\n  const { projectId, project, bids, requirements, completePhase, refreshRequirements } = usePhase();\n\n  const [priorities, setPriorities] = useState({\n    price: requirements?.priority_price ?? 3,\n    efficiency: requirements?.priority_efficiency ?? 3,\n    warranty: requirements?.priority_warranty ?? 3,\n    reputation: requirements?.priority_reputation ?? 3,\n    timeline: requirements?.priority_timeline ?? 3,\n  });\n\n  const [saving, setSaving] = useState(false);\n  const [dragActive, setDragActive] = useState(false);\n  const [dataSharingConsent, setDataSharingConsent] = useState(project?.data_sharing_consent ?? false);\n  const [showPrivacyDetails, setShowPrivacyDetails] = useState(false);\n\n  useEffect(() => {\n    if (requirements) {\n      setPriorities({\n        price: requirements.priority_price ?? 3,\n        efficiency: requirements.priority_efficiency ?? 3,\n        warranty: requirements.priority_warranty ?? 3,\n        reputation: requirements.priority_reputation ?? 3,\n        timeline: requirements.priority_timeline ?? 3,\n      });\n    }\n  }, [requirements]);\n\n  useEffect(() => {\n    if (project) {\n      setDataSharingConsent(project.data_sharing_consent ?? false);\n    }\n  }, [project]);\n\n  const readyBids = bids.filter(b =>\n    b.bid.total_bid_amount > 0 && b.bid.contractor_name\n  );\n\n  const canContinue = readyBids.length >= 2;\n\n  const handleDrag = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n  };\n\n  const handleContinue = async () => {\n    if (!projectId || !canContinue) return;\n\n    setSaving(true);\n    try {\n      await saveProjectRequirements(projectId, {\n        priority_price: priorities.price,\n        priority_efficiency: priorities.efficiency,\n        priority_warranty: priorities.warranty,\n        priority_reputation: priorities.reputation,\n        priority_timeline: priorities.timeline,\n      });\n      await updateProjectDataSharingConsent(projectId, dataSharingConsent);\n      await refreshRequirements();\n      completePhase(1);\n    } catch (err) {\n      console.error('Failed to save requirements:', err);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(amount);\n  };\n\n  const getBidStatusIcon = (bid: typeof bids[0]) => {\n    if (bid.bid.total_bid_amount > 0) {\n      return <CheckCircle2 className=\"w-5 h-5 text-switch-green-600\" />;\n    }\n    return <Clock className=\"w-5 h-5 text-amber-500\" />;\n  };\n\n  const getBidStatusText = (bid: typeof bids[0]) => {\n    if (bid.bid.total_bid_amount > 0) {\n      return 'Ready';\n    }\n    return 'Processing';\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Gather Your Bids</h1>\n        <p className=\"text-gray-600 mt-1\">\n          Upload at least 2 contractor bids to compare, then tell us what matters most to you.\n        </p>\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2\">\n          <Upload className=\"w-5 h-5 text-switch-green-600\" />\n          Upload Your Bids\n        </h2>\n\n        <div\n          onDragEnter={handleDrag}\n          onDragLeave={handleDrag}\n          onDragOver={handleDrag}\n          onDrop={handleDrop}\n          className={`\n            border-2 border-dashed rounded-xl p-8 text-center transition-colors\n            ${dragActive ? 'border-switch-green-500 bg-switch-green-50' : 'border-gray-300 hover:border-gray-400'}\n          `}\n        >\n          <div className=\"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <FileText className=\"w-6 h-6 text-gray-400\" />\n          </div>\n          <p className=\"text-gray-600 mb-2\">Drag and drop PDF bid documents here</p>\n          <p className=\"text-sm text-gray-400 mb-4\">or</p>\n          <button className=\"btn btn-secondary\">\n            Browse Files\n          </button>\n          <p className=\"text-xs text-gray-400 mt-4\">\n            Supported formats: PDF (max 10MB each)\n          </p>\n        </div>\n\n        {bids.length > 0 && (\n          <div className=\"mt-6 space-y-3\">\n            <h3 className=\"text-sm font-medium text-gray-700\">Uploaded Bids ({bids.length})</h3>\n            {bids.map((item) => (\n              <div\n                key={item.bid.id}\n                className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"\n              >\n                <div className=\"flex items-center gap-3\">\n                  <FileText className=\"w-5 h-5 text-gray-400\" />\n                  <div>\n                    <p className=\"font-medium text-gray-900\">\n                      {item.bid.contractor_name || item.bid.contractor_company || 'Unknown Contractor'}\n                    </p>\n                    <p className=\"text-sm text-gray-500\">\n                      {item.bid.total_bid_amount > 0 ? formatCurrency(item.bid.total_bid_amount) : 'Processing...'}\n                    </p>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span className={`text-sm ${item.bid.total_bid_amount > 0 ? 'text-switch-green-600' : 'text-amber-500'}`}>\n                    {getBidStatusText(item)}\n                  </span>\n                  {getBidStatusIcon(item)}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        <button className=\"btn btn-secondary w-full mt-4 flex items-center justify-center gap-2\">\n          <Plus className=\"w-4 h-4\" />\n          Add Another Bid\n        </button>\n\n        {bids.length < 2 && (\n          <div className=\"mt-4 flex items-start gap-2 text-amber-600 bg-amber-50 rounded-lg p-3\">\n            <AlertCircle className=\"w-5 h-5 flex-shrink-0 mt-0.5\" />\n            <p className=\"text-sm\">\n              You need at least 2 bids to compare. {bids.length === 0 ? 'Upload your first bid to get started.' : 'Upload 1 more bid to continue.'}\n            </p>\n          </div>\n        )}\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-2\">What Matters Most to You?</h2>\n        <p className=\"text-sm text-gray-600 mb-6\">\n          Adjust these sliders to reflect your priorities. We will use these to highlight the best options for you.\n        </p>\n\n        <div className=\"space-y-6\">\n          <PrioritySlider\n            label=\"Upfront Cost\"\n            value={priorities.price}\n            onChange={(v) => setPriorities(p => ({ ...p, price: v }))}\n            description=\"How important is getting the lowest price?\"\n          />\n\n          <PrioritySlider\n            label=\"Energy Efficiency / Long-term Savings\"\n            value={priorities.efficiency}\n            onChange={(v) => setPriorities(p => ({ ...p, efficiency: v }))}\n            description=\"Higher efficiency means lower utility bills over time\"\n          />\n\n          <PrioritySlider\n            label=\"Warranty Length\"\n            value={priorities.warranty}\n            onChange={(v) => setPriorities(p => ({ ...p, warranty: v }))}\n            description=\"Longer warranties provide peace of mind\"\n          />\n\n          <PrioritySlider\n            label=\"Contractor Reputation\"\n            value={priorities.reputation}\n            onChange={(v) => setPriorities(p => ({ ...p, reputation: v }))}\n            description=\"Experience, reviews, and certifications\"\n          />\n\n          <PrioritySlider\n            label=\"Installation Timeline\"\n            value={priorities.timeline}\n            onChange={(v) => setPriorities(p => ({ ...p, timeline: v }))}\n            description=\"How quickly can they complete the work?\"\n          />\n        </div>\n      </div>\n\n      <div className=\"bg-gray-50 rounded-xl border border-gray-200 p-5\">\n        <label className=\"flex items-start gap-3 cursor-pointer group\">\n          <div className=\"pt-0.5\">\n            <input\n              type=\"checkbox\"\n              checked={dataSharingConsent}\n              onChange={(e) => setDataSharingConsent(e.target.checked)}\n              className=\"w-5 h-5 rounded border-gray-300 text-switch-green-600 focus:ring-switch-green-500 focus:ring-offset-0 cursor-pointer\"\n            />\n          </div>\n          <div className=\"flex-1\">\n            <div className=\"flex items-center gap-2 mb-1\">\n              <Users className=\"w-4 h-4 text-switch-green-600\" />\n              <span className=\"font-medium text-gray-900\">\n                Help other homeowners by sharing anonymized bid data\n              </span>\n            </div>\n            <p className=\"text-sm text-gray-600 leading-relaxed\">\n              Your pricing data helps others understand fair market rates in your area.\n              All personal and contractor details are removed before sharing.\n            </p>\n            <button\n              type=\"button\"\n              onClick={(e) => {\n                e.preventDefault();\n                setShowPrivacyDetails(!showPrivacyDetails);\n              }}\n              className=\"text-sm text-switch-green-600 hover:text-switch-green-700 mt-2 flex items-center gap-1\"\n            >\n              <Shield className=\"w-3.5 h-3.5\" />\n              {showPrivacyDetails ? 'Hide privacy details' : 'What data is shared?'}\n            </button>\n\n            {showPrivacyDetails && (\n              <div className=\"mt-3 p-4 bg-white rounded-lg border border-gray-200 text-sm text-gray-600\">\n                <p className=\"font-medium text-gray-900 mb-2\">Data that IS shared (anonymized):</p>\n                <ul className=\"list-disc list-inside space-y-1 mb-4\">\n                  <li>Bid amounts and pricing breakdowns</li>\n                  <li>Equipment types, efficiency ratings, and specifications</li>\n                  <li>General location (ZIP code area only)</li>\n                  <li>Project scope (system size, features included)</li>\n                </ul>\n                <p className=\"font-medium text-gray-900 mb-2\">Data that is NEVER shared:</p>\n                <ul className=\"list-disc list-inside space-y-1\">\n                  <li>Your name, email, or contact information</li>\n                  <li>Your exact address</li>\n                  <li>Contractor names or contact details</li>\n                  <li>Original PDF documents</li>\n                </ul>\n                <p className=\"mt-4 text-gray-500 text-xs\">\n                  You can change this preference at any time in your project settings.\n                </p>\n              </div>\n            )}\n          </div>\n        </label>\n      </div>\n\n      <div className=\"flex justify-end\">\n        <button\n          onClick={handleContinue}\n          disabled={!canContinue || saving}\n          className=\"btn btn-primary flex items-center gap-2 px-6\"\n        >\n          {saving ? 'Saving...' : 'Continue to Compare'}\n          <ArrowRight className=\"w-4 h-4\" />\n        </button>\n      </div>\n\n      {!canContinue && (\n        <p className=\"text-center text-sm text-gray-500\">\n          Upload at least 2 bids to continue\n        </p>\n      )}\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { ArrowRight, Award, Zap, DollarSign, Star, CheckCircle, XCircle, ChevronDown, ChevronUp } from 'lucide-react';\nimport { usePhase } from '../../context/PhaseContext';\n\ntype CompareTab = 'equipment' | 'contractors' | 'costs';\n\ninterface TabConfig {\n  key: CompareTab;\n  label: string;\n  description: string;\n  icon: React.ReactNode;\n}\n\nconst LABEL_COL_WIDTH = '200px';\nconst BID_COL_MIN_WIDTH = '180px';\n\nexport function ComparePhase() {\n  const { bids, requirements, completePhase } = usePhase();\n  const [activeTab, setActiveTab] = useState<CompareTab>('equipment');\n  const [showMoreEquipment, setShowMoreEquipment] = useState(false);\n  const [showMoreContractors, setShowMoreContractors] = useState(false);\n  const [showMoreCosts, setShowMoreCosts] = useState(false);\n\n  const formatCurrency = (amount: number | null | undefined) => {\n    if (!amount) return '-';\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(amount);\n  };\n\n  const formatDate = (dateString: string | null | undefined) => {\n    if (!dateString) return '-';\n    return new Date(dateString).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n    });\n  };\n\n  const getHighestValue = (\n    values: (number | null | undefined)[],\n    higherIsBetter = true\n  ): number | null => {\n    const validValues = values.filter((v): v is number => v != null);\n    if (validValues.length === 0) return null;\n    return higherIsBetter ? Math.max(...validValues) : Math.min(...validValues);\n  };\n\n  const isHighlighted = (\n    value: number | null | undefined,\n    bestValue: number | null\n  ): boolean => {\n    if (value == null || bestValue == null) return false;\n    return value === bestValue;\n  };\n\n  const tabs: TabConfig[] = [\n    {\n      key: 'equipment',\n      label: 'Equipment',\n      description: 'Specs, efficiency ratings, and features',\n      icon: <Zap className=\"w-5 h-5\" />\n    },\n    {\n      key: 'contractors',\n      label: 'Contractors',\n      description: 'Experience, ratings, and certifications',\n      icon: <Award className=\"w-5 h-5\" />\n    },\n    {\n      key: 'costs',\n      label: 'Costs',\n      description: 'Pricing, warranties, and inclusions',\n      icon: <DollarSign className=\"w-5 h-5\" />\n    },\n  ];\n\n  const getEquipmentData = () => {\n    return bids.map((b) => {\n      const mainEquipment = b.equipment.find(\n        (e) => e.equipment_type === 'outdoor_unit' || e.equipment_type === 'heat_pump'\n      ) || b.equipment[0];\n\n      return {\n        bidId: b.bid.id,\n        contractor: b.bid.contractor_name || b.bid.contractor_company || 'Unknown',\n        brand: mainEquipment?.brand || '-',\n        model: mainEquipment?.model_number || mainEquipment?.model_name || '-',\n        seer2: mainEquipment?.seer2_rating || mainEquipment?.seer_rating,\n        hspf2: mainEquipment?.hspf2_rating || mainEquipment?.hspf_rating,\n        capacityTons: mainEquipment?.capacity_tons,\n        capacityBtu: mainEquipment?.capacity_btu,\n        variableSpeed: mainEquipment?.variable_speed,\n        soundLevel: mainEquipment?.sound_level_db,\n        energyStar: mainEquipment?.energy_star_certified,\n        energyStarMostEfficient: mainEquipment?.energy_star_most_efficient,\n        refrigerantType: mainEquipment?.refrigerant_type,\n        voltage: mainEquipment?.voltage,\n        stages: mainEquipment?.stages,\n        cop: mainEquipment?.cop,\n        eer: mainEquipment?.eer_rating,\n        compressorWarranty: mainEquipment?.compressor_warranty_years,\n      };\n    });\n  };\n\n  const getContractorData = () => {\n    return bids.map((b) => ({\n      bidId: b.bid.id,\n      contractor: b.bid.contractor_name || b.bid.contractor_company || 'Unknown',\n      yearsInBusiness: b.bid.contractor_years_in_business,\n      yearEstablished: b.bid.contractor_year_established,\n      googleRating: b.bid.contractor_google_rating,\n      reviewCount: b.bid.contractor_google_review_count,\n      certifications: b.bid.contractor_certifications || [],\n      license: b.bid.contractor_license,\n      licenseState: b.bid.contractor_license_state,\n      insuranceVerified: b.bid.contractor_insurance_verified,\n      isSwitchPreferred: b.bid.contractor_is_switch_preferred,\n      phone: b.bid.contractor_phone,\n      email: b.bid.contractor_email,\n      website: b.bid.contractor_website,\n      totalInstalls: b.bid.contractor_total_installs,\n    }));\n  };\n\n  const getCostData = () => {\n    return bids.map((b) => ({\n      bidId: b.bid.id,\n      contractor: b.bid.contractor_name || b.bid.contractor_company || 'Unknown',\n      totalAmount: b.bid.total_bid_amount,\n      equipmentCost: b.bid.equipment_cost,\n      laborCost: b.bid.labor_cost,\n      materialsCost: b.bid.materials_cost,\n      permitCost: b.bid.permit_cost,\n      laborWarranty: b.bid.labor_warranty_years,\n      equipmentWarranty: b.bid.equipment_warranty_years,\n      financingAvailable: b.bid.financing_offered,\n      financingTerms: b.bid.financing_terms,\n      inclusions: b.bid.inclusions || [],\n      exclusions: b.bid.exclusions || [],\n      estimatedDays: b.bid.estimated_days,\n      startDateAvailable: b.bid.start_date_available,\n      validUntil: b.bid.valid_until,\n      bidDate: b.bid.bid_date,\n      depositRequired: b.bid.deposit_required,\n      depositPercentage: b.bid.deposit_percentage,\n      paymentSchedule: b.bid.payment_schedule,\n    }));\n  };\n\n  const equipmentData = getEquipmentData();\n  const contractorData = getContractorData();\n  const costData = getCostData();\n\n  const bestSeer = getHighestValue(equipmentData.map((e) => e.seer2));\n  const bestHspf = getHighestValue(equipmentData.map((e) => e.hspf2));\n  const bestYears = getHighestValue(contractorData.map((c) => c.yearsInBusiness));\n  const bestRating = getHighestValue(contractorData.map((c) => c.googleRating));\n  const lowestPrice = getHighestValue(costData.map((c) => c.totalAmount), false);\n  const bestLaborWarranty = getHighestValue(costData.map((c) => c.laborWarranty));\n  const bestEquipmentWarranty = getHighestValue(costData.map((c) => c.equipmentWarranty));\n  const fastestTimeline = getHighestValue(costData.map((c) => c.estimatedDays), false);\n\n  const getRecommendation = () => {\n    if (!requirements || bids.length === 0) return null;\n\n    let bestBidId: string | null = null;\n    let bestScore = -1;\n\n    bids.forEach((b) => {\n      const eq = equipmentData.find((e) => e.bidId === b.bid.id);\n      const cost = costData.find((c) => c.bidId === b.bid.id);\n      const contr = contractorData.find((c) => c.bidId === b.bid.id);\n\n      let score = 0;\n\n      if (cost?.totalAmount && lowestPrice) {\n        const priceScore = (lowestPrice / cost.totalAmount) * requirements.priority_price;\n        score += priceScore;\n      }\n\n      if (eq?.seer2 && bestSeer) {\n        const effScore = (eq.seer2 / bestSeer) * requirements.priority_efficiency;\n        score += effScore;\n      }\n\n      if (cost?.laborWarranty && bestLaborWarranty) {\n        const warrantyScore = (cost.laborWarranty / bestLaborWarranty) * requirements.priority_warranty;\n        score += warrantyScore;\n      }\n\n      if (contr?.googleRating && bestRating) {\n        const repScore = (contr.googleRating / bestRating) * requirements.priority_reputation;\n        score += repScore;\n      }\n\n      if (score > bestScore) {\n        bestScore = score;\n        bestBidId = b.bid.id;\n      }\n    });\n\n    const bestBid = bids.find((b) => b.bid.id === bestBidId);\n    if (!bestBid) return null;\n\n    return {\n      contractor: bestBid.bid.contractor_name || bestBid.bid.contractor_company || 'Unknown',\n      reason: generateReasonText(bestBid.bid.id),\n    };\n  };\n\n  const generateReasonText = (bidId: string) => {\n    const reasons: string[] = [];\n    const cost = costData.find((c) => c.bidId === bidId);\n    const eq = equipmentData.find((e) => e.bidId === bidId);\n\n    if (cost?.totalAmount === lowestPrice) {\n      reasons.push('lowest price');\n    }\n    if (eq?.seer2 === bestSeer) {\n      reasons.push('highest efficiency');\n    }\n    if (cost?.laborWarranty === bestLaborWarranty && bestLaborWarranty && bestLaborWarranty > 1) {\n      reasons.push('best warranty');\n    }\n\n    if (reasons.length === 0) {\n      reasons.push('best overall balance of your priorities');\n    }\n\n    return `Based on your priorities, this bid offers the ${reasons.join(', ')}.`;\n  };\n\n  const recommendation = getRecommendation();\n\n  const handleContinue = () => {\n    completePhase(2);\n  };\n\n  const bidCount = bids.length;\n  const tableMinWidth = `calc(${LABEL_COL_WIDTH} + (${bidCount} * ${BID_COL_MIN_WIDTH}))`;\n\n  const labelCellStyle = { width: LABEL_COL_WIDTH, minWidth: LABEL_COL_WIDTH, maxWidth: LABEL_COL_WIDTH };\n  const bidCellStyle = { minWidth: BID_COL_MIN_WIDTH };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Compare Your Bids</h1>\n        <p className=\"text-gray-600 mt-1\">\n          Review the equipment, contractors, and costs side by side.\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-3 gap-4 mb-6\">\n        {tabs.map((tab, index) => (\n          <button\n            key={tab.key}\n            onClick={() => setActiveTab(tab.key)}\n            className={`\n              relative p-4 rounded-xl text-left transition-all duration-200 border-2\n              ${activeTab === tab.key\n                ? 'bg-gradient-to-br from-switch-green-50 to-switch-green-100 border-switch-green-500 shadow-md'\n                : 'bg-white border-gray-200 hover:border-gray-300 hover:shadow-sm'\n              }\n            `}\n          >\n            <div className=\"flex items-start gap-3\">\n              <div className={`\n                w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0\n                ${activeTab === tab.key\n                  ? 'bg-switch-green-600 text-white'\n                  : 'bg-gray-100 text-gray-500'\n                }\n              `}>\n                {tab.icon}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-center gap-2\">\n                  <span className={`\n                    text-xs font-medium px-2 py-0.5 rounded-full\n                    ${activeTab === tab.key\n                      ? 'bg-switch-green-600 text-white'\n                      : 'bg-gray-200 text-gray-600'\n                    }\n                  `}>\n                    {index + 1} of 3\n                  </span>\n                </div>\n                <h3 className={`\n                  font-semibold mt-1\n                  ${activeTab === tab.key ? 'text-switch-green-800' : 'text-gray-900'}\n                `}>\n                  {tab.label}\n                </h3>\n                <p className={`\n                  text-sm mt-0.5\n                  ${activeTab === tab.key ? 'text-switch-green-700' : 'text-gray-500'}\n                `}>\n                  {tab.description}\n                </p>\n              </div>\n            </div>\n            {activeTab === tab.key && (\n              <div className=\"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2\">\n                <div className=\"w-3 h-3 bg-switch-green-500 rotate-45\"></div>\n              </div>\n            )}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"bg-white rounded-xl border-2 border-gray-200 shadow-lg overflow-hidden\">\n        <div className={`\n          px-5 py-3 border-b-2 border-gray-200 flex items-center gap-3\n          bg-gradient-to-r from-switch-green-600 to-switch-green-700\n        `}>\n          <div className=\"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-white\">\n            {tabs.find(t => t.key === activeTab)?.icon}\n          </div>\n          <h2 className=\"font-semibold text-white\">\n            {tabs.find(t => t.key === activeTab)?.label} Comparison\n          </h2>\n        </div>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\" style={{ minWidth: tableMinWidth, tableLayout: 'fixed' }}>\n            {activeTab === 'equipment' && (\n              <>\n                <thead>\n                  <tr className=\"bg-gray-900\">\n                    <th style={labelCellStyle} className=\"px-5 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider border-r border-gray-700\">\n                      Specification\n                    </th>\n                    {equipmentData.map((e, idx) => (\n                      <th key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-left text-sm font-semibold text-white ${idx < equipmentData.length - 1 ? 'border-r border-gray-700' : ''}`}>\n                        {e.contractor}\n                      </th>\n                    ))}\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Manufacturer & Model</td>\n                    {equipmentData.map((e, idx) => (\n                      <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {e.brand} {e.model}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">SEER2 Rating</td>\n                    {equipmentData.map((e, idx) => (\n                      <td\n                        key={e.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm font-semibold ${isHighlighted(e.seer2, bestSeer) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {e.seer2 || '-'}\n                          {isHighlighted(e.seer2, bestSeer) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              <Star className=\"w-3 h-3\" /> BEST\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">HSPF2 Rating</td>\n                    {equipmentData.map((e, idx) => (\n                      <td\n                        key={e.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm font-semibold ${isHighlighted(e.hspf2, bestHspf) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {e.hspf2 || '-'}\n                          {isHighlighted(e.hspf2, bestHspf) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              <Star className=\"w-3 h-3\" /> BEST\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Capacity (tons)</td>\n                    {equipmentData.map((e, idx) => (\n                      <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {e.capacityTons || '-'}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Variable Speed</td>\n                    {equipmentData.map((e, idx) => (\n                      <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {e.variableSpeed ? (\n                          <span className=\"inline-flex items-center gap-1 text-switch-green-700 font-medium\">\n                            <CheckCircle className=\"w-5 h-5\" /> Yes\n                          </span>\n                        ) : e.variableSpeed === false ? (\n                          <span className=\"inline-flex items-center gap-1 text-gray-400\">\n                            <XCircle className=\"w-5 h-5\" /> No\n                          </span>\n                        ) : (\n                          <span className=\"text-gray-400\">-</span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Sound Level (dB)</td>\n                    {equipmentData.map((e, idx) => (\n                      <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {e.soundLevel || '-'}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className={showMoreEquipment ? 'border-b border-gray-200' : ''}>\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">ENERGY STAR</td>\n                    {equipmentData.map((e, idx) => (\n                      <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {e.energyStar ? (\n                          <span className=\"inline-flex items-center gap-1 text-switch-green-700 font-medium\">\n                            <CheckCircle className=\"w-5 h-5\" /> Certified\n                          </span>\n                        ) : e.energyStar === false ? (\n                          <span className=\"inline-flex items-center gap-1 text-gray-400\">\n                            <XCircle className=\"w-5 h-5\" /> No\n                          </span>\n                        ) : (\n                          <span className=\"text-gray-400\">-</span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n\n                  {showMoreEquipment && (\n                    <>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Capacity (BTU)</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.capacityBtu ? e.capacityBtu.toLocaleString() : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Refrigerant Type</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.refrigerantType || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Voltage</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.voltage ? `${e.voltage}V` : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Stages</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.stages || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">COP Rating</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.cop || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">EER Rating</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.eer || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Compressor Warranty</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.compressorWarranty ? `${e.compressorWarranty} years` : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr>\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Most Efficient</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.energyStarMostEfficient ? (\n                              <span className=\"inline-flex items-center gap-1 text-switch-green-700 font-medium\">\n                                <CheckCircle className=\"w-5 h-5\" /> Yes\n                              </span>\n                            ) : (\n                              <span className=\"text-gray-400\">-</span>\n                            )}\n                          </td>\n                        ))}\n                      </tr>\n                    </>\n                  )}\n                </tbody>\n              </>\n            )}\n\n            {activeTab === 'contractors' && (\n              <>\n                <thead>\n                  <tr className=\"bg-gray-900\">\n                    <th style={labelCellStyle} className=\"px-5 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider border-r border-gray-700\">\n                      Information\n                    </th>\n                    {contractorData.map((c, idx) => (\n                      <th key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-left text-sm font-semibold text-white ${idx < contractorData.length - 1 ? 'border-r border-gray-700' : ''}`}>\n                        {c.contractor}\n                      </th>\n                    ))}\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Years in Business</td>\n                    {contractorData.map((c, idx) => (\n                      <td\n                        key={c.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm font-semibold ${isHighlighted(c.yearsInBusiness, bestYears) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {c.yearsInBusiness ? `${c.yearsInBusiness} years` : '-'}\n                          {isHighlighted(c.yearsInBusiness, bestYears) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              <Star className=\"w-3 h-3\" /> MOST\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Google Rating</td>\n                    {contractorData.map((c, idx) => (\n                      <td\n                        key={c.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm font-semibold ${isHighlighted(c.googleRating, bestRating) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {c.googleRating ? (\n                            <span className=\"flex items-center gap-1\">\n                              {c.googleRating}\n                              <Star className=\"w-4 h-4 text-yellow-500 fill-yellow-500\" />\n                            </span>\n                          ) : '-'}\n                          {isHighlighted(c.googleRating, bestRating) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              TOP\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Review Count</td>\n                    {contractorData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {c.reviewCount ? `${c.reviewCount} reviews` : '-'}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Certifications</td>\n                    {contractorData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-900 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {c.certifications.length > 0 ? (\n                          <div className=\"flex flex-wrap gap-1\">\n                            {c.certifications.slice(0, 3).map((cert, i) => (\n                              <span key={i} className=\"inline-flex px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium rounded\">\n                                {cert}\n                              </span>\n                            ))}\n                            {c.certifications.length > 3 && (\n                              <span className=\"inline-flex px-2 py-0.5 bg-gray-100 text-gray-500 text-xs rounded\">\n                                +{c.certifications.length - 3}\n                              </span>\n                            )}\n                          </div>\n                        ) : (\n                          <span className=\"text-gray-400\">-</span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">License Number</td>\n                    {contractorData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {c.license || <span className=\"text-gray-400\">Not provided</span>}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className={showMoreContractors ? 'border-b border-gray-200 bg-gray-50/50' : ''}>\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Switch Preferred</td>\n                    {contractorData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {c.isSwitchPreferred ? (\n                          <span className=\"inline-flex items-center gap-1.5 px-3 py-1 bg-gradient-to-r from-switch-green-500 to-switch-green-600 text-white rounded-full text-xs font-semibold shadow-sm\">\n                            <CheckCircle className=\"w-3.5 h-3.5\" /> Preferred Partner\n                          </span>\n                        ) : (\n                          <span className=\"text-gray-400\">-</span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n\n                  {showMoreContractors && (\n                    <>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Phone</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.phone || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Email</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.email ? (\n                              <a href={`mailto:${c.email}`} className=\"text-switch-green-600 hover:underline truncate block\">\n                                {c.email}\n                              </a>\n                            ) : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Website</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.website ? (\n                              <a href={c.website} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-switch-green-600 hover:underline truncate block\">\n                                {c.website.replace(/^https?:\\/\\//, '')}\n                              </a>\n                            ) : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">License State</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.licenseState || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Insurance Verified</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.insuranceVerified ? (\n                              <span className=\"inline-flex items-center gap-1 text-switch-green-700\">\n                                <CheckCircle className=\"w-4 h-4\" /> Verified\n                              </span>\n                            ) : (\n                              <span className=\"text-gray-400\">-</span>\n                            )}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Year Established</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.yearEstablished || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr>\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Total Installs</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.totalInstalls ? c.totalInstalls.toLocaleString() : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                    </>\n                  )}\n                </tbody>\n              </>\n            )}\n\n            {activeTab === 'costs' && (\n              <>\n                <thead>\n                  <tr className=\"bg-gray-900\">\n                    <th style={labelCellStyle} className=\"px-5 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider border-r border-gray-700\">\n                      Cost Item\n                    </th>\n                    {costData.map((c, idx) => (\n                      <th key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-left text-sm font-semibold text-white ${idx < costData.length - 1 ? 'border-r border-gray-700' : ''}`}>\n                        {c.contractor}\n                      </th>\n                    ))}\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr className=\"border-b-2 border-gray-200 bg-gradient-to-r from-gray-50 to-white\">\n                    <td style={labelCellStyle} className=\"px-5 py-5 text-sm font-bold text-gray-900 bg-gray-100 border-r border-gray-200\">Total Bid Amount</td>\n                    {costData.map((c, idx) => (\n                      <td\n                        key={c.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-5 ${isHighlighted(c.totalAmount, lowestPrice) ? 'bg-gradient-to-r from-switch-green-50 to-switch-green-100' : ''} ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          <span className={`text-xl font-bold ${isHighlighted(c.totalAmount, lowestPrice) ? 'text-switch-green-700' : 'text-gray-900'}`}>\n                            {formatCurrency(c.totalAmount)}\n                          </span>\n                          {isHighlighted(c.totalAmount, lowestPrice) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              <Star className=\"w-3 h-3\" /> LOWEST\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Equipment Cost</td>\n                    {costData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {formatCurrency(c.equipmentCost)}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Labor Cost</td>\n                    {costData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {formatCurrency(c.laborCost)}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Labor Warranty</td>\n                    {costData.map((c, idx) => (\n                      <td\n                        key={c.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm font-semibold ${isHighlighted(c.laborWarranty, bestLaborWarranty) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {c.laborWarranty ? `${c.laborWarranty} years` : '-'}\n                          {isHighlighted(c.laborWarranty, bestLaborWarranty) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              <Star className=\"w-3 h-3\" /> BEST\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Equipment Warranty</td>\n                    {costData.map((c, idx) => (\n                      <td\n                        key={c.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm font-semibold ${isHighlighted(c.equipmentWarranty, bestEquipmentWarranty) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {c.equipmentWarranty ? `${c.equipmentWarranty} years` : '-'}\n                          {isHighlighted(c.equipmentWarranty, bestEquipmentWarranty) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              <Star className=\"w-3 h-3\" /> BEST\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Financing Available</td>\n                    {costData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {c.financingAvailable ? (\n                          <span className=\"inline-flex items-center gap-1 text-switch-green-700 font-medium\">\n                            <CheckCircle className=\"w-5 h-5\" /> Available\n                          </span>\n                        ) : (\n                          <span className=\"inline-flex items-center gap-1 text-gray-400\">\n                            <XCircle className=\"w-5 h-5\" /> No\n                          </span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">What is Included</td>\n                    {costData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-900 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {c.inclusions.length > 0 ? (\n                          <ul className=\"text-xs space-y-1.5\">\n                            {c.inclusions.slice(0, 4).map((item, i) => (\n                              <li key={i} className=\"flex items-start gap-1.5\">\n                                <CheckCircle className=\"w-3.5 h-3.5 text-switch-green-600 flex-shrink-0 mt-0.5\" />\n                                <span className=\"text-gray-700\">{item}</span>\n                              </li>\n                            ))}\n                            {c.inclusions.length > 4 && (\n                              <li className=\"text-gray-500 pl-5\">+{c.inclusions.length - 4} more items</li>\n                            )}\n                          </ul>\n                        ) : (\n                          <span className=\"text-gray-400\">Not specified</span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className={showMoreCosts ? 'border-b border-gray-200 bg-gray-50/50' : ''}>\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">What is NOT Included</td>\n                    {costData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-900 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {c.exclusions.length > 0 ? (\n                          <ul className=\"text-xs space-y-1.5\">\n                            {c.exclusions.slice(0, 4).map((item, i) => (\n                              <li key={i} className=\"flex items-start gap-1.5\">\n                                <XCircle className=\"w-3.5 h-3.5 text-red-500 flex-shrink-0 mt-0.5\" />\n                                <span className=\"text-gray-700\">{item}</span>\n                              </li>\n                            ))}\n                            {c.exclusions.length > 4 && (\n                              <li className=\"text-gray-500 pl-5\">+{c.exclusions.length - 4} more items</li>\n                            )}\n                          </ul>\n                        ) : (\n                          <span className=\"text-gray-400\">Not specified</span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n\n                  {showMoreCosts && (\n                    <>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Estimated Duration</td>\n                        {costData.map((c, idx) => (\n                          <td\n                            key={c.bidId}\n                            style={bidCellStyle}\n                            className={`px-5 py-4 text-sm ${isHighlighted(c.estimatedDays, fastestTimeline) ? 'text-switch-green-700 font-semibold' : 'text-gray-600'} ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                          >\n                            {c.estimatedDays ? `${c.estimatedDays} days` : '-'}\n                            {isHighlighted(c.estimatedDays, fastestTimeline) && c.estimatedDays && (\n                              <span className=\"ml-2 inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                                FASTEST\n                              </span>\n                            )}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Available Start Date</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {formatDate(c.startDateAvailable)}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Quote Valid Until</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {formatDate(c.validUntil)}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Bid Date</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {formatDate(c.bidDate)}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Materials Cost</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {formatCurrency(c.materialsCost)}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Permit Cost</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {formatCurrency(c.permitCost)}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Deposit Required</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.depositRequired ? formatCurrency(c.depositRequired) : c.depositPercentage ? `${c.depositPercentage}%` : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Payment Schedule</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.paymentSchedule || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr>\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Financing Terms</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.financingTerms || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                    </>\n                  )}\n                </tbody>\n              </>\n            )}\n          </table>\n        </div>\n\n        <div className=\"px-5 py-3 bg-gray-50 border-t border-gray-200\">\n          <button\n            onClick={() => {\n              if (activeTab === 'equipment') setShowMoreEquipment(!showMoreEquipment);\n              if (activeTab === 'contractors') setShowMoreContractors(!showMoreContractors);\n              if (activeTab === 'costs') setShowMoreCosts(!showMoreCosts);\n            }}\n            className=\"flex items-center gap-2 text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors\"\n          >\n            {(activeTab === 'equipment' && showMoreEquipment) ||\n             (activeTab === 'contractors' && showMoreContractors) ||\n             (activeTab === 'costs' && showMoreCosts) ? (\n              <>\n                <ChevronUp className=\"w-4 h-4\" />\n                Show Less\n              </>\n            ) : (\n              <>\n                <ChevronDown className=\"w-4 h-4\" />\n                Show More Details\n              </>\n            )}\n          </button>\n        </div>\n      </div>\n\n      {recommendation && (\n        <div className=\"bg-switch-green-50 border border-switch-green-200 rounded-xl p-5\">\n          <div className=\"flex items-start gap-3\">\n            <div className=\"w-10 h-10 bg-switch-green-100 rounded-full flex items-center justify-center flex-shrink-0\">\n              <Star className=\"w-5 h-5 text-switch-green-700\" />\n            </div>\n            <div>\n              <h3 className=\"font-semibold text-switch-green-900\">\n                Recommended: {recommendation.contractor}\n              </h3>\n              <p className=\"text-sm text-switch-green-700 mt-1\">\n                {recommendation.reason}\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"flex justify-end\">\n        <button\n          onClick={handleContinue}\n          className=\"btn btn-primary flex items-center gap-2 px-6\"\n        >\n          Continue to Decide\n          <ArrowRight className=\"w-4 h-4\" />\n        </button>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { ChevronDown, ChevronRight, DollarSign, CheckSquare, Square, ExternalLink, Calendar, Clock, Info } from 'lucide-react';\nimport type { RebateProgram } from '../lib/types';\n\ninterface IncentivesTableProps {\n  rebatePrograms: RebateProgram[];\n  selectedIncentives: Set<string>;\n  onToggleIncentive: (programId: string) => void;\n}\n\nexport function IncentivesTable({ rebatePrograms, selectedIncentives, onToggleIncentive }: IncentivesTableProps) {\n  const [expandedRows, setExpandedRows] = useState<Set<string>>(new Set());\n\n  const toggleExpand = (programId: string) => {\n    const newExpanded = new Set(expandedRows);\n    if (newExpanded.has(programId)) {\n      newExpanded.delete(programId);\n    } else {\n      newExpanded.add(programId);\n    }\n    setExpandedRows(newExpanded);\n  };\n\n  const formatCurrency = (amount: number | null | undefined) => {\n    if (!amount) return '-';\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(amount);\n  };\n\n  const formatDate = (dateString: string | null | undefined) => {\n    if (!dateString) return null;\n    return new Date(dateString).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n    });\n  };\n\n  const getAmount = (program: RebateProgram) => {\n    return program.max_rebate || program.rebate_amount || 0;\n  };\n\n  const totalSelectedAmount = Array.from(selectedIncentives).reduce((sum, id) => {\n    const program = rebatePrograms.find(p => p.id === id);\n    return sum + (program ? getAmount(program) : 0);\n  }, 0);\n\n  if (rebatePrograms.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-white rounded-xl border-2 border-gray-200 shadow-lg overflow-hidden\">\n      <div className=\"bg-gradient-to-r from-switch-green-600 to-switch-green-700 px-5 py-4\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center\">\n            <DollarSign className=\"w-5 h-5 text-white\" />\n          </div>\n          <div>\n            <h3 className=\"font-semibold text-white text-lg\">Available Rebates & Incentives</h3>\n            <p className=\"text-switch-green-100 text-sm\">\n              Select the incentives you plan to apply for\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"divide-y divide-gray-200\">\n        {rebatePrograms.map((program) => {\n          const isExpanded = expandedRows.has(program.id);\n          const isSelected = selectedIncentives.has(program.id);\n          const amount = getAmount(program);\n\n          return (\n            <div key={program.id} className={isSelected ? 'bg-switch-green-50/50' : ''}>\n              <div className=\"flex items-center gap-3 px-5 py-4\">\n                <button\n                  onClick={() => toggleExpand(program.id)}\n                  className=\"p-1 hover:bg-gray-100 rounded transition-colors\"\n                >\n                  {isExpanded ? (\n                    <ChevronDown className=\"w-5 h-5 text-gray-500\" />\n                  ) : (\n                    <ChevronRight className=\"w-5 h-5 text-gray-500\" />\n                  )}\n                </button>\n\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2\">\n                    <h4 className=\"font-semibold text-gray-900\">{program.program_name}</h4>\n                    {program.program_type && (\n                      <span className=\"text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full\">\n                        {program.program_type}\n                      </span>\n                    )}\n                    {program.income_qualified && (\n                      <span className=\"text-xs px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full\">\n                        Income Qualified\n                      </span>\n                    )}\n                  </div>\n                  {!isExpanded && program.description && (\n                    <p className=\"text-sm text-gray-500 mt-0.5 truncate\">{program.description}</p>\n                  )}\n                </div>\n\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"text-right\">\n                    <span className=\"text-lg font-bold text-switch-green-700\">\n                      {program.rebate_percentage\n                        ? `Up to ${program.rebate_percentage}%`\n                        : formatCurrency(amount)\n                      }\n                    </span>\n                    {program.rebate_percentage && program.max_rebate && (\n                      <p className=\"text-xs text-gray-500\">Max: {formatCurrency(program.max_rebate)}</p>\n                    )}\n                  </div>\n\n                  <button\n                    onClick={() => onToggleIncentive(program.id)}\n                    className=\"p-1 hover:bg-gray-100 rounded transition-colors\"\n                  >\n                    {isSelected ? (\n                      <CheckSquare className=\"w-6 h-6 text-switch-green-600\" />\n                    ) : (\n                      <Square className=\"w-6 h-6 text-gray-400 hover:text-gray-600\" />\n                    )}\n                  </button>\n                </div>\n              </div>\n\n              {isExpanded && (\n                <div className=\"px-5 pb-5 pl-14 space-y-4\">\n                  {program.description && (\n                    <div>\n                      <p className=\"text-sm text-gray-700\">{program.description}</p>\n                    </div>\n                  )}\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    {(program.valid_from || program.valid_until) && (\n                      <div className=\"flex items-start gap-2\">\n                        <Calendar className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <span className=\"text-xs font-medium text-gray-500 uppercase\">Valid Period</span>\n                          <p className=\"text-sm text-gray-900\">\n                            {program.valid_from && formatDate(program.valid_from)}\n                            {program.valid_from && program.valid_until && ' - '}\n                            {program.valid_until && formatDate(program.valid_until)}\n                            {!program.valid_from && !program.valid_until && 'Ongoing'}\n                          </p>\n                        </div>\n                      </div>\n                    )}\n\n                    {program.typical_processing_days && (\n                      <div className=\"flex items-start gap-2\">\n                        <Clock className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <span className=\"text-xs font-medium text-gray-500 uppercase\">Processing Time</span>\n                          <p className=\"text-sm text-gray-900\">\n                            ~{program.typical_processing_days} days\n                          </p>\n                        </div>\n                      </div>\n                    )}\n\n                    {program.available_states && program.available_states.length > 0 && !program.available_nationwide && (\n                      <div className=\"flex items-start gap-2\">\n                        <Info className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <span className=\"text-xs font-medium text-gray-500 uppercase\">Available In</span>\n                          <p className=\"text-sm text-gray-900\">\n                            {program.available_states.join(', ')}\n                          </p>\n                        </div>\n                      </div>\n                    )}\n\n                    {program.available_nationwide && (\n                      <div className=\"flex items-start gap-2\">\n                        <Info className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <span className=\"text-xs font-medium text-gray-500 uppercase\">Availability</span>\n                          <p className=\"text-sm text-gray-900\">Available Nationwide</p>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n\n                  {program.application_process && (\n                    <div className=\"bg-gray-50 rounded-lg p-3\">\n                      <span className=\"text-xs font-medium text-gray-500 uppercase\">How to Apply</span>\n                      <p className=\"text-sm text-gray-700 mt-1\">{program.application_process}</p>\n                    </div>\n                  )}\n\n                  {program.requirements && Object.keys(program.requirements).length > 0 && (\n                    <div className=\"bg-gray-50 rounded-lg p-3\">\n                      <span className=\"text-xs font-medium text-gray-500 uppercase\">Requirements</span>\n                      <ul className=\"text-sm text-gray-700 mt-1 space-y-1\">\n                        {Object.entries(program.requirements).map(([key, value]) => (\n                          <li key={key} className=\"flex items-start gap-2\">\n                            <span className=\"text-gray-400\">-</span>\n                            <span>{String(value)}</span>\n                          </li>\n                        ))}\n                      </ul>\n                    </div>\n                  )}\n\n                  {!program.stackable && program.cannot_stack_with && program.cannot_stack_with.length > 0 && (\n                    <div className=\"text-sm text-amber-700 bg-amber-50 rounded-lg p-3\">\n                      <span className=\"font-medium\">Note:</span> Cannot be combined with: {program.cannot_stack_with.join(', ')}\n                    </div>\n                  )}\n\n                  {program.application_url && (\n                    <a\n                      href={program.application_url}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"inline-flex items-center gap-2 text-sm text-switch-green-600 hover:text-switch-green-700 font-medium\"\n                    >\n                      <ExternalLink className=\"w-4 h-4\" />\n                      View Application Details\n                    </a>\n                  )}\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n\n      <div className=\"bg-gray-50 px-5 py-4 border-t-2 border-gray-200\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"text-sm text-gray-600\">\n            {selectedIncentives.size} of {rebatePrograms.length} selected\n          </div>\n          <div className=\"text-right\">\n            <span className=\"text-sm text-gray-500\">Estimated Total Savings</span>\n            <p className=\"text-2xl font-bold text-switch-green-700\">\n              {formatCurrency(totalSelectedAmount)}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { Star, Shield, Zap, CheckCircle, Copy, Check, ArrowRight, HelpCircle, Award, ChevronDown, ChevronUp, Phone, Mail, Globe, Calendar, Clock } from 'lucide-react';\nimport { usePhase } from '../../context/PhaseContext';\nimport { supabase } from '../../lib/supabaseClient';\nimport { IncentivesTable } from '../IncentivesTable';\nimport type { BidQuestion, RebateProgram } from '../../lib/types';\n\nexport function DecidePhase() {\n  const { bids, questions, refreshQuestions, completePhase } = usePhase();\n  const [rebatePrograms, setRebatePrograms] = useState<RebateProgram[]>([]);\n  const [selectedIncentives, setSelectedIncentives] = useState<Set<string>>(new Set());\n  const [selectedContractor, setSelectedContractor] = useState<string | null>(null);\n  const [copiedContractor, setCopiedContractor] = useState<string | null>(null);\n  const [expandedBids, setExpandedBids] = useState<Set<string>>(new Set());\n\n  useEffect(() => {\n    loadRebatePrograms();\n  }, []);\n\n  const loadRebatePrograms = async () => {\n    const { data } = await supabase\n      .from('rebate_programs')\n      .select('*')\n      .eq('is_active', true)\n      .order('program_name');\n\n    if (data) {\n      setRebatePrograms(data);\n      setSelectedIncentives(new Set(data.map(p => p.id)));\n    }\n  };\n\n  const toggleIncentive = (programId: string) => {\n    const newSelected = new Set(selectedIncentives);\n    if (newSelected.has(programId)) {\n      newSelected.delete(programId);\n    } else {\n      newSelected.add(programId);\n    }\n    setSelectedIncentives(newSelected);\n  };\n\n  const getTotalSelectedRebates = () => {\n    return Array.from(selectedIncentives).reduce((sum, id) => {\n      const program = rebatePrograms.find(p => p.id === id);\n      return sum + (program ? (Number(program.max_rebate) || Number(program.rebate_amount) || 0) : 0);\n    }, 0);\n  };\n\n  const formatCurrency = (amount: number | null | undefined) => {\n    if (!amount) return '-';\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(amount);\n  };\n\n  const formatDate = (dateString: string | null | undefined) => {\n    if (!dateString) return null;\n    return new Date(dateString).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n    });\n  };\n\n  const toggleQuestionAnswered = async (question: BidQuestion) => {\n    await supabase\n      .from('bid_questions')\n      .update({\n        is_answered: !question.is_answered,\n        answered_at: !question.is_answered ? new Date().toISOString() : null,\n      })\n      .eq('id', question.id);\n\n    refreshQuestions();\n  };\n\n  const getQuestionsForBid = (bidId: string): BidQuestion[] => {\n    return questions.filter((q) => q.bid_id === bidId);\n  };\n\n  const copyQuestionsToClipboard = (bidId: string, contractorName: string) => {\n    const bidQuestions = getQuestionsForBid(bidId);\n    const unansweredQuestions = bidQuestions.filter((q) => !q.is_answered);\n\n    const text = `Questions for ${contractorName}:\\n\\n${unansweredQuestions\n      .map((q, i) => `${i + 1}. ${q.question_text}`)\n      .join('\\n\\n')}`;\n\n    navigator.clipboard.writeText(text);\n    setCopiedContractor(bidId);\n    setTimeout(() => setCopiedContractor(null), 2000);\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'high':\n        return 'bg-red-100 text-red-700 border-red-200';\n      case 'medium':\n        return 'bg-amber-100 text-amber-700 border-amber-200';\n      default:\n        return 'bg-gray-100 text-gray-600 border-gray-200';\n    }\n  };\n\n  const toggleBidExpanded = (bidId: string) => {\n    const newExpanded = new Set(expandedBids);\n    if (newExpanded.has(bidId)) {\n      newExpanded.delete(bidId);\n    } else {\n      newExpanded.add(bidId);\n    }\n    setExpandedBids(newExpanded);\n  };\n\n  const totalSelectedRebates = getTotalSelectedRebates();\n\n  const getBidData = () => {\n    return bids.map((b) => {\n      const mainEquipment = b.equipment.find(\n        (e) => e.equipment_type === 'outdoor_unit' || e.equipment_type === 'heat_pump'\n      ) || b.equipment[0];\n\n      const netCost = b.bid.total_bid_amount - totalSelectedRebates;\n\n      return {\n        bidId: b.bid.id,\n        contractor: b.bid.contractor_name || b.bid.contractor_company || 'Unknown',\n        totalAmount: b.bid.total_bid_amount,\n        estimatedRebates: totalSelectedRebates,\n        netCost,\n        equipmentBrand: mainEquipment?.brand || '-',\n        equipmentModel: mainEquipment?.model_number || mainEquipment?.model_name || '-',\n        seer2: mainEquipment?.seer2_rating || mainEquipment?.seer_rating,\n        googleRating: b.bid.contractor_google_rating,\n        reviewCount: b.bid.contractor_google_review_count,\n        laborWarranty: b.bid.labor_warranty_years,\n        equipmentWarranty: b.bid.equipment_warranty_years,\n        isSwitchPreferred: b.bid.contractor_is_switch_preferred,\n        phone: b.bid.contractor_phone,\n        email: b.bid.contractor_email,\n        website: b.bid.contractor_website,\n        license: b.bid.contractor_license,\n        licenseState: b.bid.contractor_license_state,\n        insuranceVerified: b.bid.contractor_insurance_verified,\n        yearsInBusiness: b.bid.contractor_years_in_business,\n        totalInstalls: b.bid.contractor_total_installs,\n        certifications: b.bid.contractor_certifications || [],\n        estimatedDays: b.bid.estimated_days,\n        startDateAvailable: b.bid.start_date_available,\n        validUntil: b.bid.valid_until,\n        bidDate: b.bid.bid_date,\n        financingOffered: b.bid.financing_offered,\n        financingTerms: b.bid.financing_terms,\n        userNotes: b.bid.user_notes,\n        isFavorite: b.bid.is_favorite,\n        verifiedByUser: b.bid.verified_by_user,\n        extractionConfidence: b.bid.extraction_confidence,\n        valueScore: b.bid.value_score,\n        qualityScore: b.bid.quality_score,\n        completenessScore: b.bid.completeness_score,\n      };\n    });\n  };\n\n  const bidData = getBidData();\n  const lowestPrice = Math.min(...bidData.map((b) => b.totalAmount || Infinity));\n  const lowestNetCost = Math.min(...bidData.map((b) => b.netCost || Infinity));\n  const bestRating = Math.max(...bidData.map((b) => b.googleRating || 0));\n  const bestSeer = Math.max(...bidData.map((b) => b.seer2 || 0));\n  const bestWarranty = Math.max(...bidData.map((b) => (b.laborWarranty || 0) + (b.equipmentWarranty || 0)));\n\n  const handleContinue = () => {\n    completePhase(3);\n  };\n\n  const toggleSelection = (bidId: string) => {\n    setSelectedContractor(selectedContractor === bidId ? null : bidId);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Make Your Decision</h1>\n        <p className=\"text-gray-600 mt-1\">\n          Review each bid side by side, ask clarifying questions, and choose your contractor.\n        </p>\n      </div>\n\n      {rebatePrograms.length > 0 && (\n        <IncentivesTable\n          rebatePrograms={rebatePrograms}\n          selectedIncentives={selectedIncentives}\n          onToggleIncentive={toggleIncentive}\n        />\n      )}\n\n      <div className=\"space-y-6\">\n        {bidData.map((bid) => {\n          const bidQuestions = getQuestionsForBid(bid.bidId);\n          const answeredCount = bidQuestions.filter((q) => q.is_answered).length;\n          const unansweredQuestions = bidQuestions.filter((q) => !q.is_answered);\n          const isSelected = selectedContractor === bid.bidId;\n          const isExpanded = expandedBids.has(bid.bidId);\n\n          const isBestPrice = bid.totalAmount === lowestPrice;\n          const isBestNetCost = bid.netCost === lowestNetCost;\n          const isBestRating = bid.googleRating === bestRating && bid.googleRating > 0;\n          const isBestEfficiency = bid.seer2 === bestSeer && bid.seer2 > 0;\n          const totalWarranty = (bid.laborWarranty || 0) + (bid.equipmentWarranty || 0);\n          const isBestWarranty = totalWarranty === bestWarranty && totalWarranty > 0;\n\n          return (\n            <div\n              key={bid.bidId}\n              className={`\n                relative bg-white rounded-xl overflow-hidden transition-all duration-200\n                ${isSelected\n                  ? 'ring-4 ring-switch-green-500 shadow-xl border-2 border-switch-green-500'\n                  : 'border-2 border-gray-200 shadow-md hover:shadow-lg hover:border-gray-300'\n                }\n              `}\n            >\n              <div className={`\n                absolute top-0 left-0 w-1.5 h-full\n                ${isSelected ? 'bg-switch-green-500' : 'bg-gradient-to-b from-switch-green-400 to-switch-green-600'}\n              `} />\n\n              <div className=\"p-6 pl-8\">\n                <div className=\"flex items-start justify-between mb-5\">\n                  <div className=\"flex items-center gap-4\">\n                    <h3 className=\"text-xl font-bold text-gray-900\">{bid.contractor}</h3>\n                    {bid.isSwitchPreferred && (\n                      <span className=\"inline-flex items-center gap-1 px-2.5 py-1 bg-gradient-to-r from-switch-green-500 to-switch-green-600 text-white rounded-full text-xs font-medium\">\n                        <Award className=\"w-3 h-3\" /> Switch Preferred\n                      </span>\n                    )}\n                  </div>\n                  <div className=\"flex items-center gap-3\">\n                    {isSelected && (\n                      <div className=\"w-8 h-8 bg-switch-green-500 rounded-full flex items-center justify-center\">\n                        <CheckCircle className=\"w-5 h-5 text-white\" />\n                      </div>\n                    )}\n                    <button\n                      onClick={() => toggleSelection(bid.bidId)}\n                      className={`\n                        py-2 px-4 rounded-lg font-medium transition-all duration-200 flex items-center gap-2 text-sm\n                        ${isSelected\n                          ? 'bg-switch-green-600 text-white hover:bg-switch-green-700'\n                          : 'bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300'\n                        }\n                      `}\n                    >\n                      {isSelected ? (\n                        <>\n                          <CheckCircle className=\"w-4 h-4\" />\n                          My Choice\n                        </>\n                      ) : (\n                        'Mark as My Choice'\n                      )}\n                    </button>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6\">\n                  <div className=\"lg:col-span-5 space-y-4\">\n                    <div className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-5 border border-gray-200\">\n                      <div className=\"flex items-center justify-between mb-3\">\n                        <span className=\"text-sm font-semibold text-gray-600 uppercase tracking-wide\">Total Price</span>\n                        {isBestPrice && (\n                          <span className=\"inline-flex items-center gap-1 px-2.5 py-1 bg-switch-green-600 text-white text-xs font-semibold rounded-full\">\n                            <Star className=\"w-3 h-3\" /> LOWEST\n                          </span>\n                        )}\n                      </div>\n                      <div className={`text-3xl font-bold ${isBestPrice ? 'text-switch-green-700' : 'text-gray-900'}`}>\n                        {formatCurrency(bid.totalAmount)}\n                      </div>\n                      {totalSelectedRebates > 0 && (\n                        <div className=\"mt-3 pt-3 border-t border-gray-200\">\n                          <div className=\"flex items-center justify-between text-sm\">\n                            <span className=\"text-gray-500\">Selected Rebates</span>\n                            <span className=\"text-switch-green-600 font-semibold\">-{formatCurrency(totalSelectedRebates)}</span>\n                          </div>\n                          <div className=\"flex items-center justify-between mt-2\">\n                            <span className=\"text-sm font-semibold text-gray-700\">Net Cost</span>\n                            <span className={`text-xl font-bold ${isBestNetCost ? 'text-switch-green-700' : 'text-gray-900'}`}>\n                              {formatCurrency(bid.netCost)}\n                            </span>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n\n                    <div className=\"grid grid-cols-3 gap-3\">\n                      <div className=\"bg-gray-50 rounded-lg p-4 border border-gray-200\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <Zap className=\"w-4 h-4 text-amber-500\" />\n                          <span className=\"text-xs font-semibold text-gray-500 uppercase\">Equipment</span>\n                        </div>\n                        <div className=\"text-sm font-bold text-gray-900\" title={`${bid.equipmentBrand} ${bid.equipmentModel}`}>\n                          {bid.equipmentBrand}\n                        </div>\n                        {bid.seer2 && (\n                          <div className=\"flex items-center gap-1 mt-1\">\n                            <span className={`text-xs ${isBestEfficiency ? 'text-switch-green-700 font-bold' : 'text-gray-600'}`}>\n                              SEER2: {bid.seer2}\n                            </span>\n                            {isBestEfficiency && <Star className=\"w-3 h-3 text-switch-green-600\" />}\n                          </div>\n                        )}\n                      </div>\n\n                      <div className=\"bg-gray-50 rounded-lg p-4 border border-gray-200\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <Star className=\"w-4 h-4 text-yellow-500\" />\n                          <span className=\"text-xs font-semibold text-gray-500 uppercase\">Rating</span>\n                        </div>\n                        {bid.googleRating ? (\n                          <>\n                            <div className={`text-sm font-bold ${isBestRating ? 'text-switch-green-700' : 'text-gray-900'}`}>\n                              {bid.googleRating.toFixed(1)} / 5\n                              {isBestRating && <Star className=\"w-3 h-3 inline ml-1 text-switch-green-600\" />}\n                            </div>\n                            {bid.reviewCount && (\n                              <div className=\"text-xs text-gray-500 mt-0.5\">{bid.reviewCount} reviews</div>\n                            )}\n                          </>\n                        ) : (\n                          <div className=\"text-sm text-gray-400\">N/A</div>\n                        )}\n                      </div>\n\n                      <div className=\"bg-gray-50 rounded-lg p-4 border border-gray-200\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <Shield className=\"w-4 h-4 text-switch-green-600\" />\n                          <span className=\"text-xs font-semibold text-gray-500 uppercase\">Warranty</span>\n                        </div>\n                        {(bid.laborWarranty || bid.equipmentWarranty) ? (\n                          <div className=\"space-y-0.5\">\n                            {bid.laborWarranty && (\n                              <div className={`text-xs ${isBestWarranty ? 'text-switch-green-700 font-bold' : 'text-gray-900'}`}>\n                                {bid.laborWarranty}yr labor\n                              </div>\n                            )}\n                            {bid.equipmentWarranty && (\n                              <div className={`text-xs ${isBestWarranty ? 'text-switch-green-700 font-bold' : 'text-gray-900'}`}>\n                                {bid.equipmentWarranty}yr equip\n                              </div>\n                            )}\n                            {isBestWarranty && (\n                              <span className=\"inline-flex items-center gap-1 px-1.5 py-0.5 bg-switch-green-600 text-white text-[10px] font-medium rounded mt-1\">\n                                BEST\n                              </span>\n                            )}\n                          </div>\n                        ) : (\n                          <div className=\"text-sm text-gray-400\">N/A</div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"lg:col-span-7\">\n                    <div className=\"border-2 border-gray-200 rounded-xl overflow-hidden h-full flex flex-col\">\n                      <div className=\"bg-gray-100 px-5 py-3 flex items-center justify-between border-b border-gray-200\">\n                        <div className=\"flex items-center gap-2\">\n                          <HelpCircle className=\"w-5 h-5 text-gray-600\" />\n                          <span className=\"text-sm font-bold text-gray-800\">Questions to Ask This Contractor</span>\n                        </div>\n                        <div className=\"flex items-center gap-3\">\n                          <span className=\"text-xs text-gray-500 bg-white px-2 py-1 rounded-full border\">\n                            {answeredCount}/{bidQuestions.length} answered\n                          </span>\n                          {unansweredQuestions.length > 0 && (\n                            <button\n                              onClick={() => copyQuestionsToClipboard(bid.bidId, bid.contractor)}\n                              className=\"flex items-center gap-1.5 px-3 py-1.5 text-sm text-gray-600 hover:text-gray-800 bg-white hover:bg-gray-50 border border-gray-300 rounded-lg transition-colors\"\n                              title=\"Copy questions\"\n                            >\n                              {copiedContractor === bid.bidId ? (\n                                <>\n                                  <Check className=\"w-4 h-4 text-switch-green-600\" />\n                                  <span className=\"text-switch-green-600 font-medium\">Copied!</span>\n                                </>\n                              ) : (\n                                <>\n                                  <Copy className=\"w-4 h-4\" />\n                                  <span>Copy All</span>\n                                </>\n                              )}\n                            </button>\n                          )}\n                        </div>\n                      </div>\n                      <div className=\"p-4 flex-1 overflow-y-auto max-h-72\">\n                        {bidQuestions.length === 0 ? (\n                          <p className=\"text-sm text-gray-500 text-center py-6\">\n                            No questions for this bid.\n                          </p>\n                        ) : (\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                            {bidQuestions.map((question) => (\n                              <div\n                                key={question.id}\n                                className={`flex items-start gap-2 p-3 rounded-lg transition-colors ${\n                                  question.is_answered ? 'bg-gray-50 opacity-60' : 'bg-white border border-gray-200 hover:border-gray-300'\n                                }`}\n                              >\n                                <button\n                                  onClick={() => toggleQuestionAnswered(question)}\n                                  className=\"flex-shrink-0 mt-0.5\"\n                                >\n                                  {question.is_answered ? (\n                                    <CheckCircle className=\"w-5 h-5 text-switch-green-600\" />\n                                  ) : (\n                                    <div className=\"w-5 h-5 rounded-full border-2 border-gray-300 hover:border-switch-green-500 transition-colors\" />\n                                  )}\n                                </button>\n                                <div className=\"flex-1 min-w-0\">\n                                  <p className={`text-sm ${question.is_answered ? 'text-gray-400 line-through' : 'text-gray-800'}`}>\n                                    {question.question_text}\n                                  </p>\n                                  {!question.is_answered && (\n                                    <div className=\"flex items-center gap-1 mt-1.5\">\n                                      <span className={`text-[10px] px-2 py-0.5 rounded border font-medium ${getPriorityColor(question.priority)}`}>\n                                        {question.priority}\n                                      </span>\n                                    </div>\n                                  )}\n                                </div>\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {isExpanded && (\n                  <div className=\"mt-5 pt-5 border-t border-gray-200\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                      <div className=\"space-y-3\">\n                        <h4 className=\"text-sm font-semibold text-gray-700 uppercase tracking-wide\">Contact Info</h4>\n                        {bid.phone && (\n                          <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                            <Phone className=\"w-4 h-4 text-gray-400\" />\n                            {bid.phone}\n                          </div>\n                        )}\n                        {bid.email && (\n                          <div className=\"flex items-center gap-2 text-sm\">\n                            <Mail className=\"w-4 h-4 text-gray-400\" />\n                            <a href={`mailto:${bid.email}`} className=\"text-switch-green-600 hover:underline\">\n                              {bid.email}\n                            </a>\n                          </div>\n                        )}\n                        {bid.website && (\n                          <div className=\"flex items-center gap-2 text-sm\">\n                            <Globe className=\"w-4 h-4 text-gray-400\" />\n                            <a href={bid.website} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-switch-green-600 hover:underline truncate\">\n                              {bid.website.replace(/^https?:\\/\\//, '')}\n                            </a>\n                          </div>\n                        )}\n                        {bid.license && (\n                          <div className=\"text-sm text-gray-600\">\n                            <span className=\"text-gray-500\">License:</span> {bid.license}\n                            {bid.licenseState && ` (${bid.licenseState})`}\n                          </div>\n                        )}\n                        {bid.insuranceVerified && (\n                          <div className=\"flex items-center gap-1.5 text-sm text-switch-green-700\">\n                            <CheckCircle className=\"w-4 h-4\" /> Insurance Verified\n                          </div>\n                        )}\n                      </div>\n\n                      <div className=\"space-y-3\">\n                        <h4 className=\"text-sm font-semibold text-gray-700 uppercase tracking-wide\">Timeline & Details</h4>\n                        {bid.estimatedDays && (\n                          <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                            <Clock className=\"w-4 h-4 text-gray-400\" />\n                            Est. {bid.estimatedDays} days to complete\n                          </div>\n                        )}\n                        {bid.startDateAvailable && (\n                          <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                            <Calendar className=\"w-4 h-4 text-gray-400\" />\n                            Available: {formatDate(bid.startDateAvailable)}\n                          </div>\n                        )}\n                        {bid.validUntil && (\n                          <div className=\"text-sm text-gray-600\">\n                            <span className=\"text-gray-500\">Quote valid until:</span> {formatDate(bid.validUntil)}\n                          </div>\n                        )}\n                        {bid.bidDate && (\n                          <div className=\"text-sm text-gray-600\">\n                            <span className=\"text-gray-500\">Bid date:</span> {formatDate(bid.bidDate)}\n                          </div>\n                        )}\n                        {bid.financingOffered && (\n                          <div className=\"text-sm text-gray-600\">\n                            <span className=\"text-switch-green-700 font-medium\">Financing Available</span>\n                            {bid.financingTerms && <span className=\"text-gray-500 ml-1\">- {bid.financingTerms}</span>}\n                          </div>\n                        )}\n                      </div>\n\n                      <div className=\"space-y-3\">\n                        <h4 className=\"text-sm font-semibold text-gray-700 uppercase tracking-wide\">Experience</h4>\n                        {bid.yearsInBusiness && (\n                          <div className=\"text-sm text-gray-600\">\n                            {bid.yearsInBusiness} years in business\n                          </div>\n                        )}\n                        {bid.totalInstalls && (\n                          <div className=\"text-sm text-gray-600\">\n                            {bid.totalInstalls.toLocaleString()} total installs\n                          </div>\n                        )}\n                        {bid.certifications.length > 0 && (\n                          <div className=\"flex flex-wrap gap-1\">\n                            {bid.certifications.map((cert, i) => (\n                              <span key={i} className=\"text-xs px-2 py-0.5 bg-gray-100 text-gray-700 rounded\">\n                                {cert}\n                              </span>\n                            ))}\n                          </div>\n                        )}\n                        {bid.extractionConfidence && (\n                          <div className=\"text-xs text-gray-500\">\n                            Extraction confidence: <span className=\"capitalize font-medium\">{bid.extractionConfidence}</span>\n                          </div>\n                        )}\n                        {(bid.valueScore || bid.qualityScore || bid.completenessScore) && (\n                          <div className=\"flex items-center gap-2\">\n                            {bid.valueScore && (\n                              <span className=\"text-xs px-2 py-0.5 bg-switch-green-100 text-switch-green-700 rounded\">\n                                Value: {bid.valueScore}\n                              </span>\n                            )}\n                            {bid.qualityScore && (\n                              <span className=\"text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded\">\n                                Quality: {bid.qualityScore}\n                              </span>\n                            )}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"mt-4 pt-4 border-t border-gray-100\">\n                  <button\n                    onClick={() => toggleBidExpanded(bid.bidId)}\n                    className=\"flex items-center gap-2 text-sm font-medium text-gray-500 hover:text-gray-700 transition-colors\"\n                  >\n                    {isExpanded ? (\n                      <>\n                        <ChevronUp className=\"w-4 h-4\" />\n                        Show Less\n                      </>\n                    ) : (\n                      <>\n                        <ChevronDown className=\"w-4 h-4\" />\n                        Show More Details\n                      </>\n                    )}\n                  </button>\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {bids.length === 0 && (\n        <div className=\"bg-white rounded-xl border-2 border-gray-200 p-12 text-center\">\n          <HelpCircle className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Bids to Compare</h3>\n          <p className=\"text-gray-600\">Upload your contractor bids in the Gather phase to see them here.</p>\n        </div>\n      )}\n\n      <div className=\"bg-gray-50 rounded-xl border border-gray-200 p-4\">\n        <p className=\"text-sm text-gray-600\">\n          <strong>Note:</strong> Marking a contractor as your choice is optional and for your reference only.\n          You will work directly with your chosen contractor to finalize the installation.\n        </p>\n      </div>\n\n      <div className=\"flex justify-end\">\n        <button\n          onClick={handleContinue}\n          className=\"btn btn-primary flex items-center gap-2 px-6\"\n        >\n          Continue\n          <ArrowRight className=\"w-4 h-4\" />\n        </button>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { CheckCircle2, Circle, AlertTriangle, Info, ChevronDown, ChevronUp, Printer } from 'lucide-react';\nimport { usePhase } from '../../context/PhaseContext';\nimport { supabase } from '../../lib/supabaseClient';\nimport type { QIIChecklistItem, ProjectQIIChecklist, QIICategory } from '../../lib/types';\n\ninterface ChecklistItemWithStatus extends QIIChecklistItem {\n  status?: ProjectQIIChecklist;\n}\n\nconst CATEGORY_INFO: Record<QIICategory, { label: string; description: string }> = {\n  pre_installation: {\n    label: 'Pre-Installation',\n    description: 'Verify these items before work begins',\n  },\n  equipment: {\n    label: 'Equipment Verification',\n    description: 'Confirm the right equipment was delivered and installed',\n  },\n  airflow: {\n    label: 'Airflow',\n    description: 'Proper airflow is critical for efficiency and comfort',\n  },\n  refrigerant: {\n    label: 'Refrigerant',\n    description: 'Correct refrigerant charge affects efficiency and equipment life',\n  },\n  electrical: {\n    label: 'Electrical',\n    description: 'Safe and proper electrical connections',\n  },\n  commissioning: {\n    label: 'Commissioning & Closeout',\n    description: 'Final steps to ensure everything is documented',\n  },\n};\n\nexport function VerifyPhase() {\n  const { projectId } = usePhase();\n  const [items, setItems] = useState<ChecklistItemWithStatus[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [expandedCategory, setExpandedCategory] = useState<QIICategory | null>('pre_installation');\n\n  useEffect(() => {\n    if (projectId) {\n      loadChecklist();\n    }\n  }, [projectId]);\n\n  async function loadChecklist() {\n    const { data: allItems } = await supabase\n      .from('qii_checklist_items')\n      .select('*')\n      .order('display_order', { ascending: true });\n\n    const { data: projectStatus } = await supabase\n      .from('project_qii_checklist')\n      .select('*')\n      .eq('project_id', projectId);\n\n    const statusMap = new Map(projectStatus?.map((s) => [s.checklist_item_id, s]) || []);\n\n    const itemsWithStatus = (allItems || []).map((item) => ({\n      ...item,\n      status: statusMap.get(item.id),\n    }));\n\n    setItems(itemsWithStatus);\n    setLoading(false);\n  }\n\n  async function toggleItem(item: ChecklistItemWithStatus) {\n    const isCurrentlyVerified = item.status?.is_verified || false;\n\n    if (item.status) {\n      await supabase\n        .from('project_qii_checklist')\n        .update({\n          is_verified: !isCurrentlyVerified,\n          verified_at: !isCurrentlyVerified ? new Date().toISOString() : null,\n          verified_by: !isCurrentlyVerified ? 'homeowner' : null,\n        })\n        .eq('id', item.status.id);\n    } else {\n      await supabase.from('project_qii_checklist').insert({\n        project_id: projectId,\n        checklist_item_id: item.id,\n        is_verified: true,\n        verified_at: new Date().toISOString(),\n        verified_by: 'homeowner',\n      });\n    }\n\n    loadChecklist();\n  }\n\n  function getProgress() {\n    const total = items.length;\n    const verified = items.filter((i) => i.status?.is_verified).length;\n    const critical = items.filter((i) => i.is_critical);\n    const criticalVerified = critical.filter((i) => i.status?.is_verified).length;\n\n    return {\n      total,\n      verified,\n      percentage: total > 0 ? Math.round((verified / total) * 100) : 0,\n      critical: critical.length,\n      criticalVerified,\n      criticalComplete: criticalVerified === critical.length,\n    };\n  }\n\n  function getCategoryItems(category: QIICategory) {\n    return items.filter((i) => i.category === category);\n  }\n\n  function getCategoryProgress(category: QIICategory) {\n    const categoryItems = getCategoryItems(category);\n    const verified = categoryItems.filter((i) => i.status?.is_verified).length;\n    return { total: categoryItems.length, verified };\n  }\n\n  function handlePrint() {\n    window.print();\n  }\n\n  const progress = getProgress();\n  const categories = Object.keys(CATEGORY_INFO) as QIICategory[];\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12 text-gray-500\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-switch-green-600 mx-auto mb-4\" />\n        Loading checklist...\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-start justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Verify Your Installation</h1>\n          <p className=\"text-gray-600 mt-1\">\n            Use this checklist to ensure your heat pump was installed correctly.\n          </p>\n        </div>\n        <button\n          onClick={handlePrint}\n          className=\"btn btn-secondary flex items-center gap-2 print:hidden\"\n        >\n          <Printer className=\"w-4 h-4\" />\n          Print\n        </button>\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-5\">\n        <div className=\"grid md:grid-cols-2 gap-4\">\n          <div>\n            <div className=\"flex items-center justify-between mb-2\">\n              <span className=\"text-sm font-medium text-gray-700\">Overall Progress</span>\n              <span className=\"text-sm font-bold text-gray-900\">\n                {progress.verified}/{progress.total}\n              </span>\n            </div>\n            <div className=\"h-2 bg-gray-100 rounded-full overflow-hidden\">\n              <div\n                className=\"h-full bg-switch-green-600 transition-all duration-300\"\n                style={{ width: `${progress.percentage}%` }}\n              />\n            </div>\n            <p className=\"text-xs text-gray-500 mt-1\">{progress.percentage}% complete</p>\n          </div>\n\n          <div\n            className={`rounded-lg p-4 ${progress.criticalComplete ? 'bg-switch-green-50' : 'bg-amber-50'\n              }`}\n          >\n            <div className=\"flex items-center gap-2\">\n              {progress.criticalComplete ? (\n                <CheckCircle2 className=\"w-5 h-5 text-switch-green-600\" />\n              ) : (\n                <AlertTriangle className=\"w-5 h-5 text-amber-600\" />\n              )}\n              <span className=\"font-medium text-gray-900\">Critical Items</span>\n            </div>\n            <p\n              className={`text-sm mt-1 ${progress.criticalComplete ? 'text-switch-green-700' : 'text-amber-700'\n                }`}\n            >\n              {progress.criticalVerified} of {progress.critical} critical items verified\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"space-y-3\">\n        {categories.map((category) => {\n          const info = CATEGORY_INFO[category];\n          const categoryProgress = getCategoryProgress(category);\n          const isExpanded = expandedCategory === category;\n          const categoryItems = getCategoryItems(category);\n          const allVerified = categoryProgress.verified === categoryProgress.total;\n\n          if (categoryItems.length === 0) return null;\n\n          return (\n            <div key={category} className=\"bg-white rounded-xl border border-gray-200 overflow-hidden\">\n              <button\n                onClick={() => setExpandedCategory(isExpanded ? null : category)}\n                className=\"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors\"\n              >\n                <div className=\"text-left\">\n                  <h3 className=\"font-semibold text-gray-900\">{info.label}</h3>\n                  <p className=\"text-sm text-gray-500\">{info.description}</p>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <span\n                    className={`text-sm font-medium ${allVerified ? 'text-switch-green-600' : 'text-gray-500'\n                      }`}\n                  >\n                    {categoryProgress.verified}/{categoryProgress.total}\n                  </span>\n                  {allVerified && <CheckCircle2 className=\"w-5 h-5 text-switch-green-600\" />}\n                  {isExpanded ? (\n                    <ChevronUp className=\"w-5 h-5 text-gray-400\" />\n                  ) : (\n                    <ChevronDown className=\"w-5 h-5 text-gray-400\" />\n                  )}\n                </div>\n              </button>\n\n              {isExpanded && (\n                <div className=\"border-t border-gray-100 divide-y divide-gray-100\">\n                  {categoryItems.map((item) => (\n                    <div\n                      key={item.id}\n                      className={`px-4 py-3 flex items-start gap-3 ${item.status?.is_verified ? 'bg-gray-50' : ''\n                        }`}\n                    >\n                      <button onClick={() => toggleItem(item)} className=\"flex-shrink-0 mt-0.5\">\n                        {item.status?.is_verified ? (\n                          <CheckCircle2 className=\"w-6 h-6 text-switch-green-600\" />\n                        ) : (\n                          <Circle className=\"w-6 h-6 text-gray-300 hover:text-gray-400\" />\n                        )}\n                      </button>\n\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center gap-2\">\n                          <p\n                            className={`font-medium ${item.status?.is_verified\n                                ? 'text-gray-500 line-through'\n                                : 'text-gray-900'\n                              }`}\n                          >\n                            {item.item_text}\n                          </p>\n                          {item.is_critical && (\n                            <span className=\"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full\">\n                              Critical\n                            </span>\n                          )}\n                        </div>\n                        {item.description && (\n                          <p className=\"text-sm text-gray-500 mt-1\">{item.description}</p>\n                        )}\n                        {item.why_it_matters && (\n                          <div className=\"mt-2 flex items-start gap-2 text-sm text-blue-700 bg-blue-50 rounded-lg p-2\">\n                            <Info className=\"w-4 h-4 flex-shrink-0 mt-0.5\" />\n                            <span>\n                              <strong>Why it matters:</strong> {item.why_it_matters}\n                            </span>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n\n      {progress.percentage === 100 && (\n        <div className=\"bg-switch-green-50 border border-switch-green-200 rounded-xl p-6 text-center\">\n          <CheckCircle2 className=\"w-12 h-12 text-switch-green-600 mx-auto mb-3\" />\n          <h3 className=\"text-lg font-bold text-switch-green-900\">Installation Verified!</h3>\n          <p className=\"text-switch-green-700 mt-1\">\n            All quality installation items have been checked. Keep this checklist for your records.\n          </p>\n        </div>\n      )}\n\n      <div className=\"bg-gray-50 border border-gray-200 rounded-xl p-5\">\n        <h3 className=\"font-semibold text-gray-900 mb-3\">Tips for Using This Checklist</h3>\n        <ul className=\"text-sm text-gray-600 space-y-2\">\n          <li className=\"flex items-start gap-2\">\n            <span className=\"text-switch-green-600\">1.</span>\n            Ask your contractor to walk through critical items with you before they leave\n          </li>\n          <li className=\"flex items-start gap-2\">\n            <span className=\"text-switch-green-600\">2.</span>\n            Request documentation for items like load calculations and commissioning reports\n          </li>\n          <li className=\"flex items-start gap-2\">\n            <span className=\"text-switch-green-600\">3.</span>\n            Take photos of equipment labels showing model numbers and serial numbers\n          </li>\n          <li className=\"flex items-start gap-2\">\n            <span className=\"text-switch-green-600\">4.</span>\n            Do not sign off on the final payment until critical items are verified\n          </li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n","import { PhaseProvider, usePhase } from '../context/PhaseContext';\nimport { PhaseLayout } from './PhaseLayout';\nimport { GatherPhase } from './phases/GatherPhase';\nimport { ComparePhase } from './phases/ComparePhase';\nimport { DecidePhase } from './phases/DecidePhase';\nimport { VerifyPhase } from './phases/VerifyPhase';\nimport type { UserExt } from '../lib/types';\n\ninterface BidSmartFlowProps {\n  user: UserExt;\n  projectId?: string;\n  onNavigateHome?: () => void;\n}\n\nfunction PhaseContentWrapper({ onNavigateHome }: { onNavigateHome?: () => void }) {\n  const { currentPhase, loading, error, project } = usePhase();\n\n  const content = (\n    <PhaseContent loading={loading} error={error} currentPhase={currentPhase} />\n  );\n\n  return (\n    <PhaseLayout onNavigateHome={onNavigateHome} projectName={project?.project_name}>\n      {content}\n    </PhaseLayout>\n  );\n}\n\nfunction PhaseContent({ loading, error, currentPhase }: { loading: boolean; error: string | null; currentPhase: number }) {\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-switch-green-600 mx-auto mb-4\" />\n          <p className=\"text-gray-500\">Loading your project...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 border border-red-200 rounded-xl p-6 text-center\">\n        <p className=\"text-red-700\">{error}</p>\n        <button\n          onClick={() => window.location.reload()}\n          className=\"btn btn-primary mt-4\"\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  switch (currentPhase) {\n    case 1:\n      return <GatherPhase />;\n    case 2:\n      return <ComparePhase />;\n    case 3:\n      return <DecidePhase />;\n    case 4:\n      return <VerifyPhase />;\n    default:\n      return <GatherPhase />;\n  }\n}\n\nexport function BidSmartFlow({ user, projectId, onNavigateHome }: BidSmartFlowProps) {\n  return (\n    <PhaseProvider userId={user.id} initialProjectId={projectId}>\n      <PhaseContentWrapper onNavigateHome={onNavigateHome} />\n    </PhaseProvider>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { useUser } from './hooks/useUser';\nimport { WelcomeScreen } from './components/WelcomeScreen';\nimport { BidSmartFlow } from './components/BidSmartFlow';\n\nconst ACTIVE_PROJECT_KEY = 'bidsmart_active_project';\n\nfunction getStoredProjectId(): string | null {\n  try {\n    return localStorage.getItem(ACTIVE_PROJECT_KEY);\n  } catch {\n    return null;\n  }\n}\n\nfunction setStoredProjectId(projectId: string | null): void {\n  try {\n    if (projectId) {\n      localStorage.setItem(ACTIVE_PROJECT_KEY, projectId);\n    } else {\n      localStorage.removeItem(ACTIVE_PROJECT_KEY);\n    }\n  } catch {\n  }\n}\n\nfunction App() {\n  const { user, loading, error } = useUser();\n  const [activeProjectId, setActiveProjectId] = useState<string | null>(null);\n  const [showWelcome, setShowWelcome] = useState(true);\n\n  useEffect(() => {\n    const storedProjectId = getStoredProjectId();\n    if (storedProjectId) {\n      setActiveProjectId(storedProjectId);\n      setShowWelcome(false);\n    }\n  }, []);\n\n  const handleSelectProject = (projectId: string) => {\n    setActiveProjectId(projectId);\n    setStoredProjectId(projectId);\n    setShowWelcome(false);\n  };\n\n  const handleCreateProject = (projectId: string) => {\n    setActiveProjectId(projectId);\n    setStoredProjectId(projectId);\n    setShowWelcome(false);\n  };\n\n  const handleNavigateHome = () => {\n    setShowWelcome(true);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-switch-green-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading BidSmart...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center max-w-md mx-auto px-4\">\n          <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <span className=\"text-2xl text-red-600\">!</span>\n          </div>\n          <h1 className=\"text-xl font-semibold text-gray-900 mb-2\">Unable to Load</h1>\n          <p className=\"text-gray-600 mb-4\">\n            There was a problem connecting to the database. Please try refreshing the page.\n          </p>\n          <button\n            onClick={() => window.location.reload()}\n            className=\"btn btn-primary\"\n          >\n            Refresh Page\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (showWelcome || !activeProjectId) {\n    return (\n      <WelcomeScreen\n        user={user}\n        onSelectProject={handleSelectProject}\n        onCreateProject={handleCreateProject}\n      />\n    );\n  }\n\n  return <BidSmartFlow user={user} projectId={activeProjectId} onNavigateHome={handleNavigateHome} />;\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\nimport './index.css';\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","supabaseUrl","supabaseAnonKey","supabase","createClient","STORAGE_KEY","DEFAULT_EMAIL","DEFAULT_NAME","getUrlParams","params","email","name","getStoredUser","stored","storeUser","user","getOrCreateUserByEmail","fullName","existing","fetchError","created","createError","useUser","setUser","useState","loading","setLoading","isReturningUser","setIsReturningUser","error","setError","useEffect","initializeUser","urlParams","storedUser","userInfo","dbUser","isExisting","err","defaultAttributes","toKebabCase","string","createLucideIcon","iconName","iconNode","Component","forwardRef","color","size","strokeWidth","absoluteStrokeWidth","className","children","rest","ref","createElement","tag","attrs","AlertCircle","AlertTriangle","ArrowRight","Award","BarChart3","Calendar","CheckCircle2","CheckCircle","CheckSquare","Check","ChevronDown","ChevronRight","ChevronUp","Circle","ClipboardCheck","Clock","Copy","DollarSign","ExternalLink","FileText","FolderOpen","Globe","HelpCircle","Home","Info","Mail","Phone","Play","Plus","Printer","Shield","Square","Star","Upload","Users","XCircle","Zap","createProject","userId","projectData","data","getProjectsByUser","getDemoProject","updateProject","projectId","updates","updateProjectDataSharingConsent","consent","createBid","bidData","getBidsByProject","getEquipmentByBid","bidId","bulkCreateEquipment","equipment","equipmentToInsert","eq","getProjectRequirements","createProjectRequirements","requirements","updateProjectRequirements","saveProjectRequirements","updated","SAMPLE_BIDS","SAMPLE_REBATE_PROGRAMS","PHASES","DashboardPhasePreview","onStartProject","onStartDemo","jsxs","jsx","phase","index","Icon","WelcomeScreen","onSelectProject","onCreateProject","projects","setProjects","loadProjects","userProjects","handleNewProject","project","handleLoadDemoData","existingDemo","sample","bid","questions","i","rebate","existingRebate","formatDate","dateString","getStatusBadge","status","statusConfig","config","PHASE_LABELS","PhaseContext","createContext","loadStoredState","saveStoredState","state","PhaseProvider","initialProjectId","setState","initializeProject","storedState","existingProjects","foundProject","bids","bidsWithEquipment","currentPhase","phaseStatus","prev","canAccessPhase","useCallback","goToPhase","newState","completePhase","newPhaseStatus","nextPhase","newCurrentPhase","refreshBids","refreshRequirements","refreshQuestions","getPhaseLabel","value","usePhase","context","useContext","PhaseLayout","onNavigateHome","projectName","item","isActive","isClickable","PrioritySlider","label","onChange","description","GatherPhase","priorities","setPriorities","saving","setSaving","dragActive","setDragActive","dataSharingConsent","setDataSharingConsent","showPrivacyDetails","setShowPrivacyDetails","canContinue","handleDrag","handleDrop","handleContinue","formatCurrency","amount","getBidStatusIcon","getBidStatusText","v","LABEL_COL_WIDTH","BID_COL_MIN_WIDTH","ComparePhase","activeTab","setActiveTab","showMoreEquipment","setShowMoreEquipment","showMoreContractors","setShowMoreContractors","showMoreCosts","setShowMoreCosts","getHighestValue","values","higherIsBetter","validValues","isHighlighted","bestValue","tabs","getEquipmentData","mainEquipment","getContractorData","getCostData","equipmentData","contractorData","costData","bestSeer","bestHspf","bestYears","bestRating","lowestPrice","bestLaborWarranty","bestEquipmentWarranty","fastestTimeline","getRecommendation","bestBidId","bestScore","cost","contr","score","priceScore","effScore","warrantyScore","repScore","bestBid","generateReasonText","reasons","recommendation","bidCount","tableMinWidth","labelCellStyle","bidCellStyle","tab","_a","_b","Fragment","idx","cert","IncentivesTable","rebatePrograms","selectedIncentives","onToggleIncentive","expandedRows","setExpandedRows","toggleExpand","programId","newExpanded","getAmount","program","totalSelectedAmount","sum","id","isExpanded","isSelected","key","DecidePhase","setRebatePrograms","setSelectedIncentives","selectedContractor","setSelectedContractor","copiedContractor","setCopiedContractor","expandedBids","setExpandedBids","loadRebatePrograms","toggleIncentive","newSelected","getTotalSelectedRebates","toggleQuestionAnswered","question","getQuestionsForBid","copyQuestionsToClipboard","contractorName","unansweredQuestions","text","getPriorityColor","priority","toggleBidExpanded","totalSelectedRebates","netCost","lowestNetCost","bestWarranty","toggleSelection","bidQuestions","answeredCount","isBestPrice","isBestNetCost","isBestRating","isBestEfficiency","totalWarranty","isBestWarranty","CATEGORY_INFO","VerifyPhase","items","setItems","expandedCategory","setExpandedCategory","loadChecklist","allItems","projectStatus","statusMap","s","itemsWithStatus","toggleItem","isCurrentlyVerified","getProgress","total","verified","critical","criticalVerified","getCategoryItems","category","getCategoryProgress","categoryItems","handlePrint","progress","categories","info","categoryProgress","allVerified","_c","PhaseContentWrapper","content","PhaseContent","BidSmartFlow","ACTIVE_PROJECT_KEY","getStoredProjectId","setStoredProjectId","App","activeProjectId","setActiveProjectId","showWelcome","setShowWelcome","storedProjectId","handleSelectProject","handleCreateProject","handleNavigateHome","ReactDOM","React"],"mappings":";;;;;;;;GASa,IAAIA,GAAEC,EAAiBC,GAAE,OAAO,IAAI,eAAe,EAAEC,GAAE,OAAO,IAAI,gBAAgB,EAAEC,GAAE,OAAO,UAAU,eAAeC,GAAEL,GAAE,mDAAmD,kBAAkBM,GAAE,CAAC,IAAI,GAAG,IAAI,GAAG,OAAO,GAAG,SAAS,EAAE,EAClP,SAASC,GAAEC,EAAEC,EAAEC,EAAE,CAAC,IAAIC,EAAEC,EAAE,GAAGC,EAAE,KAAKC,EAAE,KAAcJ,IAAT,SAAaG,EAAE,GAAGH,GAAYD,EAAE,MAAX,SAAiBI,EAAE,GAAGJ,EAAE,KAAcA,EAAE,MAAX,SAAiBK,EAAEL,EAAE,KAAK,IAAIE,KAAKF,EAAEL,GAAE,KAAKK,EAAEE,CAAC,GAAG,CAACL,GAAE,eAAeK,CAAC,IAAIC,EAAED,CAAC,EAAEF,EAAEE,CAAC,GAAG,GAAGH,GAAGA,EAAE,aAAa,IAAIG,KAAKF,EAAED,EAAE,aAAaC,EAAWG,EAAED,CAAC,aAAIC,EAAED,CAAC,EAAEF,EAAEE,CAAC,GAAG,MAAM,CAAC,SAAST,GAAE,KAAKM,EAAE,IAAIK,EAAE,IAAIC,EAAE,MAAMF,EAAE,OAAOP,GAAE,OAAO,CAAC,aAAkBF,GAAEY,GAAA,IAAYR,GAAEQ,GAAA,KAAaR,GCPxWS,GAAA,QAAiBf,0BCDfG,GAAIH,GAENgB,GAAA,WAAqBb,GAAE,WACvBa,GAAA,YAAsBb,GAAE,YCI1B,MAAMc,GAAc,2CACdC,GAAkB,mNAUXC,EAAWC,GAAaH,GAAaC,GAAiB,CACjE,KAAM,CACJ,iBAAkB,GAClB,eAAgB,GAChB,mBAAoB,EAAA,CAExB,CAAC,ECtBKG,GAAc,gBACdC,GAAgB,yBAChBC,GAAe,YAOrB,SAASC,IAAkC,CACzC,GAAI,OAAO,OAAW,IAAa,OAAO,KAE1C,MAAMC,EAAS,IAAI,gBAAgB,OAAO,SAAS,MAAM,EACnDC,EAAQD,EAAO,IAAI,YAAY,EAC/BE,EAAOF,EAAO,IAAI,WAAW,EAEnC,OAAIC,EACK,CAAE,MAAAA,EAAO,KAAMC,GAAQD,EAAM,MAAM,GAAG,EAAE,CAAC,CAAA,EAE3C,IACT,CAEA,SAASE,IAAmC,CAC1C,GAAI,CACF,MAAMC,EAAS,aAAa,QAAQR,EAAW,EAC/C,GAAIQ,EACF,OAAO,KAAK,MAAMA,CAAM,CAE5B,MAAQ,CAER,CACA,OAAO,IACT,CAEA,SAASC,GAAUC,EAAwB,CACzC,GAAI,CACF,aAAa,QAAQV,GAAa,KAAK,UAAUU,CAAI,CAAC,CACxD,MAAQ,CAER,CACF,CAEA,eAAeC,GAAuBN,EAAeO,EAAoC,CACvF,KAAM,CAAE,KAAMC,EAAU,MAAOC,CAAA,EAAe,MAAMhB,EACjD,KAAK,WAAW,EAChB,OAAO,GAAG,EACV,GAAG,QAASO,CAAK,EACjB,YAAA,EAEH,GAAIS,EACF,cAAQ,MAAM,uBAAwBA,CAAU,EAC1CA,EAGR,GAAID,EACF,OAAOA,EAGT,KAAM,CAAE,KAAME,EAAS,MAAOC,CAAA,EAAgB,MAAMlB,EACjD,KAAK,WAAW,EAChB,OAAO,CACN,MAAAO,EACA,UAAWO,CAAA,CACZ,EACA,OAAA,EACA,OAAA,EAEH,GAAII,EACF,cAAQ,MAAM,uBAAwBA,CAAW,EAC3CA,EAGR,OAAOD,CACT,CASO,SAASE,IAAyB,CACvC,KAAM,CAACP,EAAMQ,CAAO,EAAIC,EAAAA,SAAyB,IAAI,EAC/C,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAiBC,CAAkB,EAAIJ,EAAAA,SAAS,EAAK,EACtD,CAACK,EAAOC,CAAQ,EAAIN,EAAAA,SAAuB,IAAI,EAErDO,OAAAA,EAAAA,UAAU,IAAM,CACd,eAAeC,GAAiB,CAC9B,GAAI,CACF,MAAMC,EAAYzB,GAAA,EACZ0B,EAAatB,GAAA,EAEnB,IAAIuB,EAEAF,GACFE,EAAWF,EACXnB,GAAUmB,CAAS,GACVC,EACTC,EAAWD,GAEXC,EAAW,CAAE,MAAO7B,GAAe,KAAMC,EAAA,EACzCO,GAAUqB,CAAQ,GAGpB,MAAMC,EAAS,MAAMpB,GAAuBmB,EAAS,MAAOA,EAAS,IAAI,EAEnEE,EAAaD,EAAO,aAAeA,EAAO,YAC9C,IAAI,KAAKA,EAAO,UAAU,EAAE,QAAA,EAAY,KAAK,MAAQ,IAEvDb,EAAQa,CAAM,EACdR,EAAmBS,CAAU,CAC/B,OAASC,EAAK,CACZ,QAAQ,MAAM,2BAA4BA,CAAG,EAC7CR,EAASQ,aAAe,MAAQA,EAAM,IAAI,MAAM,2BAA2B,CAAC,CAC9E,QAAA,CACEZ,EAAW,EAAK,CAClB,CACF,CAEAM,EAAA,CACF,EAAG,CAAA,CAAE,EAEE,CAAE,KAAAjB,EAAM,QAAAU,EAAS,gBAAAE,EAAiB,MAAAE,CAAA,CAC3C,CCjIA;AAAA;AAAA;AAAA;AAAA;AAAA,GAOA,IAAIU,GAAoB,CACtB,MAAO,6BACP,MAAO,GACP,OAAQ,GACR,QAAS,YACT,KAAM,OACN,OAAQ,eACR,YAAa,EACb,cAAe,QACf,eAAgB,OAClB,ECjBA;AAAA;AAAA;AAAA;AAAA;AAAA,GAUA,MAAMC,GAAeC,GAAWA,EAAO,QAAQ,qBAAsB,OAAO,EAAE,YAAW,EAAG,KAAI,EAC1FC,EAAmB,CAACC,EAAUC,IAAa,CAC/C,MAAMC,EAAYC,EAAAA,WAChB,CAAC,CAAE,MAAAC,EAAQ,eAAgB,KAAAC,EAAO,GAAI,YAAAC,EAAc,EAAG,oBAAAC,EAAqB,UAAAC,EAAY,GAAI,SAAAC,EAAU,GAAGC,CAAI,EAAIC,IAAQC,EAAAA,cACvH,MACA,CACE,IAAAD,EACA,GAAGf,GACH,MAAOS,EACP,OAAQA,EACR,OAAQD,EACR,YAAaG,EAAsB,OAAOD,CAAW,EAAI,GAAK,OAAOD,CAAI,EAAIC,EAC7E,UAAW,CAAC,SAAU,UAAUT,GAAYG,CAAQ,CAAC,GAAIQ,CAAS,EAAE,KAAK,GAAG,EAC5E,GAAGE,CACX,EACM,CACE,GAAGT,EAAS,IAAI,CAAC,CAACY,EAAKC,CAAK,IAAMF,EAAAA,cAAcC,EAAKC,CAAK,CAAC,EAC3D,GAAG,MAAM,QAAQL,CAAQ,EAAIA,EAAW,CAACA,CAAQ,CACzD,CACA,CACA,EACE,OAAAP,EAAU,YAAc,GAAGF,CAAQ,GAC5BE,CACT,ECjCA;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMa,GAAchB,EAAiB,cAAe,CAClD,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,KAAM,IAAK,SAAU,EACzD,CAAC,OAAQ,CAAE,GAAI,KAAM,GAAI,KAAM,GAAI,IAAK,GAAI,KAAM,IAAK,QAAQ,CAAE,EACjE,CAAC,OAAQ,CAAE,GAAI,KAAM,GAAI,QAAS,GAAI,KAAM,GAAI,KAAM,IAAK,QAAQ,CAAE,CACvE,CAAC,ECbD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMiB,GAAgBjB,EAAiB,gBAAiB,CACtD,CACE,OACA,CACE,EAAG,4EACH,IAAK,QACX,CACA,EACE,CAAC,OAAQ,CAAE,EAAG,UAAW,IAAK,QAAQ,CAAE,EACxC,CAAC,OAAQ,CAAE,EAAG,aAAc,IAAK,QAAQ,CAAE,CAC7C,CAAC,ECnBD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMkB,GAAalB,EAAiB,aAAc,CAChD,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,EACzC,CAAC,OAAQ,CAAE,EAAG,gBAAiB,IAAK,QAAQ,CAAE,CAChD,CAAC,ECZD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMmB,GAAQnB,EAAiB,QAAS,CACtC,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,IAAK,EAAG,IAAK,IAAK,SAAU,EACvD,CAAC,OAAQ,CAAE,EAAG,0CAA2C,IAAK,QAAQ,CAAE,CAC1E,CAAC,ECZD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMoB,GAAYpB,EAAiB,YAAa,CAC9C,CAAC,OAAQ,CAAE,EAAG,aAAc,IAAK,QAAQ,CAAE,EAC3C,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,EACzC,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,EACzC,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,CAC3C,CAAC,ECdD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMqB,GAAWrB,EAAiB,WAAY,CAC5C,CAAC,OAAQ,CAAE,MAAO,KAAM,OAAQ,KAAM,EAAG,IAAK,EAAG,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,SAAU,EACvF,CAAC,OAAQ,CAAE,GAAI,KAAM,GAAI,KAAM,GAAI,IAAK,GAAI,IAAK,IAAK,QAAQ,CAAE,EAChE,CAAC,OAAQ,CAAE,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,QAAQ,CAAE,EAC9D,CAAC,OAAQ,CAAE,GAAI,IAAK,GAAI,KAAM,GAAI,KAAM,GAAI,KAAM,IAAK,QAAQ,CAAE,CACnE,CAAC,ECdD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMsB,EAAetB,EAAiB,eAAgB,CACpD,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,KAAM,IAAK,SAAU,EACzD,CAAC,OAAQ,CAAE,EAAG,gBAAiB,IAAK,QAAQ,CAAE,CAChD,CAAC,ECZD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMuB,EAAcvB,EAAiB,cAAe,CAClD,CAAC,OAAQ,CAAE,EAAG,qCAAsC,IAAK,QAAQ,CAAE,EACnE,CAAC,OAAQ,CAAE,EAAG,iBAAkB,IAAK,QAAQ,CAAE,CACjD,CAAC,ECZD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMwB,GAAcxB,EAAiB,cAAe,CAClD,CAAC,OAAQ,CAAE,EAAG,iBAAkB,IAAK,QAAQ,CAAE,EAC/C,CAAC,OAAQ,CAAE,EAAG,4DAA6D,IAAK,QAAQ,CAAE,CAC5F,CAAC,ECZD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMyB,GAAQzB,EAAiB,QAAS,CAAC,CAAC,OAAQ,CAAE,EAAG,kBAAmB,IAAK,QAAQ,CAAE,CAAC,CAAC,ECT3F;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAM0B,GAAc1B,EAAiB,cAAe,CAClD,CAAC,OAAQ,CAAE,EAAG,eAAgB,IAAK,QAAQ,CAAE,CAC/C,CAAC,ECXD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAM2B,GAAe3B,EAAiB,eAAgB,CACpD,CAAC,OAAQ,CAAE,EAAG,gBAAiB,IAAK,QAAQ,CAAE,CAChD,CAAC,ECXD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAM4B,GAAY5B,EAAiB,YAAa,CAAC,CAAC,OAAQ,CAAE,EAAG,iBAAkB,IAAK,QAAQ,CAAE,CAAC,CAAC,ECTlG;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAM6B,GAAS7B,EAAiB,SAAU,CACxC,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,KAAM,IAAK,QAAQ,CAAE,CAC3D,CAAC,ECXD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAM8B,GAAiB9B,EAAiB,iBAAkB,CACxD,CAAC,OAAQ,CAAE,MAAO,IAAK,OAAQ,IAAK,EAAG,IAAK,EAAG,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,SAAU,EACrF,CACE,OACA,CACE,EAAG,2EACH,IAAK,QACX,CACA,EACE,CAAC,OAAQ,CAAE,EAAG,gBAAiB,IAAK,QAAQ,CAAE,CAChD,CAAC,ECnBD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAM+B,GAAQ/B,EAAiB,QAAS,CACtC,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,KAAM,IAAK,SAAU,EACzD,CAAC,WAAY,CAAE,OAAQ,mBAAoB,IAAK,QAAQ,CAAE,CAC5D,CAAC,ECZD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMgC,GAAOhC,EAAiB,OAAQ,CACpC,CAAC,OAAQ,CAAE,MAAO,KAAM,OAAQ,KAAM,EAAG,IAAK,EAAG,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,SAAU,EACvF,CAAC,OAAQ,CAAE,EAAG,0DAA2D,IAAK,QAAQ,CAAE,CAC1F,CAAC,ECZD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMiC,GAAajC,EAAiB,aAAc,CAChD,CAAC,OAAQ,CAAE,GAAI,KAAM,GAAI,KAAM,GAAI,IAAK,GAAI,KAAM,IAAK,QAAQ,CAAE,EACjE,CAAC,OAAQ,CAAE,EAAG,oDAAqD,IAAK,QAAQ,CAAE,CACpF,CAAC,ECZD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMkC,GAAelC,EAAiB,eAAgB,CACpD,CAAC,OAAQ,CAAE,EAAG,2DAA4D,IAAK,QAAQ,CAAE,EACzF,CAAC,WAAY,CAAE,OAAQ,iBAAkB,IAAK,QAAQ,CAAE,EACxD,CAAC,OAAQ,CAAE,GAAI,KAAM,GAAI,KAAM,GAAI,KAAM,GAAI,IAAK,IAAK,QAAQ,CAAE,CACnE,CAAC,ECbD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMmC,GAAWnC,EAAiB,WAAY,CAC5C,CACE,OACA,CAAE,EAAG,wEAAyE,IAAK,QAAQ,CAC/F,EACE,CAAC,WAAY,CAAE,OAAQ,iBAAkB,IAAK,QAAQ,CAAE,EACxD,CAAC,OAAQ,CAAE,GAAI,KAAM,GAAI,IAAK,GAAI,KAAM,GAAI,KAAM,IAAK,QAAQ,CAAE,EACjE,CAAC,OAAQ,CAAE,GAAI,KAAM,GAAI,IAAK,GAAI,KAAM,GAAI,KAAM,IAAK,QAAQ,CAAE,EACjE,CAAC,OAAQ,CAAE,GAAI,KAAM,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,QAAQ,CAAE,CACjE,CAAC,EClBD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMoC,GAAapC,EAAiB,aAAc,CAChD,CACE,OACA,CACE,EAAG,oLACH,IAAK,QACX,CACA,CACA,CAAC,ECjBD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMqC,GAAQrC,EAAiB,QAAS,CACtC,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,KAAM,IAAK,SAAU,EACzD,CAAC,OAAQ,CAAE,EAAG,kDAAmD,IAAK,QAAQ,CAAE,EAChF,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,CAC3C,CAAC,ECbD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMsC,GAAatC,EAAiB,aAAc,CAChD,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,KAAM,IAAK,SAAU,EACzD,CAAC,OAAQ,CAAE,EAAG,uCAAwC,IAAK,QAAQ,CAAE,EACrE,CAAC,OAAQ,CAAE,EAAG,aAAc,IAAK,QAAQ,CAAE,CAC7C,CAAC,ECbD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMuC,GAAOvC,EAAiB,OAAQ,CACpC,CAAC,OAAQ,CAAE,EAAG,iDAAkD,IAAK,QAAQ,CAAE,EAC/E,CAAC,WAAY,CAAE,OAAQ,wBAAyB,IAAK,QAAQ,CAAE,CACjE,CAAC,ECZD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMwC,GAAOxC,EAAiB,OAAQ,CACpC,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,KAAM,IAAK,SAAU,EACzD,CAAC,OAAQ,CAAE,EAAG,YAAa,IAAK,QAAQ,CAAE,EAC1C,CAAC,OAAQ,CAAE,EAAG,YAAa,IAAK,QAAQ,CAAE,CAC5C,CAAC,ECbD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMyC,GAAOzC,EAAiB,OAAQ,CACpC,CAAC,OAAQ,CAAE,MAAO,KAAM,OAAQ,KAAM,EAAG,IAAK,EAAG,IAAK,GAAI,IAAK,IAAK,QAAQ,CAAE,EAC9E,CAAC,OAAQ,CAAE,EAAG,4CAA6C,IAAK,QAAQ,CAAE,CAC5E,CAAC,ECZD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAM0C,GAAQ1C,EAAiB,QAAS,CACtC,CACE,OACA,CACE,EAAG,gSACH,IAAK,QACX,CACA,CACA,CAAC,ECjBD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAM2C,GAAO3C,EAAiB,OAAQ,CACpC,CAAC,UAAW,CAAE,OAAQ,qBAAsB,IAAK,QAAQ,CAAE,CAC7D,CAAC,ECXD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAM4C,GAAO5C,EAAiB,OAAQ,CACpC,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,EACzC,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,CAC3C,CAAC,ECZD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAM6C,GAAU7C,EAAiB,UAAW,CAC1C,CAAC,WAAY,CAAE,OAAQ,oBAAqB,IAAK,QAAQ,CAAE,EAC3D,CACE,OACA,CACE,EAAG,6EACH,IAAK,QACX,CACA,EACE,CAAC,OAAQ,CAAE,MAAO,KAAM,OAAQ,IAAK,EAAG,IAAK,EAAG,KAAM,IAAK,QAAQ,CAAE,CACvE,CAAC,ECnBD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAM8C,GAAS9C,EAAiB,SAAU,CACxC,CAAC,OAAQ,CAAE,EAAG,6CAA8C,IAAK,QAAQ,CAAE,CAC7E,CAAC,ECXD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAM+C,GAAS/C,EAAiB,SAAU,CACxC,CAAC,OAAQ,CAAE,MAAO,KAAM,OAAQ,KAAM,EAAG,IAAK,EAAG,IAAK,GAAI,IAAK,IAAK,QAAQ,CAAE,CAChF,CAAC,ECXD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMgD,EAAOhD,EAAiB,OAAQ,CACpC,CACE,UACA,CACE,OAAQ,iGACR,IAAK,QACX,CACA,CACA,CAAC,ECjBD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMiD,GAASjD,EAAiB,SAAU,CACxC,CAAC,OAAQ,CAAE,EAAG,4CAA6C,IAAK,QAAQ,CAAE,EAC1E,CAAC,WAAY,CAAE,OAAQ,gBAAiB,IAAK,QAAQ,CAAE,EACvD,CAAC,OAAQ,CAAE,GAAI,KAAM,GAAI,KAAM,GAAI,IAAK,GAAI,KAAM,IAAK,QAAQ,CAAE,CACnE,CAAC,ECbD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMkD,GAAQlD,EAAiB,QAAS,CACtC,CAAC,OAAQ,CAAE,EAAG,4CAA6C,IAAK,QAAQ,CAAE,EAC1E,CAAC,SAAU,CAAE,GAAI,IAAK,GAAI,IAAK,EAAG,IAAK,IAAK,QAAS,EACrD,CAAC,OAAQ,CAAE,EAAG,6BAA8B,IAAK,QAAQ,CAAE,EAC3D,CAAC,OAAQ,CAAE,EAAG,4BAA6B,IAAK,QAAQ,CAAE,CAC5D,CAAC,ECdD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMmD,GAAUnD,EAAiB,UAAW,CAC1C,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,KAAM,IAAK,SAAU,EACzD,CAAC,OAAQ,CAAE,EAAG,YAAa,IAAK,QAAQ,CAAE,EAC1C,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,CAC3C,CAAC,ECbD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMoD,GAAMpD,EAAiB,MAAO,CAClC,CAAC,UAAW,CAAE,OAAQ,yCAA0C,IAAK,QAAQ,CAAE,CACjF,CAAC,ECgDD,eAAsBqD,GACpBC,EACAC,EAAgC,GACd,CAClB,KAAM,CAAE,KAAAC,EAAM,MAAArE,GAAU,MAAM1B,EAC3B,KAAK,UAAU,EACf,OAAO,CACN,QAAS6F,EACT,aAAcC,EAAY,cAAgB,uBAC1C,OAAQA,EAAY,QAAU,QAC9B,GAAGA,CAAA,CACJ,EACA,OAAA,EACA,OAAA,EAEH,GAAIpE,EAAO,MAAMA,EACjB,OAAOqE,CACT,CAaA,eAAsBC,GAAkBH,EAAoC,CAC1E,KAAM,CAAE,KAAAE,EAAM,MAAArE,GAAU,MAAM1B,EAC3B,KAAK,UAAU,EACf,OAAO,GAAG,EACV,GAAG,UAAW6F,CAAM,EACpB,MAAM,aAAc,CAAE,UAAW,GAAO,EAE3C,GAAInE,EAAO,MAAMA,EACjB,OAAOqE,GAAQ,CAAA,CACjB,CAEA,eAAsBE,GAAeJ,EAAyC,CAC5E,KAAM,CAAE,KAAAE,EAAM,MAAArE,CAAA,EAAU,MAAM1B,EAC3B,KAAK,UAAU,EACf,OAAO,GAAG,EACV,GAAG,UAAW6F,CAAM,EACpB,GAAG,eAAgB,4BAA4B,EAC/C,MAAM,aAAc,CAAE,UAAW,EAAA,CAAO,EACxC,MAAM,CAAC,EACP,YAAA,EAEH,GAAInE,EAAO,MAAMA,EACjB,OAAOqE,CACT,CAEA,eAAsBG,GACpBC,EACAC,EACyB,CACzB,KAAM,CAAE,KAAAL,EAAM,MAAArE,CAAA,EAAU,MAAM1B,EAC3B,KAAK,UAAU,EACf,OAAOoG,CAAO,EACd,GAAG,KAAMD,CAAS,EAClB,OAAA,EACA,YAAA,EAEH,GAAIzE,EAAO,MAAMA,EACjB,OAAOqE,CACT,CASA,eAAsBM,GACpBF,EACAG,EACyB,CACzB,MAAMF,EAA4B,CAChC,qBAAsBE,CAAA,EAExB,OAAIA,IACFF,EAAQ,0BAA4B,IAAI,KAAA,EAAO,YAAA,GAE1CF,GAAcC,EAAWC,CAAO,CACzC,CAeA,eAAsBG,GACpBJ,EACAK,EACwB,CACxB,KAAM,CAAE,KAAAT,EAAM,MAAArE,GAAU,MAAM1B,EAC3B,KAAK,iBAAiB,EACtB,OAAO,CACN,WAAYmG,EACZ,gBAAiBK,EAAQ,iBAAmB,qBAC5C,iBAAkBA,EAAQ,kBAAoB,EAC9C,sBAAuBA,EAAQ,uBAAyB,SACxD,kBAAmBA,EAAQ,mBAAqB,GAChD,iBAAkBA,EAAQ,kBAAoB,GAC9C,YAAaA,EAAQ,aAAe,GACpC,GAAGA,CAAA,CACJ,EACA,OAAA,EACA,OAAA,EAEH,GAAI9E,EAAO,MAAMA,EACjB,OAAOqE,CACT,CAaA,eAAsBU,GAAiBN,EAA6C,CAClF,KAAM,CAAE,KAAAJ,EAAM,MAAArE,CAAA,EAAU,MAAM1B,EAC3B,KAAK,iBAAiB,EACtB,OAAO,GAAG,EACV,GAAG,aAAcmG,CAAS,EAC1B,MAAM,gBAAiB,CAAE,UAAW,GAAO,WAAY,GAAO,EAEjE,GAAIzE,EAAO,MAAMA,EACjB,OAAOqE,GAAQ,CAAA,CACjB,CAqJA,eAAsBW,GAAkBC,EAAwC,CAC9E,KAAM,CAAE,KAAAZ,EAAM,MAAArE,GAAU,MAAM1B,EAC3B,KAAK,eAAe,EACpB,OAAO,GAAG,EACV,GAAG,SAAU2G,CAAK,EAErB,GAAIjF,EAAO,MAAMA,EACjB,OAAOqE,GAAQ,CAAA,CACjB,CA0BA,eAAsBa,GACpBD,EACAE,EACyB,CACzB,MAAMC,EAAoBD,EAAU,IAAKE,IAAQ,CAC/C,OAAQJ,EACR,eAAgBI,EAAG,gBAAkB,QACrC,MAAOA,EAAG,OAAS,UACnB,WAAYA,EAAG,YAAc,SAC7B,GAAGA,CAAA,EACH,EAEI,CAAE,KAAAhB,EAAM,MAAArE,CAAA,EAAU,MAAM1B,EAC3B,KAAK,eAAe,EACpB,OAAO8G,CAAiB,EACxB,OAAA,EAEH,GAAIpF,EAAO,MAAMA,EACjB,OAAOqE,GAAQ,CAAA,CACjB,CAiZA,eAAsBiB,GACpBb,EACqC,CACrC,KAAM,CAAE,KAAAJ,EAAM,MAAArE,CAAA,EAAU,MAAM1B,EAC3B,KAAK,sBAAsB,EAC3B,OAAO,GAAG,EACV,GAAG,aAAcmG,CAAS,EAC1B,YAAA,EAEH,GAAIzE,EAAO,MAAMA,EACjB,OAAOqE,CACT,CAEA,eAAsBkB,GACpBd,EACAe,EAA6C,GACf,CAC9B,KAAM,CAAE,KAAAnB,EAAM,MAAArE,GAAU,MAAM1B,EAC3B,KAAK,sBAAsB,EAC3B,OAAO,CACN,WAAYmG,EACZ,eAAgBe,EAAa,gBAAkB,EAC/C,kBAAmBA,EAAa,mBAAqB,EACrD,oBAAqBA,EAAa,qBAAuB,EACzD,kBAAmBA,EAAa,mBAAqB,EACrD,oBAAqBA,EAAa,qBAAuB,EACzD,iBAAkBA,EAAa,kBAAoB,WACnD,kBAAmBA,EAAa,mBAAqB,CAAA,EACrD,mBAAoBA,EAAa,oBAAsB,CAAA,EACvD,sBAAuBA,EAAa,uBAAyB,CAAA,EAC7D,GAAGA,CAAA,CACJ,EACA,OAAA,EACA,OAAA,EAEH,GAAIxF,EAAO,MAAMA,EACjB,OAAOqE,CACT,CAEA,eAAsBoB,GACpBhB,EACAC,EACqC,CACrC,KAAM,CAAE,KAAAL,EAAM,MAAArE,GAAU,MAAM1B,EAC3B,KAAK,sBAAsB,EAC3B,OAAO,CACN,GAAGoG,EACH,WAAY,IAAI,KAAA,EAAO,YAAA,CAAY,CACpC,EACA,GAAG,aAAcD,CAAS,EAC1B,OAAA,EACA,YAAA,EAEH,GAAIzE,EAAO,MAAMA,EACjB,OAAOqE,CACT,CAEA,eAAsBqB,GACpBjB,EACAe,EAC8B,CAG9B,GAFiB,MAAMF,GAAuBb,CAAS,EAEzC,CACZ,MAAMkB,EAAU,MAAMF,GAA0BhB,EAAW,CACzD,GAAGe,EACH,aAAc,IAAI,KAAA,EAAO,YAAA,CAAY,CACtC,EACD,GAAI,CAACG,EAAS,MAAM,IAAI,MAAM,+BAA+B,EAC7D,OAAOA,CACT,CAEA,OAAOJ,GAA0Bd,EAAW,CAC1C,GAAGe,EACH,aAAc,IAAI,KAAA,EAAO,YAAA,CAAY,CACtC,CACH,CC52BO,MAAMI,GAA+B,CAC1C,CACE,IAAK,CACH,gBAAiB,0BACjB,mBAAoB,8BACpB,iBAAkB,iBAClB,iBAAkB,0BAClB,mBAAoB,gBACpB,yBAA0B,KAC1B,mBAAoB,6BACpB,6BAA8B,GAC9B,yBAA0B,IAC1B,+BAAgC,IAChC,0BAA2B,CAAC,iBAAkB,UAAW,4BAA4B,EACrF,+BAAgC,GAChC,iBAAkB,MAClB,WAAY,KACZ,eAAgB,KAChB,eAAgB,KAChB,YAAa,IACb,qBAAsB,MACtB,kBAAmB,KACnB,oBAAqB,KACrB,eAAgB,EAChB,qBAAsB,EACtB,yBAA0B,GAC1B,iBAAkB,KAClB,mBAAoB,GACpB,kBAAmB,GACnB,gBAAiB,wCACjB,cAAe,4DACf,WAAY,CACV,qCACA,wCACA,0BACA,oCACA,gCACA,0BACA,uBACA,oBAAA,EAEF,WAAY,CACV,yBACA,iBACA,yBAAA,EAEF,sBAAuB,OACvB,iBAAkB,GAClB,YAAa,EAAA,EAEf,UAAW,CACT,CACE,eAAgB,eAChB,MAAO,UACP,aAAc,eACd,WAAY,wBACZ,aAAc,KACd,cAAe,EACf,YAAa,GACb,aAAc,KACd,YAAa,GACb,aAAc,KACd,eAAgB,GAChB,OAAQ,GACR,iBAAkB,SAClB,eAAgB,GAChB,QAAS,IACT,sBAAuB,GACvB,2BAA4B,GAC5B,eAAgB,KAChB,WAAY,MAAA,EAEd,CACE,eAAgB,cAChB,MAAO,UACP,aAAc,YACd,WAAY,8BACZ,eAAgB,GAChB,eAAgB,KAChB,WAAY,MAAA,CACd,EAEF,UAAW,CACT,CACE,cAAe,6CACf,kBAAmB,WACnB,SAAU,OACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,2DACf,kBAAmB,WACnB,SAAU,SACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,oEACf,kBAAmB,QACnB,SAAU,OACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,+EACf,kBAAmB,UACnB,SAAU,OACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,kEACf,kBAAmB,cACnB,SAAU,SACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,gEACf,kBAAmB,QACnB,SAAU,SACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,oEACf,kBAAmB,UACnB,SAAU,MACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,mEACf,kBAAmB,WACnB,SAAU,SACV,YAAa,GACb,eAAgB,EAAA,CAClB,CACF,EAEF,CACE,IAAK,CACH,gBAAiB,2BACjB,mBAAoB,+BACpB,iBAAkB,iBAClB,iBAAkB,0BAClB,mBAAoB,gBACpB,yBAA0B,KAC1B,mBAAoB,4BACpB,6BAA8B,EAC9B,yBAA0B,IAC1B,+BAAgC,IAChC,0BAA2B,CAAC,iBAAkB,UAAW,+BAA+B,EACxF,+BAAgC,GAChC,iBAAkB,MAClB,WAAY,KACZ,eAAgB,KAChB,eAAgB,IAChB,YAAa,IACb,qBAAsB,MACtB,kBAAmB,KACnB,oBAAqB,MACrB,eAAgB,EAChB,qBAAsB,EACtB,yBAA0B,GAC1B,iBAAkB,KAClB,mBAAoB,GACpB,kBAAmB,GACnB,gBAAiB,0BACjB,cAAe,wDACf,WAAY,CACV,8BACA,+BACA,sBACA,0BACA,0BACA,gBAAA,EAEF,WAAY,CACV,+CACA,yBACA,gBAAA,EAEF,sBAAuB,OACvB,iBAAkB,GAClB,YAAa,EAAA,EAEf,UAAW,CACT,CACE,eAAgB,eAChB,MAAO,aACP,aAAc,eACd,WAAY,yBACZ,aAAc,KACd,cAAe,EACf,YAAa,GACb,aAAc,KACd,YAAa,KACb,aAAc,KACd,eAAgB,GAChB,OAAQ,GACR,iBAAkB,SAClB,eAAgB,GAChB,QAAS,IACT,sBAAuB,GACvB,2BAA4B,GAC5B,eAAgB,KAChB,WAAY,MAAA,EAEd,CACE,eAAgB,cAChB,MAAO,aACP,aAAc,aACd,WAAY,6BACZ,eAAgB,GAChB,eAAgB,KAChB,WAAY,MAAA,CACd,EAEF,UAAW,CACT,CACE,cAAe,4DACf,kBAAmB,QACnB,SAAU,OACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,yCACf,kBAAmB,WACnB,SAAU,OACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,uEACf,kBAAmB,UACnB,SAAU,OACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,0DACf,kBAAmB,QACnB,SAAU,SACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,iEACf,kBAAmB,YACnB,SAAU,SACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,2DACf,kBAAmB,WACnB,SAAU,SACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,8CACf,kBAAmB,UACnB,SAAU,MACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,mEACf,kBAAmB,WACnB,SAAU,SACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,mEACf,kBAAmB,QACnB,SAAU,MACV,YAAa,GACb,eAAgB,EAAA,CAClB,CACF,EAEF,CACE,IAAK,CACH,gBAAiB,kCACjB,mBAAoB,oBACpB,iBAAkB,iBAClB,iBAAkB,0BAClB,mBAAoB,gBACpB,yBAA0B,KAC1B,6BAA8B,GAC9B,yBAA0B,IAC1B,+BAAgC,IAChC,0BAA2B,CAAC,iBAAkB,UAAW,wBAAyB,eAAe,EACjG,+BAAgC,GAChC,iBAAkB,MAClB,WAAY,KACZ,eAAgB,MAChB,eAAgB,KAChB,YAAa,IACb,qBAAsB,MACtB,kBAAmB,IACnB,oBAAqB,MACrB,eAAgB,EAChB,qBAAsB,EACtB,yBAA0B,GAC1B,iBAAkB,KAClB,mBAAoB,GACpB,kBAAmB,GACnB,gBAAiB,8CACjB,cAAe,8DACf,WAAY,CACV,4BACA,yBACA,gCACA,qCACA,gCACA,6BACA,2BACA,0BACA,6BACA,iCAAA,EAEF,WAAY,CACV,4BACA,gBAAA,EAEF,sBAAuB,OACvB,iBAAkB,GAClB,YAAa,EAAA,EAEf,UAAW,CACT,CACE,eAAgB,eAChB,MAAO,SACP,aAAc,eACd,WAAY,mCACZ,aAAc,KACd,cAAe,EACf,YAAa,KACb,aAAc,KACd,YAAa,KACb,aAAc,IACd,eAAgB,GAChB,OAAQ,GACR,iBAAkB,SAClB,eAAgB,GAChB,QAAS,IACT,sBAAuB,GACvB,2BAA4B,GAC5B,eAAgB,KAChB,WAAY,MAAA,EAEd,CACE,eAAgB,cAChB,MAAO,SACP,aAAc,eACd,WAAY,6BACZ,eAAgB,GAChB,eAAgB,IAChB,WAAY,MAAA,CACd,EAEF,UAAW,CACT,CACE,cAAe,mDACf,kBAAmB,QACnB,SAAU,SACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,yEACf,kBAAmB,UACnB,SAAU,OACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,0DACf,kBAAmB,WACnB,SAAU,OACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,0DACf,kBAAmB,QACnB,SAAU,SACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,kDACf,kBAAmB,QACnB,SAAU,SACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,wEACf,kBAAmB,YACnB,SAAU,MACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,2EACf,kBAAmB,YACnB,SAAU,MACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,kEACf,kBAAmB,QACnB,SAAU,SACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,6EACf,kBAAmB,UACnB,SAAU,SACV,YAAa,GACb,eAAgB,EAAA,EAElB,CACE,cAAe,8DACf,kBAAmB,UACnB,SAAU,MACV,YAAa,GACb,eAAgB,EAAA,CAClB,CACF,CAEJ,EAEaC,GAAyB,CACpC,CACE,aAAc,yBACd,aAAc,UACd,YAAa,oDACb,aAAc,UACd,qBAAsB,GACtB,kBAAmB,GACnB,WAAY,IACZ,iBAAkB,GAClB,UAAW,GACX,UAAW,EAAA,EAEb,CACE,aAAc,sBACd,aAAc,YACd,YAAa,6CACb,aAAc,UACd,iBAAkB,CAAC,IAAI,EACvB,cAAe,KACf,iBAAkB,GAClB,UAAW,GACX,UAAW,EAAA,CAEf,ECxdMC,GAAS,CACb,CACE,OAAQ,EACR,MAAO,SACP,MAAO,sBACP,YAAa,iDACb,KAAMhC,GACN,MAAO,2CAAA,EAET,CACE,OAAQ,EACR,MAAO,UACP,MAAO,kBACP,YAAa,yDACb,KAAM7B,GACN,MAAO,2BAAA,EAET,CACE,OAAQ,EACR,MAAO,SACP,MAAO,mBACP,YAAa,+CACb,KAAMG,EACN,MAAO,6BAAA,EAET,CACE,OAAQ,EACR,MAAO,SACP,MAAO,gBACP,YAAa,gDACb,KAAMO,GACN,MAAO,+BAAA,CAEX,EAOO,SAASoD,GAAsB,CAAE,eAAAC,EAAgB,YAAAC,GAA2C,CACjG,OACEC,EAAAA,KAAC,MAAA,CAAI,UAAU,sDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,uCAAuC,SAAA,8BAErD,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,qFAAA,CAErC,CAAA,EACF,EAEAA,MAAC,OAAI,UAAU,6CACZ,YAAO,IAAI,CAACC,EAAOC,IAAU,CAC5B,MAAMC,EAAOF,EAAM,KACnB,OACEF,EAAAA,KAAC,MAAA,CAAuB,UAAU,WAChC,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0IACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAW,0BAA0BC,EAAM,KAAK,yCACnD,SAAAD,EAAAA,IAACG,EAAA,CAAK,UAAU,SAAA,CAAU,EAC5B,EACAJ,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,2CAA2C,SAAA,CAAA,QAClDE,EAAM,MAAA,EACd,EACAD,EAAAA,IAAC,KAAA,CAAG,UAAU,2CACX,WAAM,KAAA,CACT,CAAA,EACF,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,wCACV,WAAM,WAAA,CACT,CAAA,EACF,EACCE,EAAQP,GAAO,OAAS,GACvBK,EAAAA,IAAC,MAAA,CAAI,UAAU,oDACb,SAAAA,EAAAA,IAAC,MAAA,CACC,QAAQ,YACR,KAAK,OACL,UAAU,8BAEV,SAAAA,EAAAA,IAAC,OAAA,CACC,EAAE,eACF,OAAO,eACP,YAAY,IACZ,cAAc,QACd,eAAe,OAAA,CAAA,CACjB,CAAA,CACF,CACF,CAAA,CAAA,EAhCMC,EAAM,MAkChB,CAEJ,CAAC,CAAA,CACH,GAEEJ,GAAkBC,IAClBE,EAAAA,IAAC,MAAA,CAAI,UAAU,4CACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8DACZ,SAAA,CAAAF,GACCE,EAAAA,KAAC,SAAA,CACC,QAASF,EACT,UAAU,+IAEV,SAAA,CAAAG,EAAAA,IAACrC,GAAA,CAAO,UAAU,SAAA,CAAU,EAAE,4BAAA,CAAA,CAAA,EAIjCmC,GACCC,EAAAA,KAAC,SAAA,CACC,QAASD,EACT,UAAU,6HAEV,SAAA,CAAAE,EAAAA,IAAC3C,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,eAAA,CAAA,CAAA,CAE9B,CAAA,CAEJ,CAAA,CACF,CAAA,EAEJ,CAEJ,CC7GO,SAAS+C,GAAc,CAAE,KAAArH,EAAM,gBAAAsH,EAAiB,gBAAAC,GAAuC,CAC5F,KAAM,CAACC,EAAUC,CAAW,EAAIhH,EAAAA,SAAoB,CAAA,CAAE,EAChD,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EAE3CO,EAAAA,UAAU,IAAM,CACd0G,EAAA,CACF,EAAG,CAAC1H,EAAK,EAAE,CAAC,EAEZ,eAAe0H,GAAe,CAC5B,GAAI,CACF,MAAMC,EAAe,MAAMvC,GAAkBpF,EAAK,EAAE,EACpDyH,EAAYE,CAAY,CAC1B,OAASpG,EAAK,CACZ,QAAQ,MAAM,2BAA4BA,CAAG,CAC/C,QAAA,CACEZ,EAAW,EAAK,CAClB,CACF,CAEA,eAAeiH,GAAmB,CAChC,GAAI,CACF,MAAMC,EAAU,MAAM7C,GAAchF,EAAK,GAAI,CAC3C,aAAc,uBACd,OAAQ,iBAAA,CACT,EACDuH,EAAgBM,EAAQ,EAAE,CAC5B,OAAStG,EAAK,CACZ,QAAQ,MAAM,4BAA6BA,CAAG,CAChD,CACF,CAEA,eAAeuG,GAAqB,CAClC,GAAI,CACF,MAAMC,EAAe,MAAM1C,GAAerF,EAAK,EAAE,EAEjD,GAAI+H,EAAc,CAChBR,EAAgBQ,EAAa,EAAE,EAC/B,MACF,CAEA,MAAMF,EAAU,MAAM7C,GAAchF,EAAK,GAAI,CAC3C,aAAc,6BACd,OAAQ,kBACR,eAAgB,aAChB,iBAAkB,CAAA,CACnB,EAED,MAAMZ,EAAS,KAAK,sBAAsB,EAAE,OAAO,CACjD,WAAYyI,EAAQ,GACpB,eAAgB,EAChB,kBAAmB,EACnB,oBAAqB,EACrB,kBAAmB,EACnB,oBAAqB,EACrB,iBAAkB,eAClB,kBAAmB,CAAC,oBAAqB,uBAAuB,EAChE,mBAAoB,CAAC,4BAA6B,6BAA6B,EAC/E,sBAAuB,CAAC,qBAAqB,EAC7C,aAAc,IAAI,KAAA,EAAO,YAAA,CAAY,CACtC,EAED,UAAWG,KAAUtB,GAAa,CAChC,MAAMuB,EAAM,MAAMtC,GAAUkC,EAAQ,GAAIG,EAAO,GAAG,EAMlD,GAJIA,EAAO,UAAU,OAAS,GAC5B,MAAMhC,GAAoBiC,EAAI,GAAID,EAAO,SAAS,EAGhDA,EAAO,UAAU,OAAS,EAAG,CAC/B,MAAME,EAAYF,EAAO,UAAU,IAAI,CAACzJ,EAAG4J,KAAO,CAChD,OAAQF,EAAI,GACZ,GAAG1J,EACH,cAAe4J,CAAA,EACf,EACF,MAAM/I,EAAS,KAAK,eAAe,EAAE,OAAO8I,CAAS,CACvD,CACF,CAEA,UAAWE,KAAUzB,GAAwB,CAC3C,KAAM,CAAE,KAAM0B,CAAA,EAAmB,MAAMjJ,EACpC,KAAK,iBAAiB,EACtB,OAAO,IAAI,EACX,GAAG,eAAgBgJ,EAAO,YAAY,EACtC,YAAA,EAEEC,GACH,MAAMjJ,EAAS,KAAK,iBAAiB,EAAE,OAAOgJ,CAAM,CAExD,CAEAb,EAAgBM,EAAQ,EAAE,CAC5B,OAAStG,EAAK,CACZ,QAAQ,MAAM,iCAAkCA,CAAG,CACrD,CACF,CAEA,SAAS+G,EAAWC,EAAoB,CACtC,OAAO,IAAI,KAAKA,CAAU,EAAE,mBAAmB,QAAS,CACtD,MAAO,QACP,IAAK,UACL,KAAM,SAAA,CACP,CACH,CAEA,SAASC,EAAeC,EAAgB,CACtC,MAAMC,EAAqE,CACzE,MAAO,CAAE,MAAO,QAAS,UAAW,2BAAA,EACpC,gBAAiB,CAAE,MAAO,iBAAkB,UAAW,2BAAA,EACvD,UAAW,CAAE,MAAO,YAAa,UAAW,6BAAA,EAC5C,UAAW,CAAE,MAAO,YAAa,UAAW,2CAAA,EAC5C,QAAS,CAAE,MAAO,gBAAiB,UAAW,2CAAA,EAC9C,UAAW,CAAE,MAAO,YAAa,UAAW,2BAAA,CAA4B,EAGpEC,EAASD,EAAaD,CAAM,GAAKC,EAAa,MACpD,OACEzB,MAAC,QAAK,UAAW,8CAA8C0B,EAAO,SAAS,GAC5E,WAAO,KAAA,CACV,CAEJ,CAEA,OAAIjI,QAEC,MAAA,CAAI,UAAU,2DACb,SAAAsG,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,qFAAA,CAAsF,EACrGA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,0BAAA,CAAwB,CAAA,CAAA,CACvD,CAAA,CACF,QAKD,MAAA,CAAI,UAAU,0BACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,sBAAmB,EACzEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,0CAE7B,EACCjH,EAAK,OACJgH,OAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,gBAC3BC,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAe,WAAK,KAAA,CAAM,CAAA,CAAA,CACzD,CAAA,EAEJ,EAEAA,EAAAA,IAACJ,GAAA,CAAsB,eAAgBe,EAAkB,YAAaE,EAAoB,EAEzFN,EAAS,OAAS,GACjBR,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,mEACZ,SAAA,CAAAC,EAAAA,IAAClD,GAAA,CAAW,UAAU,uBAAA,CAAwB,EAAE,eAAA,EAElD,QACC,MAAA,CAAI,UAAU,YACZ,SAAAyD,EAAS,IAAKK,GACbb,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAMM,EAAgBO,EAAQ,EAAE,EACzC,UAAU,qJAEV,SAAA,CAAAZ,EAAAA,IAAC,OAAI,UAAU,oEACb,eAACnD,GAAA,CAAS,UAAU,wBAAwB,CAAA,CAC9C,EACAkD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,qCACX,SAAAY,EAAQ,aACX,EACCW,EAAeX,EAAQ,MAAM,CAAA,EAChC,QACC,MAAA,CAAI,UAAU,gDACb,SAAAb,EAAAA,KAAC,OAAA,CAAK,UAAU,0BACd,SAAA,CAAAC,EAAAA,IAACjE,GAAA,CAAS,UAAU,aAAA,CAAc,EACjCsF,EAAWT,EAAQ,UAAU,CAAA,CAAA,CAChC,CAAA,CACF,CAAA,EACF,EACAZ,EAAAA,IAAC3D,GAAA,CAAa,UAAU,iDAAA,CAAkD,CAAA,CAAA,EArBrEuE,EAAQ,EAAA,CAuBhB,CAAA,CACH,CAAA,EACF,EAGFZ,EAAAA,IAAC,OAAI,UAAU,oBACb,eAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,8BAAA,CAErC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CCnMA,MAAM2B,GAAsC,CAC1C,EAAG,SACH,EAAG,UACH,EAAG,SACH,EAAG,QACL,EA6BMC,GAAeC,EAAAA,cAAwC,IAAI,EAE3DxJ,GAAc,uBAQpB,SAASyJ,IAA2C,CAClD,GAAI,CACF,MAAMjJ,EAAS,aAAa,QAAQR,EAAW,EAC/C,GAAIQ,EACF,OAAO,KAAK,MAAMA,CAAM,CAE5B,MAAQ,CACR,CACA,OAAO,IACT,CAEA,SAASkJ,GAAgBC,EAA+B,CACtD,GAAI,CACF,aAAa,QAAQ3J,GAAa,KAAK,UAAU2J,CAAK,CAAC,CACzD,MAAQ,CACR,CACF,CAQO,SAASC,GAAc,CAAE,SAAA7G,EAAU,OAAA4C,EAAQ,iBAAAkE,GAAwC,CACxF,KAAM,CAACF,EAAOG,CAAQ,EAAI3I,WAAqB,CAC7C,aAAc,EACd,YAAa,CACX,EAAG,SACH,EAAG,SACH,EAAG,SACH,EAAG,QAAA,EAEL,UAAW,KACX,QAAS,KACT,KAAM,CAAA,EACN,aAAc,KACd,UAAW,CAAA,EACX,QAAS,GACT,MAAO,IAAA,CACR,EAEDO,EAAAA,UAAU,IAAM,CACd,eAAeqI,GAAoB,CACjC,GAAI,CACF,MAAMC,EAAcP,GAAA,EACdQ,EAAmB,MAAMnE,GAAkBH,CAAM,EAEvD,IAAIM,EACAsC,EAEJ,GAAIsB,EAAkB,CACpB,MAAMK,EAAeD,EAAiB,KAAKjL,GAAKA,EAAE,KAAO6K,CAAgB,EACzE,GAAIK,EACFjE,EAAY4D,EACZtB,EAAU2B,MAEV,OAAM,IAAI,MAAM,mBAAmB,CAEvC,MAAWF,GAAA,MAAAA,EAAa,WAAaC,EAAiB,QAAUjL,EAAE,KAAOgL,EAAY,SAAS,GAC5F/D,EAAY+D,EAAY,UACxBzB,EAAU0B,EAAiB,KAAKjL,GAAKA,EAAE,KAAOgL,EAAY,SAAS,GAC1DC,EAAiB,OAAS,GACnC1B,EAAU0B,EAAiB,CAAC,EAC5BhE,EAAYsC,EAAQ,KAEpBA,EAAU,MAAM7C,GAAcC,EAAQ,CACpC,aAAc,uBACd,OAAQ,iBAAA,CACT,EACDM,EAAYsC,EAAQ,IAGtB,MAAM4B,EAAO,MAAM5D,GAAiBN,CAAS,EACvCmE,EAAoB,MAAM,QAAQ,IACtCD,EAAK,IAAI,MAAOxB,IAAS,CACvB,IAAAA,EACA,UAAW,MAAMnC,GAAkBmC,EAAI,EAAE,CAAA,EACzC,CAAA,EAGE3B,EAAe,MAAMF,GAAuBb,CAAS,EAErD,CAAE,KAAM2C,CAAA,EAAc,MAAM9I,EAC/B,KAAK,eAAe,EACpB,OAAO,GAAG,EACV,GAAG,SAAUqK,EAAK,IAAI9K,GAAKA,EAAE,EAAE,CAAC,EAChC,MAAM,gBAAiB,CAAE,UAAW,EAAA,CAAM,EAE7C,IAAIgL,EAAsB,EACtBC,EAA0C,CAC5C,EAAG,SACH,EAAG,SACH,EAAG,SACH,EAAG,QAAA,EAGDN,GAAeA,EAAY,YAAc/D,GAC3CoE,EAAeL,EAAY,aAC3BM,EAAcN,EAAY,aACjBI,EAAkB,QAAU,IAAKpD,GAAA,MAAAA,EAAc,gBACxDsD,EAAY,CAAC,EAAI,YACjBA,EAAY,CAAC,EAAI,SACjBA,EAAY,CAAC,EAAI,SACjBA,EAAY,CAAC,EAAI,SACjBD,EAAe,GAGjBP,EAAS,CACP,aAAAO,EACA,YAAAC,EACA,UAAArE,EACA,QAAAsC,EACA,KAAM6B,EACN,aAAApD,EACA,UAAW4B,GAAa,CAAA,EACxB,QAAS,GACT,MAAO,IAAA,CACR,EAEDc,GAAgB,CAAE,aAAAW,EAAc,UAAApE,EAAW,YAAAqE,CAAA,CAAa,CAC1D,OAASrI,EAAK,CACZ,QAAQ,MAAM,gCAAiCA,CAAG,EAClD6H,EAASS,IAAS,CAChB,GAAGA,EACH,QAAS,GACT,MAAO,6BAAA,EACP,CACJ,CACF,CAEAR,EAAA,CACF,EAAG,CAACpE,EAAQkE,CAAgB,CAAC,EAE7B,MAAMW,EAAiBC,cAAa7C,GAC3B+B,EAAM,YAAY/B,CAAK,IAAM,SACnC,CAAC+B,EAAM,WAAW,CAAC,EAEhBe,EAAYD,cAAa7C,GAAiB,CACzC4C,EAAe5C,CAAK,GAEzBkC,EAASS,GAAQ,CACf,MAAMI,EAAW,CAAE,GAAGJ,EAAM,aAAc3C,CAAA,EAC1C,OAAA8B,GAAgB,CACd,aAAc9B,EACd,UAAW2C,EAAK,UAChB,YAAaA,EAAK,WAAA,CACnB,EACMI,CACT,CAAC,CACH,EAAG,CAACH,CAAc,CAAC,EAEbI,EAAgBH,cAAa7C,GAAiB,CAClDkC,EAASS,GAAQ,CACf,MAAMM,EAAiB,CAAE,GAAGN,EAAK,WAAA,EAGjC,GAFAM,EAAejD,CAAK,EAAI,YAEpBA,IAAU,EACZiD,EAAe,CAAC,EAAI,SACpBA,EAAe,CAAC,EAAI,SACpBA,EAAe,CAAC,EAAI,aACf,CACL,MAAMC,EAAalD,EAAQ,EACvBkD,GAAa,GAAKD,EAAeC,CAAS,IAAM,WAClDD,EAAeC,CAAS,EAAI,SAEhC,CAEA,MAAMA,EAAalD,EAAQ,EACrBmD,EAAkBD,GAAa,EAAIA,EAAYlD,EAErD,OAAA8B,GAAgB,CACd,aAAcqB,EACd,UAAWR,EAAK,UAChB,YAAaM,CAAA,CACd,EAEM,CACL,GAAGN,EACH,aAAcQ,EACd,YAAaF,CAAA,CAEjB,CAAC,CACH,EAAG,CAAA,CAAE,EAECG,EAAcP,EAAAA,YAAY,SAAY,CAC1C,GAAI,CAACd,EAAM,UAAW,OAEtB,MAAMQ,EAAO,MAAM5D,GAAiBoD,EAAM,SAAS,EAC7CS,EAAoB,MAAM,QAAQ,IACtCD,EAAK,IAAI,MAAOxB,IAAS,CACvB,IAAAA,EACA,UAAW,MAAMnC,GAAkBmC,EAAI,EAAE,CAAA,EACzC,CAAA,EAGJmB,MAAkB,CAAE,GAAGS,EAAM,KAAMH,GAAoB,CACzD,EAAG,CAACT,EAAM,SAAS,CAAC,EAEdsB,EAAsBR,EAAAA,YAAY,SAAY,CAClD,GAAI,CAACd,EAAM,UAAW,OAEtB,MAAM3C,EAAe,MAAMF,GAAuB6C,EAAM,SAAS,EACjEG,EAASS,IAAS,CAAE,GAAGA,EAAM,aAAAvD,GAAe,CAC9C,EAAG,CAAC2C,EAAM,SAAS,CAAC,EAEduB,EAAmBT,EAAAA,YAAY,SAAY,CAC/C,GAAI,CAACd,EAAM,WAAaA,EAAM,KAAK,SAAW,EAAG,OAEjD,KAAM,CAAE,KAAMf,CAAA,EAAc,MAAM9I,EAC/B,KAAK,eAAe,EACpB,OAAO,GAAG,EACV,GAAG,SAAU6J,EAAM,KAAK,IAAItK,GAAKA,EAAE,IAAI,EAAE,CAAC,EAC1C,MAAM,gBAAiB,CAAE,UAAW,EAAA,CAAM,EAE7CyK,EAASS,IAAS,CAAE,GAAGA,EAAM,UAAW3B,GAAa,CAAA,GAAK,CAC5D,EAAG,CAACe,EAAM,UAAWA,EAAM,IAAI,CAAC,EAE1BwB,EAAgBV,cAAa7C,GAC1B0B,GAAa1B,CAAK,EACxB,CAAA,CAAE,EAECwD,EAA2B,CAC/B,GAAGzB,EACH,UAAAe,EACA,cAAAE,EACA,eAAAJ,EACA,YAAAQ,EACA,oBAAAC,EACA,iBAAAC,EACA,cAAAC,CAAA,EAGF,OACExD,EAAAA,IAAC4B,GAAa,SAAb,CAAsB,MAAA6B,EACpB,SAAArI,CAAA,CACH,CAEJ,CAEO,SAASsI,GAA8B,CAC5C,MAAMC,EAAUC,EAAAA,WAAWhC,EAAY,EACvC,GAAI,CAAC+B,EACH,MAAM,IAAI,MAAM,8CAA8C,EAEhE,OAAOA,CACT,CCtSA,MAAMhE,GAA4C,CAChD,CAAE,MAAO,EAAG,MAAO,QAAA,EACnB,CAAE,MAAO,EAAG,MAAO,SAAA,EACnB,CAAE,MAAO,EAAG,MAAO,QAAA,EACnB,CAAE,MAAO,EAAG,MAAO,QAAA,CACrB,EAEO,SAASkE,GAAY,CAAE,SAAAzI,EAAU,eAAA0I,EAAgB,YAAAC,GAAiC,CACvF,KAAM,CAAE,aAAArB,EAAc,YAAAC,EAAa,UAAAI,EAAW,eAAAF,CAAA,EAAmBa,EAAA,EAEjE,OACE3D,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,sDACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAA+D,GACC/D,EAAAA,KAAC,MAAA,CAAI,UAAU,6DACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS+D,EACT,UAAU,4FACV,aAAW,kCAEX,SAAA,CAAA9D,EAAAA,IAAC,OAAI,UAAU,oHACb,eAAC/C,GAAA,CAAK,UAAU,UAAU,CAAA,CAC5B,EACA+C,EAAAA,IAAC,OAAA,CAAK,UAAU,uCAAuC,SAAA,WAAA,CAAS,CAAA,CAAA,CAAA,EAElEA,EAAAA,IAAC3D,GAAA,CAAa,UAAU,uBAAA,CAAwB,EAChD2D,EAAAA,IAAC,OAAA,CAAK,UAAU,yEACb,YAAe,iBAAA,CAClB,CAAA,EACF,EAEFA,MAAC,OAAI,UAAU,oCACZ,YAAO,IAAI,CAACgE,EAAM9D,IAAU,CAC3B,MAAMsB,EAASmB,EAAYqB,EAAK,KAAK,EAC/BC,EAAWvB,IAAiBsB,EAAK,MACjCE,EAAcrB,EAAemB,EAAK,KAAK,EAE7C,OACEjE,EAAAA,KAAC,MAAA,CAAqB,UAAU,2BAC9B,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMmE,GAAenB,EAAUiB,EAAK,KAAK,EAClD,SAAU,CAACE,EACX,UAAW;AAAA;AAAA,wBAEPA,EAAc,iBAAmB,oBAAoB;AAAA,wBACrDD,EAAW,cAAgBC,EAAc,+BAAiC,YAAY;AAAA,sBAG1F,SAAA,CAAAlE,EAAAA,IAAC,MAAA,CACC,UAAW;AAAA;AAAA,0BAEPwB,IAAW,YAAc,iCAAmC,EAAE;AAAA,0BAC9DA,IAAW,UAAYyC,EAAW,iCAAmC,EAAE;AAAA,0BACvEzC,IAAW,UAAY,CAACyC,EAAW,6EAA+E,EAAE;AAAA,0BACpHzC,IAAW,SAAW,4BAA8B,EAAE;AAAA,wBAGzD,aAAW,YACVxB,MAAC7D,IAAM,UAAU,UAAU,EAE3B6H,EAAK,KAAA,CAAA,EAGThE,EAAAA,IAAC,OAAA,CACC,UAAW;AAAA;AAAA,0BAEPiE,EAAW,gBAAkB,eAAe;AAAA,wBAG/C,SAAAD,EAAK,KAAA,CAAA,CACR,CAAA,CAAA,EAGD9D,EAAQP,GAAO,OAAS,GACvBK,EAAAA,IAAC,MAAA,CAAI,UAAU,cACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAW;AAAA;AAAA,4BAEP2C,EAAazC,EAAQ,CAAW,IAAM,UAAYyC,EAAazC,EAAQ,CAAW,IAAM,YACtF,sBACA,aACJ;AAAA,yBAAA,CAAA,CAEJ,CACF,CAAA,CAAA,EA9CM8D,EAAK,KAgDf,CAEJ,CAAC,CAAA,CACH,QAEC,MAAA,CAAI,UAAU,OACb,SAAAhE,MAAC,MAAA,CAAI,UAAU,+CACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,yDACV,MAAO,CACL,MAAO,IAAK0C,EAAe,GAAK,EAAK,KAAOC,EAAYD,CAAY,IAAM,YAAc,GAAK,EAAE,GAAA,CACjG,CAAA,EAEJ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAEA1C,EAAAA,IAAC,OAAA,CAAK,UAAU,4CACb,SAAA5E,CAAA,CACH,CAAA,EACF,CAEJ,CC5GA,SAAS+I,EAAe,CAAE,MAAAC,EAAO,MAAAX,EAAO,SAAAY,EAAU,YAAAC,GAAoC,CACpF,OACEvE,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,oCAAqC,SAAAoE,EAAM,EAC5DrE,EAAAA,KAAC,OAAA,CAAK,UAAU,wBAAyB,SAAA,CAAA0D,EAAM,IAAA,CAAA,CAAE,CAAA,EACnD,EACAzD,EAAAA,IAAC,QAAA,CACC,KAAK,QACL,IAAI,IACJ,IAAI,IACJ,MAAAyD,EACA,SAAW7L,GAAMyM,EAAS,SAASzM,EAAE,OAAO,KAAK,CAAC,EAClD,UAAU,0FAAA,CAAA,EAEZoI,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,SAAAsE,CAAA,CAAY,CAAA,EACpD,CAEJ,CAEO,SAASC,IAAc,CAC5B,KAAM,CAAE,UAAAjG,EAAW,QAAAsC,EAAS,KAAA4B,EAAM,aAAAnD,EAAc,cAAA4D,EAAe,oBAAAK,CAAA,EAAwBI,EAAA,EAEjF,CAACc,EAAYC,CAAa,EAAIjL,WAAS,CAC3C,OAAO6F,GAAA,YAAAA,EAAc,iBAAkB,EACvC,YAAYA,GAAA,YAAAA,EAAc,sBAAuB,EACjD,UAAUA,GAAA,YAAAA,EAAc,oBAAqB,EAC7C,YAAYA,GAAA,YAAAA,EAAc,sBAAuB,EACjD,UAAUA,GAAA,YAAAA,EAAc,oBAAqB,CAAA,CAC9C,EAEK,CAACqF,EAAQC,CAAS,EAAInL,EAAAA,SAAS,EAAK,EACpC,CAACoL,EAAYC,CAAa,EAAIrL,EAAAA,SAAS,EAAK,EAC5C,CAACsL,EAAoBC,CAAqB,EAAIvL,EAAAA,UAASoH,GAAA,YAAAA,EAAS,uBAAwB,EAAK,EAC7F,CAACoE,EAAoBC,CAAqB,EAAIzL,EAAAA,SAAS,EAAK,EAElEO,EAAAA,UAAU,IAAM,CACVsF,GACFoF,EAAc,CACZ,MAAOpF,EAAa,gBAAkB,EACtC,WAAYA,EAAa,qBAAuB,EAChD,SAAUA,EAAa,mBAAqB,EAC5C,WAAYA,EAAa,qBAAuB,EAChD,SAAUA,EAAa,mBAAqB,CAAA,CAC7C,CAEL,EAAG,CAACA,CAAY,CAAC,EAEjBtF,EAAAA,UAAU,IAAM,CACV6G,GACFmE,EAAsBnE,EAAQ,sBAAwB,EAAK,CAE/D,EAAG,CAACA,CAAO,CAAC,EAMZ,MAAMsE,EAJY1C,EAAK,UACrB9K,EAAE,IAAI,iBAAmB,GAAKA,EAAE,IAAI,eAAA,EAGR,QAAU,EAElCyN,EAAcvN,GAAuB,CACzCA,EAAE,eAAA,EACFA,EAAE,gBAAA,EACEA,EAAE,OAAS,aAAeA,EAAE,OAAS,WACvCiN,EAAc,EAAI,EACTjN,EAAE,OAAS,aACpBiN,EAAc,EAAK,CAEvB,EAEMO,EAAcxN,GAAuB,CACzCA,EAAE,eAAA,EACFA,EAAE,gBAAA,EACFiN,EAAc,EAAK,CACrB,EAEMQ,EAAiB,SAAY,CACjC,GAAI,GAAC/G,GAAa,CAAC4G,GAEnB,CAAAP,EAAU,EAAI,EACd,GAAI,CACF,MAAMpF,GAAwBjB,EAAW,CACvC,eAAgBkG,EAAW,MAC3B,oBAAqBA,EAAW,WAChC,kBAAmBA,EAAW,SAC9B,oBAAqBA,EAAW,WAChC,kBAAmBA,EAAW,QAAA,CAC/B,EACD,MAAMhG,GAAgCF,EAAWwG,CAAkB,EACnE,MAAMxB,EAAA,EACNL,EAAc,CAAC,CACjB,OAAS3I,EAAK,CACZ,QAAQ,MAAM,+BAAgCA,CAAG,CACnD,QAAA,CACEqK,EAAU,EAAK,CACjB,EACF,EAEMW,EAAkBC,GACf,IAAI,KAAK,aAAa,QAAS,CACpC,MAAO,WACP,SAAU,MACV,sBAAuB,EACvB,sBAAuB,CAAA,CACxB,EAAE,OAAOA,CAAM,EAGZC,EAAoBxE,GACpBA,EAAI,IAAI,iBAAmB,EACtBhB,EAAAA,IAAChE,EAAA,CAAa,UAAU,+BAAA,CAAgC,EAE1DgE,EAAAA,IAACvD,GAAA,CAAM,UAAU,wBAAA,CAAyB,EAG7CgJ,EAAoBzE,GACpBA,EAAI,IAAI,iBAAmB,EACtB,QAEF,aAGT,OACEjB,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,mBAAgB,EACjEA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,sFAAA,CAElC,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,mEACZ,SAAA,CAAAC,EAAAA,IAACrC,GAAA,CAAO,UAAU,+BAAA,CAAgC,EAAE,kBAAA,EAEtD,EAEAoC,EAAAA,KAAC,MAAA,CACC,YAAaoF,EACb,YAAaA,EACb,WAAYA,EACZ,OAAQC,EACR,UAAW;AAAA;AAAA,cAEPR,EAAa,6CAA+C,uCAAuC;AAAA,YAGvG,SAAA,CAAA5E,EAAAA,IAAC,OAAI,UAAU,mFACb,eAACnD,GAAA,CAAS,UAAU,wBAAwB,CAAA,CAC9C,EACAmD,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,uCAAoC,EACtEA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,KAAE,EAC5CA,EAAAA,IAAC,SAAA,CAAO,UAAU,oBAAoB,SAAA,eAEtC,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,wCAAA,CAE1C,CAAA,CAAA,CAAA,EAGDwC,EAAK,OAAS,GACbzC,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,oCAAoC,SAAA,CAAA,kBAAgByC,EAAK,OAAO,GAAA,EAAC,EAC9EA,EAAK,IAAKwB,GACTjE,EAAAA,KAAC,MAAA,CAEC,UAAU,8DAEV,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAACnD,GAAA,CAAS,UAAU,uBAAA,CAAwB,SAC3C,MAAA,CACC,SAAA,CAAAmD,EAAAA,IAAC,IAAA,CAAE,UAAU,4BACV,SAAAgE,EAAK,IAAI,iBAAmBA,EAAK,IAAI,oBAAsB,oBAAA,CAC9D,EACAhE,EAAAA,IAAC,IAAA,CAAE,UAAU,wBACV,SAAAgE,EAAK,IAAI,iBAAmB,EAAIsB,EAAetB,EAAK,IAAI,gBAAgB,EAAI,eAAA,CAC/E,CAAA,CAAA,CACF,CAAA,EACF,EACAjE,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAW,WAAWgE,EAAK,IAAI,iBAAmB,EAAI,wBAA0B,gBAAgB,GACnG,SAAAyB,EAAiBzB,CAAI,EACxB,EACCwB,EAAiBxB,CAAI,CAAA,CAAA,CACxB,CAAA,CAAA,EAnBKA,EAAK,IAAI,EAAA,CAqBjB,CAAA,EACH,EAGFjE,EAAAA,KAAC,SAAA,CAAO,UAAU,uEAChB,SAAA,CAAAC,EAAAA,IAAC1C,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,iBAAA,EAE9B,EAECkF,EAAK,OAAS,GACbzC,EAAAA,KAAC,MAAA,CAAI,UAAU,wEACb,SAAA,CAAAC,EAAAA,IAACtE,GAAA,CAAY,UAAU,8BAAA,CAA+B,EACtDqE,EAAAA,KAAC,IAAA,CAAE,UAAU,UAAU,SAAA,CAAA,wCACiByC,EAAK,SAAW,EAAI,wCAA0C,gCAAA,CAAA,CACtG,CAAA,CAAA,CACF,CAAA,EAEJ,EAEAzC,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,4BAAyB,EAClFA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,4GAE1C,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAACmE,EAAA,CACC,MAAM,eACN,MAAOK,EAAW,MAClB,SAAWkB,GAAMjB,EAAcpN,IAAM,CAAE,GAAGA,EAAG,MAAOqO,CAAA,EAAI,EACxD,YAAY,4CAAA,CAAA,EAGd1F,EAAAA,IAACmE,EAAA,CACC,MAAM,wCACN,MAAOK,EAAW,WAClB,SAAWkB,GAAMjB,EAAcpN,IAAM,CAAE,GAAGA,EAAG,WAAYqO,CAAA,EAAI,EAC7D,YAAY,uDAAA,CAAA,EAGd1F,EAAAA,IAACmE,EAAA,CACC,MAAM,kBACN,MAAOK,EAAW,SAClB,SAAWkB,GAAMjB,EAAcpN,IAAM,CAAE,GAAGA,EAAG,SAAUqO,CAAA,EAAI,EAC3D,YAAY,yCAAA,CAAA,EAGd1F,EAAAA,IAACmE,EAAA,CACC,MAAM,wBACN,MAAOK,EAAW,WAClB,SAAWkB,GAAMjB,EAAcpN,IAAM,CAAE,GAAGA,EAAG,WAAYqO,CAAA,EAAI,EAC7D,YAAY,yCAAA,CAAA,EAGd1F,EAAAA,IAACmE,EAAA,CACC,MAAM,wBACN,MAAOK,EAAW,SAClB,SAAWkB,GAAMjB,EAAcpN,IAAM,CAAE,GAAGA,EAAG,SAAUqO,CAAA,EAAI,EAC3D,YAAY,yCAAA,CAAA,CACd,CAAA,CACF,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,mDACb,SAAA3F,EAAAA,KAAC,QAAA,CAAM,UAAU,8CACf,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,SACb,SAAAA,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,QAAS8E,EACT,SAAWlN,GAAMmN,EAAsBnN,EAAE,OAAO,OAAO,EACvD,UAAU,sHAAA,CAAA,EAEd,EACAmI,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAC,EAAAA,IAACpC,GAAA,CAAM,UAAU,+BAAA,CAAgC,EACjDoC,EAAAA,IAAC,OAAA,CAAK,UAAU,4BAA4B,SAAA,sDAAA,CAE5C,CAAA,EACF,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,wCAAwC,SAAA,4IAGrD,EACAD,EAAAA,KAAC,SAAA,CACC,KAAK,SACL,QAAUnI,GAAM,CACdA,EAAE,eAAA,EACFqN,EAAsB,CAACD,CAAkB,CAC3C,EACA,UAAU,yFAEV,SAAA,CAAAhF,EAAAA,IAACxC,GAAA,CAAO,UAAU,aAAA,CAAc,EAC/BwH,EAAqB,uBAAyB,sBAAA,CAAA,CAAA,EAGhDA,GACCjF,EAAAA,KAAC,MAAA,CAAI,UAAU,4EACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,iCAAiC,SAAA,oCAAiC,EAC/ED,EAAAA,KAAC,KAAA,CAAG,UAAU,uCACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,oCAAA,CAAkC,EACtCA,EAAAA,IAAC,MAAG,SAAA,yDAAA,CAAuD,EAC3DA,EAAAA,IAAC,MAAG,SAAA,uCAAA,CAAqC,EACzCA,EAAAA,IAAC,MAAG,SAAA,gDAAA,CAA8C,CAAA,EACpD,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,iCAAiC,SAAA,6BAA0B,EACxED,EAAAA,KAAC,KAAA,CAAG,UAAU,kCACZ,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,0CAAA,CAAwC,EAC5CA,EAAAA,IAAC,MAAG,SAAA,oBAAA,CAAkB,EACtBA,EAAAA,IAAC,MAAG,SAAA,qCAAA,CAAmC,EACvCA,EAAAA,IAAC,MAAG,SAAA,wBAAA,CAAsB,CAAA,EAC5B,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,sEAAA,CAE1C,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,mBACb,SAAAD,EAAAA,KAAC,SAAA,CACC,QAASsF,EACT,SAAU,CAACH,GAAeR,EAC1B,UAAU,+CAET,SAAA,CAAAA,EAAS,YAAc,sBACxB1E,EAAAA,IAACpE,GAAA,CAAW,UAAU,SAAA,CAAU,CAAA,CAAA,CAAA,EAEpC,EAEC,CAACsJ,GACAlF,EAAAA,IAAC,IAAA,CAAE,UAAU,oCAAoC,SAAA,oCAAA,CAEjD,CAAA,EAEJ,CAEJ,CCnUA,MAAM2F,GAAkB,QAClBC,GAAoB,QAEnB,SAASC,IAAe,SAC7B,KAAM,CAAE,KAAArD,EAAM,aAAAnD,EAAc,cAAA4D,CAAA,EAAkBS,EAAA,EACxC,CAACoC,EAAWC,CAAY,EAAIvM,EAAAA,SAAqB,WAAW,EAC5D,CAACwM,EAAmBC,CAAoB,EAAIzM,EAAAA,SAAS,EAAK,EAC1D,CAAC0M,EAAqBC,CAAsB,EAAI3M,EAAAA,SAAS,EAAK,EAC9D,CAAC4M,EAAeC,CAAgB,EAAI7M,EAAAA,SAAS,EAAK,EAElD8L,EAAkBC,GACjBA,EACE,IAAI,KAAK,aAAa,QAAS,CACpC,MAAO,WACP,SAAU,MACV,sBAAuB,EACvB,sBAAuB,CAAA,CACxB,EAAE,OAAOA,CAAM,EANI,IAShBlE,EAAcC,GACbA,EACE,IAAI,KAAKA,CAAU,EAAE,mBAAmB,QAAS,CACtD,MAAO,QACP,IAAK,UACL,KAAM,SAAA,CACP,EALuB,IAQpBgF,EAAkB,CACtBC,EACAC,EAAiB,KACC,CAClB,MAAMC,EAAcF,EAAO,OAAQb,GAAmBA,GAAK,IAAI,EAC/D,OAAIe,EAAY,SAAW,EAAU,KAC9BD,EAAiB,KAAK,IAAI,GAAGC,CAAW,EAAI,KAAK,IAAI,GAAGA,CAAW,CAC5E,EAEMC,EAAgB,CACpBjD,EACAkD,IAEIlD,GAAS,MAAQkD,GAAa,KAAa,GACxClD,IAAUkD,EAGbC,EAAoB,CACxB,CACE,IAAK,YACL,MAAO,YACP,YAAa,0CACb,KAAM5G,EAAAA,IAAClC,GAAA,CAAI,UAAU,SAAA,CAAU,CAAA,EAEjC,CACE,IAAK,cACL,MAAO,cACP,YAAa,0CACb,KAAMkC,EAAAA,IAACnE,GAAA,CAAM,UAAU,SAAA,CAAU,CAAA,EAEnC,CACE,IAAK,QACL,MAAO,QACP,YAAa,sCACb,KAAMmE,EAAAA,IAACrD,GAAA,CAAW,UAAU,SAAA,CAAU,CAAA,CACxC,EAGIkK,EAAmB,IAChBrE,EAAK,IAAK9K,GAAM,CACrB,MAAMoP,EAAgBpP,EAAE,UAAU,KAC/BE,GAAMA,EAAE,iBAAmB,gBAAkBA,EAAE,iBAAmB,WAAA,GAChEF,EAAE,UAAU,CAAC,EAElB,MAAO,CACL,MAAOA,EAAE,IAAI,GACb,WAAYA,EAAE,IAAI,iBAAmBA,EAAE,IAAI,oBAAsB,UACjE,OAAOoP,GAAA,YAAAA,EAAe,QAAS,IAC/B,OAAOA,GAAA,YAAAA,EAAe,gBAAgBA,GAAA,YAAAA,EAAe,aAAc,IACnE,OAAOA,GAAA,YAAAA,EAAe,gBAAgBA,GAAA,YAAAA,EAAe,aACrD,OAAOA,GAAA,YAAAA,EAAe,gBAAgBA,GAAA,YAAAA,EAAe,aACrD,aAAcA,GAAA,YAAAA,EAAe,cAC7B,YAAaA,GAAA,YAAAA,EAAe,aAC5B,cAAeA,GAAA,YAAAA,EAAe,eAC9B,WAAYA,GAAA,YAAAA,EAAe,eAC3B,WAAYA,GAAA,YAAAA,EAAe,sBAC3B,wBAAyBA,GAAA,YAAAA,EAAe,2BACxC,gBAAiBA,GAAA,YAAAA,EAAe,iBAChC,QAASA,GAAA,YAAAA,EAAe,QACxB,OAAQA,GAAA,YAAAA,EAAe,OACvB,IAAKA,GAAA,YAAAA,EAAe,IACpB,IAAKA,GAAA,YAAAA,EAAe,WACpB,mBAAoBA,GAAA,YAAAA,EAAe,yBAAA,CAEvC,CAAC,EAGGC,EAAoB,IACjBvE,EAAK,IAAK9K,IAAO,CACtB,MAAOA,EAAE,IAAI,GACb,WAAYA,EAAE,IAAI,iBAAmBA,EAAE,IAAI,oBAAsB,UACjE,gBAAiBA,EAAE,IAAI,6BACvB,gBAAiBA,EAAE,IAAI,4BACvB,aAAcA,EAAE,IAAI,yBACpB,YAAaA,EAAE,IAAI,+BACnB,eAAgBA,EAAE,IAAI,2BAA6B,CAAA,EACnD,QAASA,EAAE,IAAI,mBACf,aAAcA,EAAE,IAAI,yBACpB,kBAAmBA,EAAE,IAAI,8BACzB,kBAAmBA,EAAE,IAAI,+BACzB,MAAOA,EAAE,IAAI,iBACb,MAAOA,EAAE,IAAI,iBACb,QAASA,EAAE,IAAI,mBACf,cAAeA,EAAE,IAAI,yBAAA,EACrB,EAGEsP,EAAc,IACXxE,EAAK,IAAK9K,IAAO,CACtB,MAAOA,EAAE,IAAI,GACb,WAAYA,EAAE,IAAI,iBAAmBA,EAAE,IAAI,oBAAsB,UACjE,YAAaA,EAAE,IAAI,iBACnB,cAAeA,EAAE,IAAI,eACrB,UAAWA,EAAE,IAAI,WACjB,cAAeA,EAAE,IAAI,eACrB,WAAYA,EAAE,IAAI,YAClB,cAAeA,EAAE,IAAI,qBACrB,kBAAmBA,EAAE,IAAI,yBACzB,mBAAoBA,EAAE,IAAI,kBAC1B,eAAgBA,EAAE,IAAI,gBACtB,WAAYA,EAAE,IAAI,YAAc,CAAA,EAChC,WAAYA,EAAE,IAAI,YAAc,CAAA,EAChC,cAAeA,EAAE,IAAI,eACrB,mBAAoBA,EAAE,IAAI,qBAC1B,WAAYA,EAAE,IAAI,YAClB,QAASA,EAAE,IAAI,SACf,gBAAiBA,EAAE,IAAI,iBACvB,kBAAmBA,EAAE,IAAI,mBACzB,gBAAiBA,EAAE,IAAI,gBAAA,EACvB,EAGEuP,EAAgBJ,EAAA,EAChBK,EAAiBH,EAAA,EACjBI,EAAWH,EAAA,EAEXI,EAAWd,EAAgBW,EAAc,IAAKrP,GAAMA,EAAE,KAAK,CAAC,EAC5DyP,EAAWf,EAAgBW,EAAc,IAAKrP,GAAMA,EAAE,KAAK,CAAC,EAC5D0P,EAAYhB,EAAgBY,EAAe,IAAK3P,GAAMA,EAAE,eAAe,CAAC,EACxEgQ,EAAajB,EAAgBY,EAAe,IAAK3P,GAAMA,EAAE,YAAY,CAAC,EACtEiQ,EAAclB,EAAgBa,EAAS,IAAK5P,GAAMA,EAAE,WAAW,EAAG,EAAK,EACvEkQ,EAAoBnB,EAAgBa,EAAS,IAAK5P,GAAMA,EAAE,aAAa,CAAC,EACxEmQ,EAAwBpB,EAAgBa,EAAS,IAAK5P,GAAMA,EAAE,iBAAiB,CAAC,EAChFoQ,GAAkBrB,EAAgBa,EAAS,IAAK5P,GAAMA,EAAE,aAAa,EAAG,EAAK,EAE7EqQ,GAAoB,IAAM,CAC9B,GAAI,CAACvI,GAAgBmD,EAAK,SAAW,EAAG,OAAO,KAE/C,IAAIqF,EAA2B,KAC3BC,EAAY,GAEhBtF,EAAK,QAAS9K,GAAM,CAClB,MAAMwH,EAAK+H,EAAc,KAAMrP,GAAMA,EAAE,QAAUF,EAAE,IAAI,EAAE,EACnDqQ,EAAOZ,EAAS,KAAM5P,GAAMA,EAAE,QAAUG,EAAE,IAAI,EAAE,EAChDsQ,EAAQd,EAAe,KAAM3P,GAAMA,EAAE,QAAUG,EAAE,IAAI,EAAE,EAE7D,IAAIuQ,EAAQ,EAEZ,GAAIF,GAAA,MAAAA,EAAM,aAAeP,EAAa,CACpC,MAAMU,EAAcV,EAAcO,EAAK,YAAe1I,EAAa,eACnE4I,GAASC,CACX,CAEA,GAAIhJ,GAAA,MAAAA,EAAI,OAASkI,EAAU,CACzB,MAAMe,EAAYjJ,EAAG,MAAQkI,EAAY/H,EAAa,oBACtD4I,GAASE,CACX,CAEA,GAAIJ,GAAA,MAAAA,EAAM,eAAiBN,EAAmB,CAC5C,MAAMW,EAAiBL,EAAK,cAAgBN,EAAqBpI,EAAa,kBAC9E4I,GAASG,CACX,CAEA,GAAIJ,GAAA,MAAAA,EAAO,cAAgBT,EAAY,CACrC,MAAMc,EAAYL,EAAM,aAAeT,EAAclI,EAAa,oBAClE4I,GAASI,CACX,CAEIJ,EAAQH,IACVA,EAAYG,EACZJ,EAAYnQ,EAAE,IAAI,GAEtB,CAAC,EAED,MAAM4Q,EAAU9F,EAAK,KAAM9K,GAAMA,EAAE,IAAI,KAAOmQ,CAAS,EACvD,OAAKS,EAEE,CACL,WAAYA,EAAQ,IAAI,iBAAmBA,EAAQ,IAAI,oBAAsB,UAC7E,OAAQC,GAAmBD,EAAQ,IAAI,EAAE,CAAA,EAJtB,IAMvB,EAEMC,GAAsBzJ,GAAkB,CAC5C,MAAM0J,EAAoB,CAAA,EACpBT,EAAOZ,EAAS,KAAM5P,GAAMA,EAAE,QAAUuH,CAAK,EAC7CI,EAAK+H,EAAc,KAAMrP,GAAMA,EAAE,QAAUkH,CAAK,EAEtD,OAAIiJ,GAAA,YAAAA,EAAM,eAAgBP,GACxBgB,EAAQ,KAAK,cAAc,GAEzBtJ,GAAA,YAAAA,EAAI,SAAUkI,GAChBoB,EAAQ,KAAK,oBAAoB,GAE/BT,GAAA,YAAAA,EAAM,iBAAkBN,GAAqBA,GAAqBA,EAAoB,GACxFe,EAAQ,KAAK,eAAe,EAG1BA,EAAQ,SAAW,GACrBA,EAAQ,KAAK,yCAAyC,EAGjD,iDAAiDA,EAAQ,KAAK,IAAI,CAAC,GAC5E,EAEMC,EAAiBb,GAAA,EAEjBvC,GAAiB,IAAM,CAC3BpC,EAAc,CAAC,CACjB,EAEMyF,EAAWlG,EAAK,OAChBmG,EAAgB,QAAQhD,EAAe,OAAO+C,CAAQ,MAAM9C,EAAiB,KAE7EgD,EAAiB,CAAE,MAAOjD,GAAiB,SAAUA,GAAiB,SAAUA,EAAA,EAChFkD,EAAe,CAAE,SAAUjD,EAAA,EAEjC,OACE7F,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,oBAAiB,EAClEA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,4DAAA,CAElC,CAAA,EACF,EAEAA,EAAAA,IAAC,OAAI,UAAU,8BACZ,WAAK,IAAI,CAAC8I,EAAK5I,IACdH,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAMgG,EAAa+C,EAAI,GAAG,EACnC,UAAW;AAAA;AAAA,gBAEPhD,IAAcgD,EAAI,IAChB,+FACA,gEACJ;AAAA,cAGF,SAAA,CAAA/I,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,MAAC,OAAI,UAAW;AAAA;AAAA,kBAEZ8F,IAAcgD,EAAI,IAChB,iCACA,2BACJ;AAAA,gBAEC,WAAI,KACP,EACA/I,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,MAAC,MAAA,CAAI,UAAU,0BACb,SAAAD,EAAAA,KAAC,QAAK,UAAW;AAAA;AAAA,sBAEb+F,IAAcgD,EAAI,IAChB,iCACA,2BACJ;AAAA,oBAEC,SAAA,CAAA5I,EAAQ,EAAE,OAAA,CAAA,CACb,CAAA,CACF,EACAF,MAAC,MAAG,UAAW;AAAA;AAAA,oBAEX8F,IAAcgD,EAAI,IAAM,wBAA0B,eAAe;AAAA,kBAElE,WAAI,MACP,EACA9I,MAAC,KAAE,UAAW;AAAA;AAAA,oBAEV8F,IAAcgD,EAAI,IAAM,wBAA0B,eAAe;AAAA,kBAElE,WAAI,WAAA,CACP,CAAA,CAAA,CACF,CAAA,EACF,EACChD,IAAcgD,EAAI,KACjB9I,EAAAA,IAAC,MAAA,CAAI,UAAU,wEACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,uCAAA,CAAwC,CAAA,CACzD,CAAA,CAAA,EAjDG8I,EAAI,GAAA,CAoDZ,EACH,EAEA/I,EAAAA,KAAC,MAAA,CAAI,UAAU,yEACb,SAAA,CAAAA,OAAC,OAAI,UAAW;AAAA;AAAA;AAAA,UAId,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,+EACZ,UAAA+I,EAAAnC,EAAK,QAAU,EAAE,MAAQd,CAAS,IAAlC,YAAAiD,EAAqC,IAAA,CACxC,EACAhJ,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACX,SAAA,EAAAiJ,EAAApC,EAAK,KAAK,GAAK,EAAE,MAAQd,CAAS,IAAlC,YAAAkD,EAAqC,MAAM,aAAA,CAAA,CAC9C,CAAA,EACF,EAEAhJ,EAAAA,IAAC,MAAA,CAAI,UAAU,kBACb,gBAAC,QAAA,CAAM,UAAU,SAAS,MAAO,CAAE,SAAU2I,EAAe,YAAa,SACtE,SAAA,CAAA7C,IAAc,aACb/F,EAAAA,KAAAkJ,EAAAA,SAAA,CACE,SAAA,CAAAjJ,MAAC,QAAA,CACC,SAAAD,EAAAA,KAAC,KAAA,CAAG,UAAU,cACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,4GAA4G,SAAA,gBAEjJ,EACC3B,EAAc,IAAI,CAACrP,EAAGsR,IACrBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,wDAAwDK,EAAMjC,EAAc,OAAS,EAAI,2BAA6B,EAAE,GACvK,SAAArP,EAAE,YADIA,EAAE,KAEX,CACD,CAAA,CAAA,CACH,CAAA,CACF,SACC,QAAA,CACC,SAAA,CAAAmI,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,uBAAoB,EAC1I3B,EAAc,IAAI,CAACrP,EAAGsR,WACpB,KAAA,CAAiB,MAAOL,EAAc,UAAW,iDAAiDK,EAAMjC,EAAc,OAAS,EAAI,2BAA6B,EAAE,GAChK,SAAA,CAAArP,EAAE,MAAM,IAAEA,EAAE,KAAA,CAAA,EADNA,EAAE,KAEX,CACD,CAAA,EACH,EACAmI,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,eAAY,EAClI3B,EAAc,IAAI,CAACrP,EAAGsR,IACrBlJ,EAAAA,IAAC,KAAA,CAEC,MAAO6I,EACP,UAAW,mCAAmCnC,EAAc9O,EAAE,MAAOwP,CAAQ,EAAI,kFAAoF,eAAe,IAAI8B,EAAMjC,EAAc,OAAS,EAAI,2BAA6B,EAAE,GAExP,SAAAlH,EAAAA,KAAC,OAAA,CAAK,UAAU,0BACb,SAAA,CAAAnI,EAAE,OAAS,IACX8O,EAAc9O,EAAE,MAAOwP,CAAQ,GAC9BrH,OAAC,OAAA,CAAK,UAAU,6GACd,SAAA,CAAAC,EAAAA,IAACtC,EAAA,CAAK,UAAU,SAAA,CAAU,EAAE,OAAA,CAAA,CAC9B,CAAA,CAAA,CAEJ,CAAA,EAXK9F,EAAE,KAAA,CAaV,CAAA,EACH,EACAmI,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,eAAY,EAClI3B,EAAc,IAAI,CAACrP,EAAGsR,IACrBlJ,EAAAA,IAAC,KAAA,CAEC,MAAO6I,EACP,UAAW,mCAAmCnC,EAAc9O,EAAE,MAAOyP,CAAQ,EAAI,kFAAoF,eAAe,IAAI6B,EAAMjC,EAAc,OAAS,EAAI,2BAA6B,EAAE,GAExP,SAAAlH,EAAAA,KAAC,OAAA,CAAK,UAAU,0BACb,SAAA,CAAAnI,EAAE,OAAS,IACX8O,EAAc9O,EAAE,MAAOyP,CAAQ,GAC9BtH,OAAC,OAAA,CAAK,UAAU,6GACd,SAAA,CAAAC,EAAAA,IAACtC,EAAA,CAAK,UAAU,SAAA,CAAU,EAAE,OAAA,CAAA,CAC9B,CAAA,CAAA,CAEJ,CAAA,EAXK9F,EAAE,KAAA,CAaV,CAAA,EACH,EACAmI,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,kBAAe,EACrI3B,EAAc,IAAI,CAACrP,EAAGsR,IACrBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,iDAAiDK,EAAMjC,EAAc,OAAS,EAAI,2BAA6B,EAAE,GAChK,WAAE,cAAgB,KADZrP,EAAE,KAEX,CACD,CAAA,EACH,EACAmI,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,iBAAc,EACpI3B,EAAc,IAAI,CAACrP,EAAGsR,IACrBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,qBAAqBK,EAAMjC,EAAc,OAAS,EAAI,2BAA6B,EAAE,GACpI,WAAE,cACDlH,EAAAA,KAAC,OAAA,CAAK,UAAU,mEACd,SAAA,CAAAC,EAAAA,IAAC/D,EAAA,CAAY,UAAU,SAAA,CAAU,EAAE,MAAA,EACrC,EACErE,EAAE,gBAAkB,GACtBmI,OAAC,OAAA,CAAK,UAAU,+CACd,SAAA,CAAAC,EAAAA,IAACnC,GAAA,CAAQ,UAAU,SAAA,CAAU,EAAE,KAAA,CAAA,CACjC,QAEC,OAAA,CAAK,UAAU,gBAAgB,SAAA,GAAA,CAAC,GAV5BjG,EAAE,KAYX,CACD,CAAA,EACH,EACAmI,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,mBAAgB,EACtI3B,EAAc,IAAI,CAACrP,EAAGsR,IACrBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,iDAAiDK,EAAMjC,EAAc,OAAS,EAAI,2BAA6B,EAAE,GAChK,WAAE,YAAc,KADVrP,EAAE,KAEX,CACD,CAAA,EACH,EACAmI,EAAAA,KAAC,KAAA,CAAG,UAAWiG,EAAoB,2BAA6B,GAC9D,SAAA,CAAAhG,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,cAAW,EACjI3B,EAAc,IAAI,CAACrP,EAAGsR,IACrBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,qBAAqBK,EAAMjC,EAAc,OAAS,EAAI,2BAA6B,EAAE,GACpI,WAAE,WACDlH,EAAAA,KAAC,OAAA,CAAK,UAAU,mEACd,SAAA,CAAAC,EAAAA,IAAC/D,EAAA,CAAY,UAAU,SAAA,CAAU,EAAE,YAAA,EACrC,EACErE,EAAE,aAAe,GACnBmI,OAAC,OAAA,CAAK,UAAU,+CACd,SAAA,CAAAC,EAAAA,IAACnC,GAAA,CAAQ,UAAU,SAAA,CAAU,EAAE,KAAA,CAAA,CACjC,QAEC,OAAA,CAAK,UAAU,gBAAgB,SAAA,GAAA,CAAC,GAV5BjG,EAAE,KAYX,CACD,CAAA,EACH,EAECoO,GACCjG,EAAAA,KAAAkJ,WAAA,CACE,SAAA,CAAAlJ,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,iBAAc,EACpI3B,EAAc,IAAI,CAACrP,EAAGsR,IACrBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,mCAAmCK,EAAMjC,EAAc,OAAS,EAAI,2BAA6B,EAAE,GAClJ,SAAArP,EAAE,YAAcA,EAAE,YAAY,eAAA,EAAmB,GAAA,EAD3CA,EAAE,KAEX,CACD,CAAA,EACH,EACAmI,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,mBAAgB,EACtI3B,EAAc,IAAI,CAACrP,EAAGsR,IACrBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,mCAAmCK,EAAMjC,EAAc,OAAS,EAAI,2BAA6B,EAAE,GAClJ,WAAE,iBAAmB,KADfrP,EAAE,KAEX,CACD,CAAA,EACH,EACAmI,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,UAAO,EAC7H3B,EAAc,IAAI,CAACrP,EAAGsR,IACrBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,mCAAmCK,EAAMjC,EAAc,OAAS,EAAI,2BAA6B,EAAE,GAClJ,SAAArP,EAAE,QAAU,GAAGA,EAAE,OAAO,IAAM,GAAA,EADxBA,EAAE,KAEX,CACD,CAAA,EACH,EACAmI,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,SAAM,EAC5H3B,EAAc,IAAI,CAACrP,EAAGsR,IACrBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,mCAAmCK,EAAMjC,EAAc,OAAS,EAAI,2BAA6B,EAAE,GAClJ,WAAE,QAAU,KADNrP,EAAE,KAEX,CACD,CAAA,EACH,EACAmI,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,aAAU,EAChI3B,EAAc,IAAI,CAACrP,EAAGsR,IACrBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,mCAAmCK,EAAMjC,EAAc,OAAS,EAAI,2BAA6B,EAAE,GAClJ,WAAE,KAAO,KADHrP,EAAE,KAEX,CACD,CAAA,EACH,EACAmI,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,aAAU,EAChI3B,EAAc,IAAI,CAACrP,EAAGsR,IACrBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,mCAAmCK,EAAMjC,EAAc,OAAS,EAAI,2BAA6B,EAAE,GAClJ,WAAE,KAAO,KADHrP,EAAE,KAEX,CACD,CAAA,EACH,EACAmI,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,sBAAmB,EACzI3B,EAAc,IAAI,CAACrP,EAAGsR,IACrBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,mCAAmCK,EAAMjC,EAAc,OAAS,EAAI,2BAA6B,EAAE,GAClJ,SAAArP,EAAE,mBAAqB,GAAGA,EAAE,kBAAkB,SAAW,GAAA,EADnDA,EAAE,KAEX,CACD,CAAA,EACH,SACC,KAAA,CACC,SAAA,CAAAoI,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,iBAAc,EACpI3B,EAAc,IAAI,CAACrP,EAAGsR,IACrBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,qBAAqBK,EAAMjC,EAAc,OAAS,EAAI,2BAA6B,EAAE,GACpI,WAAE,wBACDlH,EAAAA,KAAC,OAAA,CAAK,UAAU,mEACd,SAAA,CAAAC,EAAAA,IAAC/D,EAAA,CAAY,UAAU,SAAA,CAAU,EAAE,MAAA,CAAA,CACrC,QAEC,OAAA,CAAK,UAAU,gBAAgB,SAAA,GAAA,CAAC,GAN5BrE,EAAE,KAQX,CACD,CAAA,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,EACF,EAGDkO,IAAc,eACb/F,EAAAA,KAAAkJ,EAAAA,SAAA,CACE,SAAA,CAAAjJ,MAAC,QAAA,CACC,SAAAD,EAAAA,KAAC,KAAA,CAAG,UAAU,cACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,4GAA4G,SAAA,cAEjJ,EACC1B,EAAe,IAAI,CAAC3P,EAAG2R,IACtBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,wDAAwDK,EAAMhC,EAAe,OAAS,EAAI,2BAA6B,EAAE,GACxK,SAAA3P,EAAE,YADIA,EAAE,KAEX,CACD,CAAA,CAAA,CACH,CAAA,CACF,SACC,QAAA,CACC,SAAA,CAAAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,oBAAiB,EACvI1B,EAAe,IAAI,CAAC3P,EAAG2R,IACtBlJ,EAAAA,IAAC,KAAA,CAEC,MAAO6I,EACP,UAAW,mCAAmCnC,EAAcnP,EAAE,gBAAiB+P,CAAS,EAAI,kFAAoF,eAAe,IAAI4B,EAAMhC,EAAe,OAAS,EAAI,2BAA6B,EAAE,GAEpQ,SAAAnH,EAAAA,KAAC,OAAA,CAAK,UAAU,0BACb,SAAA,CAAAxI,EAAE,gBAAkB,GAAGA,EAAE,eAAe,SAAW,IACnDmP,EAAcnP,EAAE,gBAAiB+P,CAAS,GACzCvH,OAAC,OAAA,CAAK,UAAU,6GACd,SAAA,CAAAC,EAAAA,IAACtC,EAAA,CAAK,UAAU,SAAA,CAAU,EAAE,OAAA,CAAA,CAC9B,CAAA,CAAA,CAEJ,CAAA,EAXKnG,EAAE,KAAA,CAaV,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,gBAAa,EACnI1B,EAAe,IAAI,CAAC3P,EAAG2R,IACtBlJ,EAAAA,IAAC,KAAA,CAEC,MAAO6I,EACP,UAAW,mCAAmCnC,EAAcnP,EAAE,aAAcgQ,CAAU,EAAI,kFAAoF,eAAe,IAAI2B,EAAMhC,EAAe,OAAS,EAAI,2BAA6B,EAAE,GAElQ,SAAAnH,EAAAA,KAAC,OAAA,CAAK,UAAU,0BACb,SAAA,CAAAxI,EAAE,aACDwI,OAAC,OAAA,CAAK,UAAU,0BACb,SAAA,CAAAxI,EAAE,aACHyI,EAAAA,IAACtC,EAAA,CAAK,UAAU,yCAAA,CAA0C,CAAA,CAAA,CAC5D,EACE,IACHgJ,EAAcnP,EAAE,aAAcgQ,CAAU,GACvCvH,EAAAA,IAAC,OAAA,CAAK,UAAU,6GAA6G,SAAA,KAAA,CAE7H,CAAA,CAAA,CAEJ,CAAA,EAhBKzI,EAAE,KAAA,CAkBV,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,eAAY,EAClI1B,EAAe,IAAI,CAAC3P,EAAG2R,IACtBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,iDAAiDK,EAAMhC,EAAe,OAAS,EAAI,2BAA6B,EAAE,GACjK,SAAA3P,EAAE,YAAc,GAAGA,EAAE,WAAW,WAAa,GAAA,EADvCA,EAAE,KAEX,CACD,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,iBAAc,EACpI1B,EAAe,IAAI,CAAC3P,EAAG2R,UACrB,KAAA,CAAiB,MAAOL,EAAc,UAAW,mCAAmCK,EAAMhC,EAAe,OAAS,EAAI,2BAA6B,EAAE,GACnJ,SAAA3P,EAAE,eAAe,OAAS,EACzBwI,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACZ,SAAA,CAAAxI,EAAE,eAAe,MAAM,EAAG,CAAC,EAAE,IAAI,CAAC4R,EAAMjI,UACtC,OAAA,CAAa,UAAU,gFACrB,SAAAiI,CAAA,EADQjI,CAEX,CACD,EACA3J,EAAE,eAAe,OAAS,GACzBwI,EAAAA,KAAC,OAAA,CAAK,UAAU,oEAAoE,SAAA,CAAA,IAChFxI,EAAE,eAAe,OAAS,CAAA,CAAA,CAC9B,CAAA,CAAA,CAEJ,QAEC,OAAA,CAAK,UAAU,gBAAgB,SAAA,GAAA,CAAC,GAf5BA,EAAE,KAiBX,CACD,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,iBAAc,EACpI1B,EAAe,IAAI,CAAC3P,EAAG2R,IACtBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,iDAAiDK,EAAMhC,EAAe,OAAS,EAAI,2BAA6B,EAAE,GACjK,SAAA3P,EAAE,SAAWyI,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,cAAA,CAAY,CAAA,EADnDzI,EAAE,KAEX,CACD,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAWmG,EAAsB,yCAA2C,GAC9E,SAAA,CAAAlG,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,mBAAgB,EACtI1B,EAAe,IAAI,CAAC3P,EAAG2R,IACtBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,qBAAqBK,EAAMhC,EAAe,OAAS,EAAI,2BAA6B,EAAE,GACrI,WAAE,kBACDnH,EAAAA,KAAC,OAAA,CAAK,UAAU,gKACd,SAAA,CAAAC,EAAAA,IAAC/D,EAAA,CAAY,UAAU,aAAA,CAAc,EAAE,oBAAA,CAAA,CACzC,QAEC,OAAA,CAAK,UAAU,gBAAgB,SAAA,GAAA,CAAC,GAN5B1E,EAAE,KAQX,CACD,CAAA,EACH,EAEC2O,GACCnG,EAAAA,KAAAkJ,WAAA,CACE,SAAA,CAAAlJ,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,QAAK,EAC3H1B,EAAe,IAAI,CAAC3P,EAAG2R,IACtBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,mCAAmCK,EAAMhC,EAAe,OAAS,EAAI,2BAA6B,EAAE,GACnJ,WAAE,OAAS,KADL3P,EAAE,KAEX,CACD,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,QAAK,EAC3H1B,EAAe,IAAI,CAAC3P,EAAG2R,IACtBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,mCAAmCK,EAAMhC,EAAe,OAAS,EAAI,2BAA6B,EAAE,GACnJ,SAAA3P,EAAE,MACDyI,EAAAA,IAAC,IAAA,CAAE,KAAM,UAAUzI,EAAE,KAAK,GAAI,UAAU,uDACrC,WAAE,KAAA,CACL,EACE,GAAA,EALGA,EAAE,KAMX,CACD,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,UAAO,EAC7H1B,EAAe,IAAI,CAAC3P,EAAG2R,IACtBlJ,EAAAA,IAAC,MAAiB,MAAO6I,EAAc,UAAW,mCAAmCK,EAAMhC,EAAe,OAAS,EAAI,2BAA6B,EAAE,GACnJ,SAAA3P,EAAE,QACDyI,EAAAA,IAAC,IAAA,CAAE,KAAMzI,EAAE,QAAS,OAAO,SAAS,IAAI,sBAAsB,UAAU,uDACrE,WAAE,QAAQ,QAAQ,eAAgB,EAAE,CAAA,CACvC,EACE,GAAA,EALGA,EAAE,KAMX,CACD,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,gBAAa,EACnI1B,EAAe,IAAI,CAAC3P,EAAG2R,IACtBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,mCAAmCK,EAAMhC,EAAe,OAAS,EAAI,2BAA6B,EAAE,GACnJ,WAAE,cAAgB,KADZ3P,EAAE,KAEX,CACD,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,qBAAkB,EACxI1B,EAAe,IAAI,CAAC3P,EAAG2R,IACtBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,qBAAqBK,EAAMhC,EAAe,OAAS,EAAI,2BAA6B,EAAE,GACrI,WAAE,kBACDnH,EAAAA,KAAC,OAAA,CAAK,UAAU,uDACd,SAAA,CAAAC,EAAAA,IAAC/D,EAAA,CAAY,UAAU,SAAA,CAAU,EAAE,WAAA,CAAA,CACrC,QAEC,OAAA,CAAK,UAAU,gBAAgB,SAAA,GAAA,CAAC,GAN5B1E,EAAE,KAQX,CACD,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,mBAAgB,EACtI1B,EAAe,IAAI,CAAC3P,EAAG2R,IACtBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,mCAAmCK,EAAMhC,EAAe,OAAS,EAAI,2BAA6B,EAAE,GACnJ,WAAE,iBAAmB,KADf3P,EAAE,KAEX,CACD,CAAA,EACH,SACC,KAAA,CACC,SAAA,CAAAyI,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,iBAAc,EACpI1B,EAAe,IAAI,CAAC3P,EAAG2R,IACtBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,mCAAmCK,EAAMhC,EAAe,OAAS,EAAI,2BAA6B,EAAE,GACnJ,SAAA3P,EAAE,cAAgBA,EAAE,cAAc,eAAA,EAAmB,GAAA,EAD/CA,EAAE,KAEX,CACD,CAAA,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,EACF,EAGDuO,IAAc,SACb/F,EAAAA,KAAAkJ,EAAAA,SAAA,CACE,SAAA,CAAAjJ,MAAC,QAAA,CACC,SAAAD,EAAAA,KAAC,KAAA,CAAG,UAAU,cACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,4GAA4G,SAAA,YAEjJ,EACCzB,EAAS,IAAI,CAAC5P,EAAG2R,IAChBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,wDAAwDK,EAAM/B,EAAS,OAAS,EAAI,2BAA6B,EAAE,GAClK,SAAA5P,EAAE,YADIA,EAAE,KAEX,CACD,CAAA,CAAA,CACH,CAAA,CACF,SACC,QAAA,CACC,SAAA,CAAAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,oEACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,iFAAiF,SAAA,mBAAgB,EACrIzB,EAAS,IAAI,CAAC5P,EAAG2R,IAChBlJ,EAAAA,IAAC,KAAA,CAEC,MAAO6I,EACP,UAAW,aAAanC,EAAcnP,EAAE,YAAaiQ,CAAW,EAAI,4DAA8D,EAAE,IAAI0B,EAAM/B,EAAS,OAAS,EAAI,2BAA6B,EAAE,GAEnM,SAAApH,EAAAA,KAAC,OAAA,CAAK,UAAU,0BACd,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAW,qBAAqB0G,EAAcnP,EAAE,YAAaiQ,CAAW,EAAI,wBAA0B,eAAe,GACxH,SAAAlC,EAAe/N,EAAE,WAAW,EAC/B,EACCmP,EAAcnP,EAAE,YAAaiQ,CAAW,GACvCzH,OAAC,OAAA,CAAK,UAAU,6GACd,SAAA,CAAAC,EAAAA,IAACtC,EAAA,CAAK,UAAU,SAAA,CAAU,EAAE,SAAA,CAAA,CAC9B,CAAA,CAAA,CAEJ,CAAA,EAbKnG,EAAE,KAAA,CAeV,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,iBAAc,EACpIzB,EAAS,IAAI,CAAC5P,EAAG2R,UACf,KAAA,CAAiB,MAAOL,EAAc,UAAW,iDAAiDK,EAAM/B,EAAS,OAAS,EAAI,2BAA6B,EAAE,GAC3J,SAAA7B,EAAe/N,EAAE,aAAa,GADxBA,EAAE,KAEX,CACD,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,aAAU,EAChIzB,EAAS,IAAI,CAAC5P,EAAG2R,UACf,KAAA,CAAiB,MAAOL,EAAc,UAAW,iDAAiDK,EAAM/B,EAAS,OAAS,EAAI,2BAA6B,EAAE,GAC3J,SAAA7B,EAAe/N,EAAE,SAAS,GADpBA,EAAE,KAEX,CACD,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,iBAAc,EACpIzB,EAAS,IAAI,CAAC5P,EAAG2R,IAChBlJ,EAAAA,IAAC,KAAA,CAEC,MAAO6I,EACP,UAAW,mCAAmCnC,EAAcnP,EAAE,cAAekQ,CAAiB,EAAI,kFAAoF,eAAe,IAAIyB,EAAM/B,EAAS,OAAS,EAAI,2BAA6B,EAAE,GAEpQ,SAAApH,EAAAA,KAAC,OAAA,CAAK,UAAU,0BACb,SAAA,CAAAxI,EAAE,cAAgB,GAAGA,EAAE,aAAa,SAAW,IAC/CmP,EAAcnP,EAAE,cAAekQ,CAAiB,GAC/C1H,OAAC,OAAA,CAAK,UAAU,6GACd,SAAA,CAAAC,EAAAA,IAACtC,EAAA,CAAK,UAAU,SAAA,CAAU,EAAE,OAAA,CAAA,CAC9B,CAAA,CAAA,CAEJ,CAAA,EAXKnG,EAAE,KAAA,CAaV,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,qBAAkB,EACxIzB,EAAS,IAAI,CAAC5P,EAAG2R,IAChBlJ,EAAAA,IAAC,KAAA,CAEC,MAAO6I,EACP,UAAW,mCAAmCnC,EAAcnP,EAAE,kBAAmBmQ,CAAqB,EAAI,kFAAoF,eAAe,IAAIwB,EAAM/B,EAAS,OAAS,EAAI,2BAA6B,EAAE,GAE5Q,SAAApH,EAAAA,KAAC,OAAA,CAAK,UAAU,0BACb,SAAA,CAAAxI,EAAE,kBAAoB,GAAGA,EAAE,iBAAiB,SAAW,IACvDmP,EAAcnP,EAAE,kBAAmBmQ,CAAqB,GACvD3H,OAAC,OAAA,CAAK,UAAU,6GACd,SAAA,CAAAC,EAAAA,IAACtC,EAAA,CAAK,UAAU,SAAA,CAAU,EAAE,OAAA,CAAA,CAC9B,CAAA,CAAA,CAEJ,CAAA,EAXKnG,EAAE,KAAA,CAaV,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,sBAAmB,EACzIzB,EAAS,IAAI,CAAC5P,EAAG2R,IAChBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,qBAAqBK,EAAM/B,EAAS,OAAS,EAAI,2BAA6B,EAAE,GAC/H,WAAE,mBACDpH,EAAAA,KAAC,OAAA,CAAK,UAAU,mEACd,SAAA,CAAAC,EAAAA,IAAC/D,EAAA,CAAY,UAAU,SAAA,CAAU,EAAE,YAAA,CAAA,CACrC,EAEA8D,EAAAA,KAAC,OAAA,CAAK,UAAU,+CACd,SAAA,CAAAC,EAAAA,IAACnC,GAAA,CAAQ,UAAU,SAAA,CAAU,EAAE,KAAA,EACjC,CAAA,EARKtG,EAAE,KAUX,CACD,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,mBAAgB,EACtIzB,EAAS,IAAI,CAAC5P,EAAG2R,UACf,KAAA,CAAiB,MAAOL,EAAc,UAAW,mCAAmCK,EAAM/B,EAAS,OAAS,EAAI,2BAA6B,EAAE,GAC7I,SAAA5P,EAAE,WAAW,OAAS,EACrBwI,EAAAA,KAAC,KAAA,CAAG,UAAU,sBACX,SAAA,CAAAxI,EAAE,WAAW,MAAM,EAAG,CAAC,EAAE,IAAI,CAACyM,EAAM9C,IACnCnB,EAAAA,KAAC,KAAA,CAAW,UAAU,2BACpB,SAAA,CAAAC,EAAAA,IAAC/D,EAAA,CAAY,UAAU,wDAAA,CAAyD,EAChF+D,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAiB,SAAAgE,CAAA,CAAK,CAAA,CAAA,EAF/B9C,CAGT,CACD,EACA3J,EAAE,WAAW,OAAS,GACrBwI,EAAAA,KAAC,KAAA,CAAG,UAAU,qBAAqB,SAAA,CAAA,IAAExI,EAAE,WAAW,OAAS,EAAE,aAAA,CAAA,CAAW,CAAA,CAAA,CAE5E,QAEC,OAAA,CAAK,UAAU,gBAAgB,SAAA,eAAA,CAAa,GAdxCA,EAAE,KAgBX,CACD,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAWqG,EAAgB,yCAA2C,GACxE,SAAA,CAAApG,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,uBAAoB,EAC1IzB,EAAS,IAAI,CAAC5P,EAAG2R,UACf,KAAA,CAAiB,MAAOL,EAAc,UAAW,mCAAmCK,EAAM/B,EAAS,OAAS,EAAI,2BAA6B,EAAE,GAC7I,SAAA5P,EAAE,WAAW,OAAS,EACrBwI,EAAAA,KAAC,KAAA,CAAG,UAAU,sBACX,SAAA,CAAAxI,EAAE,WAAW,MAAM,EAAG,CAAC,EAAE,IAAI,CAACyM,EAAM9C,IACnCnB,EAAAA,KAAC,KAAA,CAAW,UAAU,2BACpB,SAAA,CAAAC,EAAAA,IAACnC,GAAA,CAAQ,UAAU,+CAAA,CAAgD,EACnEmC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAiB,SAAAgE,CAAA,CAAK,CAAA,CAAA,EAF/B9C,CAGT,CACD,EACA3J,EAAE,WAAW,OAAS,GACrBwI,EAAAA,KAAC,KAAA,CAAG,UAAU,qBAAqB,SAAA,CAAA,IAAExI,EAAE,WAAW,OAAS,EAAE,aAAA,CAAA,CAAW,CAAA,CAAA,CAE5E,QAEC,OAAA,CAAK,UAAU,gBAAgB,SAAA,eAAA,CAAa,GAdxCA,EAAE,KAgBX,CACD,CAAA,EACH,EAEC6O,GACCrG,EAAAA,KAAAkJ,WAAA,CACE,SAAA,CAAAlJ,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,qBAAkB,EACxIzB,EAAS,IAAI,CAAC5P,EAAG2R,IAChBnJ,EAAAA,KAAC,KAAA,CAEC,MAAO8I,EACP,UAAW,qBAAqBnC,EAAcnP,EAAE,cAAeoQ,EAAe,EAAI,sCAAwC,eAAe,IAAIuB,EAAM/B,EAAS,OAAS,EAAI,2BAA6B,EAAE,GAEvM,SAAA,CAAA5P,EAAE,cAAgB,GAAGA,EAAE,aAAa,QAAU,IAC9CmP,EAAcnP,EAAE,cAAeoQ,EAAe,GAAKpQ,EAAE,eACpDyI,EAAAA,IAAC,OAAA,CAAK,UAAU,kHAAkH,SAAA,SAAA,CAElI,CAAA,CAAA,EARGzI,EAAE,KAAA,CAWV,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,uBAAoB,EAC1IzB,EAAS,IAAI,CAAC5P,EAAG2R,UACf,KAAA,CAAiB,MAAOL,EAAc,UAAW,mCAAmCK,EAAM/B,EAAS,OAAS,EAAI,2BAA6B,EAAE,GAC7I,SAAA9F,EAAW9J,EAAE,kBAAkB,GADzBA,EAAE,KAEX,CACD,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,oBAAiB,EACvIzB,EAAS,IAAI,CAAC5P,EAAG2R,UACf,KAAA,CAAiB,MAAOL,EAAc,UAAW,mCAAmCK,EAAM/B,EAAS,OAAS,EAAI,2BAA6B,EAAE,GAC7I,SAAA9F,EAAW9J,EAAE,UAAU,GADjBA,EAAE,KAEX,CACD,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,WAAQ,EAC9HzB,EAAS,IAAI,CAAC5P,EAAG2R,UACf,KAAA,CAAiB,MAAOL,EAAc,UAAW,mCAAmCK,EAAM/B,EAAS,OAAS,EAAI,2BAA6B,EAAE,GAC7I,SAAA9F,EAAW9J,EAAE,OAAO,GADdA,EAAE,KAEX,CACD,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,iBAAc,EACpIzB,EAAS,IAAI,CAAC5P,EAAG2R,UACf,KAAA,CAAiB,MAAOL,EAAc,UAAW,mCAAmCK,EAAM/B,EAAS,OAAS,EAAI,2BAA6B,EAAE,GAC7I,SAAA7B,EAAe/N,EAAE,aAAa,GADxBA,EAAE,KAEX,CACD,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,cAAW,EACjIzB,EAAS,IAAI,CAAC5P,EAAG2R,UACf,KAAA,CAAiB,MAAOL,EAAc,UAAW,mCAAmCK,EAAM/B,EAAS,OAAS,EAAI,2BAA6B,EAAE,GAC7I,SAAA7B,EAAe/N,EAAE,UAAU,GADrBA,EAAE,KAEX,CACD,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,2BACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,mBAAgB,EACtIzB,EAAS,IAAI,CAAC5P,EAAG2R,IAChBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,mCAAmCK,EAAM/B,EAAS,OAAS,EAAI,2BAA6B,EAAE,GAC7I,SAAA5P,EAAE,gBAAkB+N,EAAe/N,EAAE,eAAe,EAAIA,EAAE,kBAAoB,GAAGA,EAAE,iBAAiB,IAAM,GAAA,EADpGA,EAAE,KAEX,CACD,CAAA,EACH,EACAwI,EAAAA,KAAC,KAAA,CAAG,UAAU,yCACZ,SAAA,CAAAC,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,mBAAgB,EACtIzB,EAAS,IAAI,CAAC5P,EAAG2R,IAChBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,mCAAmCK,EAAM/B,EAAS,OAAS,EAAI,2BAA6B,EAAE,GAC7I,WAAE,iBAAmB,KADf5P,EAAE,KAEX,CACD,CAAA,EACH,SACC,KAAA,CACC,SAAA,CAAAyI,MAAC,KAAA,CAAG,MAAO4I,EAAgB,UAAU,kFAAkF,SAAA,kBAAe,EACrIzB,EAAS,IAAI,CAAC5P,EAAG2R,IAChBlJ,EAAAA,IAAC,KAAA,CAAiB,MAAO6I,EAAc,UAAW,mCAAmCK,EAAM/B,EAAS,OAAS,EAAI,2BAA6B,EAAE,GAC7I,WAAE,gBAAkB,KADd5P,EAAE,KAEX,CACD,CAAA,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,EAEAyI,EAAAA,IAAC,MAAA,CAAI,UAAU,gDACb,SAAAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CACT8F,IAAc,aAAaG,EAAqB,CAACD,CAAiB,EAClEF,IAAc,eAAeK,EAAuB,CAACD,CAAmB,EACxEJ,IAAc,SAASO,EAAiB,CAACD,CAAa,CAC5D,EACA,UAAU,kGAER,SAAAN,IAAc,aAAeE,GAC7BF,IAAc,eAAiBI,GAC/BJ,IAAc,SAAWM,EACzBrG,EAAAA,KAAAkJ,EAAAA,SAAA,CACE,SAAA,CAAAjJ,EAAAA,IAAC1D,GAAA,CAAU,UAAU,SAAA,CAAU,EAAE,WAAA,CAAA,CAEnC,EAEAyD,EAAAA,KAAAkJ,EAAAA,SAAA,CACE,SAAA,CAAAjJ,EAAAA,IAAC5D,GAAA,CAAY,UAAU,SAAA,CAAU,EAAE,mBAAA,CAAA,CAErC,CAAA,CAAA,CAEJ,CACF,CAAA,EACF,EAECqM,SACE,MAAA,CAAI,UAAU,mEACb,SAAA1I,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,4FACb,eAACtC,EAAA,CAAK,UAAU,gCAAgC,CAAA,CAClD,SACC,MAAA,CACC,SAAA,CAAAqC,EAAAA,KAAC,KAAA,CAAG,UAAU,sCAAsC,SAAA,CAAA,gBACpC0I,EAAe,UAAA,EAC/B,EACAzI,EAAAA,IAAC,IAAA,CAAE,UAAU,qCACV,WAAe,MAAA,CAClB,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAGFA,EAAAA,IAAC,MAAA,CAAI,UAAU,mBACb,SAAAD,EAAAA,KAAC,SAAA,CACC,QAASsF,GACT,UAAU,+CACX,SAAA,CAAA,qBAECrF,EAAAA,IAACpE,GAAA,CAAW,UAAU,SAAA,CAAU,CAAA,CAAA,CAAA,CAClC,CACF,CAAA,EACF,CAEJ,CCx+BO,SAASwN,GAAgB,CAAE,eAAAC,EAAgB,mBAAAC,EAAoB,kBAAAC,GAA2C,CAC/G,KAAM,CAACC,EAAcC,CAAe,EAAIjQ,EAAAA,SAAsB,IAAI,GAAK,EAEjEkQ,EAAgBC,GAAsB,CAC1C,MAAMC,EAAc,IAAI,IAAIJ,CAAY,EACpCI,EAAY,IAAID,CAAS,EAC3BC,EAAY,OAAOD,CAAS,EAE5BC,EAAY,IAAID,CAAS,EAE3BF,EAAgBG,CAAW,CAC7B,EAEMtE,EAAkBC,GACjBA,EACE,IAAI,KAAK,aAAa,QAAS,CACpC,MAAO,WACP,SAAU,MACV,sBAAuB,EACvB,sBAAuB,CAAA,CACxB,EAAE,OAAOA,CAAM,EANI,IAShBlE,EAAcC,GACbA,EACE,IAAI,KAAKA,CAAU,EAAE,mBAAmB,QAAS,CACtD,MAAO,QACP,IAAK,UACL,KAAM,SAAA,CACP,EALuB,KAQpBuI,EAAaC,GACVA,EAAQ,YAAcA,EAAQ,eAAiB,EAGlDC,EAAsB,MAAM,KAAKT,CAAkB,EAAE,OAAO,CAACU,EAAKC,IAAO,CAC7E,MAAMH,EAAUT,EAAe,KAAKhS,GAAKA,EAAE,KAAO4S,CAAE,EACpD,OAAOD,GAAOF,EAAUD,EAAUC,CAAO,EAAI,EAC/C,EAAG,CAAC,EAEJ,OAAIT,EAAe,SAAW,EACrB,KAIPtJ,EAAAA,KAAC,MAAA,CAAI,UAAU,yEACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,uEACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,sEACb,eAACrD,GAAA,CAAW,UAAU,qBAAqB,CAAA,CAC7C,SACC,MAAA,CACC,SAAA,CAAAqD,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,iCAA8B,EAC/EA,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAgC,SAAA,6CAAA,CAE7C,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,2BACZ,SAAAqJ,EAAe,IAAKS,GAAY,CAC/B,MAAMI,EAAaV,EAAa,IAAIM,EAAQ,EAAE,EACxCK,EAAab,EAAmB,IAAIQ,EAAQ,EAAE,EAC9CvE,EAASsE,EAAUC,CAAO,EAEhC,OACE/J,EAAAA,KAAC,MAAA,CAAqB,UAAWoK,EAAa,wBAA0B,GACtE,SAAA,CAAApK,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM0J,EAAaI,EAAQ,EAAE,EACtC,UAAU,kDAET,SAAAI,QACE9N,GAAA,CAAY,UAAU,wBAAwB,EAE/C4D,EAAAA,IAAC3D,GAAA,CAAa,UAAU,uBAAA,CAAwB,CAAA,CAAA,EAIpD0D,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA+B,SAAA8J,EAAQ,aAAa,EACjEA,EAAQ,cACP9J,EAAAA,IAAC,QAAK,UAAU,6DACb,WAAQ,aACX,EAED8J,EAAQ,kBACP9J,EAAAA,IAAC,OAAA,CAAK,UAAU,+DAA+D,SAAA,kBAAA,CAE/E,CAAA,EAEJ,EACC,CAACkK,GAAcJ,EAAQ,mBACrB,IAAA,CAAE,UAAU,wCAAyC,SAAAA,EAAQ,WAAA,CAAY,CAAA,EAE9E,EAEA/J,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,0CACb,SAAA8J,EAAQ,kBACL,SAASA,EAAQ,iBAAiB,IAClCxE,EAAeC,CAAM,EAE3B,EACCuE,EAAQ,mBAAqBA,EAAQ,YACpC/J,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,QAAMuF,EAAewE,EAAQ,UAAU,CAAA,CAAA,CAAE,CAAA,EAElF,EAEA9J,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMuJ,EAAkBO,EAAQ,EAAE,EAC3C,UAAU,kDAET,SAAAK,QACEjO,GAAA,CAAY,UAAU,gCAAgC,EAEvD8D,EAAAA,IAACvC,GAAA,CAAO,UAAU,2CAAA,CAA4C,CAAA,CAAA,CAElE,CAAA,CACF,CAAA,EACF,EAECyM,GACCnK,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACZ,SAAA,CAAA+J,EAAQ,mBACN,MAAA,CACC,SAAA9J,EAAAA,IAAC,KAAE,UAAU,wBAAyB,SAAA8J,EAAQ,WAAA,CAAY,CAAA,CAC5D,EAGF/J,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACX,SAAA,EAAA+J,EAAQ,YAAcA,EAAQ,cAC9B/J,OAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAACjE,GAAA,CAAS,UAAU,4CAAA,CAA6C,SAChE,MAAA,CACC,SAAA,CAAAiE,EAAAA,IAAC,OAAA,CAAK,UAAU,8CAA8C,SAAA,eAAY,EAC1ED,EAAAA,KAAC,IAAA,CAAE,UAAU,wBACV,SAAA,CAAA+J,EAAQ,YAAczI,EAAWyI,EAAQ,UAAU,EACnDA,EAAQ,YAAcA,EAAQ,aAAe,MAC7CA,EAAQ,aAAezI,EAAWyI,EAAQ,WAAW,EACrD,CAACA,EAAQ,YAAc,CAACA,EAAQ,aAAe,SAAA,CAAA,CAClD,CAAA,CAAA,CACF,CAAA,EACF,EAGDA,EAAQ,yBACP/J,OAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAACvD,GAAA,CAAM,UAAU,4CAAA,CAA6C,SAC7D,MAAA,CACC,SAAA,CAAAuD,EAAAA,IAAC,OAAA,CAAK,UAAU,8CAA8C,SAAA,kBAAe,EAC7ED,EAAAA,KAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,IACjC+J,EAAQ,wBAAwB,OAAA,CAAA,CACpC,CAAA,CAAA,CACF,CAAA,EACF,EAGDA,EAAQ,kBAAoBA,EAAQ,iBAAiB,OAAS,GAAK,CAACA,EAAQ,sBAC3E/J,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAAC9C,GAAA,CAAK,UAAU,4CAAA,CAA6C,SAC5D,MAAA,CACC,SAAA,CAAA8C,EAAAA,IAAC,OAAA,CAAK,UAAU,8CAA8C,SAAA,eAAY,EAC1EA,MAAC,KAAE,UAAU,wBACV,WAAQ,iBAAiB,KAAK,IAAI,CAAA,CACrC,CAAA,CAAA,CACF,CAAA,EACF,EAGD8J,EAAQ,sBACP/J,OAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAC,EAAAA,IAAC9C,GAAA,CAAK,UAAU,4CAAA,CAA6C,SAC5D,MAAA,CACC,SAAA,CAAA8C,EAAAA,IAAC,OAAA,CAAK,UAAU,8CAA8C,SAAA,eAAY,EAC1EA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,sBAAA,CAAoB,CAAA,CAAA,CAC3D,CAAA,CAAA,CACF,CAAA,EAEJ,EAEC8J,EAAQ,qBACP/J,OAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,8CAA8C,SAAA,eAAY,EAC1EA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA8B,WAAQ,mBAAA,CAAoB,CAAA,EACzE,EAGD8J,EAAQ,cAAgB,OAAO,KAAKA,EAAQ,YAAY,EAAE,OAAS,GAClE/J,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,8CAA8C,SAAA,eAAY,QACzE,KAAA,CAAG,UAAU,uCACX,SAAA,OAAO,QAAQ8J,EAAQ,YAAY,EAAE,IAAI,CAAC,CAACM,EAAK3G,CAAK,IACpD1D,EAAAA,KAAC,KAAA,CAAa,UAAU,yBACtB,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,IAAC,EACjCA,EAAAA,IAAC,OAAA,CAAM,SAAA,OAAOyD,CAAK,CAAA,CAAE,CAAA,CAAA,EAFd2G,CAGT,CACD,CAAA,CACH,CAAA,EACF,EAGD,CAACN,EAAQ,WAAaA,EAAQ,mBAAqBA,EAAQ,kBAAkB,OAAS,GACrF/J,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,QAAK,EAAO,6BAA2B8J,EAAQ,kBAAkB,KAAK,IAAI,CAAA,EAC1G,EAGDA,EAAQ,iBACP/J,EAAAA,KAAC,IAAA,CACC,KAAM+J,EAAQ,gBACd,OAAO,SACP,IAAI,sBACJ,UAAU,uGAEV,SAAA,CAAA9J,EAAAA,IAACpD,GAAA,CAAa,UAAU,SAAA,CAAU,EAAE,0BAAA,CAAA,CAAA,CAEtC,CAAA,CAEJ,CAAA,CAAA,EA3JMkN,EAAQ,EA6JlB,CAEJ,CAAC,CAAA,CACH,QAEC,MAAA,CAAI,UAAU,kDACb,SAAA/J,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACZ,SAAA,CAAAuJ,EAAmB,KAAK,OAAKD,EAAe,OAAO,WAAA,EACtD,EACAtJ,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,0BAAuB,QAC9D,IAAA,CAAE,UAAU,2CACV,SAAAsF,EAAeyE,CAAmB,CAAA,CACrC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAEJ,CCxPO,SAASM,IAAc,CAC5B,KAAM,CAAE,KAAA7H,EAAM,UAAAvB,EAAW,iBAAAsC,EAAkB,cAAAN,CAAA,EAAkBS,EAAA,EACvD,CAAC2F,EAAgBiB,CAAiB,EAAI9Q,EAAAA,SAA0B,CAAA,CAAE,EAClE,CAAC8P,EAAoBiB,CAAqB,EAAI/Q,EAAAA,SAAsB,IAAI,GAAK,EAC7E,CAACgR,EAAoBC,CAAqB,EAAIjR,EAAAA,SAAwB,IAAI,EAC1E,CAACkR,EAAkBC,CAAmB,EAAInR,EAAAA,SAAwB,IAAI,EACtE,CAACoR,EAAcC,CAAe,EAAIrR,EAAAA,SAAsB,IAAI,GAAK,EAEvEO,EAAAA,UAAU,IAAM,CACd+Q,EAAA,CACF,EAAG,CAAA,CAAE,EAEL,MAAMA,EAAqB,SAAY,CACrC,KAAM,CAAE,KAAA5M,CAAA,EAAS,MAAM/F,EACpB,KAAK,iBAAiB,EACtB,OAAO,GAAG,EACV,GAAG,YAAa,EAAI,EACpB,MAAM,cAAc,EAEnB+F,IACFoM,EAAkBpM,CAAI,EACtBqM,EAAsB,IAAI,IAAIrM,EAAK,OAAS7G,EAAE,EAAE,CAAC,CAAC,EAEtD,EAEM0T,EAAmBpB,GAAsB,CAC7C,MAAMqB,EAAc,IAAI,IAAI1B,CAAkB,EAC1C0B,EAAY,IAAIrB,CAAS,EAC3BqB,EAAY,OAAOrB,CAAS,EAE5BqB,EAAY,IAAIrB,CAAS,EAE3BY,EAAsBS,CAAW,CACnC,EAEMC,EAA0B,IACvB,MAAM,KAAK3B,CAAkB,EAAE,OAAO,CAACU,EAAKC,IAAO,CACxD,MAAMH,EAAUT,EAAe,KAAKhS,GAAKA,EAAE,KAAO4S,CAAE,EACpD,OAAOD,GAAOF,IAAW,OAAOA,EAAQ,UAAU,GAAK,OAAOA,EAAQ,aAAa,IAAK,EAC1F,EAAG,CAAC,EAGAxE,EAAkBC,GACjBA,EACE,IAAI,KAAK,aAAa,QAAS,CACpC,MAAO,WACP,SAAU,MACV,sBAAuB,EACvB,sBAAuB,CAAA,CACxB,EAAE,OAAOA,CAAM,EANI,IAShBlE,EAAcC,GACbA,EACE,IAAI,KAAKA,CAAU,EAAE,mBAAmB,QAAS,CACtD,MAAO,QACP,IAAK,UACL,KAAM,SAAA,CACP,EALuB,KAQpB4J,EAAyB,MAAOC,GAA0B,CAC9D,MAAMhT,EACH,KAAK,eAAe,EACpB,OAAO,CACN,YAAa,CAACgT,EAAS,YACvB,YAAcA,EAAS,YAAyC,SAAvB,KAAA,EAAO,aAAgB,CACjE,EACA,GAAG,KAAMA,EAAS,EAAE,EAEvB5H,EAAA,CACF,EAEM6H,EAAsBtM,GACnBmC,EAAU,OAAQ3J,GAAMA,EAAE,SAAWwH,CAAK,EAG7CuM,EAA2B,CAACvM,EAAewM,IAA2B,CAE1E,MAAMC,EADeH,EAAmBtM,CAAK,EACJ,OAAQxH,GAAM,CAACA,EAAE,WAAW,EAE/DkU,EAAO,iBAAiBF,CAAc;AAAA;AAAA,EAAQC,EACjD,IAAI,CAACjU,EAAG4J,IAAM,GAAGA,EAAI,CAAC,KAAK5J,EAAE,aAAa,EAAE,EAC5C,KAAK;AAAA;AAAA,CAAM,CAAC,GAEf,UAAU,UAAU,UAAUkU,CAAI,EAClCb,EAAoB7L,CAAK,EACzB,WAAW,IAAM6L,EAAoB,IAAI,EAAG,GAAI,CAClD,EAEMc,EAAoBC,GAAqB,CAC7C,OAAQA,EAAA,CACN,IAAK,OACH,MAAO,yCACT,IAAK,SACH,MAAO,+CACT,QACE,MAAO,2CAAA,CAEb,EAEMC,EAAqB7M,GAAkB,CAC3C,MAAM8K,EAAc,IAAI,IAAIgB,CAAY,EACpChB,EAAY,IAAI9K,CAAK,EACvB8K,EAAY,OAAO9K,CAAK,EAExB8K,EAAY,IAAI9K,CAAK,EAEvB+L,EAAgBjB,CAAW,CAC7B,EAEMgC,EAAuBX,EAAA,EAkDvBtM,EA/CG6D,EAAK,IAAK9K,GAAM,CACrB,MAAMoP,EAAgBpP,EAAE,UAAU,KAC/BE,GAAMA,EAAE,iBAAmB,gBAAkBA,EAAE,iBAAmB,WAAA,GAChEF,EAAE,UAAU,CAAC,EAEZmU,EAAUnU,EAAE,IAAI,iBAAmBkU,EAEzC,MAAO,CACL,MAAOlU,EAAE,IAAI,GACb,WAAYA,EAAE,IAAI,iBAAmBA,EAAE,IAAI,oBAAsB,UACjE,YAAaA,EAAE,IAAI,iBACnB,iBAAkBkU,EAClB,QAAAC,EACA,gBAAgB/E,GAAA,YAAAA,EAAe,QAAS,IACxC,gBAAgBA,GAAA,YAAAA,EAAe,gBAAgBA,GAAA,YAAAA,EAAe,aAAc,IAC5E,OAAOA,GAAA,YAAAA,EAAe,gBAAgBA,GAAA,YAAAA,EAAe,aACrD,aAAcpP,EAAE,IAAI,yBACpB,YAAaA,EAAE,IAAI,+BACnB,cAAeA,EAAE,IAAI,qBACrB,kBAAmBA,EAAE,IAAI,yBACzB,kBAAmBA,EAAE,IAAI,+BACzB,MAAOA,EAAE,IAAI,iBACb,MAAOA,EAAE,IAAI,iBACb,QAASA,EAAE,IAAI,mBACf,QAASA,EAAE,IAAI,mBACf,aAAcA,EAAE,IAAI,yBACpB,kBAAmBA,EAAE,IAAI,8BACzB,gBAAiBA,EAAE,IAAI,6BACvB,cAAeA,EAAE,IAAI,0BACrB,eAAgBA,EAAE,IAAI,2BAA6B,CAAA,EACnD,cAAeA,EAAE,IAAI,eACrB,mBAAoBA,EAAE,IAAI,qBAC1B,WAAYA,EAAE,IAAI,YAClB,QAASA,EAAE,IAAI,SACf,iBAAkBA,EAAE,IAAI,kBACxB,eAAgBA,EAAE,IAAI,gBACtB,UAAWA,EAAE,IAAI,WACjB,WAAYA,EAAE,IAAI,YAClB,eAAgBA,EAAE,IAAI,iBACtB,qBAAsBA,EAAE,IAAI,sBAC5B,WAAYA,EAAE,IAAI,YAClB,aAAcA,EAAE,IAAI,cACpB,kBAAmBA,EAAE,IAAI,kBAAA,CAE7B,CAAC,EAIG8P,EAAc,KAAK,IAAI,GAAG7I,EAAQ,IAAKjH,GAAMA,EAAE,aAAe,GAAQ,CAAC,EACvEoU,EAAgB,KAAK,IAAI,GAAGnN,EAAQ,IAAKjH,GAAMA,EAAE,SAAW,GAAQ,CAAC,EACrE6P,GAAa,KAAK,IAAI,GAAG5I,EAAQ,IAAKjH,GAAMA,EAAE,cAAgB,CAAC,CAAC,EAChE0P,GAAW,KAAK,IAAI,GAAGzI,EAAQ,IAAKjH,GAAMA,EAAE,OAAS,CAAC,CAAC,EACvDqU,GAAe,KAAK,IAAI,GAAGpN,EAAQ,IAAKjH,IAAOA,EAAE,eAAiB,IAAMA,EAAE,mBAAqB,EAAE,CAAC,EAElG2N,EAAiB,IAAM,CAC3BpC,EAAc,CAAC,CACjB,EAEM+I,GAAmBlN,GAAkB,CACzC2L,EAAsBD,IAAuB1L,EAAQ,KAAOA,CAAK,CACnE,EAEA,OACEiB,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,qBAAkB,EACnEA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,qFAAA,CAElC,CAAA,EACF,EAECqJ,EAAe,OAAS,GACvBrJ,EAAAA,IAACoJ,GAAA,CACC,eAAAC,EACA,mBAAAC,EACA,kBAAmByB,CAAA,CAAA,QAItB,MAAA,CAAI,UAAU,YACZ,SAAApM,EAAQ,IAAKqC,GAAQ,CACpB,MAAMiL,EAAeb,EAAmBpK,EAAI,KAAK,EAC3CkL,EAAgBD,EAAa,OAAQ3U,GAAMA,EAAE,WAAW,EAAE,OAC1DiU,EAAsBU,EAAa,OAAQ3U,GAAM,CAACA,EAAE,WAAW,EAC/D6S,EAAaK,IAAuBxJ,EAAI,MACxCkJ,EAAaU,EAAa,IAAI5J,EAAI,KAAK,EAEvCmL,EAAcnL,EAAI,cAAgBwG,EAClC4E,EAAgBpL,EAAI,UAAY8K,EAChCO,EAAerL,EAAI,eAAiBuG,IAAcvG,EAAI,aAAe,EACrEsL,EAAmBtL,EAAI,QAAUoG,IAAYpG,EAAI,MAAQ,EACzDuL,GAAiBvL,EAAI,eAAiB,IAAMA,EAAI,mBAAqB,GACrEwL,EAAiBD,IAAkBR,IAAgBQ,EAAgB,EAEzE,OACExM,EAAAA,KAAC,MAAA,CAEC,UAAW;AAAA;AAAA,kBAEPoK,EACE,0EACA,0EACJ;AAAA,gBAGF,SAAA,CAAAnK,MAAC,OAAI,UAAW;AAAA;AAAA,kBAEZmK,EAAa,sBAAwB,4DAA4D;AAAA,gBAClG,EAEHpK,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAmC,SAAAgB,EAAI,WAAW,EAC/DA,EAAI,mBACHjB,OAAC,OAAA,CAAK,UAAU,oJACd,SAAA,CAAAC,EAAAA,IAACnE,GAAA,CAAM,UAAU,SAAA,CAAU,EAAE,mBAAA,CAAA,CAC/B,CAAA,EAEJ,EACAkE,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACZ,SAAA,CAAAoK,GACCnK,EAAAA,IAAC,OAAI,UAAU,4EACb,eAAC/D,EAAA,CAAY,UAAU,qBAAqB,CAAA,CAC9C,EAEF+D,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMgM,GAAgBhL,EAAI,KAAK,EACxC,UAAW;AAAA;AAAA,0BAEPmJ,EACE,2DACA,oEACJ;AAAA,wBAGD,WACCpK,EAAAA,KAAAkJ,EAAAA,SAAA,CACE,SAAA,CAAAjJ,EAAAA,IAAC/D,EAAA,CAAY,UAAU,SAAA,CAAU,EAAE,WAAA,CAAA,CAErC,EAEA,mBAAA,CAAA,CAEJ,CAAA,CACF,CAAA,EACF,EAEA8D,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,8DAA8D,SAAA,cAAW,EACxFmM,GACCpM,EAAAA,KAAC,OAAA,CAAK,UAAU,+GACd,SAAA,CAAAC,EAAAA,IAACtC,EAAA,CAAK,UAAU,SAAA,CAAU,EAAE,SAAA,CAAA,CAC9B,CAAA,EAEJ,EACAsC,EAAAA,IAAC,MAAA,CAAI,UAAW,sBAAsBmM,EAAc,wBAA0B,eAAe,GAC1F,SAAA7G,EAAetE,EAAI,WAAW,CAAA,CACjC,EACC4K,EAAuB,GACtB7L,OAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,mBAAgB,EAChDD,EAAAA,KAAC,OAAA,CAAK,UAAU,sCAAsC,SAAA,CAAA,IAAEuF,EAAesG,CAAoB,CAAA,CAAA,CAAE,CAAA,EAC/F,EACA7L,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,sCAAsC,SAAA,WAAQ,EAC9DA,EAAAA,IAAC,OAAA,CAAK,UAAW,qBAAqBoM,EAAgB,wBAA0B,eAAe,GAC5F,SAAA9G,EAAetE,EAAI,OAAO,CAAA,CAC7B,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EAEJ,EAEAjB,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAC,EAAAA,IAAClC,GAAA,CAAI,UAAU,wBAAA,CAAyB,EACxCkC,EAAAA,IAAC,OAAA,CAAK,UAAU,gDAAgD,SAAA,WAAA,CAAS,CAAA,EAC3E,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAkC,MAAO,GAAGgB,EAAI,cAAc,IAAIA,EAAI,cAAc,GAChG,WAAI,eACP,EACCA,EAAI,OACHjB,OAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAA,OAAC,QAAK,UAAW,WAAWuM,EAAmB,kCAAoC,eAAe,GAAI,SAAA,CAAA,UAC5FtL,EAAI,KAAA,EACd,EACCsL,GAAoBtM,EAAAA,IAACtC,EAAA,CAAK,UAAU,+BAAA,CAAgC,CAAA,CAAA,CACvE,CAAA,EAEJ,EAEAqC,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAC,EAAAA,IAACtC,EAAA,CAAK,UAAU,yBAAA,CAA0B,EAC1CsC,EAAAA,IAAC,OAAA,CAAK,UAAU,gDAAgD,SAAA,QAAA,CAAM,CAAA,EACxE,EACCgB,EAAI,aACHjB,EAAAA,KAAAkJ,EAAAA,SAAA,CACE,SAAA,CAAAlJ,OAAC,OAAI,UAAW,qBAAqBsM,EAAe,wBAA0B,eAAe,GAC1F,SAAA,CAAArL,EAAI,aAAa,QAAQ,CAAC,EAAE,OAC5BqL,GAAgBrM,EAAAA,IAACtC,EAAA,CAAK,UAAU,2CAAA,CAA4C,CAAA,EAC/E,EACCsD,EAAI,aACHjB,OAAC,MAAA,CAAI,UAAU,+BAAgC,SAAA,CAAAiB,EAAI,YAAY,UAAA,CAAA,CAAQ,CAAA,CAAA,CAE3E,EAEAhB,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,KAAA,CAAG,CAAA,EAE9C,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAC,EAAAA,IAACxC,GAAA,CAAO,UAAU,+BAAA,CAAgC,EAClDwC,EAAAA,IAAC,OAAA,CAAK,UAAU,gDAAgD,SAAA,UAAA,CAAQ,CAAA,EAC1E,EACEgB,EAAI,eAAiBA,EAAI,kBACzBjB,EAAAA,KAAC,MAAA,CAAI,UAAU,cACZ,SAAA,CAAAiB,EAAI,sBACF,MAAA,CAAI,UAAW,WAAWwL,EAAiB,kCAAoC,eAAe,GAC5F,SAAA,CAAAxL,EAAI,cAAc,UAAA,EACrB,EAEDA,EAAI,mBACHjB,OAAC,MAAA,CAAI,UAAW,WAAWyM,EAAiB,kCAAoC,eAAe,GAC5F,SAAA,CAAAxL,EAAI,kBAAkB,UAAA,EACzB,EAEDwL,GACCxM,EAAAA,IAAC,OAAA,CAAK,UAAU,mHAAmH,SAAA,MAAA,CAEnI,CAAA,CAAA,CAEJ,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,KAAA,CAAG,CAAA,CAAA,CAE9C,CAAA,CAAA,CACF,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,gBACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,2EACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mFACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAChD,GAAA,CAAW,UAAU,uBAAA,CAAwB,EAC9CgD,EAAAA,IAAC,OAAA,CAAK,UAAU,kCAAkC,SAAA,kCAAA,CAAgC,CAAA,EACpF,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,+DACb,SAAA,CAAAmM,EAAc,IAAED,EAAa,OAAO,WAAA,EACvC,EACCV,EAAoB,OAAS,GAC5BvL,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMqL,EAAyBrK,EAAI,MAAOA,EAAI,UAAU,EACjE,UAAU,gKACV,MAAM,iBAEL,SAAA0J,IAAqB1J,EAAI,MACxBjB,EAAAA,KAAAkJ,EAAAA,SAAA,CACE,SAAA,CAAAjJ,EAAAA,IAAC7D,GAAA,CAAM,UAAU,+BAAA,CAAgC,EACjD6D,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAoC,SAAA,SAAA,CAAO,CAAA,CAAA,CAC7D,EAEAD,EAAAA,KAAAkJ,EAAAA,SAAA,CACE,SAAA,CAAAjJ,EAAAA,IAACtD,GAAA,CAAK,UAAU,SAAA,CAAU,EAC1BsD,EAAAA,IAAC,QAAK,SAAA,UAAA,CAAQ,CAAA,CAAA,CAChB,CAAA,CAAA,CAEJ,CAAA,CAEJ,CAAA,EACF,EACAA,EAAAA,IAAC,OAAI,UAAU,sCACZ,WAAa,SAAW,QACtB,IAAA,CAAE,UAAU,yCAAyC,SAAA,4BAAA,CAEtD,QAEC,MAAA,CAAI,UAAU,wCACZ,SAAAiM,EAAa,IAAKd,GACjBpL,EAAAA,KAAC,MAAA,CAEC,UAAW,2DACToL,EAAS,YAAc,wBAA0B,uDACnD,GAEA,SAAA,CAAAnL,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMkL,EAAuBC,CAAQ,EAC9C,UAAU,uBAET,SAAAA,EAAS,YACRnL,EAAAA,IAAC/D,EAAA,CAAY,UAAU,gCAAgC,EAEvD+D,EAAAA,IAAC,MAAA,CAAI,UAAU,+FAAA,CAAgG,CAAA,CAAA,EAGnHD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAW,WAAWmL,EAAS,YAAc,6BAA+B,eAAe,GAC3F,SAAAA,EAAS,aAAA,CACZ,EACC,CAACA,EAAS,mBACR,MAAA,CAAI,UAAU,iCACb,SAAAnL,EAAAA,IAAC,OAAA,CAAK,UAAW,sDAAsDyL,EAAiBN,EAAS,QAAQ,CAAC,GACvG,SAAAA,EAAS,SACZ,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,EA1BKA,EAAS,EAAA,CA4BjB,EACH,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAECjB,SACE,MAAA,CAAI,UAAU,qCACb,SAAAnK,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8DAA8D,SAAA,eAAY,EACvFgB,EAAI,OACHjB,OAAC,MAAA,CAAI,UAAU,gDACb,SAAA,CAAAC,EAAAA,IAAC5C,GAAA,CAAM,UAAU,uBAAA,CAAwB,EACxC4D,EAAI,KAAA,EACP,EAEDA,EAAI,OACHjB,OAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAC,EAAAA,IAAC7C,GAAA,CAAK,UAAU,uBAAA,CAAwB,EACxC6C,EAAAA,IAAC,IAAA,CAAE,KAAM,UAAUgB,EAAI,KAAK,GAAI,UAAU,wCACvC,SAAAA,EAAI,KAAA,CACP,CAAA,EACF,EAEDA,EAAI,SACHjB,OAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAC,EAAAA,IAACjD,GAAA,CAAM,UAAU,uBAAA,CAAwB,QACxC,IAAA,CAAE,KAAMiE,EAAI,QAAS,OAAO,SAAS,IAAI,sBAAsB,UAAU,iDACvE,SAAAA,EAAI,QAAQ,QAAQ,eAAgB,EAAE,CAAA,CACzC,CAAA,EACF,EAEDA,EAAI,SACHjB,OAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,WAAQ,EAAO,IAAEgB,EAAI,QACpDA,EAAI,cAAgB,KAAKA,EAAI,YAAY,GAAA,EAC5C,EAEDA,EAAI,mBACHjB,OAAC,MAAA,CAAI,UAAU,0DACb,SAAA,CAAAC,EAAAA,IAAC/D,EAAA,CAAY,UAAU,SAAA,CAAU,EAAE,qBAAA,CAAA,CACrC,CAAA,EAEJ,EAEA8D,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8DAA8D,SAAA,qBAAkB,EAC7FgB,EAAI,eACHjB,OAAC,MAAA,CAAI,UAAU,gDACb,SAAA,CAAAC,EAAAA,IAACvD,GAAA,CAAM,UAAU,uBAAA,CAAwB,EAAE,QACrCuE,EAAI,cAAc,mBAAA,EAC1B,EAEDA,EAAI,oBACHjB,OAAC,MAAA,CAAI,UAAU,gDACb,SAAA,CAAAC,EAAAA,IAACjE,GAAA,CAAS,UAAU,uBAAA,CAAwB,EAAE,cAClCsF,EAAWL,EAAI,kBAAkB,CAAA,EAC/C,EAEDA,EAAI,YACHjB,OAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,qBAAkB,EAAO,IAAEqB,EAAWL,EAAI,UAAU,CAAA,EACtF,EAEDA,EAAI,SACHjB,OAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAgB,SAAA,YAAS,EAAO,IAAEqB,EAAWL,EAAI,OAAO,CAAA,EAC1E,EAEDA,EAAI,kBACHjB,OAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAoC,SAAA,sBAAmB,EACtEgB,EAAI,gBAAkBjB,OAAC,OAAA,CAAK,UAAU,qBAAqB,SAAA,CAAA,KAAGiB,EAAI,cAAA,CAAA,CAAe,CAAA,CAAA,CACpF,CAAA,EAEJ,EAEAjB,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8DAA8D,SAAA,aAAU,EACrFgB,EAAI,iBACHjB,OAAC,MAAA,CAAI,UAAU,wBACZ,SAAA,CAAAiB,EAAI,gBAAgB,oBAAA,EACvB,EAEDA,EAAI,eACHjB,OAAC,MAAA,CAAI,UAAU,wBACZ,SAAA,CAAAiB,EAAI,cAAc,eAAA,EAAiB,iBAAA,EACtC,EAEDA,EAAI,eAAe,OAAS,SAC1B,MAAA,CAAI,UAAU,uBACZ,SAAAA,EAAI,eAAe,IAAI,CAACmI,EAAMjI,IAC7BlB,MAAC,OAAA,CAAa,UAAU,wDACrB,SAAAmJ,CAAA,EADQjI,CAEX,CACD,CAAA,CACH,EAEDF,EAAI,sBACHjB,OAAC,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,0BACdC,EAAAA,IAAC,OAAA,CAAK,UAAU,yBAA0B,WAAI,oBAAA,CAAqB,CAAA,EAC5F,GAEAgB,EAAI,YAAcA,EAAI,cAAgBA,EAAI,oBAC1CjB,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACZ,SAAA,CAAAiB,EAAI,YACHjB,OAAC,OAAA,CAAK,UAAU,wEAAwE,SAAA,CAAA,UAC9EiB,EAAI,UAAA,EACd,EAEDA,EAAI,cACHjB,OAAC,OAAA,CAAK,UAAU,wDAAwD,SAAA,CAAA,YAC5DiB,EAAI,YAAA,CAAA,CAChB,CAAA,CAAA,CAEJ,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,EAGFhB,EAAAA,IAAC,MAAA,CAAI,UAAU,qCACb,SAAAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM2L,EAAkB3K,EAAI,KAAK,EAC1C,UAAU,kGAET,WACCjB,EAAAA,KAAAkJ,EAAAA,SAAA,CACE,SAAA,CAAAjJ,EAAAA,IAAC1D,GAAA,CAAU,UAAU,SAAA,CAAU,EAAE,WAAA,CAAA,CAEnC,EAEAyD,EAAAA,KAAAkJ,EAAAA,SAAA,CACE,SAAA,CAAAjJ,EAAAA,IAAC5D,GAAA,CAAY,UAAU,SAAA,CAAU,EAAE,mBAAA,CAAA,CAErC,CAAA,CAAA,CAEJ,CACF,CAAA,CAAA,CACF,CAAA,CAAA,EA3WK4E,EAAI,KAAA,CA8Wf,CAAC,CAAA,CACH,EAECwB,EAAK,SAAW,GACfzC,EAAAA,KAAC,MAAA,CAAI,UAAU,gEACb,SAAA,CAAAC,EAAAA,IAAChD,GAAA,CAAW,UAAU,sCAAA,CAAuC,EAC7DgD,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,qBAAkB,EAC3EA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,mEAAA,CAAiE,CAAA,EAChG,QAGD,MAAA,CAAI,UAAU,mDACb,SAAAD,EAAAA,KAAC,IAAA,CAAE,UAAU,wBACX,SAAA,CAAAC,EAAAA,IAAC,UAAO,SAAA,OAAA,CAAK,EAAS,gKAAA,CAAA,CAExB,CAAA,CACF,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,mBACb,SAAAD,EAAAA,KAAC,SAAA,CACC,QAASsF,EACT,UAAU,+CACX,SAAA,CAAA,WAECrF,EAAAA,IAACpE,GAAA,CAAW,UAAU,SAAA,CAAU,CAAA,CAAA,CAAA,CAClC,CACF,CAAA,EACF,CAEJ,CC1lBA,MAAM6Q,GAA6E,CACjF,iBAAkB,CAChB,MAAO,mBACP,YAAa,uCAAA,EAEf,UAAW,CACT,MAAO,yBACP,YAAa,yDAAA,EAEf,QAAS,CACP,MAAO,UACP,YAAa,uDAAA,EAEf,YAAa,CACX,MAAO,cACP,YAAa,kEAAA,EAEf,WAAY,CACV,MAAO,aACP,YAAa,wCAAA,EAEf,cAAe,CACb,MAAO,2BACP,YAAa,gDAAA,CAEjB,EAEO,SAASC,IAAc,CAC5B,KAAM,CAAE,UAAApO,CAAA,EAAcoF,EAAA,EAChB,CAACiJ,EAAOC,CAAQ,EAAIpT,EAAAA,SAAoC,CAAA,CAAE,EAC1D,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACqT,EAAkBC,CAAmB,EAAItT,EAAAA,SAA6B,kBAAkB,EAE/FO,EAAAA,UAAU,IAAM,CACVuE,GACFyO,EAAA,CAEJ,EAAG,CAACzO,CAAS,CAAC,EAEd,eAAeyO,GAAgB,CAC7B,KAAM,CAAE,KAAMC,CAAA,EAAa,MAAM7U,EAC9B,KAAK,qBAAqB,EAC1B,OAAO,GAAG,EACV,MAAM,gBAAiB,CAAE,UAAW,GAAM,EAEvC,CAAE,KAAM8U,GAAkB,MAAM9U,EACnC,KAAK,uBAAuB,EAC5B,OAAO,GAAG,EACV,GAAG,aAAcmG,CAAS,EAEvB4O,EAAY,IAAI,KAAID,GAAA,YAAAA,EAAe,IAAKE,GAAM,CAACA,EAAE,kBAAmBA,CAAC,KAAM,CAAA,CAAE,EAE7EC,GAAmBJ,GAAY,CAAA,GAAI,IAAKhJ,IAAU,CACtD,GAAGA,EACH,OAAQkJ,EAAU,IAAIlJ,EAAK,EAAE,CAAA,EAC7B,EAEF4I,EAASQ,CAAe,EACxB1T,EAAW,EAAK,CAClB,CAEA,eAAe2T,EAAWrJ,EAA+B,OACvD,MAAMsJ,IAAsBvE,EAAA/E,EAAK,SAAL,YAAA+E,EAAa,cAAe,GAEpD/E,EAAK,OACP,MAAM7L,EACH,KAAK,uBAAuB,EAC5B,OAAO,CACN,YAAa,CAACmV,EACd,YAAcA,EAAiD,SAAvB,KAAA,EAAO,cAC/C,YAAcA,EAAoC,KAAd,WAAc,CACnD,EACA,GAAG,KAAMtJ,EAAK,OAAO,EAAE,EAE1B,MAAM7L,EAAS,KAAK,uBAAuB,EAAE,OAAO,CAClD,WAAYmG,EACZ,kBAAmB0F,EAAK,GACxB,YAAa,GACb,YAAa,IAAI,KAAA,EAAO,YAAA,EACxB,YAAa,WAAA,CACd,EAGH+I,EAAA,CACF,CAEA,SAASQ,GAAc,CACrB,MAAMC,EAAQb,EAAM,OACdc,EAAWd,EAAM,OAAQzL,UAAM,OAAA6H,EAAA7H,EAAE,SAAF,YAAA6H,EAAU,YAAW,EAAE,OACtD2E,EAAWf,EAAM,OAAQzL,GAAMA,EAAE,WAAW,EAC5CyM,EAAmBD,EAAS,OAAQxM,UAAM,OAAA6H,EAAA7H,EAAE,SAAF,YAAA6H,EAAU,YAAW,EAAE,OAEvE,MAAO,CACL,MAAAyE,EACA,SAAAC,EACA,WAAYD,EAAQ,EAAI,KAAK,MAAOC,EAAWD,EAAS,GAAG,EAAI,EAC/D,SAAUE,EAAS,OACnB,iBAAAC,EACA,iBAAkBA,IAAqBD,EAAS,MAAA,CAEpD,CAEA,SAASE,EAAiBC,EAAuB,CAC/C,OAAOlB,EAAM,OAAQzL,GAAMA,EAAE,WAAa2M,CAAQ,CACpD,CAEA,SAASC,EAAoBD,EAAuB,CAClD,MAAME,EAAgBH,EAAiBC,CAAQ,EACzCJ,EAAWM,EAAc,OAAQ7M,UAAM,OAAA6H,EAAA7H,EAAE,SAAF,YAAA6H,EAAU,YAAW,EAAE,OACpE,MAAO,CAAE,MAAOgF,EAAc,OAAQ,SAAAN,CAAA,CACxC,CAEA,SAASO,GAAc,CACrB,OAAO,MAAA,CACT,CAEA,MAAMC,EAAWV,EAAA,EACXW,EAAa,OAAO,KAAKzB,EAAa,EAE5C,OAAIhT,EAEAsG,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,mFAAA,CAAoF,EAAE,sBAAA,EAEvG,EAKFD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,2BAAwB,EACzEA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,sEAAA,CAElC,CAAA,EACF,EACAD,EAAAA,KAAC,SAAA,CACC,QAASiO,EACT,UAAU,yDAEV,SAAA,CAAAhO,EAAAA,IAACzC,GAAA,CAAQ,UAAU,SAAA,CAAU,EAAE,OAAA,CAAA,CAAA,CAEjC,EACF,QAEC,MAAA,CAAI,UAAU,iDACb,SAAAwC,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAoC,SAAA,mBAAgB,EACpED,EAAAA,KAAC,OAAA,CAAK,UAAU,kCACb,SAAA,CAAAkO,EAAS,SAAS,IAAEA,EAAS,KAAA,CAAA,CAChC,CAAA,EACF,EACAjO,EAAAA,IAAC,MAAA,CAAI,UAAU,+CACb,SAAAA,EAAAA,IAAC,MAAA,CACC,UAAU,yDACV,MAAO,CAAE,MAAO,GAAGiO,EAAS,UAAU,GAAA,CAAI,CAAA,EAE9C,EACAlO,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA8B,SAAA,CAAAkO,EAAS,WAAW,YAAA,CAAA,CAAU,CAAA,EAC3E,EAEAlO,EAAAA,KAAC,MAAA,CACC,UAAW,kBAAkBkO,EAAS,iBAAmB,qBAAuB,aAC9E,GAEF,SAAA,CAAAlO,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACZ,SAAA,CAAAkO,EAAS,uBACPjS,EAAA,CAAa,UAAU,gCAAgC,EAExDgE,EAAAA,IAACrE,GAAA,CAAc,UAAU,wBAAA,CAAyB,EAEpDqE,EAAAA,IAAC,OAAA,CAAK,UAAU,4BAA4B,SAAA,gBAAA,CAAc,CAAA,EAC5D,EACAD,EAAAA,KAAC,IAAA,CACC,UAAW,gBAAgBkO,EAAS,iBAAmB,wBAA0B,gBAC/E,GAED,SAAA,CAAAA,EAAS,iBAAiB,OAAKA,EAAS,SAAS,0BAAA,CAAA,CAAA,CACpD,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,YACZ,SAAAC,EAAW,IAAKL,GAAa,CAC5B,MAAMM,EAAO1B,GAAcoB,CAAQ,EAC7BO,EAAmBN,EAAoBD,CAAQ,EAC/C3D,EAAa2C,IAAqBgB,EAClCE,EAAgBH,EAAiBC,CAAQ,EACzCQ,EAAcD,EAAiB,WAAaA,EAAiB,MAEnE,OAAIL,EAAc,SAAW,EAAU,KAGrChO,EAAAA,KAAC,MAAA,CAAmB,UAAU,6DAC5B,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM+M,EAAoB5C,EAAa,KAAO2D,CAAQ,EAC/D,UAAU,wFAEV,SAAA,CAAA9N,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA+B,SAAAmO,EAAK,MAAM,EACxDnO,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,WAAK,WAAA,CAAY,CAAA,EACzD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CACC,UAAW,uBAAuBsO,EAAc,wBAA0B,eACxE,GAED,SAAA,CAAAD,EAAiB,SAAS,IAAEA,EAAiB,KAAA,CAAA,CAAA,EAE/CC,GAAerO,EAAAA,IAAChE,EAAA,CAAa,UAAU,+BAAA,CAAgC,EACvEkO,QACE5N,GAAA,CAAU,UAAU,wBAAwB,EAE7C0D,MAAC5D,GAAA,CAAY,UAAU,uBAAA,CAAwB,CAAA,CAAA,CAEnD,CAAA,CAAA,CAAA,EAGD8N,SACE,MAAA,CAAI,UAAU,oDACZ,SAAA6D,EAAc,IAAK/J,cAClBjE,OAAAA,EAAAA,KAAC,MAAA,CAEC,UAAW,qCAAoCgJ,EAAA/E,EAAK,SAAL,MAAA+E,EAAa,YAAc,aAAe,EACvF,GAEF,SAAA,CAAA/I,EAAAA,IAAC,SAAA,CAAO,QAAS,IAAMqN,EAAWrJ,CAAI,EAAG,UAAU,uBAChD,UAAAgF,EAAAhF,EAAK,SAAL,MAAAgF,EAAa,YACZhJ,EAAAA,IAAChE,EAAA,CAAa,UAAU,+BAAA,CAAgC,QAEvDO,GAAA,CAAO,UAAU,4CAA4C,CAAA,CAElE,EAEAwD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CACC,UAAW,gBAAesO,EAAAtK,EAAK,SAAL,MAAAsK,EAAa,YACjC,6BACA,eACJ,GAED,SAAAtK,EAAK,SAAA,CAAA,EAEPA,EAAK,aACJhE,EAAAA,IAAC,OAAA,CAAK,UAAU,2DAA2D,SAAA,UAAA,CAE3E,CAAA,EAEJ,EACCgE,EAAK,aACJhE,EAAAA,IAAC,KAAE,UAAU,6BAA8B,WAAK,YAAY,EAE7DgE,EAAK,gBACJjE,OAAC,MAAA,CAAI,UAAU,8EACb,SAAA,CAAAC,EAAAA,IAAC9C,GAAA,CAAK,UAAU,8BAAA,CAA+B,SAC9C,OAAA,CACC,SAAA,CAAA8C,EAAAA,IAAC,UAAO,SAAA,iBAAA,CAAe,EAAS,IAAEgE,EAAK,cAAA,CAAA,CACzC,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,EAvCKA,EAAK,EAAA,EAyCb,CAAA,CACH,CAAA,CAAA,EAvEM6J,CAyEV,CAEJ,CAAC,CAAA,CACH,EAECI,EAAS,aAAe,KACvBlO,EAAAA,KAAC,MAAA,CAAI,UAAU,+EACb,SAAA,CAAAC,EAAAA,IAAChE,EAAA,CAAa,UAAU,8CAAA,CAA+C,EACvEgE,EAAAA,IAAC,KAAA,CAAG,UAAU,0CAA0C,SAAA,yBAAsB,EAC9EA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,yFAAA,CAE1C,CAAA,EACF,EAGFD,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,gCAA6B,EAC9ED,EAAAA,KAAC,KAAA,CAAG,UAAU,kCACZ,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,yBACZ,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,KAAE,EAAO,+EAAA,EAEnD,EACAD,EAAAA,KAAC,KAAA,CAAG,UAAU,yBACZ,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,KAAE,EAAO,kFAAA,EAEnD,EACAD,EAAAA,KAAC,KAAA,CAAG,UAAU,yBACZ,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,KAAE,EAAO,0EAAA,EAEnD,EACAD,EAAAA,KAAC,KAAA,CAAG,UAAU,yBACZ,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,wBAAwB,SAAA,KAAE,EAAO,wEAAA,CAAA,CAEnD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ,CChTA,SAASuO,GAAoB,CAAE,eAAAzK,GAAmD,CAChF,KAAM,CAAE,aAAApB,EAAc,QAAAjJ,EAAS,MAAAI,EAAO,QAAA+G,CAAA,EAAY8C,EAAA,EAE5C8K,EACJxO,EAAAA,IAACyO,GAAA,CAAa,QAAAhV,EAAkB,MAAAI,EAAc,aAAA6I,EAA4B,EAG5E,aACGmB,GAAA,CAAY,eAAAC,EAAgC,YAAalD,GAAA,YAAAA,EAAS,aAChE,SAAA4N,EACH,CAEJ,CAEA,SAASC,GAAa,CAAE,QAAAhV,EAAS,MAAAI,EAAO,aAAA6I,GAAkF,CAExH,GAAIjJ,EACF,aACG,MAAA,CAAI,UAAU,yCACb,SAAAsG,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,qFAAA,CAAsF,EACrGA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,yBAAA,CAAuB,CAAA,CAAA,CACtD,CAAA,CACF,EAIJ,GAAInG,EACF,OACEkG,EAAAA,KAAC,MAAA,CAAI,UAAU,6DACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,eAAgB,SAAAnG,EAAM,EACnCmG,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,OAAO,SAAS,OAAA,EAC/B,UAAU,uBACX,SAAA,OAAA,CAAA,CAED,EACF,EAIJ,OAAQ0C,EAAA,CACN,IAAK,GACH,aAAQ6B,GAAA,EAAY,EACtB,IAAK,GACH,aAAQsB,GAAA,EAAa,EACvB,IAAK,GACH,aAAQwE,GAAA,EAAY,EACtB,IAAK,GACH,aAAQqC,GAAA,EAAY,EACtB,QACE,aAAQnI,GAAA,EAAY,CAAA,CAE1B,CAEO,SAASmK,GAAa,CAAE,KAAA3V,EAAM,UAAAuF,EAAW,eAAAwF,GAAqC,CACnF,OACE9D,EAAAA,IAACiC,GAAA,CAAc,OAAQlJ,EAAK,GAAI,iBAAkBuF,EAChD,SAAA0B,EAAAA,IAACuO,GAAA,CAAoB,eAAAzK,CAAA,CAAgC,CAAA,CACvD,CAEJ,CCtEA,MAAM6K,GAAqB,0BAE3B,SAASC,IAAoC,CAC3C,GAAI,CACF,OAAO,aAAa,QAAQD,EAAkB,CAChD,MAAQ,CACN,OAAO,IACT,CACF,CAEA,SAASE,GAAmBvQ,EAAgC,CAC1D,GAAI,CACEA,EACF,aAAa,QAAQqQ,GAAoBrQ,CAAS,EAElD,aAAa,WAAWqQ,EAAkB,CAE9C,MAAQ,CACR,CACF,CAEA,SAASG,IAAM,CACb,KAAM,CAAE,KAAA/V,EAAM,QAAAU,EAAS,MAAAI,CAAA,EAAUP,GAAA,EAC3B,CAACyV,EAAiBC,CAAkB,EAAIxV,EAAAA,SAAwB,IAAI,EACpE,CAACyV,EAAaC,CAAc,EAAI1V,EAAAA,SAAS,EAAI,EAEnDO,EAAAA,UAAU,IAAM,CACd,MAAMoV,EAAkBP,GAAA,EACpBO,IACFH,EAAmBG,CAAe,EAClCD,EAAe,EAAK,EAExB,EAAG,CAAA,CAAE,EAEL,MAAME,EAAuB9Q,GAAsB,CACjD0Q,EAAmB1Q,CAAS,EAC5BuQ,GAAmBvQ,CAAS,EAC5B4Q,EAAe,EAAK,CACtB,EAEMG,EAAuB/Q,GAAsB,CACjD0Q,EAAmB1Q,CAAS,EAC5BuQ,GAAmBvQ,CAAS,EAC5B4Q,EAAe,EAAK,CACtB,EAEMI,EAAqB,IAAM,CAC/BJ,EAAe,EAAI,CACrB,EAEA,OAAIzV,QAEC,MAAA,CAAI,UAAU,2DACb,SAAAsG,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,gFAAA,CAAiF,EAChGA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,qBAAA,CAAmB,CAAA,CAAA,CACvD,CAAA,CACF,EAIAnG,GAAS,CAACd,QAET,MAAA,CAAI,UAAU,2DACb,SAAAgH,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,kFACb,SAAAA,EAAAA,IAAC,QAAK,UAAU,wBAAwB,aAAC,CAAA,CAC3C,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,2CAA2C,SAAA,iBAAc,EACvEA,EAAAA,IAAC,IAAA,CAAE,UAAU,qBAAqB,SAAA,kFAElC,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,OAAO,SAAS,OAAA,EAC/B,UAAU,kBACX,SAAA,cAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,EAIAiP,GAAe,CAACF,EAEhB/O,EAAAA,IAACI,GAAA,CACC,KAAArH,EACA,gBAAiBqW,EACjB,gBAAiBC,CAAA,CAAA,QAKfX,GAAA,CAAa,KAAA3V,EAAY,UAAWgW,EAAiB,eAAgBO,EAAoB,CACnG,CC9FAC,GAAS,WAAW,SAAS,eAAe,MAAM,CAAE,EAAE,aACnDC,GAAM,WAAN,CACC,SAAAxP,MAAC8O,KAAI,CAAA,CACP,CACF","x_google_ignoreList":[0,1,2,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43]}