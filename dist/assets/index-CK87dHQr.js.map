{"version":3,"file":"index-CK87dHQr.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../src/lib/supabaseClient.ts","../../src/lib/parentAuth.ts","../../src/hooks/useUser.ts","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/alert-circle.js","../../node_modules/lucide-react/dist/esm/icons/arrow-left.js","../../node_modules/lucide-react/dist/esm/icons/arrow-right.js","../../node_modules/lucide-react/dist/esm/icons/award.js","../../node_modules/lucide-react/dist/esm/icons/bar-chart-3.js","../../node_modules/lucide-react/dist/esm/icons/bell-off.js","../../node_modules/lucide-react/dist/esm/icons/bell.js","../../node_modules/lucide-react/dist/esm/icons/book-open.js","../../node_modules/lucide-react/dist/esm/icons/calendar.js","../../node_modules/lucide-react/dist/esm/icons/check-circle-2.js","../../node_modules/lucide-react/dist/esm/icons/check-circle.js","../../node_modules/lucide-react/dist/esm/icons/check-square.js","../../node_modules/lucide-react/dist/esm/icons/check.js","../../node_modules/lucide-react/dist/esm/icons/chevron-down.js","../../node_modules/lucide-react/dist/esm/icons/chevron-right.js","../../node_modules/lucide-react/dist/esm/icons/chevron-up.js","../../node_modules/lucide-react/dist/esm/icons/clipboard-check.js","../../node_modules/lucide-react/dist/esm/icons/clock.js","../../node_modules/lucide-react/dist/esm/icons/copy.js","../../node_modules/lucide-react/dist/esm/icons/dollar-sign.js","../../node_modules/lucide-react/dist/esm/icons/download.js","../../node_modules/lucide-react/dist/esm/icons/external-link.js","../../node_modules/lucide-react/dist/esm/icons/eye.js","../../node_modules/lucide-react/dist/esm/icons/file-check-2.js","../../node_modules/lucide-react/dist/esm/icons/file-text.js","../../node_modules/lucide-react/dist/esm/icons/flask-conical.js","../../node_modules/lucide-react/dist/esm/icons/globe.js","../../node_modules/lucide-react/dist/esm/icons/help-circle.js","../../node_modules/lucide-react/dist/esm/icons/info.js","../../node_modules/lucide-react/dist/esm/icons/lightbulb.js","../../node_modules/lucide-react/dist/esm/icons/loader-2.js","../../node_modules/lucide-react/dist/esm/icons/mail.js","../../node_modules/lucide-react/dist/esm/icons/message-square.js","../../node_modules/lucide-react/dist/esm/icons/phone.js","../../node_modules/lucide-react/dist/esm/icons/play.js","../../node_modules/lucide-react/dist/esm/icons/plus.js","../../node_modules/lucide-react/dist/esm/icons/save.js","../../node_modules/lucide-react/dist/esm/icons/search.js","../../node_modules/lucide-react/dist/esm/icons/send.js","../../node_modules/lucide-react/dist/esm/icons/shield.js","../../node_modules/lucide-react/dist/esm/icons/square.js","../../node_modules/lucide-react/dist/esm/icons/star.js","../../node_modules/lucide-react/dist/esm/icons/upload.js","../../node_modules/lucide-react/dist/esm/icons/users.js","../../node_modules/lucide-react/dist/esm/icons/x-circle.js","../../node_modules/lucide-react/dist/esm/icons/x.js","../../node_modules/lucide-react/dist/esm/icons/zap.js","../../src/lib/database/bidsmartService.ts","../../src/lib/utils/formatters.ts","../../src/components/ReturningUserSection.tsx","../../src/components/TryTheToolSection.tsx","../../src/components/FeedbackPanel.tsx","../../src/components/AlphaBanner.tsx","../../src/components/AnalysisSuccessScreen.tsx","../../src/lib/utils/fileHandler.ts","../../src/lib/services/mindpalService.ts","../../src/assets/switchlogo.svg","../../src/components/UnifiedHomePage.tsx","../../src/context/PhaseContext.tsx","../../src/components/PhaseLayout.tsx","../../src/components/AnalysisSubmissionInterstitial.tsx","../../src/hooks/useAnalysisNotification.ts","../../src/components/NotificationToast.tsx","../../src/components/phases/GatherPhase.tsx","../../src/components/phases/ComparePhase.tsx","../../src/components/IncentivesTable.tsx","../../src/components/OverallFaqsCard.tsx","../../src/components/BidSpecificFaqsCard.tsx","../../src/components/phases/DecidePhase.tsx","../../src/components/ContractorReviewSurvey.tsx","../../src/components/phases/VerifyPhase.tsx","../../src/components/DemoBanner.tsx","../../src/components/BidSmartFlow.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * Supabase Client Configuration\n * \n * Bolt Database automatically provisions Supabase and injects these \n * environment variables. No manual setup required when using Bolt.\n */\n\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\nconst supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\n// Bolt auto-injects these - only warn in development if missing\nif (!supabaseUrl || !supabaseAnonKey) {\n  console.warn(\n    'Supabase environment variables not found. ' +\n    'If using Bolt, make sure Bolt Database is enabled for your project.'\n  );\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n  auth: {\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n  },\n});\n\n/**\n * Get the current authenticated user\n */\nexport async function getCurrentUser() {\n  const { data: { user }, error } = await supabase.auth.getUser();\n  if (error) {\n    console.error('Error getting current user:', error);\n    return null;\n  }\n  return user;\n}\n\n/**\n * Get or create user extension record\n */\nexport async function getOrCreateUserExt(authUserId: string, email: string) {\n  // First try to get existing record\n  const { data: existing, error: fetchError } = await supabase\n    .from('users_ext')\n    .select('*')\n    .eq('auth_user_id', authUserId)\n    .maybeSingle();\n\n  if (fetchError) {\n    console.error('Error fetching user_ext:', fetchError);\n    throw fetchError;\n  }\n\n  if (existing) {\n    return existing;\n  }\n\n  // Create new record\n  const { data: created, error: createError } = await supabase\n    .from('users_ext')\n    .insert({\n      auth_user_id: authUserId,\n      email: email,\n    })\n    .select()\n    .single();\n\n  if (createError) {\n    console.error('Error creating user_ext:', createError);\n    throw createError;\n  }\n\n  return created;\n}\n\nexport default supabase;\n","/**\n * Parent Platform Authentication (Frontend)\n * \n * Handles signed token authentication for iframe-embedded context.\n * Tokens are generated by the parent platform (TheSwitchIsOn) and\n * passed via URL parameter.\n */\n\ninterface ParentAuthPayload {\n  email: string;\n  name: string;\n  exp: number;\n  iat: number;\n}\n\ninterface AuthTokenResult {\n  email: string;\n  name: string;\n  token: string;\n}\n\n/**\n * Extracts and validates auth token from URL parameters\n * Token format: base64url(payload).base64url(signature)\n */\nexport function getAuthTokenFromUrl(): AuthTokenResult | null {\n  if (typeof window === 'undefined') return null;\n\n  const params = new URLSearchParams(window.location.search);\n  const token = params.get('auth_token');\n\n  if (!token) return null;\n\n  try {\n    const parts = token.split('.');\n    if (parts.length !== 2) return null;\n\n    const payloadB64 = parts[0];\n    const payloadJson = base64UrlDecode(payloadB64);\n    const payload: ParentAuthPayload = JSON.parse(payloadJson);\n\n    // Check expiration (client-side check, server will verify too)\n    const now = Math.floor(Date.now() / 1000);\n    if (payload.exp < now) {\n      console.warn('Auth token expired');\n      return null;\n    }\n\n    return {\n      email: payload.email,\n      name: payload.name || payload.email.split('@')[0],\n      token,\n    };\n  } catch (error) {\n    console.error('Error parsing auth token:', error);\n    return null;\n  }\n}\n\n/**\n * Decodes base64url string\n */\nfunction base64UrlDecode(str: string): string {\n  const base64 = str.replace(/-/g, '+').replace(/_/g, '/');\n  const padded = base64 + '='.repeat((4 - (base64.length % 4)) % 4);\n  return atob(padded);\n}\n\n/**\n * Storage key for auth token\n */\nconst AUTH_TOKEN_STORAGE_KEY = 'bidsmart_auth_token';\n\n/**\n * Stores the auth token for subsequent requests\n */\nexport function storeAuthToken(token: string): void {\n  try {\n    sessionStorage.setItem(AUTH_TOKEN_STORAGE_KEY, token);\n  } catch {\n    // Ignore storage errors\n  }\n}\n\n/**\n * Gets stored auth token\n */\nexport function getStoredAuthToken(): string | null {\n  try {\n    return sessionStorage.getItem(AUTH_TOKEN_STORAGE_KEY);\n  } catch {\n    return null;\n  }\n}\n\n/**\n * Clears stored auth token\n */\nexport function clearAuthToken(): void {\n  try {\n    sessionStorage.removeItem(AUTH_TOKEN_STORAGE_KEY);\n  } catch {\n    // Ignore storage errors\n  }\n}\n\n/**\n * Gets auth headers for API requests\n * Uses signed token if available, falls back to email header\n */\nexport function getAuthHeaders(userEmail: string): Record<string, string> {\n  const token = getStoredAuthToken();\n  \n  const headers: Record<string, string> = {\n    'Content-Type': 'application/json',\n  };\n\n  if (token) {\n    headers['X-Auth-Token'] = token;\n  } else {\n    headers['X-User-Email'] = userEmail;\n  }\n\n  return headers;\n}\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabaseClient';\nimport type { UserExt } from '../lib/types';\nimport { getAuthTokenFromUrl, storeAuthToken } from '../lib/parentAuth';\n\nconst STORAGE_KEY = 'bidsmart_user';\nconst DEFAULT_EMAIL = 'demo@theswitchison.org';\nconst DEFAULT_NAME = 'Demo User';\n\ninterface StoredUser {\n  email: string;\n  name: string;\n}\n\n/**\n * Gets user info from URL parameters\n * Supports both signed auth tokens (preferred) and legacy email params\n */\nfunction getUrlParams(): StoredUser | null {\n  if (typeof window === 'undefined') return null;\n\n  // Try signed auth token first (more secure)\n  const authToken = getAuthTokenFromUrl();\n  if (authToken) {\n    // Store token for subsequent API requests\n    storeAuthToken(authToken.token);\n    return { email: authToken.email, name: authToken.name };\n  }\n\n  // Fall back to legacy email param (less secure, for backward compat)\n  const params = new URLSearchParams(window.location.search);\n  const email = params.get('user_email');\n  const name = params.get('user_name');\n\n  if (email) {\n    return { email, name: name || email.split('@')[0] };\n  }\n  return null;\n}\n\nfunction getStoredUser(): StoredUser | null {\n  try {\n    const stored = localStorage.getItem(STORAGE_KEY);\n    if (stored) {\n      return JSON.parse(stored);\n    }\n  } catch {\n    // Ignore parse errors\n  }\n  return null;\n}\n\nfunction storeUser(user: StoredUser): void {\n  try {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(user));\n  } catch {\n    // Ignore storage errors\n  }\n}\n\nasync function getOrCreateUserByEmail(email: string, fullName: string): Promise<UserExt> {\n  const { data: existing, error: fetchError } = await supabase\n    .from('users_ext')\n    .select('*')\n    .eq('email', email)\n    .maybeSingle();\n\n  if (fetchError) {\n    console.error('Error fetching user:', fetchError);\n    throw fetchError;\n  }\n\n  if (existing) {\n    return existing;\n  }\n\n  const { data: created, error: createError } = await supabase\n    .from('users_ext')\n    .insert({\n      email: email,\n      full_name: fullName,\n    })\n    .select()\n    .single();\n\n  if (createError) {\n    console.error('Error creating user:', createError);\n    throw createError;\n  }\n\n  return created;\n}\n\nexport interface UseUserResult {\n  user: UserExt | null;\n  loading: boolean;\n  isReturningUser: boolean;\n  error: Error | null;\n}\n\nexport function useUser(): UseUserResult {\n  const [user, setUser] = useState<UserExt | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [isReturningUser, setIsReturningUser] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  useEffect(() => {\n    async function initializeUser() {\n      try {\n        const urlParams = getUrlParams();\n        const storedUser = getStoredUser();\n\n        let userInfo: StoredUser;\n\n        if (urlParams) {\n          userInfo = urlParams;\n          storeUser(urlParams);\n        } else if (storedUser) {\n          userInfo = storedUser;\n        } else {\n          userInfo = { email: DEFAULT_EMAIL, name: DEFAULT_NAME };\n          storeUser(userInfo);\n        }\n\n        const dbUser = await getOrCreateUserByEmail(userInfo.email, userInfo.name);\n\n        const isExisting = dbUser.created_at !== dbUser.updated_at ||\n          new Date(dbUser.created_at).getTime() < Date.now() - 5000;\n\n        setUser(dbUser);\n        setIsReturningUser(isExisting);\n      } catch (err) {\n        console.error('Error initializing user:', err);\n        setError(err instanceof Error ? err : new Error('Failed to initialize user'));\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    initializeUser();\n  }, []);\n\n  return { user, loading, isReturningUser, error };\n}\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase().trim();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ color = \"currentColor\", size = 24, strokeWidth = 2, absoluteStrokeWidth, className = \"\", children, ...rest }, ref) => createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: [\"lucide\", `lucide-${toKebabCase(iconName)}`, className].join(\" \"),\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...Array.isArray(children) ? children : [children]\n      ]\n    )\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertCircle = createLucideIcon(\"AlertCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n]);\n\nexport { AlertCircle as default };\n//# sourceMappingURL=alert-circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowLeft = createLucideIcon(\"ArrowLeft\", [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n]);\n\nexport { ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowRight = createLucideIcon(\"ArrowRight\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"m12 5 7 7-7 7\", key: \"xquz4c\" }]\n]);\n\nexport { ArrowRight as default };\n//# sourceMappingURL=arrow-right.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Award = createLucideIcon(\"Award\", [\n  [\"circle\", { cx: \"12\", cy: \"8\", r: \"6\", key: \"1vp47v\" }],\n  [\"path\", { d: \"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11\", key: \"em7aur\" }]\n]);\n\nexport { Award as default };\n//# sourceMappingURL=award.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BarChart3 = createLucideIcon(\"BarChart3\", [\n  [\"path\", { d: \"M3 3v18h18\", key: \"1s2lah\" }],\n  [\"path\", { d: \"M18 17V9\", key: \"2bz60n\" }],\n  [\"path\", { d: \"M13 17V5\", key: \"1frdt8\" }],\n  [\"path\", { d: \"M8 17v-3\", key: \"17ska0\" }]\n]);\n\nexport { BarChart3 as default };\n//# sourceMappingURL=bar-chart-3.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BellOff = createLucideIcon(\"BellOff\", [\n  [\"path\", { d: \"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5\", key: \"o7mx20\" }],\n  [\"path\", { d: \"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7\", key: \"16f1lm\" }],\n  [\"path\", { d: \"M10.3 21a1.94 1.94 0 0 0 3.4 0\", key: \"qgo35s\" }],\n  [\"path\", { d: \"m2 2 20 20\", key: \"1ooewy\" }]\n]);\n\nexport { BellOff as default };\n//# sourceMappingURL=bell-off.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bell = createLucideIcon(\"Bell\", [\n  [\"path\", { d: \"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9\", key: \"1qo2s2\" }],\n  [\"path\", { d: \"M10.3 21a1.94 1.94 0 0 0 3.4 0\", key: \"qgo35s\" }]\n]);\n\nexport { Bell as default };\n//# sourceMappingURL=bell.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BookOpen = createLucideIcon(\"BookOpen\", [\n  [\"path\", { d: \"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z\", key: \"vv98re\" }],\n  [\"path\", { d: \"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z\", key: \"1cyq3y\" }]\n]);\n\nexport { BookOpen as default };\n//# sourceMappingURL=book-open.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Calendar = createLucideIcon(\"Calendar\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"4\", rx: \"2\", ry: \"2\", key: \"eu3xkr\" }],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"2\", y2: \"6\", key: \"m3sa8f\" }],\n  [\"line\", { x1: \"8\", x2: \"8\", y1: \"2\", y2: \"6\", key: \"18kwsl\" }],\n  [\"line\", { x1: \"3\", x2: \"21\", y1: \"10\", y2: \"10\", key: \"xt86sb\" }]\n]);\n\nexport { Calendar as default };\n//# sourceMappingURL=calendar.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCircle2 = createLucideIcon(\"CheckCircle2\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n]);\n\nexport { CheckCircle2 as default };\n//# sourceMappingURL=check-circle-2.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCircle = createLucideIcon(\"CheckCircle\", [\n  [\"path\", { d: \"M22 11.08V12a10 10 0 1 1-5.93-9.14\", key: \"g774vq\" }],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n]);\n\nexport { CheckCircle as default };\n//# sourceMappingURL=check-circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckSquare = createLucideIcon(\"CheckSquare\", [\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }],\n  [\"path\", { d: \"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11\", key: \"1jnkn4\" }]\n]);\n\nexport { CheckSquare as default };\n//# sourceMappingURL=check-square.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Check = createLucideIcon(\"Check\", [[\"path\", { d: \"M20 6 9 17l-5-5\", key: \"1gmf2c\" }]]);\n\nexport { Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronDown = createLucideIcon(\"ChevronDown\", [\n  [\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]\n]);\n\nexport { ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronRight = createLucideIcon(\"ChevronRight\", [\n  [\"path\", { d: \"m9 18 6-6-6-6\", key: \"mthhwq\" }]\n]);\n\nexport { ChevronRight as default };\n//# sourceMappingURL=chevron-right.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronUp = createLucideIcon(\"ChevronUp\", [[\"path\", { d: \"m18 15-6-6-6 6\", key: \"153udz\" }]]);\n\nexport { ChevronUp as default };\n//# sourceMappingURL=chevron-up.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ClipboardCheck = createLucideIcon(\"ClipboardCheck\", [\n  [\"rect\", { width: \"8\", height: \"4\", x: \"8\", y: \"2\", rx: \"1\", ry: \"1\", key: \"tgr4d6\" }],\n  [\n    \"path\",\n    {\n      d: \"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\",\n      key: \"116196\"\n    }\n  ],\n  [\"path\", { d: \"m9 14 2 2 4-4\", key: \"df797q\" }]\n]);\n\nexport { ClipboardCheck as default };\n//# sourceMappingURL=clipboard-check.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Clock = createLucideIcon(\"Clock\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"polyline\", { points: \"12 6 12 12 16 14\", key: \"68esgv\" }]\n]);\n\nexport { Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Copy = createLucideIcon(\"Copy\", [\n  [\"rect\", { width: \"14\", height: \"14\", x: \"8\", y: \"8\", rx: \"2\", ry: \"2\", key: \"17jyea\" }],\n  [\"path\", { d: \"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\", key: \"zix9uf\" }]\n]);\n\nexport { Copy as default };\n//# sourceMappingURL=copy.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst DollarSign = createLucideIcon(\"DollarSign\", [\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"2\", y2: \"22\", key: \"7eqyqh\" }],\n  [\"path\", { d: \"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6\", key: \"1b0p4s\" }]\n]);\n\nexport { DollarSign as default };\n//# sourceMappingURL=dollar-sign.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Download = createLucideIcon(\"Download\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"7 10 12 15 17 10\", key: \"2ggqvy\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"15\", y2: \"3\", key: \"1vk2je\" }]\n]);\n\nexport { Download as default };\n//# sourceMappingURL=download.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ExternalLink = createLucideIcon(\"ExternalLink\", [\n  [\"path\", { d: \"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\", key: \"a6xqqp\" }],\n  [\"polyline\", { points: \"15 3 21 3 21 9\", key: \"mznyad\" }],\n  [\"line\", { x1: \"10\", x2: \"21\", y1: \"14\", y2: \"3\", key: \"18c3s4\" }]\n]);\n\nexport { ExternalLink as default };\n//# sourceMappingURL=external-link.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Eye = createLucideIcon(\"Eye\", [\n  [\"path\", { d: \"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z\", key: \"rwhkz3\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Eye as default };\n//# sourceMappingURL=eye.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileCheck2 = createLucideIcon(\"FileCheck2\", [\n  [\"path\", { d: \"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4\", key: \"702lig\" }],\n  [\"polyline\", { points: \"14 2 14 8 20 8\", key: \"1ew0cm\" }],\n  [\"path\", { d: \"m3 15 2 2 4-4\", key: \"1lhrkk\" }]\n]);\n\nexport { FileCheck2 as default };\n//# sourceMappingURL=file-check-2.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileText = createLucideIcon(\"FileText\", [\n  [\n    \"path\",\n    { d: \"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\", key: \"1nnpy2\" }\n  ],\n  [\"polyline\", { points: \"14 2 14 8 20 8\", key: \"1ew0cm\" }],\n  [\"line\", { x1: \"16\", x2: \"8\", y1: \"13\", y2: \"13\", key: \"14keom\" }],\n  [\"line\", { x1: \"16\", x2: \"8\", y1: \"17\", y2: \"17\", key: \"17nazh\" }],\n  [\"line\", { x1: \"10\", x2: \"8\", y1: \"9\", y2: \"9\", key: \"1a5vjj\" }]\n]);\n\nexport { FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FlaskConical = createLucideIcon(\"FlaskConical\", [\n  [\n    \"path\",\n    {\n      d: \"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2\",\n      key: \"pzvekw\"\n    }\n  ],\n  [\"path\", { d: \"M8.5 2h7\", key: \"csnxdl\" }],\n  [\"path\", { d: \"M7 16h10\", key: \"wp8him\" }]\n]);\n\nexport { FlaskConical as default };\n//# sourceMappingURL=flask-conical.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Globe = createLucideIcon(\"Globe\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20\", key: \"13o1zl\" }],\n  [\"path\", { d: \"M2 12h20\", key: \"9i4pu4\" }]\n]);\n\nexport { Globe as default };\n//# sourceMappingURL=globe.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst HelpCircle = createLucideIcon(\"HelpCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\", key: \"1u773s\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { HelpCircle as default };\n//# sourceMappingURL=help-circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Info = createLucideIcon(\"Info\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 16v-4\", key: \"1dtifu\" }],\n  [\"path\", { d: \"M12 8h.01\", key: \"e9boi3\" }]\n]);\n\nexport { Info as default };\n//# sourceMappingURL=info.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Lightbulb = createLucideIcon(\"Lightbulb\", [\n  [\n    \"path\",\n    {\n      d: \"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5\",\n      key: \"1gvzjb\"\n    }\n  ],\n  [\"path\", { d: \"M9 18h6\", key: \"x1upvd\" }],\n  [\"path\", { d: \"M10 22h4\", key: \"ceow96\" }]\n]);\n\nexport { Lightbulb as default };\n//# sourceMappingURL=lightbulb.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Loader2 = createLucideIcon(\"Loader2\", [\n  [\"path\", { d: \"M21 12a9 9 0 1 1-6.219-8.56\", key: \"13zald\" }]\n]);\n\nexport { Loader2 as default };\n//# sourceMappingURL=loader-2.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Mail = createLucideIcon(\"Mail\", [\n  [\"rect\", { width: \"20\", height: \"16\", x: \"2\", y: \"4\", rx: \"2\", key: \"18n3k1\" }],\n  [\"path\", { d: \"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7\", key: \"1ocrg3\" }]\n]);\n\nexport { Mail as default };\n//# sourceMappingURL=mail.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MessageSquare = createLucideIcon(\"MessageSquare\", [\n  [\"path\", { d: \"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\", key: \"1lielz\" }]\n]);\n\nexport { MessageSquare as default };\n//# sourceMappingURL=message-square.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Phone = createLucideIcon(\"Phone\", [\n  [\n    \"path\",\n    {\n      d: \"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\",\n      key: \"foiqr5\"\n    }\n  ]\n]);\n\nexport { Phone as default };\n//# sourceMappingURL=phone.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Play = createLucideIcon(\"Play\", [\n  [\"polygon\", { points: \"5 3 19 12 5 21 5 3\", key: \"191637\" }]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Plus = createLucideIcon(\"Plus\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n]);\n\nexport { Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Save = createLucideIcon(\"Save\", [\n  [\"path\", { d: \"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\", key: \"1owoqh\" }],\n  [\"polyline\", { points: \"17 21 17 13 7 13 7 21\", key: \"1md35c\" }],\n  [\"polyline\", { points: \"7 3 7 8 15 8\", key: \"8nz8an\" }]\n]);\n\nexport { Save as default };\n//# sourceMappingURL=save.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Search = createLucideIcon(\"Search\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"path\", { d: \"m21 21-4.3-4.3\", key: \"1qie3q\" }]\n]);\n\nexport { Search as default };\n//# sourceMappingURL=search.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"Send\", [\n  [\"path\", { d: \"m22 2-7 20-4-9-9-4Z\", key: \"1q3vgg\" }],\n  [\"path\", { d: \"M22 2 11 13\", key: \"nzbqef\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shield = createLucideIcon(\"Shield\", [\n  [\"path\", { d: \"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10\", key: \"1irkt0\" }]\n]);\n\nexport { Shield as default };\n//# sourceMappingURL=shield.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Square = createLucideIcon(\"Square\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }]\n]);\n\nexport { Square as default };\n//# sourceMappingURL=square.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Star = createLucideIcon(\"Star\", [\n  [\n    \"polygon\",\n    {\n      points: \"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\",\n      key: \"8f66p6\"\n    }\n  ]\n]);\n\nexport { Star as default };\n//# sourceMappingURL=star.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Upload = createLucideIcon(\"Upload\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"17 8 12 3 7 8\", key: \"t8dd8p\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"3\", y2: \"15\", key: \"widbto\" }]\n]);\n\nexport { Upload as default };\n//# sourceMappingURL=upload.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Users = createLucideIcon(\"Users\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"path\", { d: \"M22 21v-2a4 4 0 0 0-3-3.87\", key: \"kshegd\" }],\n  [\"path\", { d: \"M16 3.13a4 4 0 0 1 0 7.75\", key: \"1da9ce\" }]\n]);\n\nexport { Users as default };\n//# sourceMappingURL=users.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst XCircle = createLucideIcon(\"XCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m15 9-6 6\", key: \"1uzhvr\" }],\n  [\"path\", { d: \"m9 9 6 6\", key: \"z0biqf\" }]\n]);\n\nexport { XCircle as default };\n//# sourceMappingURL=x-circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Zap = createLucideIcon(\"Zap\", [\n  [\"polygon\", { points: \"13 2 3 14 12 14 11 22 21 10 12 10 13 2\", key: \"45s27k\" }]\n]);\n\nexport { Zap as default };\n//# sourceMappingURL=zap.js.map\n","/**\n * BidSmart Database Service\n * \n * Core CRUD operations for projects, bids, and related data.\n */\n\nimport { supabase } from '../supabaseClient';\nimport type {\n  Project,\n  ContractorBid,\n  BidLineItem,\n  BidEquipment,\n  BidAnalysis,\n  PdfUpload,\n  MindPalExtraction,\n  RebateProgram,\n  ProjectRebate,\n  ProjectRequirements,\n  UserExt,\n  ProjectStatus,\n  PdfStatus,\n  ProjectSummary,\n  BidComparisonTableRow,\n  BidFaq,\n} from '../types';\n\n// ============================================\n// USERS\n// ============================================\n\nexport async function getUserById(userId: string): Promise<UserExt | null> {\n  const { data, error } = await supabase\n    .from('users_ext')\n    .select('*')\n    .eq('id', userId)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateUser(\n  userId: string,\n  updates: Partial<UserExt>\n): Promise<UserExt | null> {\n  const { data, error } = await supabase\n    .from('users_ext')\n    .update(updates)\n    .eq('id', userId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// PROJECTS\n// ============================================\n\nexport async function createProject(\n  userId: string,\n  projectData: Partial<Project> = {}\n): Promise<Project> {\n  const { data, error } = await supabase\n    .from('projects')\n    .insert({\n      user_id: userId,\n      project_name: projectData.project_name || 'My Heat Pump Project',\n      status: projectData.status || 'draft',\n      ...projectData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getProject(projectId: string): Promise<Project | null> {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .eq('id', projectId)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getProjectsByUser(userId: string): Promise<Project[]> {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .eq('user_id', userId)\n    .order('created_at', { ascending: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function getDemoProject(userId: string): Promise<Project | null> {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .eq('user_id', userId)\n    .eq('is_demo', true)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getPublicDemoProjects(): Promise<Project[]> {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .eq('is_public_demo', true)\n    .order('created_at', { ascending: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function getProjectsWithPublicDemos(userId: string): Promise<Project[]> {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .or(`user_id.eq.${userId},is_public_demo.eq.true`)\n    .order('is_public_demo', { ascending: false })\n    .order('created_at', { ascending: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updateProject(\n  projectId: string,\n  updates: Partial<Project>\n): Promise<Project | null> {\n  const { data, error } = await supabase\n    .from('projects')\n    .update(updates)\n    .eq('id', projectId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateProjectStatus(\n  projectId: string,\n  status: ProjectStatus\n): Promise<Project | null> {\n  return updateProject(projectId, { status });\n}\n\nexport async function updateProjectDataSharingConsent(\n  projectId: string,\n  consent: boolean\n): Promise<Project | null> {\n  const updates: Partial<Project> = {\n    data_sharing_consent: consent,\n  };\n  if (consent) {\n    updates.data_sharing_consented_at = new Date().toISOString();\n  }\n  return updateProject(projectId, updates);\n}\n\nexport async function updateProjectNotificationSettings(\n  projectId: string,\n  email: string,\n  notifyOnCompletion: boolean\n): Promise<Project | null> {\n  return updateProject(projectId, {\n    notification_email: email,\n    notify_on_completion: notifyOnCompletion,\n  });\n}\n\nexport async function setProjectAnalysisQueued(\n  projectId: string\n): Promise<Project | null> {\n  return updateProject(projectId, {\n    analysis_queued_at: new Date().toISOString(),\n    status: 'analyzing',\n  });\n}\n\nexport async function incrementProjectRerunCount(\n  projectId: string\n): Promise<Project | null> {\n  const project = await getProject(projectId);\n  if (!project) return null;\n\n  return updateProject(projectId, {\n    rerun_count: (project.rerun_count || 0) + 1,\n  });\n}\n\nexport async function getProjectsByNotificationEmail(\n  email: string\n): Promise<Project[]> {\n  const normalizedEmail = email.toLowerCase().trim();\n\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .ilike('notification_email', normalizedEmail)\n    .order('created_at', { ascending: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function deleteProject(projectId: string): Promise<void> {\n  const { error } = await supabase\n    .from('projects')\n    .delete()\n    .eq('id', projectId);\n\n  if (error) throw error;\n}\n\nexport async function getProjectBySessionId(sessionId: string): Promise<Project | null> {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .eq('session_id', sessionId)\n    .eq('status', 'draft')\n    .order('created_at', { ascending: false })\n    .limit(1)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function createDraftProject(\n  userId: string,\n  sessionId: string\n): Promise<Project> {\n  const { data, error } = await supabase\n    .from('projects')\n    .insert({\n      user_id: userId,\n      session_id: sessionId,\n      project_name: 'My Heat Pump Project',\n      status: 'draft',\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// CONTRACTOR BIDS\n// ============================================\n\nexport async function createBid(\n  projectId: string,\n  bidData: Partial<ContractorBid>\n): Promise<ContractorBid> {\n  const { data, error } = await supabase\n    .from('contractor_bids')\n    .insert({\n      project_id: projectId,\n      contractor_name: bidData.contractor_name || 'Unknown Contractor',\n      total_bid_amount: bidData.total_bid_amount || 0,\n      extraction_confidence: bidData.extraction_confidence || 'manual',\n      financing_offered: bidData.financing_offered || false,\n      verified_by_user: bidData.verified_by_user || false,\n      is_favorite: bidData.is_favorite || false,\n      ...bidData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getBid(bidId: string): Promise<ContractorBid | null> {\n  const { data, error } = await supabase\n    .from('contractor_bids')\n    .select('*')\n    .eq('id', bidId)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getBidsByProject(projectId: string): Promise<ContractorBid[]> {\n  const { data, error } = await supabase\n    .from('contractor_bids')\n    .select('*')\n    .eq('project_id', projectId)\n    .order('overall_score', { ascending: false, nullsFirst: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function getBidCountByProject(projectId: string): Promise<number> {\n  const { count, error } = await supabase\n    .from('contractor_bids')\n    .select('*', { count: 'exact', head: true })\n    .eq('project_id', projectId);\n\n  if (error) throw error;\n  return count || 0;\n}\n\nexport async function updateBid(\n  bidId: string,\n  updates: Partial<ContractorBid>\n): Promise<ContractorBid | null> {\n  const { data, error } = await supabase\n    .from('contractor_bids')\n    .update(updates)\n    .eq('id', bidId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function deleteBid(bidId: string): Promise<void> {\n  const { error } = await supabase\n    .from('contractor_bids')\n    .delete()\n    .eq('id', bidId);\n\n  if (error) throw error;\n}\n\nexport async function toggleBidFavorite(bidId: string): Promise<ContractorBid | null> {\n  const bid = await getBid(bidId);\n  if (!bid) return null;\n\n  return updateBid(bidId, { is_favorite: !bid.is_favorite });\n}\n\nexport async function verifyBid(bidId: string): Promise<ContractorBid | null> {\n  return updateBid(bidId, {\n    verified_by_user: true,\n    verified_at: new Date().toISOString(),\n  });\n}\n\n// ============================================\n// BID LINE ITEMS\n// ============================================\n\nexport async function createLineItem(\n  bidId: string,\n  itemData: Partial<BidLineItem>\n): Promise<BidLineItem> {\n  const { data, error } = await supabase\n    .from('bid_line_items')\n    .insert({\n      bid_id: bidId,\n      item_type: itemData.item_type || 'other',\n      description: itemData.description || '',\n      quantity: itemData.quantity || 1,\n      total_price: itemData.total_price || 0,\n      confidence: itemData.confidence || 'manual',\n      ...itemData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getLineItemsByBid(bidId: string): Promise<BidLineItem[]> {\n  const { data, error } = await supabase\n    .from('bid_line_items')\n    .select('*')\n    .eq('bid_id', bidId)\n    .order('line_order', { nullsFirst: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updateLineItem(\n  itemId: string,\n  updates: Partial<BidLineItem>\n): Promise<BidLineItem | null> {\n  const { data, error } = await supabase\n    .from('bid_line_items')\n    .update(updates)\n    .eq('id', itemId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function deleteLineItem(itemId: string): Promise<void> {\n  const { error } = await supabase\n    .from('bid_line_items')\n    .delete()\n    .eq('id', itemId);\n\n  if (error) throw error;\n}\n\nexport async function bulkCreateLineItems(\n  bidId: string,\n  items: Partial<BidLineItem>[]\n): Promise<BidLineItem[]> {\n  const itemsToInsert = items.map((item, index) => ({\n    bid_id: bidId,\n    item_type: item.item_type || 'other',\n    description: item.description || '',\n    quantity: item.quantity || 1,\n    total_price: item.total_price || 0,\n    confidence: item.confidence || 'manual',\n    line_order: index,\n    ...item,\n  }));\n\n  const { data, error } = await supabase\n    .from('bid_line_items')\n    .insert(itemsToInsert)\n    .select();\n\n  if (error) throw error;\n  return data || [];\n}\n\n// ============================================\n// BID EQUIPMENT\n// ============================================\n\nexport async function createEquipment(\n  bidId: string,\n  equipmentData: Partial<BidEquipment>\n): Promise<BidEquipment> {\n  const { data, error } = await supabase\n    .from('bid_equipment')\n    .insert({\n      bid_id: bidId,\n      equipment_type: equipmentData.equipment_type || 'other',\n      brand: equipmentData.brand || 'Unknown',\n      confidence: equipmentData.confidence || 'manual',\n      ...equipmentData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getEquipmentByBid(bidId: string): Promise<BidEquipment[]> {\n  const { data, error } = await supabase\n    .from('bid_equipment')\n    .select('*')\n    .eq('bid_id', bidId);\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updateEquipment(\n  equipmentId: string,\n  updates: Partial<BidEquipment>\n): Promise<BidEquipment | null> {\n  const { data, error } = await supabase\n    .from('bid_equipment')\n    .update(updates)\n    .eq('id', equipmentId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function deleteEquipment(equipmentId: string): Promise<void> {\n  const { error } = await supabase\n    .from('bid_equipment')\n    .delete()\n    .eq('id', equipmentId);\n\n  if (error) throw error;\n}\n\nexport async function bulkCreateEquipment(\n  bidId: string,\n  equipment: Partial<BidEquipment>[]\n): Promise<BidEquipment[]> {\n  const equipmentToInsert = equipment.map((eq) => ({\n    bid_id: bidId,\n    equipment_type: eq.equipment_type || 'other',\n    brand: eq.brand || 'Unknown',\n    confidence: eq.confidence || 'manual',\n    ...eq,\n  }));\n\n  const { data, error } = await supabase\n    .from('bid_equipment')\n    .insert(equipmentToInsert)\n    .select();\n\n  if (error) throw error;\n  return data || [];\n}\n\n// ============================================\n// BID ANALYSIS\n// ============================================\n\nexport async function createAnalysis(\n  projectId: string,\n  analysisData: Partial<BidAnalysis>\n): Promise<BidAnalysis> {\n  const { data, error } = await supabase\n    .from('bid_analysis')\n    .insert({\n      project_id: projectId,\n      analysis_version: '1.0',\n      ...analysisData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getLatestAnalysis(projectId: string): Promise<BidAnalysis | null> {\n  const { data, error } = await supabase\n    .from('bid_analysis')\n    .select('*')\n    .eq('project_id', projectId)\n    .order('created_at', { ascending: false })\n    .limit(1)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateAnalysis(\n  analysisId: string,\n  updates: Partial<BidAnalysis>\n): Promise<BidAnalysis | null> {\n  const { data, error } = await supabase\n    .from('bid_analysis')\n    .update(updates)\n    .eq('id', analysisId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// PDF UPLOADS\n// ============================================\n\nexport async function createPdfUpload(\n  projectId: string,\n  uploadData: Partial<PdfUpload>\n): Promise<PdfUpload> {\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .insert({\n      project_id: projectId,\n      file_name: uploadData.file_name || 'unknown.pdf',\n      file_path: uploadData.file_path || '',\n      status: uploadData.status || 'uploaded',\n      retry_count: 0,\n      ...uploadData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getPdfUpload(uploadId: string): Promise<PdfUpload | null> {\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .select('*')\n    .eq('id', uploadId)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getPdfUploadsByProject(projectId: string): Promise<PdfUpload[]> {\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .select('*')\n    .eq('project_id', projectId)\n    .order('uploaded_at', { ascending: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updatePdfUploadStatus(\n  uploadId: string,\n  status: PdfStatus,\n  additionalData: Partial<PdfUpload> = {}\n): Promise<PdfUpload | null> {\n  const updateData: Partial<PdfUpload> & { status: PdfStatus } = {\n    status,\n    ...additionalData,\n  };\n  if (status === 'processing') {\n    updateData.processing_started_at = new Date().toISOString();\n  }\n  if (status === 'extracted' || status === 'failed') {\n    updateData.processing_completed_at = new Date().toISOString();\n  }\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .update(updateData)\n    .eq('id', uploadId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function incrementPdfRetryCount(uploadId: string): Promise<PdfUpload | null> {\n  const upload = await getPdfUpload(uploadId);\n  if (!upload) return null;\n\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .update({ retry_count: upload.retry_count + 1 })\n    .eq('id', uploadId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// MINDPAL EXTRACTIONS\n// ============================================\n\nexport async function createMindPalExtraction(\n  pdfUploadId: string,\n  rawJson: Record<string, unknown>\n): Promise<MindPalExtraction> {\n  const { data, error } = await supabase\n    .from('mindpal_extractions')\n    .insert({\n      pdf_upload_id: pdfUploadId,\n      raw_json: rawJson,\n      parsed_successfully: false,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateMindPalExtraction(\n  extractionId: string,\n  updates: Partial<MindPalExtraction>\n): Promise<MindPalExtraction | null> {\n  const { data, error } = await supabase\n    .from('mindpal_extractions')\n    .update(updates)\n    .eq('id', extractionId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getExtractionByPdfUpload(\n  pdfUploadId: string\n): Promise<MindPalExtraction | null> {\n  const { data, error } = await supabase\n    .from('mindpal_extractions')\n    .select('*')\n    .eq('pdf_upload_id', pdfUploadId)\n    .order('extracted_at', { ascending: false })\n    .limit(1)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// REBATE PROGRAMS\n// ============================================\n\nexport async function getActiveRebates(): Promise<RebateProgram[]> {\n  const { data, error } = await supabase\n    .from('rebate_programs')\n    .select('*')\n    .eq('is_active', true)\n    .order('program_name');\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function getRebatesByState(stateCode: string): Promise<RebateProgram[]> {\n  const { data, error } = await supabase\n    .from('rebate_programs')\n    .select('*')\n    .eq('is_active', true)\n    .or(`available_nationwide.eq.true,available_states.cs.{${stateCode}}`);\n\n  if (error) throw error;\n  return data || [];\n}\n\ninterface ProjectRebateWithProgram {\n  id: string;\n  project_id: string;\n  rebate_program_id: string;\n  is_eligible: boolean | null;\n  eligibility_notes: string | null;\n  estimated_amount: number | null;\n  applied_amount: number | null;\n  application_status: string | null;\n  application_date: string | null;\n  approval_date: string | null;\n  created_at: string;\n  updated_at: string;\n  rebate_programs: RebateProgram;\n}\n\nexport async function getProjectRebates(projectId: string): Promise<Array<{\n  program: RebateProgram;\n  projectRebate: ProjectRebate;\n}>> {\n  const { data, error } = await supabase\n    .from('project_rebates')\n    .select(`\n      *,\n      rebate_programs (*)\n    `)\n    .eq('project_id', projectId);\n\n  if (error) throw error;\n\n  return (data as ProjectRebateWithProgram[] || []).map((item) => ({\n    program: item.rebate_programs,\n    projectRebate: {\n      id: item.id,\n      project_id: item.project_id,\n      rebate_program_id: item.rebate_program_id,\n      is_eligible: item.is_eligible ?? false,\n      eligibility_notes: item.eligibility_notes,\n      estimated_amount: item.estimated_amount,\n      applied_amount: item.applied_amount,\n      application_status: item.application_status,\n      application_date: item.application_date,\n      approval_date: item.approval_date,\n      created_at: item.created_at,\n      updated_at: item.updated_at,\n    },\n  }));\n}\n\nexport async function addProjectRebate(\n  projectId: string,\n  rebateProgramId: string,\n  estimatedAmount?: number\n): Promise<ProjectRebate> {\n  const { data, error } = await supabase\n    .from('project_rebates')\n    .insert({\n      project_id: projectId,\n      rebate_program_id: rebateProgramId,\n      is_eligible: true,\n      estimated_amount: estimatedAmount,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// COMPOSITE QUERIES\n// ============================================\n\nexport async function getProjectSummary(projectId: string): Promise<ProjectSummary | null> {\n  // Get project\n  const project = await getProject(projectId);\n  if (!project) return null;\n\n  // Get bids with their line items and equipment\n  const bids = await getBidsByProject(projectId);\n  const bidsWithDetails: BidComparisonTableRow[] = await Promise.all(\n    bids.map(async (bid) => {\n      const [lineItems, equipment] = await Promise.all([\n        getLineItemsByBid(bid.id),\n        getEquipmentByBid(bid.id),\n      ]);\n\n      return {\n        bid,\n        equipment,\n        lineItems,\n        scores: {\n          overall: bid.overall_score || 0,\n          price: 0, // Calculated from price comparison\n          quality: bid.quality_score || 0,\n          value: bid.value_score || 0,\n          completeness: bid.completeness_score || 0,\n        },\n      };\n    })\n  );\n\n  // Get analysis\n  const analysis = await getLatestAnalysis(projectId);\n\n  // Get rebates\n  const rebates = await getProjectRebates(projectId);\n\n  // Calculate stats\n  const prices = bids.map((b) => b.total_bid_amount).filter((p) => p > 0);\n  const stats = {\n    totalBids: bids.length,\n    averagePrice: prices.length > 0 ? prices.reduce((a, b) => a + b, 0) / prices.length : 0,\n    lowestPrice: prices.length > 0 ? Math.min(...prices) : 0,\n    highestPrice: prices.length > 0 ? Math.max(...prices) : 0,\n    bestValueBidId: bids.reduce((best, bid) =>\n      (bid.value_score || 0) > (best?.value_score || 0) ? bid : best,\n      bids[0]\n    )?.id || null,\n    bestQualityBidId: bids.reduce((best, bid) =>\n      (bid.quality_score || 0) > (best?.quality_score || 0) ? bid : best,\n      bids[0]\n    )?.id || null,\n  };\n\n  return {\n    project,\n    bids: bidsWithDetails,\n    analysis,\n    rebates,\n    stats,\n  };\n}\n\n// ============================================\n// STORAGE\n// ============================================\n\nconst MAX_PDF_SIZE_BYTES = 25 * 1024 * 1024;\nconst ALLOWED_PDF_EXTENSIONS = ['pdf', 'doc', 'docx'];\nconst ALLOWED_PDF_MIME_TYPES = [\n  'application/pdf',\n  'application/msword',\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document'\n];\n\nexport interface PdfValidationError {\n  code: 'INVALID_EXTENSION' | 'INVALID_MIME_TYPE' | 'FILE_TOO_LARGE';\n  message: string;\n}\n\nexport function validatePdfFile(file: File): PdfValidationError | null {\n  const fileExt = file.name.split('.').pop()?.toLowerCase();\n  if (!fileExt || !ALLOWED_PDF_EXTENSIONS.includes(fileExt)) {\n    return {\n      code: 'INVALID_EXTENSION',\n      message: 'Only PDF and Word documents (.pdf, .doc, .docx) are allowed.',\n    };\n  }\n\n  if (!ALLOWED_PDF_MIME_TYPES.includes(file.type)) {\n    return {\n      code: 'INVALID_MIME_TYPE',\n      message: 'Invalid file type. Please upload a valid PDF or Word document.',\n    };\n  }\n\n  if (file.size > MAX_PDF_SIZE_BYTES) {\n    return {\n      code: 'FILE_TOO_LARGE',\n      message: `File size exceeds the maximum allowed size of ${MAX_PDF_SIZE_BYTES / (1024 * 1024)}MB.`,\n    };\n  }\n\n  return null;\n}\n\nexport async function uploadPdfToStorage(\n  projectId: string,\n  file: File\n): Promise<{ path: string; url: string }> {\n  const validationError = validatePdfFile(file);\n  if (validationError) {\n    throw new Error(validationError.message);\n  }\n\n  const fileExt = file.name.split('.').pop()?.toLowerCase() || 'pdf';\n  const fileName = `${Date.now()}_${crypto.randomUUID()}.${fileExt}`;\n  const filePath = `bids/${projectId}/${fileName}`;\n\n  const { error: uploadError } = await supabase.storage\n    .from('bid-pdfs')\n    .upload(filePath, file);\n\n  if (uploadError) throw uploadError;\n\n  const { data: urlData, error: urlError } = await supabase.storage\n    .from('bid-pdfs')\n    .createSignedUrl(filePath, 3600);\n\n  if (urlError) throw urlError;\n\n  return {\n    path: filePath,\n    url: urlData.signedUrl,\n  };\n}\n\nexport async function getPdfSignedUrl(filePath: string): Promise<string> {\n  const { data, error } = await supabase.storage\n    .from('bid-pdfs')\n    .createSignedUrl(filePath, 3600);\n\n  if (error) throw error;\n  return data.signedUrl;\n}\n\nexport async function deletePdfFromStorage(filePath: string): Promise<void> {\n  const { error } = await supabase.storage\n    .from('bid-pdfs')\n    .remove([filePath]);\n\n  if (error) throw error;\n}\n\n// ============================================\n// PROJECT REQUIREMENTS\n// ============================================\n\nexport async function getProjectRequirements(\n  projectId: string\n): Promise<ProjectRequirements | null> {\n  const { data, error } = await supabase\n    .from('project_requirements')\n    .select('*')\n    .eq('project_id', projectId)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function createProjectRequirements(\n  projectId: string,\n  requirements: Partial<ProjectRequirements> = {}\n): Promise<ProjectRequirements> {\n  const { data, error } = await supabase\n    .from('project_requirements')\n    .insert({\n      project_id: projectId,\n      priority_price: requirements.priority_price ?? 3,\n      priority_warranty: requirements.priority_warranty ?? 3,\n      priority_efficiency: requirements.priority_efficiency ?? 3,\n      priority_timeline: requirements.priority_timeline ?? 3,\n      priority_reputation: requirements.priority_reputation ?? 3,\n      timeline_urgency: requirements.timeline_urgency ?? 'flexible',\n      specific_concerns: requirements.specific_concerns ?? [],\n      must_have_features: requirements.must_have_features ?? [],\n      nice_to_have_features: requirements.nice_to_have_features ?? [],\n      ...requirements,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateProjectRequirements(\n  projectId: string,\n  updates: Partial<ProjectRequirements>\n): Promise<ProjectRequirements | null> {\n  const { data, error } = await supabase\n    .from('project_requirements')\n    .update({\n      ...updates,\n      updated_at: new Date().toISOString(),\n    })\n    .eq('project_id', projectId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function saveProjectRequirements(\n  projectId: string,\n  requirements: Partial<ProjectRequirements>\n): Promise<ProjectRequirements> {\n  const existing = await getProjectRequirements(projectId);\n\n  if (existing) {\n    const updated = await updateProjectRequirements(projectId, {\n      ...requirements,\n      completed_at: new Date().toISOString(),\n    });\n    if (!updated) throw new Error('Failed to update requirements');\n    return updated;\n  }\n\n  return createProjectRequirements(projectId, {\n    ...requirements,\n    completed_at: new Date().toISOString(),\n  });\n}\n\n// ============================================\n// BID FAQs\n// ============================================\n\nexport async function getFaqsByBid(bidId: string): Promise<BidFaq[]> {\n  const { data, error } = await supabase\n    .from('bid_faqs')\n    .select('*')\n    .eq('bid_id', bidId)\n    .order('display_order', { ascending: true });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function createBidFaq(\n  bidId: string,\n  faqData: Partial<BidFaq>\n): Promise<BidFaq> {\n  const { data, error } = await supabase\n    .from('bid_faqs')\n    .insert({\n      bid_id: bidId,\n      ...faqData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function bulkCreateBidFaqs(\n  bidId: string,\n  faqs: Partial<BidFaq>[]\n): Promise<BidFaq[]> {\n  const faqsToInsert = faqs.map(faq => ({\n    bid_id: bidId,\n    ...faq,\n  }));\n\n  const { data, error } = await supabase\n    .from('bid_faqs')\n    .insert(faqsToInsert)\n    .select();\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updateBidFaq(\n  faqId: string,\n  updates: Partial<BidFaq>\n): Promise<BidFaq | null> {\n  const { data, error } = await supabase\n    .from('bid_faqs')\n    .update({\n      ...updates,\n      updated_at: new Date().toISOString(),\n    })\n    .eq('id', faqId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function deleteBidFaq(faqId: string): Promise<void> {\n  const { error } = await supabase\n    .from('bid_faqs')\n    .delete()\n    .eq('id', faqId);\n\n  if (error) throw error;\n}\n\nexport async function getFaqsByProject(\n  projectId: string,\n  bids: Array<{ bid: ContractorBid }>\n): Promise<import('../types').ProjectFaqData> {\n  const overallFaqsPromise = supabase\n    .from('project_faqs')\n    .select('*')\n    .eq('project_id', projectId)\n    .order('display_order', { ascending: true });\n\n  const bidFaqsPromises = bids.map(async (bidData, index) => {\n    const faqs = await getFaqsByBid(bidData.bid.id);\n    return {\n      bid_id: bidData.bid.id,\n      bid_index: index,\n      contractor_name: bidData.bid.contractor_name || bidData.bid.contractor_company || `Bid ${index + 1}`,\n      faqs,\n    };\n  });\n\n  const [overallResult, ...bidFaqResults] = await Promise.all([\n    overallFaqsPromise,\n    ...bidFaqsPromises,\n  ]);\n\n  return {\n    overall: overallResult.data || [],\n    by_bid: bidFaqResults,\n  };\n}\n","export function formatCurrency(amount: number | null | undefined): string {\n  if (amount == null) return '-';\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(amount);\n}\n\nexport function formatDate(dateString: string | null | undefined): string | null {\n  if (!dateString) return null;\n  return new Date(dateString).toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n  });\n}\n","import { useState } from 'react';\nimport { Search, FileText, Calendar, ChevronRight, AlertCircle, Loader2, Clock, CheckCircle2, Mail } from 'lucide-react';\nimport { getProjectsByNotificationEmail, getBidCountByProject } from '../lib/database/bidsmartService';\nimport type { Project } from '../lib/types';\nimport { formatDate } from '../lib/utils/formatters';\n\ninterface ReturningUserSectionProps {\n  onSelectProject: (projectId: string) => void;\n}\n\ninterface ProjectWithBidCount extends Project {\n  bidCount?: number;\n}\n\nexport function ReturningUserSection({ onSelectProject }: ReturningUserSectionProps) {\n  const [email, setEmail] = useState('');\n  const [searching, setSearching] = useState(false);\n  const [searched, setSearched] = useState(false);\n  const [projects, setProjects] = useState<ProjectWithBidCount[]>([]);\n  const [error, setError] = useState<string | null>(null);\n\n  async function handleSearch(e: React.FormEvent) {\n    e.preventDefault();\n\n    if (!email.trim()) {\n      setError('Please enter an email address');\n      return;\n    }\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email.trim())) {\n      setError('Please enter a valid email address');\n      return;\n    }\n\n    setError(null);\n    setSearching(true);\n    setSearched(false);\n\n    try {\n      const foundProjects = await getProjectsByNotificationEmail(email.trim());\n\n      const projectsWithCounts = await Promise.all(\n        foundProjects.map(async (project) => {\n          const bidCount = await getBidCountByProject(project.id);\n          return { ...project, bidCount };\n        })\n      );\n\n      setProjects(projectsWithCounts);\n      setSearched(true);\n    } catch (err) {\n      console.error('Failed to search projects:', err);\n      setError('Failed to search. Please try again.');\n    } finally {\n      setSearching(false);\n    }\n  }\n\n  function getStatusDisplay(status: string) {\n    const statusConfig: Record<string, { label: string; icon: React.ReactNode; className: string }> = {\n      draft: {\n        label: 'Draft',\n        icon: <FileText className=\"w-3.5 h-3.5\" />,\n        className: 'bg-gray-100 text-gray-600'\n      },\n      collecting_bids: {\n        label: 'Gathering Bids',\n        icon: <FileText className=\"w-3.5 h-3.5\" />,\n        className: 'bg-blue-100 text-blue-700'\n      },\n      analyzing: {\n        label: 'Processing',\n        icon: <Clock className=\"w-3.5 h-3.5 animate-pulse\" />,\n        className: 'bg-amber-100 text-amber-700'\n      },\n      comparing: {\n        label: 'Ready to View',\n        icon: <CheckCircle2 className=\"w-3.5 h-3.5\" />,\n        className: 'bg-switch-green-100 text-switch-green-700'\n      },\n      decided: {\n        label: 'Decision Made',\n        icon: <CheckCircle2 className=\"w-3.5 h-3.5\" />,\n        className: 'bg-switch-green-100 text-switch-green-700'\n      },\n      completed: {\n        label: 'Completed',\n        icon: <CheckCircle2 className=\"w-3.5 h-3.5\" />,\n        className: 'bg-gray-100 text-gray-600'\n      },\n    };\n\n    const config = statusConfig[status] || statusConfig.draft;\n    return (\n      <span className={`inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full font-medium ${config.className}`}>\n        {config.icon}\n        {config.label}\n      </span>\n    );\n  }\n\n  function isProjectReady(status: string): boolean {\n    return ['comparing', 'decided', 'completed'].includes(status);\n  }\n\n  function isProjectInProgress(status: string): boolean {\n    return ['draft', 'collecting_bids', 'analyzing'].includes(status);\n  }\n\n  return (\n    <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n      <div className=\"flex items-start gap-4 mb-4\">\n        <div className=\"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center flex-shrink-0\">\n          <Search className=\"w-5 h-5 text-blue-600\" />\n        </div>\n        <div>\n          <h2 className=\"text-lg font-semibold text-gray-900\">Review Previous Bid Comparisons</h2>\n          <p className=\"text-sm text-gray-600 mt-1\">\n            Have you compared bids before? Enter your email to pick up where you left off.\n          </p>\n        </div>\n      </div>\n\n      <form onSubmit={handleSearch} className=\"space-y-4\">\n        <div className=\"flex flex-col sm:flex-row gap-3\">\n          <div className=\"flex-1 relative\">\n            <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n            <input\n              type=\"email\"\n              value={email}\n              onChange={(e) => {\n                setEmail(e.target.value);\n                setError(null);\n                if (searched) {\n                  setSearched(false);\n                  setProjects([]);\n                }\n              }}\n              placeholder=\"you@example.com\"\n              className=\"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent text-sm\"\n              autoComplete=\"email\"\n            />\n          </div>\n          <button\n            type=\"submit\"\n            disabled={searching}\n            className=\"btn btn-secondary flex items-center justify-center gap-2 whitespace-nowrap\"\n          >\n            {searching ? (\n              <>\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n                Searching...\n              </>\n            ) : (\n              <>\n                <Search className=\"w-4 h-4\" />\n                Find My Analysis\n              </>\n            )}\n          </button>\n        </div>\n\n        {error && (\n          <p className=\"text-sm text-red-600 flex items-center gap-1\">\n            <AlertCircle className=\"w-4 h-4\" />\n            {error}\n          </p>\n        )}\n      </form>\n\n      {searched && (\n        <div className=\"mt-6 pt-6 border-t border-gray-100\">\n          {projects.length === 0 ? (\n            <div className=\"text-center py-6\">\n              <div className=\"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3\">\n                <FileText className=\"w-5 h-5 text-gray-400\" />\n              </div>\n              <p className=\"text-gray-900 font-medium mb-1\">No analyses found</p>\n              <p className=\"text-sm text-gray-600\">\n                We could not find any analyses for this email. Try a different email or start a new comparison below.\n              </p>\n            </div>\n          ) : (\n            <div>\n              <h3 className=\"text-sm font-medium text-gray-700 mb-3\">\n                Found {projects.length} {projects.length === 1 ? 'analysis' : 'analyses'}\n              </h3>\n              <div className=\"space-y-2\">\n                {projects.map((project) => (\n                  <button\n                    key={project.id}\n                    onClick={() => onSelectProject(project.id)}\n                    className=\"w-full bg-gray-50 hover:bg-gray-100 rounded-lg p-3 flex items-center gap-3 transition-colors text-left group\"\n                  >\n                    <div className={`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${\n                      isProjectReady(project.status)\n                        ? 'bg-switch-green-100'\n                        : isProjectInProgress(project.status)\n                          ? 'bg-amber-100'\n                          : 'bg-gray-100'\n                    }`}>\n                      {isProjectReady(project.status) ? (\n                        <CheckCircle2 className=\"w-4 h-4 text-switch-green-600\" />\n                      ) : isProjectInProgress(project.status) ? (\n                        <Clock className=\"w-4 h-4 text-amber-600\" />\n                      ) : (\n                        <FileText className=\"w-4 h-4 text-gray-500\" />\n                      )}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center gap-2 mb-0.5\">\n                        <span className=\"font-medium text-gray-900 text-sm truncate\">\n                          {project.project_name}\n                        </span>\n                        {getStatusDisplay(project.status)}\n                      </div>\n                      <div className=\"flex items-center gap-3 text-xs text-gray-500\">\n                        <span className=\"flex items-center gap-1\">\n                          <Calendar className=\"w-3 h-3\" />\n                          {formatDate(project.created_at)}\n                        </span>\n                        {project.bidCount !== undefined && project.bidCount > 0 && (\n                          <span>{project.bidCount} {project.bidCount === 1 ? 'bid' : 'bids'}</span>\n                        )}\n                      </div>\n                    </div>\n                    <ChevronRight className=\"w-4 h-4 text-gray-400 group-hover:text-gray-600 flex-shrink-0\" />\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { Play, ChevronRight, Loader2, FileText } from 'lucide-react';\nimport { getPublicDemoProjects, getBidCountByProject } from '../lib/database/bidsmartService';\nimport type { Project } from '../lib/types';\n\ninterface TryTheToolSectionProps {\n  onSelectDemo: (projectId: string) => void;\n}\n\ninterface DemoProject extends Project {\n  bidCount?: number;\n}\n\nexport function TryTheToolSection({ onSelectDemo }: TryTheToolSectionProps) {\n  const [demos, setDemos] = useState<DemoProject[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadDemos();\n  }, []);\n\n  async function loadDemos() {\n    try {\n      const demoProjects = await getPublicDemoProjects();\n      const demosWithCounts = await Promise.all(\n        demoProjects.map(async (project) => {\n          const bidCount = await getBidCountByProject(project.id);\n          return { ...project, bidCount };\n        })\n      );\n      setDemos(demosWithCounts);\n    } catch (err) {\n      console.error('Failed to load demo projects:', err);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <div className=\"flex items-center justify-center py-8\">\n          <Loader2 className=\"w-6 h-6 text-gray-400 animate-spin\" />\n        </div>\n      </div>\n    );\n  }\n\n  if (demos.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n      <div className=\"flex items-start gap-4 mb-4\">\n        <div className=\"w-10 h-10 rounded-lg bg-teal-100 flex items-center justify-center flex-shrink-0\">\n          <Play className=\"w-5 h-5 text-teal-600\" />\n        </div>\n        <div>\n          <h2 className=\"text-lg font-semibold text-gray-900\">Don't Have Bids Ready?</h2>\n          <p className=\"text-sm text-gray-600 mt-1\">\n            View a sample analysis and give us feedback\n          </p>\n        </div>\n      </div>\n\n      <div className=\"space-y-2\">\n        {demos.map((demo) => (\n          <button\n            key={demo.id}\n            onClick={() => onSelectDemo(demo.id)}\n            className=\"w-full bg-teal-50 hover:bg-teal-100 border border-teal-200 rounded-lg p-3 flex items-center gap-3 transition-colors text-left group\"\n          >\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex items-center gap-2 mb-0.5\">\n                <h3 className=\"font-medium text-gray-900 text-sm\">{demo.project_name}</h3>\n                <span className=\"text-xs px-2 py-0.5 rounded-full font-medium bg-teal-100 text-teal-700\">\n                  Demo\n                </span>\n              </div>\n              {demo.bidCount !== undefined && demo.bidCount > 0 && (\n                <p className=\"text-xs text-gray-500 flex items-center gap-1\">\n                  <FileText className=\"w-3 h-3\" />\n                  {demo.bidCount} {demo.bidCount === 1 ? 'bid' : 'bids'} to compare\n                </p>\n              )}\n            </div>\n            <ChevronRight className=\"w-5 h-5 text-teal-400 group-hover:text-teal-600 flex-shrink-0\" />\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { Send, X, Loader2, CheckCircle2, AlertCircle } from 'lucide-react';\n\ninterface FeedbackPanelProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\ntype FeedbackType = 'liked' | 'wishlist' | 'bug' | null;\n\nexport function FeedbackPanel({ isOpen, onClose }: FeedbackPanelProps) {\n  const [feedbackType, setFeedbackType] = useState<FeedbackType>(null);\n  const [message, setMessage] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  async function handleSubmit() {\n    if (!feedbackType || !message.trim()) return;\n\n    setSubmitting(true);\n    setError(null);\n\n    try {\n      const supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\n      const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\n      if (!supabaseUrl || !supabaseAnonKey) {\n        throw new Error('Supabase configuration missing');\n      }\n\n      const response = await fetch(\n        `${supabaseUrl}/functions/v1/submit-feedback`,\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${supabaseAnonKey}`,\n          },\n          body: JSON.stringify({\n            type: feedbackType,\n            message: message.trim(),\n            url: window.location.href,\n            userAgent: navigator.userAgent,\n            timestamp: new Date().toISOString(),\n          }),\n        }\n      );\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || 'Failed to submit feedback');\n      }\n\n      setSubmitted(true);\n      setTimeout(() => {\n        setFeedbackType(null);\n        setMessage('');\n        setSubmitted(false);\n        onClose();\n      }, 2000);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to submit feedback');\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-2xl max-w-md w-full shadow-xl\">\n        <div className=\"px-6 py-4 border-b border-gray-200 flex items-center justify-between\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">Share Your Feedback</h2>\n          <button\n            onClick={onClose}\n            className=\"p-1 hover:bg-gray-100 rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5 text-gray-500\" />\n          </button>\n        </div>\n\n        <div className=\"p-6 space-y-4\">\n          {submitted ? (\n            <div className=\"text-center py-8 space-y-3\">\n              <div className=\"w-12 h-12 bg-switch-green-100 rounded-full flex items-center justify-center mx-auto\">\n                <CheckCircle2 className=\"w-6 h-6 text-switch-green-600\" />\n              </div>\n              <div>\n                <h3 className=\"font-medium text-gray-900\">Thank you!</h3>\n                <p className=\"text-sm text-gray-600 mt-1\">Your feedback helps us improve BidSmart.</p>\n              </div>\n            </div>\n          ) : (\n            <>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n                  What would you like to share?\n                </label>\n                <div className=\"grid grid-cols-3 gap-2\">\n                  {[\n                    { id: 'liked', label: ' Loved it', description: 'Something you liked' },\n                    { id: 'wishlist', label: ' Wishlist', description: 'Feature idea' },\n                    { id: 'bug', label: ' Bug report', description: 'Something broken' },\n                  ].map((option) => (\n                    <button\n                      key={option.id}\n                      onClick={() => {\n                        setFeedbackType(option.id as FeedbackType);\n                        setMessage('');\n                      }}\n                      className={`p-3 rounded-lg border-2 transition-all text-center ${\n                        feedbackType === option.id\n                          ? 'border-switch-green-500 bg-switch-green-50'\n                          : 'border-gray-200 hover:border-gray-300 bg-white'\n                      }`}\n                    >\n                      <div className=\"text-xl mb-1\">{option.label.split(' ')[0]}</div>\n                      <div className=\"text-xs font-medium text-gray-600\">{option.label.split(' ').slice(1).join(' ')}</div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {feedbackType && (\n                <>\n                  <div>\n                    <label htmlFor=\"feedback-message\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      {feedbackType === 'liked' && 'What did you like?'}\n                      {feedbackType === 'wishlist' && 'What would you like to see?'}\n                      {feedbackType === 'bug' && 'Describe the issue'}\n                    </label>\n                    <textarea\n                      id=\"feedback-message\"\n                      value={message}\n                      onChange={(e) => setMessage(e.target.value)}\n                      placeholder=\"Your feedback here...\"\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent resize-none h-24\"\n                    />\n                    <p className=\"text-xs text-gray-500 mt-1\">\n                      {message.length}/500\n                    </p>\n                  </div>\n\n                  {error && (\n                    <div className=\"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-lg\">\n                      <AlertCircle className=\"w-4 h-4 text-red-600 flex-shrink-0 mt-0.5\" />\n                      <p className=\"text-sm text-red-700\">{error}</p>\n                    </div>\n                  )}\n\n                  <div className=\"flex gap-2 pt-2\">\n                    <button\n                      onClick={() => {\n                        setFeedbackType(null);\n                        setMessage('');\n                        setError(null);\n                      }}\n                      className=\"flex-1 btn btn-secondary\"\n                    >\n                      Back\n                    </button>\n                    <button\n                      onClick={handleSubmit}\n                      disabled={!message.trim() || submitting || message.length > 500}\n                      className=\"flex-1 btn btn-primary flex items-center justify-center gap-2\"\n                    >\n                      {submitting ? (\n                        <>\n                          <Loader2 className=\"w-4 h-4 animate-spin\" />\n                          Sending...\n                        </>\n                      ) : (\n                        <>\n                          <Send className=\"w-4 h-4\" />\n                          Send Feedback\n                        </>\n                      )}\n                    </button>\n                  </div>\n                </>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { FlaskConical, X, MessageSquare } from 'lucide-react';\nimport { useState } from 'react';\nimport { FeedbackPanel } from './FeedbackPanel';\n\ninterface AlphaBannerProps {\n  dismissible?: boolean;\n  variant?: 'full' | 'compact';\n}\n\nexport function AlphaBanner({ dismissible = true, variant = 'full' }: AlphaBannerProps) {\n  const [dismissed, setDismissed] = useState(false);\n  const [showFeedback, setShowFeedback] = useState(false);\n\n  if (dismissed) return null;\n\n  if (variant === 'compact') {\n    return (\n      <div className=\"bg-blue-50 border-b border-blue-200 px-4 py-2\">\n        <div className=\"flex items-center justify-between gap-2 text-sm max-w-4xl mx-auto\">\n          <div className=\"flex items-center gap-2\">\n            <FlaskConical className=\"w-4 h-4 text-blue-600\" />\n            <span className=\"text-blue-800\">\n              <span className=\"font-medium\">Early Access</span> - Actively improving based on your feedback\n            </span>\n          </div>\n          <div className=\"flex items-center gap-1\">\n            <button\n              onClick={() => setShowFeedback(true)}\n              className=\"px-2 py-0.5 text-xs font-medium text-blue-700 hover:bg-blue-100 rounded transition-colors\"\n            >\n              Feedback\n            </button>\n            {dismissible && (\n              <button\n                onClick={() => setDismissed(true)}\n                className=\"p-0.5 hover:bg-blue-100 rounded\"\n              >\n                <X className=\"w-3.5 h-3.5 text-blue-600\" />\n              </button>\n            )}\n          </div>\n        </div>\n        <FeedbackPanel isOpen={showFeedback} onClose={() => setShowFeedback(false)} />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-gradient-to-r from-blue-50 to-cyan-50 border-b border-blue-200\">\n      <div className=\"max-w-4xl mx-auto px-4 py-3\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\n            <FlaskConical className=\"w-4 h-4 text-blue-600\" />\n          </div>\n          <div className=\"flex-1 min-w-0 flex items-center gap-3 flex-wrap\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-blue-200 text-blue-800\">\n                EARLY ACCESS\n              </span>\n              <h3 className=\"text-sm font-semibold text-blue-900\">\n                Help Shape the Future of BidSmart\n              </h3>\n            </div>\n            <button\n              onClick={() => setShowFeedback(true)}\n              className=\"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              <MessageSquare className=\"w-4 h-4\" />\n              Share Feedback\n            </button>\n          </div>\n          {dismissible && (\n            <button\n              onClick={() => setDismissed(true)}\n              className=\"flex-shrink-0 p-1 hover:bg-blue-100 rounded\"\n            >\n              <X className=\"w-4 h-4 text-blue-600\" />\n            </button>\n          )}\n        </div>\n      </div>\n      <FeedbackPanel isOpen={showFeedback} onClose={() => setShowFeedback(false)} />\n    </div>\n  );\n}\n\nexport function AlphaInlineBanner({ message }: { message?: string }) {\n  return (\n    <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-3 flex items-start gap-2\">\n      <FlaskConical className=\"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5\" />\n      <p className=\"text-sm text-amber-800\">\n        {message || 'This feature is in alpha testing and may not work perfectly yet.'}\n      </p>\n    </div>\n  );\n}\n","import { CheckCircle2, Clock, Mail, Play, ArrowLeft } from 'lucide-react';\nimport { AlphaBanner } from './AlphaBanner';\n\ninterface AnalysisSuccessScreenProps {\n  email: string;\n  onViewDemo: () => void;\n  onReturnHome: () => void;\n}\n\nexport function AnalysisSuccessScreen({\n  email,\n  onViewDemo,\n  onReturnHome\n}: AnalysisSuccessScreenProps) {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-switch-green-50 via-white to-blue-50\">\n      <AlphaBanner />\n      <div className=\"max-w-2xl mx-auto px-4 py-12\">\n        <div className=\"bg-white rounded-2xl shadow-xl border border-gray-200 p-8\">\n          {/* Success Icon */}\n          <div className=\"w-16 h-16 bg-switch-green-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n            <CheckCircle2 className=\"w-8 h-8 text-switch-green-600\" />\n          </div>\n          \n          {/* Headline */}\n          <h1 className=\"text-2xl font-bold text-center text-gray-900 mb-2\">\n            Analysis Started Successfully!\n          </h1>\n          <p className=\"text-center text-gray-600 mb-8\">\n            Your bids are being analyzed by our AI\n          </p>\n          \n          {/* Timing Info */}\n          <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-6 mb-6\">\n            <div className=\"flex items-start gap-3\">\n              <Clock className=\"w-6 h-6 text-amber-600 flex-shrink-0 mt-0.5\" />\n              <div>\n                <p className=\"font-semibold text-amber-900 mb-2\">\n                  Expected Time: 20-30 minutes\n                </p>\n                <p className=\"text-sm text-amber-800\">\n                  Our technology performs research and analysis involving sometimes \n                  hundreds of searches to give you the most comprehensive comparison.\n                </p>\n              </div>\n            </div>\n          </div>\n          \n          {/* Email Confirmation */}\n          <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6\">\n            <div className=\"flex items-center gap-3\">\n              <Mail className=\"w-5 h-5 text-blue-600\" />\n              <div>\n                <p className=\"text-sm font-medium text-blue-900\">\n                  We'll email you at:\n                </p>\n                <p className=\"text-sm text-blue-800 font-semibold\">\n                  {email}\n                </p>\n              </div>\n            </div>\n          </div>\n          \n          {/* CTAs */}\n          <div className=\"space-y-3 mb-6\">\n            <button\n              onClick={onViewDemo}\n              className=\"w-full bg-switch-green-600 hover:bg-switch-green-700 text-white rounded-lg py-4 px-6 font-semibold flex items-center justify-center gap-2 transition-colors\"\n            >\n              <Play className=\"w-5 h-5\" />\n              View a Sample Analysis\n            </button>\n            <button\n              onClick={onReturnHome}\n              className=\"w-full bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 rounded-lg py-3 px-6 font-medium flex items-center justify-center gap-2 transition-colors\"\n            >\n              <ArrowLeft className=\"w-4 h-4\" />\n              Return to Home\n            </button>\n          </div>\n          \n          {/* Instructions */}\n          <div className=\"bg-gray-50 rounded-xl p-4\">\n            <p className=\"text-sm font-medium text-gray-900 mb-2\">\n               To find your results later:\n            </p>\n            <p className=\"text-sm text-gray-600\">\n              Return to the home page and use the \"Find Previous Analysis\" \n              feature with your email address.\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * File Handler Utilities for Base64 Document Handling\n * \n * Converts files to Base64 for embedding directly in API requests,\n * eliminating the need for MindPal to fetch files from URLs.\n */\n\nexport interface Base64Document {\n  filename: string;\n  mime_type: string;\n  base64_content: string;\n  size?: number;\n}\n\n/**\n * Convert a single file to Base64 string\n */\nexport async function fileToBase64(file: File): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n      // Result is \"data:application/pdf;base64,XXXXX...\"\n      // We extract just the Base64 part after the comma\n      const result = reader.result as string;\n      const base64 = result.split(',')[1];\n      resolve(base64);\n    };\n    reader.onerror = (error) => reject(error);\n    reader.readAsDataURL(file);\n  });\n}\n\n/**\n * Convert a File to a Base64Document object ready for API submission\n */\nexport async function fileToBase64Document(file: File): Promise<Base64Document> {\n  const content = await fileToBase64(file);\n  return {\n    filename: file.name,\n    mime_type: file.type || 'application/pdf',\n    base64_content: content,\n    size: file.size,\n  };\n}\n\n/**\n * Convert multiple files to Base64Document array\n * Includes progress callback for UI updates\n */\nexport async function prepareDocumentsForUpload(\n  files: File[],\n  onProgress?: (current: number, total: number, filename: string) => void\n): Promise<Base64Document[]> {\n  const documents: Base64Document[] = [];\n  \n  for (let i = 0; i < files.length; i++) {\n    const file = files[i];\n    onProgress?.(i + 1, files.length, file.name);\n    \n    const doc = await fileToBase64Document(file);\n    documents.push(doc);\n  }\n  \n  return documents;\n}\n\n/**\n * Validate file before conversion\n * Returns error message if invalid, null if valid\n */\nexport function validateFileForBase64(file: File): string | null {\n  // Max file size: 20MB (Base64 adds ~33% overhead, keeping within limits)\n  const MAX_FILE_SIZE = 20 * 1024 * 1024;\n  \n  if (file.size > MAX_FILE_SIZE) {\n    return `File \"${file.name}\" is too large. Maximum size is 20MB.`;\n  }\n  \n  // Allowed file types\n  const ALLOWED_TYPES = [\n    'application/pdf',\n    'application/vnd.openxmlformats-officedocument.wordprocessingml.document', // .docx\n    'application/msword', // .doc\n    'image/jpeg',\n    'image/png',\n    'image/gif'\n  ];\n  \n  const ALLOWED_EXTENSIONS = ['.pdf', '.docx', '.doc', '.jpg', '.jpeg', '.png', '.gif'];\n  const extension = file.name.toLowerCase().substring(file.name.lastIndexOf('.'));\n  \n  if (!ALLOWED_TYPES.includes(file.type) && !ALLOWED_EXTENSIONS.includes(extension)) {\n    return `File \"${file.name}\" is not a supported format. Please upload PDF, Word documents, or images (JPG, PNG, GIF).`;\n  }\n  \n  return null;\n}\n\n/**\n * Calculate total payload size for Base64 documents\n * Base64 encoding adds approximately 33% overhead\n */\nexport function estimateBase64PayloadSize(files: File[]): number {\n  const totalBytes = files.reduce((sum, file) => sum + file.size, 0);\n  // Base64 adds ~33% overhead\n  return Math.ceil(totalBytes * 1.33);\n}\n\n/**\n * Check if files will fit within payload limits\n */\nexport function checkPayloadLimits(files: File[]): { valid: boolean; message?: string } {\n  const estimatedSize = estimateBase64PayloadSize(files);\n  \n  // Supabase Edge Functions have a 6MB request body limit\n  // MindPal may have its own limits - being conservative with 5MB\n  const MAX_PAYLOAD_SIZE = 5 * 1024 * 1024;\n  \n  if (estimatedSize > MAX_PAYLOAD_SIZE) {\n    const sizeMB = (estimatedSize / (1024 * 1024)).toFixed(1);\n    return {\n      valid: false,\n      message: `Combined file size (~${sizeMB}MB) exceeds the 5MB limit. Please upload smaller files.`,\n    };\n  }\n  \n  return { valid: true };\n}\n\n/**\n * Validate Base64 encoding for QA testing\n * Logs detailed information about the encoding and attempts to decode\n * Returns validation results for inspection\n */\nexport async function validateBase64Encoding(file: File): Promise<{\n  success: boolean;\n  base64Length: number;\n  originalSize: number;\n  decodedSize?: number;\n  firstChars: string;\n  lastChars: string;\n  error?: string;\n}> {\n  try {\n    const base64 = await fileToBase64(file);\n    \n    console.group(` Base64 Validation: ${file.name}`);\n    console.log(' Original file size:', file.size, 'bytes');\n    console.log(' Base64 length:', base64.length, 'characters');\n    console.log(' Overhead:', ((base64.length / file.size - 1) * 100).toFixed(1) + '%');\n    console.log(' First 50 chars:', base64.substring(0, 50));\n    console.log(' Last 50 chars:', base64.substring(base64.length - 50));\n    \n    // Try to decode it\n    try {\n      const decoded = atob(base64);\n      console.log(' Decode successful!');\n      console.log(' Decoded size:', decoded.length, 'bytes');\n      console.log(' First 100 chars of decoded:', decoded.substring(0, 100));\n      console.log(' Last 100 chars of decoded:', decoded.substring(decoded.length - 100));\n      \n      // Check if it looks like a PDF\n      if (file.type === 'application/pdf') {\n        const isPDF = decoded.startsWith('%PDF');\n        console.log(' PDF header check:', isPDF ? ' Valid PDF header' : ' Missing PDF header');\n      }\n      \n      console.groupEnd();\n      \n      return {\n        success: true,\n        base64Length: base64.length,\n        originalSize: file.size,\n        decodedSize: decoded.length,\n        firstChars: base64.substring(0, 50),\n        lastChars: base64.substring(base64.length - 50),\n      };\n    } catch (decodeError) {\n      console.error(' Decode failed:', decodeError);\n      console.groupEnd();\n      \n      return {\n        success: false,\n        base64Length: base64.length,\n        originalSize: file.size,\n        firstChars: base64.substring(0, 50),\n        lastChars: base64.substring(base64.length - 50),\n        error: decodeError instanceof Error ? decodeError.message : 'Decode failed',\n      };\n    }\n  } catch (error) {\n    console.error(' Base64 encoding failed:', error);\n    return {\n      success: false,\n      base64Length: 0,\n      originalSize: file.size,\n      firstChars: '',\n      lastChars: '',\n      error: error instanceof Error ? error.message : 'Encoding failed',\n    };\n  }\n}\n\n/**\n * Export Base64 content to clipboard for external validation\n * Useful for pasting into LLMs to verify content extraction\n */\nexport async function exportBase64ToClipboard(file: File): Promise<void> {\n  const base64 = await fileToBase64(file);\n  await navigator.clipboard.writeText(base64);\n  console.log(` Base64 for \"${file.name}\" copied to clipboard (${base64.length} chars)`);\n}\n","import { supabase } from '../supabaseClient';\nimport * as db from '../database/bidsmartService';\nimport type { ConfidenceLevel, LineItemType, MindPalExtractionResponse } from '../types';\nimport { getAuthHeaders as getParentAuthHeaders } from '../parentAuth';\nimport { validateFileForBase64, prepareDocumentsForUpload, checkPayloadLimits, validateBase64Encoding, exportBase64ToClipboard } from '../utils/fileHandler';\n\nconst SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL;\nconst SUPABASE_ANON_KEY = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\ninterface TriggerExtractionResult {\n  success: boolean;\n  pdfUploadId: string;\n  runId?: string;\n  error?: string;\n}\n\nexport interface UserPriorities {\n  price: number;\n  efficiency: number;\n  warranty: number;\n  reputation: number;\n  timeline: number;\n}\n\nexport interface BatchAnalysisResult {\n  success: boolean;\n  projectId: string;\n  requestId?: string;\n  workflowRunId?: string;\n  pdfCount?: number;\n  error?: string;\n}\n\nexport interface UploadedFile {\n  id: string;\n  file: File;\n  status: 'uploading' | 'uploaded' | 'error';\n  progress: number;\n  error?: string;\n}\n\ninterface ExtractionStatusResult {\n  pdfUploadId: string;\n  status: string;\n  progress: number;\n  confidence?: number;\n  bidId?: string;\n  error?: string;\n  mindpalStatus?: string;\n  processingStartedAt?: string;\n  processingCompletedAt?: string;\n  retryCount?: number;\n}\n\ninterface PollOptions {\n  intervalMs?: number;\n  maxAttempts?: number;\n  onStatusChange?: (status: ExtractionStatusResult) => void;\n}\n\nasync function getAuthHeaders(userEmail: string): Promise<Record<string, string>> {\n  // Get auth headers (uses signed token if available, falls back to email)\n  const authHeaders = getParentAuthHeaders(userEmail);\n  \n  return {\n    'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,\n    'apikey': SUPABASE_ANON_KEY,\n    ...authHeaders,\n  };\n}\n\nexport async function uploadAndExtract(\n  projectId: string,\n  file: File,\n  userEmail: string\n): Promise<TriggerExtractionResult> {\n  try {\n    const { path } = await db.uploadPdfToStorage(projectId, file);\n\n    const pdfUpload = await db.createPdfUpload(projectId, {\n      file_name: file.name,\n      file_path: path,\n      file_size_bytes: file.size,\n      status: 'uploaded',\n    });\n\n    const result = await triggerExtraction(projectId, pdfUpload.id, userEmail);\n\n    return {\n      success: result.success,\n      pdfUploadId: pdfUpload.id,\n      runId: result.runId,\n      error: result.error,\n    };\n  } catch (error) {\n    console.error('Error in uploadAndExtract:', error);\n    return {\n      success: false,\n      pdfUploadId: '',\n      error: error instanceof Error ? error.message : 'Unknown error',\n    };\n  }\n}\n\nexport async function triggerExtraction(\n  projectId: string,\n  pdfUploadId: string,\n  userEmail: string\n): Promise<TriggerExtractionResult> {\n  try {\n    const headers = await getAuthHeaders(userEmail);\n\n    const response = await fetch(`${SUPABASE_URL}/functions/v1/send-to-mindpal`, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify({ projectId, pdfUploadId }),\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return {\n        success: false,\n        pdfUploadId,\n        error: data.error || `Request failed: ${response.status}`,\n      };\n    }\n\n    return {\n      success: true,\n      pdfUploadId,\n      runId: data.runId,\n    };\n  } catch (error) {\n    console.error('Error triggering extraction:', error);\n    return {\n      success: false,\n      pdfUploadId,\n      error: error instanceof Error ? error.message : 'Failed to trigger extraction',\n    };\n  }\n}\n\nexport async function getExtractionStatus(\n  pdfUploadId: string,\n  userEmail: string\n): Promise<ExtractionStatusResult> {\n  try {\n    const headers = await getAuthHeaders(userEmail);\n\n    const response = await fetch(\n      `${SUPABASE_URL}/functions/v1/extraction-status?pdfUploadId=${encodeURIComponent(pdfUploadId)}`,\n      {\n        method: 'GET',\n        headers,\n      }\n    );\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return {\n        pdfUploadId,\n        status: 'error',\n        progress: 0,\n        error: data.error || `Request failed: ${response.status}`,\n      };\n    }\n\n    return data;\n  } catch (error) {\n    console.error('Error getting extraction status:', error);\n    return {\n      pdfUploadId,\n      status: 'error',\n      progress: 0,\n      error: error instanceof Error ? error.message : 'Failed to get status',\n    };\n  }\n}\n\nexport async function pollExtractionStatus(\n  pdfUploadId: string,\n  userEmail: string,\n  options: PollOptions = {}\n): Promise<ExtractionStatusResult> {\n  const {\n    intervalMs = 5000,\n    maxAttempts = 60,\n    onStatusChange,\n  } = options;\n\n  let attempts = 0;\n  let lastStatus = '';\n\n  return new Promise((resolve, reject) => {\n    const poll = async () => {\n      attempts++;\n\n      try {\n        const status = await getExtractionStatus(pdfUploadId, userEmail);\n\n        if (status.status !== lastStatus) {\n          lastStatus = status.status;\n          onStatusChange?.(status);\n        }\n\n        if (\n          status.status === 'extracted' ||\n          status.status === 'verified' ||\n          status.status === 'review_needed'\n        ) {\n          resolve(status);\n          return;\n        }\n\n        if (status.status === 'failed' || status.status === 'error') {\n          resolve(status);\n          return;\n        }\n\n        if (attempts >= maxAttempts) {\n          resolve({\n            ...status,\n            status: 'timeout',\n            error: 'Extraction timed out',\n          });\n          return;\n        }\n\n        setTimeout(poll, intervalMs);\n      } catch (error) {\n        if (attempts >= maxAttempts) {\n          reject(error);\n          return;\n        }\n        setTimeout(poll, intervalMs);\n      }\n    };\n\n    poll();\n  });\n}\n\nexport async function retryExtraction(pdfUploadId: string, userEmail: string): Promise<TriggerExtractionResult> {\n  const pdfUpload = await db.getPdfUpload(pdfUploadId);\n  if (!pdfUpload) {\n    return { success: false, pdfUploadId, error: 'PDF upload not found' };\n  }\n\n  if (pdfUpload.retry_count >= 3) {\n    return { success: false, pdfUploadId, error: 'Maximum retries exceeded' };\n  }\n\n  await db.incrementPdfRetryCount(pdfUploadId);\n\n  return triggerExtraction(pdfUpload.project_id, pdfUploadId, userEmail);\n}\n\nexport async function processMindPalCallback(\n  extraction: MindPalExtractionResponse\n): Promise<{ success: boolean; bidId?: string; error?: string }> {\n  const { request_id } = extraction;\n\n  try {\n    const pdfUpload = await db.getPdfUpload(request_id);\n    if (!pdfUpload) {\n      throw new Error(`PDF upload not found: ${request_id}`);\n    }\n\n    const storedExtraction = await db.createMindPalExtraction(\n      pdfUpload.id,\n      extraction as unknown as Record<string, unknown>\n    );\n\n    if (extraction.status === 'failed') {\n      await db.updatePdfUploadStatus(pdfUpload.id, 'failed', {\n        error_message: extraction.error?.message || 'Extraction failed',\n      });\n      await db.updateMindPalExtraction(storedExtraction.id, {\n        parsed_successfully: false,\n        parsing_errors: [extraction.error?.message || 'Extraction failed'],\n      });\n      return { success: false, error: extraction.error?.message };\n    }\n\n    const bid = await mapExtractionToBid(pdfUpload.project_id, extraction);\n\n    const needsReview = extraction.overall_confidence < 70 || extraction.status === 'partial';\n    await db.updatePdfUploadStatus(\n      pdfUpload.id,\n      needsReview ? 'review_needed' : 'extracted',\n      {\n        extracted_bid_id: bid.id,\n        extraction_confidence: extraction.overall_confidence,\n      }\n    );\n\n    await db.updateMindPalExtraction(storedExtraction.id, {\n      parsed_successfully: true,\n      mapped_bid_id: bid.id,\n      overall_confidence: extraction.overall_confidence,\n      field_confidences: extraction.field_confidences,\n      processed_at: new Date().toISOString(),\n    });\n\n    await recalculateProjectScores(pdfUpload.project_id);\n\n    return { success: true, bidId: bid.id };\n  } catch (error) {\n    console.error('Error processing MindPal callback:', error);\n\n    try {\n      await db.updatePdfUploadStatus(request_id, 'failed', {\n        error_message: error instanceof Error ? error.message : 'Processing failed',\n      });\n    } catch (e) {\n      console.error('Failed to update PDF status:', e);\n    }\n\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Processing failed',\n    };\n  }\n}\n\nasync function mapExtractionToBid(\n  projectId: string,\n  extraction: MindPalExtractionResponse\n): Promise<{ id: string }> {\n  const confidenceLevel = mapConfidenceToLevel(extraction.overall_confidence);\n\n  const bid = await db.createBid(projectId, {\n    contractor_name: extraction.contractor_info?.company_name || 'Unknown Contractor',\n    contractor_company: extraction.contractor_info?.company_name,\n    contractor_phone: extraction.contractor_info?.phone,\n    contractor_email: extraction.contractor_info?.email,\n    contractor_license: extraction.contractor_info?.license_number,\n    contractor_website: extraction.contractor_info?.website,\n    total_bid_amount: extraction.pricing?.total_amount || 0,\n    labor_cost: extraction.pricing?.labor_cost,\n    equipment_cost: extraction.pricing?.equipment_cost,\n    materials_cost: extraction.pricing?.materials_cost,\n    permit_cost: extraction.pricing?.permit_cost,\n    total_before_rebates: extraction.pricing?.price_before_rebates,\n    estimated_rebates: extraction.pricing?.rebates_mentioned?.reduce(\n      (sum, r) => sum + (r.amount || 0),\n      0\n    ),\n    total_after_rebates: extraction.pricing?.price_after_rebates,\n    estimated_days: extraction.timeline?.estimated_days,\n    start_date_available: extraction.timeline?.start_date_available,\n    labor_warranty_years: extraction.warranty?.labor_warranty_years,\n    equipment_warranty_years: extraction.warranty?.equipment_warranty_years,\n    additional_warranty_details: extraction.warranty?.warranty_details,\n    deposit_required: extraction.payment_terms?.deposit_amount,\n    deposit_percentage: extraction.payment_terms?.deposit_percentage,\n    payment_schedule: extraction.payment_terms?.payment_schedule,\n    financing_offered: extraction.payment_terms?.financing_offered || false,\n    financing_terms: extraction.payment_terms?.financing_terms,\n    scope_summary: extraction.scope_of_work?.summary,\n    inclusions: extraction.scope_of_work?.inclusions,\n    exclusions: extraction.scope_of_work?.exclusions,\n    bid_date: extraction.dates?.bid_date || extraction.dates?.quote_date,\n    valid_until: extraction.dates?.valid_until || extraction.timeline?.bid_valid_until,\n    extraction_confidence: confidenceLevel,\n    extraction_notes: extraction.extraction_notes\n      ?.map((n) => `[${n.type}] ${n.message}`)\n      .join('\\n'),\n  });\n\n  if (extraction.line_items && extraction.line_items.length > 0) {\n    const lineItems = extraction.line_items.map((item, index) => ({\n      item_type: mapLineItemType(item.item_type),\n      description: item.description,\n      quantity: item.quantity || 1,\n      unit_price: item.unit_price,\n      total_price: item.total_price,\n      brand: item.brand,\n      model_number: item.model_number,\n      confidence: mapConfidenceToLevel(item.confidence || extraction.overall_confidence),\n      source_text: item.source_text,\n      line_order: index,\n    }));\n\n    await db.bulkCreateLineItems(bid.id, lineItems);\n  }\n\n  if (extraction.equipment && extraction.equipment.length > 0) {\n    const equipment = extraction.equipment.map((eq) => ({\n      equipment_type: eq.equipment_type,\n      brand: eq.brand,\n      model_number: eq.model_number,\n      model_name: eq.model_name,\n      capacity_btu: eq.capacity_btu,\n      capacity_tons: eq.capacity_tons,\n      seer_rating: eq.seer_rating,\n      seer2_rating: eq.seer2_rating,\n      hspf_rating: eq.hspf_rating,\n      hspf2_rating: eq.hspf2_rating,\n      eer_rating: eq.eer_rating,\n      variable_speed: eq.variable_speed,\n      stages: eq.stages === 'single' ? 1 : eq.stages === 'two' ? 2 : eq.stages === 'variable' ? 99 : undefined,\n      refrigerant_type: eq.refrigerant,\n      sound_level_db: eq.sound_level_db,\n      voltage: eq.voltage,\n      energy_star_certified: eq.energy_star,\n      energy_star_most_efficient: eq.energy_star_most_efficient,\n      equipment_cost: eq.equipment_cost,\n      confidence: mapConfidenceToLevel(eq.confidence || extraction.overall_confidence),\n    }));\n\n    await db.bulkCreateEquipment(bid.id, equipment);\n  }\n\n  return bid;\n}\n\nfunction mapConfidenceToLevel(confidence: number | undefined): ConfidenceLevel {\n  if (confidence === undefined) return 'low';\n  if (confidence >= 90) return 'high';\n  if (confidence >= 70) return 'medium';\n  return 'low';\n}\n\nfunction mapLineItemType(type: string | undefined): LineItemType {\n  if (!type) return 'other';\n\n  const typeMap: Record<string, LineItemType> = {\n    equipment: 'equipment',\n    labor: 'labor',\n    materials: 'materials',\n    permit: 'permit',\n    disposal: 'disposal',\n    electrical: 'electrical',\n    ductwork: 'ductwork',\n    thermostat: 'thermostat',\n    rebate_processing: 'rebate_processing',\n    warranty: 'warranty',\n  };\n\n  return typeMap[type.toLowerCase()] || 'other';\n}\n\nasync function recalculateProjectScores(projectId: string): Promise<void> {\n  const bids = await db.getBidsByProject(projectId);\n\n  for (const bid of bids) {\n    await supabase.rpc('calculate_bid_scores', { p_bid_id: bid.id });\n  }\n}\n\nexport async function uploadPdfFile(\n  projectId: string,\n  file: File\n): Promise<{ pdfUploadId: string; error?: string }> {\n  try {\n    const { path } = await db.uploadPdfToStorage(projectId, file);\n\n    const pdfUpload = await db.createPdfUpload(projectId, {\n      file_name: file.name,\n      file_path: path,\n      file_size_bytes: file.size,\n      status: 'uploaded',\n    });\n\n    return { pdfUploadId: pdfUpload.id };\n  } catch (error) {\n    console.error('Error uploading PDF:', error);\n    return {\n      pdfUploadId: '',\n      error: error instanceof Error ? error.message : 'Upload failed',\n    };\n  }\n}\n\nexport async function startBatchAnalysis(\n  projectId: string,\n  pdfUploadIds: string[],\n  userPriorities: UserPriorities,\n  userEmail: string,\n  projectDetails?: string\n): Promise<BatchAnalysisResult> {\n  try {\n    const headers = await getAuthHeaders(userEmail);\n\n    const prioritiesPayload = {\n      upfront_cost: userPriorities.price,\n      energy_efficiency: userPriorities.efficiency,\n      warranty_length: userPriorities.warranty,\n      contractor_reputation: userPriorities.reputation,\n      installation_timeline: userPriorities.timeline,\n      project_details: projectDetails || '',\n    };\n\n    const response = await fetch(`${SUPABASE_URL}/functions/v1/start-mindpal-analysis`, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify({\n        projectId,\n        pdfUploadIds,\n        userPriorities: prioritiesPayload,\n      }),\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return {\n        success: false,\n        projectId,\n        error: data.error || `Request failed: ${response.status}`,\n      };\n    }\n\n    return {\n      success: true,\n      projectId,\n      requestId: data.requestId,\n      workflowRunId: data.workflowRunId,\n      pdfCount: data.pdfCount,\n    };\n  } catch (error) {\n    console.error('Error starting batch analysis:', error);\n    return {\n      success: false,\n      projectId,\n      error: error instanceof Error ? error.message : 'Failed to start analysis',\n    };\n  }\n}\n\n/**\n * Start batch analysis with Base64 encoded documents\n * This bypasses URL fetching by embedding file content directly in the request\n */\nexport async function startBatchAnalysisWithBase64(\n  projectId: string,\n  files: File[],\n  userPriorities: UserPriorities,\n  userEmail: string,\n  projectDetails?: string,\n  onProgress?: (stage: string, current: number, total: number) => void\n): Promise<BatchAnalysisResult> {\n  try {\n    // Validate files\n    for (const file of files) {\n      const error = validateFileForBase64(file);\n      if (error) {\n        return { success: false, projectId, error };\n      }\n    }\n\n    // Check payload limits\n    const payloadCheck = checkPayloadLimits(files);\n    if (!payloadCheck.valid) {\n      return { success: false, projectId, error: payloadCheck.message };\n    }\n\n    onProgress?.('Converting files', 0, files.length);\n\n    // Convert files to Base64 with validation\n    const documents = await prepareDocumentsForUpload(files, (current, total, filename) => {\n      onProgress?.(`Converting ${filename}`, current, total);\n    });\n\n    // QA: Validate Base64 encoding for each file\n    console.group(' Base64 QA Validation');\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      const validation = await validateBase64Encoding(file);\n      \n      if (!validation.success) {\n        console.error(` Validation failed for ${file.name}:`, validation.error);\n      }\n      \n      // Log document structure being sent to API\n      console.log(`\\n Document ${i + 1}/${files.length}: ${documents[i].filename}`);\n      console.log('  - MIME type:', documents[i].mime_type);\n      console.log('  - Original size:', documents[i].size, 'bytes');\n      console.log('  - Base64 length:', documents[i].base64_content.length, 'chars');\n      console.log('  - First 100 chars:', documents[i].base64_content.substring(0, 100));\n      console.log('  - Last 100 chars:', documents[i].base64_content.substring(documents[i].base64_content.length - 100));\n    }\n    console.log('\\n TIP: To copy a file\\'s Base64 to clipboard for LLM validation:');\n    console.log('   Run: exportBase64ToClipboard(yourFile)');\n    console.log('   The function is available in the global scope for testing.');\n    console.groupEnd();\n\n    // Make validation functions available globally for manual testing\n    (window as any).validateBase64Encoding = validateBase64Encoding;\n    (window as any).exportBase64ToClipboard = exportBase64ToClipboard;\n\n    onProgress?.('Uploading to server', files.length, files.length);\n\n    const headers = await getAuthHeaders(userEmail);\n\n    const prioritiesPayload = {\n      upfront_cost: userPriorities.price,\n      energy_efficiency: userPriorities.efficiency,\n      warranty_length: userPriorities.warranty,\n      contractor_reputation: userPriorities.reputation,\n      installation_timeline: userPriorities.timeline,\n      project_details: projectDetails || '',\n    };\n\n    const requestPayload = {\n      projectId,\n      documents, // Base64 documents instead of pdfUploadIds\n      userPriorities: prioritiesPayload,\n      useBase64: true, // Flag to indicate Base64 mode\n    };\n\n    console.log(' Sending to Edge Function:', {\n      projectId,\n      documentsCount: documents.length,\n      documentsStructure: documents[0] ? Object.keys(documents[0]) : [],\n      firstDocumentSample: documents[0] ? {\n        filename: documents[0].filename,\n        mime_type: documents[0].mime_type,\n        base64_length: documents[0].base64_content?.length,\n        size: documents[0].size\n      } : null,\n      useBase64: true\n    });\n\n    const response = await fetch(`${SUPABASE_URL}/functions/v1/start-mindpal-analysis`, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(requestPayload),\n    });\n\n    console.log(' Edge Function Response:', {\n      status: response.status,\n      statusText: response.statusText,\n      ok: response.ok,\n      headers: Object.fromEntries(response.headers.entries())\n    });\n\n    const data = await response.json();\n    \n    console.log(' Edge Function Data:', data);\n\n    if (!response.ok) {\n      console.error(' Edge Function Error:', {\n        status: response.status,\n        error: data.error,\n        details: data\n      });\n      return {\n        success: false,\n        projectId,\n        error: data.error || `Request failed: ${response.status}`,\n      };\n    }\n\n    console.log(' MindPal Analysis Started:', {\n      requestId: data.requestId,\n      workflowRunId: data.workflowRunId,\n      pdfCount: documents.length\n    });\n\n    return {\n      success: true,\n      projectId,\n      requestId: data.requestId,\n      workflowRunId: data.workflowRunId,\n      pdfCount: documents.length,\n    };\n  } catch (error) {\n    console.error('Error starting batch analysis with Base64:', error);\n    return {\n      success: false,\n      projectId,\n      error: error instanceof Error ? error.message : 'Failed to start analysis',\n    };\n  }\n}\n\nexport interface BatchExtractionStatus {\n  projectId: string;\n  totalPdfs: number;\n  completedPdfs: number;\n  failedPdfs: number;\n  processingPdfs: number;\n  isComplete: boolean;\n  allSuccessful: boolean;\n  pdfStatuses: Array<{\n    id: string;\n    fileName: string;\n    status: string;\n    bidId?: string;\n    error?: string;\n  }>;\n}\n\nexport async function getBatchExtractionStatus(\n  projectId: string\n): Promise<BatchExtractionStatus> {\n  const pdfUploads = await db.getPdfUploadsByProject(projectId);\n\n  const pdfStatuses = pdfUploads.map(pdf => ({\n    id: pdf.id,\n    fileName: pdf.file_name,\n    status: pdf.status,\n    bidId: pdf.extracted_bid_id || undefined,\n    error: pdf.error_message || undefined,\n  }));\n\n  const completedPdfs = pdfUploads.filter(\n    p => p.status === 'extracted' || p.status === 'verified' || p.status === 'review_needed'\n  ).length;\n  const failedPdfs = pdfUploads.filter(p => p.status === 'failed').length;\n  const processingPdfs = pdfUploads.filter(\n    p => p.status === 'processing' || p.status === 'uploaded'\n  ).length;\n\n  const isComplete = processingPdfs === 0;\n  const allSuccessful = isComplete && failedPdfs === 0 && completedPdfs > 0;\n\n  return {\n    projectId,\n    totalPdfs: pdfUploads.length,\n    completedPdfs,\n    failedPdfs,\n    processingPdfs,\n    isComplete,\n    allSuccessful,\n    pdfStatuses,\n  };\n}\n\nexport async function pollBatchExtractionStatus(\n  projectId: string,\n  options: {\n    intervalMs?: number;\n    maxAttempts?: number;\n    onProgress?: (status: BatchExtractionStatus) => void;\n  } = {}\n): Promise<BatchExtractionStatus> {\n  const { intervalMs = 5000, maxAttempts = 120, onProgress } = options;\n\n  let attempts = 0;\n\n  return new Promise((resolve, reject) => {\n    const poll = async () => {\n      attempts++;\n\n      try {\n        const status = await getBatchExtractionStatus(projectId);\n        onProgress?.(status);\n\n        if (status.isComplete) {\n          resolve(status);\n          return;\n        }\n\n        if (attempts >= maxAttempts) {\n          resolve({\n            ...status,\n            isComplete: true,\n            allSuccessful: false,\n          });\n          return;\n        }\n\n        setTimeout(poll, intervalMs);\n      } catch (error) {\n        if (attempts >= maxAttempts) {\n          reject(error);\n          return;\n        }\n        setTimeout(poll, intervalMs);\n      }\n    };\n\n    poll();\n  });\n}\n","export default \"__VITE_ASSET__CPsNGGld__\"","import { useState, useRef, useCallback, useEffect } from 'react';\nimport { Upload, BarChart3, CheckCircle, ClipboardCheck, FileText, X, Clock, CheckCircle2, AlertCircle, Plus, ArrowRight, Users, Shield, Info, Mail, Loader2, ChevronRight } from 'lucide-react';\nimport type { UserExt } from '../lib/types';\nimport { ReturningUserSection } from './ReturningUserSection';\nimport { TryTheToolSection } from './TryTheToolSection';\nimport { AnalysisSuccessScreen } from './AnalysisSuccessScreen';\nimport { updateProject, saveProjectRequirements, updateProjectDataSharingConsent, updateProjectNotificationSettings, validatePdfFile, getProjectBySessionId, createDraftProject, getPublicDemoProjects } from '../lib/database/bidsmartService';\nimport { startBatchAnalysisWithBase64 } from '../lib/services/mindpalService';\nimport SwitchLogo from '../assets/switchlogo.svg';\n\nconst SESSION_ID_KEY = 'bidsmart_session_id';\n\nfunction getOrCreateSessionId(): string {\n  let sessionId = localStorage.getItem(SESSION_ID_KEY);\n  if (!sessionId) {\n    sessionId = crypto.randomUUID();\n    localStorage.setItem(SESSION_ID_KEY, sessionId);\n  }\n  return sessionId;\n}\n\nconst PHASES = [\n  {\n    number: 1,\n    label: 'GATHER',\n    title: 'Upload & Prioritize',\n    description: 'Upload contractor bids and set your priorities',\n    icon: Upload,\n    color: 'bg-switch-green-100 text-switch-green-700',\n  },\n  {\n    number: 2,\n    label: 'COMPARE',\n    title: 'Analyze Options',\n    description: 'Compare equipment, costs, and contractors side-by-side',\n    icon: BarChart3,\n    color: 'bg-blue-100 text-blue-700',\n  },\n  {\n    number: 3,\n    label: 'DECIDE',\n    title: 'Make Your Choice',\n    description: 'Review incentives and select your contractor',\n    icon: CheckCircle,\n    color: 'bg-amber-100 text-amber-700',\n  },\n  {\n    number: 4,\n    label: 'VERIFY',\n    title: 'Quality Check',\n    description: 'Ensure proper installation with our checklist',\n    icon: ClipboardCheck,\n    color: 'bg-teal-100 text-teal-700',\n  },\n];\n\ninterface PrioritySliderProps {\n  label: string;\n  value: number;\n  onChange: (value: number) => void;\n  description: string;\n}\n\nfunction PrioritySlider({ label, value, onChange, description }: PrioritySliderProps) {\n  return (\n    <div className=\"space-y-2\">\n      <div className=\"flex items-center justify-between\">\n        <label className=\"text-sm font-medium text-gray-700\">{label}</label>\n        <span className=\"text-sm text-gray-500\">{value}/5</span>\n      </div>\n      <input\n        type=\"range\"\n        min=\"1\"\n        max=\"5\"\n        value={value}\n        onChange={(e) => onChange(parseInt(e.target.value))}\n        className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-switch-green-600\"\n      />\n      <p className=\"text-xs text-gray-500\">{description}</p>\n    </div>\n  );\n}\n\ninterface UploadedPdf {\n  id: string;\n  file: File;\n  pdfUploadId?: string;\n  status: 'pending' | 'uploading' | 'uploaded' | 'error';\n  progress: number;\n  error?: string;\n}\n\ntype AnalysisState = 'idle' | 'uploading' | 'analyzing' | 'submitted' | 'complete' | 'error' | 'timeout';\n\ninterface UnifiedHomePageProps {\n  user: UserExt;\n  onSelectProject: (projectId: string) => void;\n}\n\nexport function UnifiedHomePage({ user, onSelectProject }: UnifiedHomePageProps) {\n  const [uploadedPdfs, setUploadedPdfs] = useState<UploadedPdf[]>([]);\n  const [dragActive, setDragActive] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const [priorities, setPriorities] = useState({\n    price: 3,\n    efficiency: 3,\n    warranty: 3,\n    reputation: 3,\n    timeline: 3,\n  });\n\n  const [projectDetails, setProjectDetails] = useState('');\n  const [dataSharingConsent, setDataSharingConsent] = useState(true);\n  const [showPrivacyDetails, setShowPrivacyDetails] = useState(false);\n  const [notificationEmail, setNotificationEmail] = useState('');\n\n  const [analysisState, setAnalysisState] = useState<AnalysisState>('idle');\n  const [analysisError, setAnalysisError] = useState<string | null>(null);\n  const [analysisElapsedSeconds, setAnalysisElapsedSeconds] = useState(0);\n  const analysisTimerRef = useRef<ReturnType<typeof setInterval> | null>(null);\n\n  const [draftProjectId, setDraftProjectId] = useState<string | null>(null);\n  const [demoProjectId, setDemoProjectId] = useState<string | null>(null);\n  const [showPriorities, setShowPriorities] = useState(true);\n  const [showProjectDetails, setShowProjectDetails] = useState(true);\n  const [isHeaderSticky, setIsHeaderSticky] = useState(false);\n  const heroSectionRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    checkForDraftProject();\n    loadDemoProject();\n  }, [user.id]);\n\n  const loadDemoProject = async () => {\n    try {\n      const demos = await getPublicDemoProjects();\n      if (demos.length > 0) {\n        setDemoProjectId(demos[0].id);\n      }\n    } catch (err) {\n      console.error('Failed to load demo project:', err);\n    }\n  };\n\n  useEffect(() => {\n    const handleScroll = () => {\n      if (heroSectionRef.current) {\n        const heroBottom = heroSectionRef.current.getBoundingClientRect().bottom;\n        if (heroBottom <= 0 && !isHeaderSticky) {\n          setIsHeaderSticky(true);\n          window.scrollTo({ top: heroSectionRef.current.offsetHeight, behavior: 'instant' });\n        }\n      }\n    };\n\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, [isHeaderSticky]);\n\n  const handleReturnToDashboard = () => {\n    setIsHeaderSticky(false);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    if (analysisState === 'analyzing') {\n      setAnalysisElapsedSeconds(0);\n      analysisTimerRef.current = setInterval(() => {\n        setAnalysisElapsedSeconds(prev => prev + 1);\n      }, 1000);\n    } else {\n      if (analysisTimerRef.current) {\n        clearInterval(analysisTimerRef.current);\n        analysisTimerRef.current = null;\n      }\n    }\n    return () => {\n      if (analysisTimerRef.current) {\n        clearInterval(analysisTimerRef.current);\n      }\n    };\n  }, [analysisState]);\n\n  async function checkForDraftProject() {\n    const sessionId = getOrCreateSessionId();\n    try {\n      const existingDraft = await getProjectBySessionId(sessionId);\n      if (existingDraft) {\n        setDraftProjectId(existingDraft.id);\n      }\n    } catch (err) {\n      console.error('Failed to check for draft project:', err);\n    }\n  }\n\n  async function ensureDraftProject(): Promise<string> {\n    if (draftProjectId) {\n      return draftProjectId;\n    }\n\n    const sessionId = getOrCreateSessionId();\n    const project = await createDraftProject(user.id, sessionId);\n    setDraftProjectId(project.id);\n    return project.id;\n  }\n\n  const validPendingCount = uploadedPdfs.filter(p => p.status === 'pending' || p.status === 'uploaded').length;\n  const canContinue = validPendingCount >= 2;\n  const isEmailValid = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(notificationEmail.trim());\n\n  const handleFiles = useCallback(async (files: FileList | File[]) => {\n    const fileArray = Array.from(files);\n    const validFiles: UploadedPdf[] = [];\n\n    for (const file of fileArray) {\n      const validationError = validatePdfFile(file);\n      if (validationError) {\n        validFiles.push({\n          id: crypto.randomUUID(),\n          file,\n          status: 'error',\n          progress: 0,\n          error: validationError.message,\n        });\n      } else {\n        validFiles.push({\n          id: crypto.randomUUID(),\n          file,\n          status: 'pending',\n          progress: 0,\n        });\n      }\n    }\n\n    setUploadedPdfs(prev => [...prev, ...validFiles]);\n  }, []);\n\n  const handleDrag = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n      handleFiles(e.dataTransfer.files);\n    }\n  };\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      handleFiles(e.target.files);\n    }\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const removeFile = (id: string) => {\n    setUploadedPdfs(prev => prev.filter(p => p.id !== id));\n  };\n\n  const getStatusIcon = (status: UploadedPdf['status']) => {\n    switch (status) {\n      case 'uploaded':\n        return <CheckCircle2 className=\"w-5 h-5 text-switch-green-600\" />;\n      case 'uploading':\n        return <Loader2 className=\"w-5 h-5 text-blue-500 animate-spin\" />;\n      case 'error':\n        return <AlertCircle className=\"w-5 h-5 text-red-500\" />;\n      default:\n        return <Clock className=\"w-5 h-5 text-gray-400\" />;\n    }\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n  };\n\n  const formatElapsedTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return mins > 0 ? `${mins}m ${secs}s` : `${secs}s`;\n  };\n\n  const handleAnalyze = async () => {\n    if (!canContinue || !isEmailValid) return;\n\n    setAnalysisError(null);\n\n    try {\n      const projectId = draftProjectId || await ensureDraftProject();\n\n      await updateProjectNotificationSettings(projectId, notificationEmail.trim().toLowerCase(), true);\n\n      await saveProjectRequirements(projectId, {\n        priority_price: priorities.price,\n        priority_efficiency: priorities.efficiency,\n        priority_warranty: priorities.warranty,\n        priority_reputation: priorities.reputation,\n        priority_timeline: priorities.timeline,\n      });\n\n      await updateProjectDataSharingConsent(projectId, dataSharingConsent);\n\n      if (projectDetails.trim()) {\n        await updateProject(projectId, { project_details: projectDetails });\n      }\n\n      await updateProject(projectId, { status: 'collecting_bids' });\n\n      const files = uploadedPdfs.map(p => p.file);\n\n      if (files.length < 2) {\n        setAnalysisError('Please upload at least 2 bid PDFs to compare.');\n        return;\n      }\n\n      setAnalysisState('analyzing');\n\n      const analysisResult = await startBatchAnalysisWithBase64(\n        projectId,\n        files,\n        priorities,\n        user.email,\n        projectDetails,\n        (stage, current, total) => {\n          console.log(`Base64 progress: ${stage} - ${current}/${total}`);\n        }\n      );\n\n      if (!analysisResult.success) {\n        setAnalysisState('error');\n        setAnalysisError(analysisResult.error || 'Failed to start analysis');\n        return;\n      }\n\n      // Show success screen - analysis takes 20-30 minutes\n      setAnalysisState('submitted');\n    } catch (err) {\n      console.error('Failed to process:', err);\n      setAnalysisState('error');\n      setAnalysisError(err instanceof Error ? err.message : 'An unexpected error occurred');\n    }\n  };\n\n  if (analysisState === 'submitted') {\n    return (\n      <AnalysisSuccessScreen\n        email={notificationEmail}\n        onViewDemo={() => {\n          if (demoProjectId) {\n            onSelectProject(demoProjectId);\n          }\n        }}\n        onReturnHome={() => {\n          setAnalysisState('idle');\n          setUploadedPdfs([]);\n          setDraftProjectId(null);\n        }}\n      />\n    );\n  }\n\n  if (analysisState === 'analyzing' || analysisState === 'uploading') {\n    return (\n      <div className=\"min-h-screen bg-gray-50\">\n        <div className=\"max-w-4xl mx-auto px-4 py-12\">\n          <div className=\"flex flex-col items-center justify-center min-h-[400px] space-y-6\">\n            <div className=\"w-16 h-16 bg-switch-green-100 rounded-full flex items-center justify-center\">\n              <Loader2 className=\"w-8 h-8 text-switch-green-600 animate-spin\" />\n            </div>\n\n            <div className=\"text-center space-y-2\">\n              <h2 className=\"text-xl font-semibold text-gray-900\">\n                Uploading Your Bids...\n              </h2>\n              <p className=\"text-gray-600 max-w-md\">\n                Preparing your documents for analysis.\n              </p>\n              <p className=\"text-sm text-gray-500\">\n                Elapsed: {formatElapsedTime(analysisElapsedSeconds)}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (analysisState === 'timeout') {\n    return (\n      <div className=\"min-h-screen bg-gray-50\">\n        <div className=\"max-w-4xl mx-auto px-4 py-12\">\n          <div className=\"flex flex-col items-center justify-center min-h-[400px] space-y-6\">\n            <div className=\"w-16 h-16 bg-switch-green-100 rounded-full flex items-center justify-center\">\n              <CheckCircle2 className=\"w-8 h-8 text-switch-green-600\" />\n            </div>\n\n            <div className=\"text-center space-y-2\">\n              <h2 className=\"text-xl font-semibold text-gray-900\">Your Submission is Saved</h2>\n              <p className=\"text-gray-600 max-w-md\">\n                Your bids are being processed. You will receive an email at <strong>{notificationEmail}</strong> when your analysis is ready.\n              </p>\n            </div>\n\n            <p className=\"text-sm text-gray-500 text-center max-w-md\">\n              You can close this page. Use your email address to find your analysis when you return.\n            </p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col\">\n\n      {!isHeaderSticky && (\n        <div ref={heroSectionRef} className=\"max-w-4xl w-full mx-auto px-4 py-8\">\n          <div className=\"flex items-center justify-center mb-6\">\n            <img src={SwitchLogo} alt=\"SwitchIsOn\" className=\"h-12 w-auto\" />\n          </div>\n\n          <div className=\"text-center mb-6\">\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\n              Heat Pump Bid Compare Tool <span className=\"text-base font-normal text-gray-500\">(Beta)</span>\n            </h1>\n            <p className=\"text-gray-600 max-w-2xl mx-auto text-sm\">\n              Upload your contractor bids to get an AI-powered comparison and make an informed decision.\n            </p>\n          </div>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\n            <ReturningUserSection onSelectProject={onSelectProject} />\n            <TryTheToolSection onSelectDemo={onSelectProject} />\n          </div>\n        </div>\n      )}\n\n      <div className=\"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm\">\n        <div className=\"max-w-4xl mx-auto px-4 py-4\">\n          {isHeaderSticky && (\n            <div className=\"flex items-center gap-2 mb-4 pb-3 border-b border-gray-100\">\n              <button\n                onClick={handleReturnToDashboard}\n                className=\"flex items-center gap-2 text-gray-600 hover:text-switch-green-600 transition-colors group min-h-[44px] -my-2 py-2\"\n                aria-label=\"Return to Bid Compare Dashboard\"\n              >\n                <img src={SwitchLogo} alt=\"Switch Is On\" className=\"w-8 h-8\" />\n                <span className=\"text-sm font-medium hidden sm:inline\">Dashboard</span>\n              </button>\n              <ChevronRight className=\"w-4 h-4 text-gray-300\" />\n              <span className=\"text-sm font-medium text-gray-900 truncate\">\n                Start New Comparison\n              </span>\n            </div>\n          )}\n          <div className=\"flex items-center justify-between mb-3\">\n            {PHASES.map((phase, index) => {\n              const isActive = phase.number === 1;\n\n              return (\n                <div key={phase.number} className=\"flex items-center flex-1\">\n                  <div className=\"flex items-center gap-2 transition-all min-w-0\">\n                    <div\n                      className={`\n                        w-10 h-10 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-sm font-semibold transition-colors flex-shrink-0\n                        ${isActive ? 'bg-switch-green-600 text-white' : 'bg-gray-200 text-gray-400'}\n                      `}\n                    >\n                      {phase.number}\n                    </div>\n                    <span\n                      className={`\n                        text-xs sm:text-sm font-medium hidden md:block truncate\n                        ${isActive ? 'text-gray-900' : 'text-gray-500'}\n                      `}\n                    >\n                      {phase.label}\n                    </span>\n                  </div>\n\n                  {index < PHASES.length - 1 && (\n                    <div className=\"flex-1 mx-2 sm:mx-3 min-w-[12px]\">\n                      <div className=\"h-0.5 bg-gray-200 transition-colors\" />\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n\n          <div className=\"h-1 bg-gray-100 rounded-full overflow-hidden\">\n            <div\n              className=\"h-full bg-switch-green-600 transition-all duration-500\"\n              style={{ width: '0%' }}\n            />\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex-1 max-w-4xl w-full mx-auto px-4 py-6\">\n        <div className=\"bg-white rounded-xl border border-gray-200 p-6 mb-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-2 flex items-center gap-2\">\n            <Upload className=\"w-5 h-5 text-switch-green-600\" />\n            Start a New Bid Comparison\n          </h2>\n          <p className=\"text-sm text-gray-600 mb-6\">\n            Upload at least 2 contractor bid documents to compare (PDF, DOC, or DOCX).\n          </p>\n\n          <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6\">\n            <div className=\"flex gap-3\">\n              <Info className=\"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5\" />\n              <div>\n                <p className=\"text-sm font-medium text-amber-800\">One-Time Analysis</p>\n                <p className=\"text-sm text-amber-700 mt-1\">\n                  Upload all the bids you want to compare before clicking Analyze. All bids will be analyzed together.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {analysisError && (\n            <div className=\"bg-red-50 border border-red-200 rounded-xl p-4 mb-6\">\n              <div className=\"flex gap-3\">\n                <AlertCircle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n                <div>\n                  <p className=\"text-sm font-medium text-red-800\">Error</p>\n                  <p className=\"text-sm text-red-700 mt-1\">{analysisError}</p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n            multiple\n            onChange={handleFileSelect}\n            className=\"hidden\"\n          />\n\n          <div\n            onDragEnter={handleDrag}\n            onDragLeave={handleDrag}\n            onDragOver={handleDrag}\n            onDrop={handleDrop}\n            onClick={() => fileInputRef.current?.click()}\n            className={`\n              border-2 border-dashed rounded-xl p-5 text-center transition-colors cursor-pointer\n              ${dragActive ? 'border-switch-green-500 bg-switch-green-50' : 'border-gray-300 hover:border-gray-400'}\n            `}\n          >\n            <div className=\"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3\">\n              <FileText className=\"w-5 h-5 text-gray-400\" />\n            </div>\n            <p className=\"text-gray-600 mb-1.5 text-sm\">Drag and drop bid documents here</p>\n            <p className=\"text-sm text-gray-400 mb-3\">or</p>\n            <button\n              type=\"button\"\n              className=\"btn btn-secondary text-sm\"\n              onClick={(e) => {\n                e.stopPropagation();\n                fileInputRef.current?.click();\n              }}\n            >\n              Browse Files\n            </button>\n            <p className=\"text-xs text-gray-400 mt-3\">\n              Supported formats: PDF, DOC, DOCX (max 25MB each)\n            </p>\n          </div>\n\n          {uploadedPdfs.length > 0 && (\n            <div className=\"mt-6 space-y-3\">\n              <h3 className=\"text-sm font-medium text-gray-700\">Uploaded Files ({uploadedPdfs.length})</h3>\n              {uploadedPdfs.map((pdf) => (\n                <div\n                  key={pdf.id}\n                  className={`flex items-center justify-between p-4 rounded-lg ${\n                    pdf.status === 'error' ? 'bg-red-50' : 'bg-gray-50'\n                  }`}\n                >\n                  <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                    <FileText className=\"w-5 h-5 text-gray-400 flex-shrink-0\" />\n                    <div className=\"min-w-0 flex-1\">\n                      <p className=\"font-medium text-gray-900 truncate\">{pdf.file.name}</p>\n                      <p className=\"text-sm text-gray-500\">\n                        {formatFileSize(pdf.file.size)}\n                        {pdf.error && <span className=\"text-red-600 ml-2\">{pdf.error}</span>}\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-3\">\n                    {getStatusIcon(pdf.status)}\n                    <button onClick={() => removeFile(pdf.id)} className=\"p-1 hover:bg-gray-200 rounded\">\n                      <X className=\"w-4 h-4 text-gray-500\" />\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          <button\n            type=\"button\"\n            onClick={() => fileInputRef.current?.click()}\n            className=\"btn btn-secondary w-full mt-4 flex items-center justify-center gap-2\"\n          >\n            <Plus className=\"w-4 h-4\" />\n            Add Another Bid\n          </button>\n\n          {uploadedPdfs.filter(p => p.status !== 'error').length < 2 && (\n            <div className=\"mt-4 flex items-start gap-2 text-amber-600 bg-amber-50 rounded-lg p-3\">\n              <AlertCircle className=\"w-5 h-5 flex-shrink-0 mt-0.5\" />\n              <p className=\"text-sm\">\n                {uploadedPdfs.length === 0\n                  ? 'Upload your first bid to get started.'\n                  : `Upload ${Math.max(0, 2 - uploadedPdfs.filter(p => p.status !== 'error').length)} more bid${2 - uploadedPdfs.filter(p => p.status !== 'error').length > 1 ? 's' : ''} to continue.`}\n              </p>\n            </div>\n          )}\n\n          <div className=\"mt-8 pt-6 border-t border-gray-100\">\n            <button\n              type=\"button\"\n              onClick={() => setShowPriorities(!showPriorities)}\n              className=\"w-full flex items-center justify-between text-left p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\"\n            >\n              <div>\n                <h3 className=\"font-medium text-gray-900\">What Matters Most to You?</h3>\n                <p className=\"text-sm text-gray-500\">Set your priorities for the comparison (optional)</p>\n              </div>\n              <svg className={`w-5 h-5 text-gray-400 transition-transform ${showPriorities ? 'rotate-180' : ''}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n              </svg>\n            </button>\n\n            {showPriorities && (\n              <div className=\"mt-4 space-y-6 px-1\">\n                <PrioritySlider\n                  label=\"Upfront Cost\"\n                  value={priorities.price}\n                  onChange={(v) => setPriorities(p => ({ ...p, price: v }))}\n                  description=\"How important is getting the lowest price?\"\n                />\n                <PrioritySlider\n                  label=\"Energy Efficiency / Long-term Savings\"\n                  value={priorities.efficiency}\n                  onChange={(v) => setPriorities(p => ({ ...p, efficiency: v }))}\n                  description=\"Higher efficiency means lower utility bills over time\"\n                />\n                <PrioritySlider\n                  label=\"Warranty Length\"\n                  value={priorities.warranty}\n                  onChange={(v) => setPriorities(p => ({ ...p, warranty: v }))}\n                  description=\"Longer warranties provide peace of mind\"\n                />\n                <PrioritySlider\n                  label=\"Contractor Reputation\"\n                  value={priorities.reputation}\n                  onChange={(v) => setPriorities(p => ({ ...p, reputation: v }))}\n                  description=\"Experience, reviews, and certifications\"\n                />\n                <PrioritySlider\n                  label=\"Installation Timeline\"\n                  value={priorities.timeline}\n                  onChange={(v) => setPriorities(p => ({ ...p, timeline: v }))}\n                  description=\"How quickly can they complete the work?\"\n                />\n              </div>\n            )}\n          </div>\n\n          <div className=\"mt-4\">\n            <button\n              type=\"button\"\n              onClick={() => setShowProjectDetails(!showProjectDetails)}\n              className=\"w-full flex items-center justify-between text-left p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\"\n            >\n              <div>\n                <h3 className=\"font-medium text-gray-900\">Tell Us About Your Project</h3>\n                <p className=\"text-sm text-gray-500\">Share details for better recommendations (optional)</p>\n              </div>\n              <svg className={`w-5 h-5 text-gray-400 transition-transform ${showProjectDetails ? 'rotate-180' : ''}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n              </svg>\n            </button>\n\n            {showProjectDetails && (\n              <div className=\"mt-4 px-1\">\n                <textarea\n                  value={projectDetails}\n                  onChange={(e) => setProjectDetails(e.target.value)}\n                  placeholder=\"For example: My home is a 1950s ranch with poor insulation. I'm looking for a contractor who is patient with explaining technical details...\"\n                  rows={4}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent text-sm resize-none\"\n                />\n              </div>\n            )}\n          </div>\n\n          <div className=\"mt-6 bg-gray-50 rounded-xl border border-gray-200 p-5\">\n            <label className=\"flex items-start gap-3 cursor-pointer group\">\n              <div className=\"pt-0.5\">\n                <input\n                  type=\"checkbox\"\n                  checked={dataSharingConsent}\n                  onChange={(e) => setDataSharingConsent(e.target.checked)}\n                  className=\"w-5 h-5 rounded border-gray-300 text-switch-green-600 focus:ring-switch-green-500 focus:ring-offset-0 cursor-pointer\"\n                />\n              </div>\n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <Users className=\"w-4 h-4 text-switch-green-600\" />\n                  <span className=\"font-medium text-gray-900\">\n                    Help other homeowners by sharing anonymized bid data\n                  </span>\n                </div>\n                <p className=\"text-sm text-gray-600 leading-relaxed\">\n                  Your pricing data helps others understand fair market rates.\n                  All personal and contractor details are removed.\n                </p>\n                <button\n                  type=\"button\"\n                  onClick={(e) => {\n                    e.preventDefault();\n                    setShowPrivacyDetails(!showPrivacyDetails);\n                  }}\n                  className=\"text-sm text-switch-green-600 hover:text-switch-green-700 mt-2 flex items-center gap-1\"\n                >\n                  <Shield className=\"w-3.5 h-3.5\" />\n                  {showPrivacyDetails ? 'Hide privacy details' : 'What data is shared?'}\n                </button>\n\n                {showPrivacyDetails && (\n                  <div className=\"mt-3 p-4 bg-white rounded-lg border border-gray-200 text-sm text-gray-600\">\n                    <p className=\"font-medium text-gray-900 mb-2\">Data that IS shared (anonymized):</p>\n                    <ul className=\"list-disc list-inside space-y-1 mb-4\">\n                      <li>Bid amounts and pricing breakdowns</li>\n                      <li>Equipment types, efficiency ratings, and specifications</li>\n                      <li>General location (ZIP code area only)</li>\n                    </ul>\n                    <p className=\"font-medium text-gray-900 mb-2\">Data that is NEVER shared:</p>\n                    <ul className=\"list-disc list-inside space-y-1\">\n                      <li>Your name, email, or contact information</li>\n                      <li>Contractor names or contact details</li>\n                      <li>Original PDF documents</li>\n                    </ul>\n                  </div>\n                )}\n              </div>\n            </label>\n          </div>\n\n          <div className=\"mt-8 pt-6 border-t border-gray-100\">\n            <div className=\"mb-4\">\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Email Address\n              </label>\n              <p className=\"text-xs text-gray-500 mb-2\">\n                Used to retrieve your analysis later and notify you when processing is complete\n              </p>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                <input\n                  id=\"email\"\n                  type=\"email\"\n                  value={notificationEmail}\n                  onChange={(e) => setNotificationEmail(e.target.value)}\n                  placeholder=\"you@example.com\"\n                  className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent\"\n                />\n              </div>\n            </div>\n\n            <button\n              onClick={handleAnalyze}\n              disabled={!canContinue || !isEmailValid}\n              className=\"btn btn-primary w-full flex items-center justify-center gap-2 py-3\"\n            >\n              Analyze My Bids\n              <ArrowRight className=\"w-4 h-4\" />\n            </button>\n\n            {(!canContinue || !isEmailValid) && (\n              <p className=\"text-center text-sm text-gray-500 mt-3\">\n                {!canContinue\n                  ? 'Upload at least 2 bids to continue'\n                  : 'Enter a valid email address to continue'}\n              </p>\n            )}\n          </div>\n        </div>\n\n        <p className=\"text-xs text-gray-400 text-center mt-6 pb-4\">\n          Powered by TheSwitchIsOn.org\n        </p>\n      </div>\n    </div>\n  );\n}\n","import { createContext, useContext, useState, useEffect, useCallback, ReactNode } from 'react';\nimport type { Project, ContractorBid, BidEquipment, ProjectRequirements, BidQuestion } from '../lib/types';\nimport {\n  createProject,\n  getProjectsByUser,\n  getBidsByProject,\n  getEquipmentByBid,\n  getProjectRequirements,\n} from '../lib/database/bidsmartService';\nimport { supabase } from '../lib/supabaseClient';\n\nexport type Phase = 1 | 2 | 3 | 4;\nexport type PhaseStatus = 'locked' | 'active' | 'completed';\n\nconst PHASE_LABELS: Record<Phase, string> = {\n  1: 'GATHER',\n  2: 'COMPARE',\n  3: 'DECIDE',\n  4: 'VERIFY',\n};\n\ninterface BidWithEquipment {\n  bid: ContractorBid;\n  equipment: BidEquipment[];\n}\n\ninterface PhaseState {\n  currentPhase: Phase;\n  phaseStatus: Record<Phase, PhaseStatus>;\n  projectId: string | null;\n  project: Project | null;\n  bids: BidWithEquipment[];\n  requirements: ProjectRequirements | null;\n  questions: BidQuestion[];\n  loading: boolean;\n  error: string | null;\n  isDemoMode: boolean;\n}\n\ninterface PhaseContextValue extends PhaseState {\n  goToPhase: (phase: Phase) => void;\n  completePhase: (phase: Phase) => void;\n  canAccessPhase: (phase: Phase) => boolean;\n  refreshBids: () => Promise<void>;\n  refreshRequirements: () => Promise<void>;\n  refreshQuestions: () => Promise<void>;\n  getPhaseLabel: (phase: Phase) => string;\n  ensureProjectExists: () => Promise<string>;\n}\n\nconst PhaseContext = createContext<PhaseContextValue | null>(null);\n\nconst STORAGE_KEY = 'bidsmart_phase_state';\n\ninterface StoredPhaseState {\n  currentPhase: Phase;\n  projectId: string | null;\n  phaseStatus: Record<Phase, PhaseStatus>;\n}\n\nfunction loadStoredState(): StoredPhaseState | null {\n  try {\n    const stored = localStorage.getItem(STORAGE_KEY);\n    if (stored) {\n      return JSON.parse(stored);\n    }\n  } catch {\n  }\n  return null;\n}\n\nfunction saveStoredState(state: StoredPhaseState): void {\n  try {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(state));\n  } catch {\n  }\n}\n\ninterface PhaseProviderProps {\n  children: ReactNode;\n  userId: string;\n  initialProjectId?: string;\n}\n\nexport function PhaseProvider({ children, userId, initialProjectId }: PhaseProviderProps) {\n  const [state, setState] = useState<PhaseState>({\n    currentPhase: 1,\n    phaseStatus: {\n      1: 'active',\n      2: 'locked',\n      3: 'locked',\n      4: 'locked',\n    },\n    projectId: null,\n    project: null,\n    bids: [],\n    requirements: null,\n    questions: [],\n    loading: true,\n    error: null,\n    isDemoMode: false,\n  });\n\n  useEffect(() => {\n    async function initializeProject() {\n      try {\n        const storedState = loadStoredState();\n        const existingProjects = await getProjectsByUser(userId);\n\n        let projectId: string | null = null;\n        let project: Project | null = null;\n\n        if (initialProjectId && initialProjectId !== 'new') {\n          const foundProject = existingProjects.find(p => p.id === initialProjectId);\n          if (foundProject) {\n            projectId = initialProjectId;\n            project = foundProject;\n          } else {\n            throw new Error('Project not found');\n          }\n        } else if (initialProjectId === 'new') {\n          projectId = null;\n          project = null;\n        } else if (storedState?.projectId && existingProjects.find(p => p.id === storedState.projectId)) {\n          projectId = storedState.projectId;\n          project = existingProjects.find(p => p.id === storedState.projectId)!;\n        } else if (existingProjects.length > 0) {\n          project = existingProjects[0];\n          projectId = project.id;\n        }\n\n        let bidsWithEquipment: BidWithEquipment[] = [];\n        let requirements: ProjectRequirements | null = null;\n        let questions: BidQuestion[] = [];\n\n        if (projectId) {\n          const bids = await getBidsByProject(projectId);\n          bidsWithEquipment = await Promise.all(\n            bids.map(async (bid) => ({\n              bid,\n              equipment: await getEquipmentByBid(bid.id),\n            }))\n          );\n\n          requirements = await getProjectRequirements(projectId);\n\n          const { data: questionsData } = await supabase\n            .from('bid_questions')\n            .select('*')\n            .in('bid_id', bids.map(b => b.id))\n            .order('display_order', { ascending: true });\n\n          questions = questionsData || [];\n        }\n\n        let currentPhase: Phase = 1;\n        let phaseStatus: Record<Phase, PhaseStatus> = {\n          1: 'active',\n          2: 'locked',\n          3: 'locked',\n          4: 'locked',\n        };\n\n        if (storedState && storedState.projectId === projectId) {\n          currentPhase = storedState.currentPhase;\n          phaseStatus = storedState.phaseStatus;\n        } else if (bidsWithEquipment.length >= 2 && requirements?.completed_at) {\n          phaseStatus[1] = 'completed';\n          phaseStatus[2] = 'active';\n          phaseStatus[3] = 'active';\n          phaseStatus[4] = 'active';\n        }\n\n        setState({\n          currentPhase,\n          phaseStatus,\n          projectId,\n          project,\n          bids: bidsWithEquipment,\n          requirements,\n          questions: questions || [],\n          loading: false,\n          error: null,\n          isDemoMode: project?.is_public_demo ?? false,\n        });\n\n        if (projectId) {\n          saveStoredState({ currentPhase, projectId, phaseStatus });\n        }\n      } catch (err) {\n        console.error('Failed to initialize project:', err);\n        setState(prev => ({\n          ...prev,\n          loading: false,\n          error: 'Failed to load project data',\n        }));\n      }\n    }\n\n    initializeProject();\n  }, [userId, initialProjectId]);\n\n  const canAccessPhase = useCallback((phase: Phase): boolean => {\n    return state.phaseStatus[phase] !== 'locked';\n  }, [state.phaseStatus]);\n\n  const goToPhase = useCallback((phase: Phase) => {\n    if (!canAccessPhase(phase)) return;\n\n    setState(prev => {\n      const newState = { ...prev, currentPhase: phase };\n      saveStoredState({\n        currentPhase: phase,\n        projectId: prev.projectId,\n        phaseStatus: prev.phaseStatus,\n      });\n      return newState;\n    });\n  }, [canAccessPhase]);\n\n  const completePhase = useCallback((phase: Phase) => {\n    setState(prev => {\n      const newPhaseStatus = { ...prev.phaseStatus };\n      newPhaseStatus[phase] = 'completed';\n\n      if (phase === 1) {\n        newPhaseStatus[2] = 'active';\n        newPhaseStatus[3] = 'active';\n        newPhaseStatus[4] = 'active';\n      } else {\n        const nextPhase = (phase + 1) as Phase;\n        if (nextPhase <= 4 && newPhaseStatus[nextPhase] === 'locked') {\n          newPhaseStatus[nextPhase] = 'active';\n        }\n      }\n\n      const nextPhase = (phase + 1) as Phase;\n      const newCurrentPhase = nextPhase <= 4 ? nextPhase : phase;\n\n      saveStoredState({\n        currentPhase: newCurrentPhase,\n        projectId: prev.projectId,\n        phaseStatus: newPhaseStatus,\n      });\n\n      return {\n        ...prev,\n        currentPhase: newCurrentPhase,\n        phaseStatus: newPhaseStatus,\n      };\n    });\n  }, []);\n\n  const refreshBids = useCallback(async () => {\n    if (!state.projectId) return;\n\n    const bids = await getBidsByProject(state.projectId);\n    const bidsWithEquipment = await Promise.all(\n      bids.map(async (bid) => ({\n        bid,\n        equipment: await getEquipmentByBid(bid.id),\n      }))\n    );\n\n    setState(prev => ({ ...prev, bids: bidsWithEquipment }));\n  }, [state.projectId]);\n\n  const refreshRequirements = useCallback(async () => {\n    if (!state.projectId) return;\n\n    const requirements = await getProjectRequirements(state.projectId);\n    setState(prev => ({ ...prev, requirements }));\n  }, [state.projectId]);\n\n  const refreshQuestions = useCallback(async () => {\n    if (!state.projectId || state.bids.length === 0) return;\n\n    const { data: questions } = await supabase\n      .from('bid_questions')\n      .select('*')\n      .in('bid_id', state.bids.map(b => b.bid.id))\n      .order('display_order', { ascending: true });\n\n    setState(prev => ({ ...prev, questions: questions || [] }));\n  }, [state.projectId, state.bids]);\n\n  const getPhaseLabel = useCallback((phase: Phase): string => {\n    return PHASE_LABELS[phase];\n  }, []);\n\n  const ensureProjectExists = useCallback(async (): Promise<string> => {\n    if (state.projectId) {\n      return state.projectId;\n    }\n\n    const project = await createProject(userId, {\n      project_name: 'My Heat Pump Project',\n      status: 'collecting_bids',\n    });\n\n    setState(prev => ({\n      ...prev,\n      projectId: project.id,\n      project,\n    }));\n\n    saveStoredState({\n      currentPhase: state.currentPhase,\n      projectId: project.id,\n      phaseStatus: state.phaseStatus,\n    });\n\n    return project.id;\n  }, [state.projectId, state.currentPhase, state.phaseStatus, userId]);\n\n  const value: PhaseContextValue = {\n    ...state,\n    goToPhase,\n    completePhase,\n    canAccessPhase,\n    refreshBids,\n    refreshRequirements,\n    refreshQuestions,\n    getPhaseLabel,\n    ensureProjectExists,\n  };\n\n  return (\n    <PhaseContext.Provider value={value}>\n      {children}\n    </PhaseContext.Provider>\n  );\n}\n\nexport function usePhase(): PhaseContextValue {\n  const context = useContext(PhaseContext);\n  if (!context) {\n    throw new Error('usePhase must be used within a PhaseProvider');\n  }\n  return context;\n}\n","import { ReactNode } from 'react';\nimport { Check, ChevronRight } from 'lucide-react';\nimport { usePhase, Phase } from '../context/PhaseContext';\nimport SwitchLogo from '../assets/switchlogo.svg';\n\ninterface PhaseLayoutProps {\n  children: ReactNode;\n  onNavigateHome?: () => void;\n  projectName?: string;\n  isDemoMode?: boolean;\n}\n\nconst PHASES: { phase: Phase; label: string }[] = [\n  { phase: 1, label: 'GATHER' },\n  { phase: 2, label: 'COMPARE' },\n  { phase: 3, label: 'DECIDE' },\n  { phase: 4, label: 'VERIFY' },\n];\n\nexport function PhaseLayout({ children, onNavigateHome, projectName, isDemoMode = false }: PhaseLayoutProps) {\n  const { currentPhase, phaseStatus, goToPhase, canAccessPhase } = usePhase();\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col\">\n      <div className=\"bg-white border-b border-gray-200 sticky top-0 z-10\">\n        <div className=\"max-w-4xl mx-auto px-4 py-4\">\n          {onNavigateHome && (\n            <div className=\"flex items-center gap-2 mb-4 pb-3 border-b border-gray-100\">\n              <button\n                onClick={onNavigateHome}\n                className=\"flex items-center gap-2 text-gray-600 hover:text-switch-green-600 transition-colors group min-h-[44px] -my-2 py-2\"\n                aria-label=\"Return to Bid Compare Dashboard\"\n              >\n                <img src={SwitchLogo} alt=\"Switch Is On\" className=\"w-8 h-8\" />\n                <span className=\"text-sm font-medium hidden sm:inline\">Dashboard</span>\n              </button>\n              <ChevronRight className=\"w-4 h-4 text-gray-300\" />\n              <span className=\"text-sm font-medium text-gray-900 truncate max-w-[200px] sm:max-w-none\">\n                {projectName || 'Current Project'}\n              </span>\n              {isDemoMode && (\n                <span className=\"text-xs px-2 py-0.5 rounded-full font-medium bg-teal-100 text-teal-700 ml-2 flex-shrink-0\">\n                  Demo\n                </span>\n              )}\n            </div>\n          )}\n          <div className=\"flex items-center justify-between\">\n            {PHASES.map((item, index) => {\n              const status = phaseStatus[item.phase];\n              const isActive = currentPhase === item.phase;\n              const isClickable = canAccessPhase(item.phase);\n\n              return (\n                <div key={item.phase} className=\"flex items-center flex-1\">\n                  <button\n                    onClick={() => isClickable && goToPhase(item.phase)}\n                    disabled={!isClickable}\n                    className={`\n                      flex items-center gap-2 transition-all min-w-0\n                      ${isClickable ? 'cursor-pointer' : 'cursor-not-allowed'}\n                      ${isActive ? 'opacity-100' : isClickable ? 'opacity-70 hover:opacity-100' : 'opacity-40'}\n                    `}\n                    aria-label={`${item.label} (Phase ${item.phase})`}\n                  >\n                    <div\n                      className={`\n                        w-10 h-10 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-sm font-semibold transition-colors flex-shrink-0\n                        ${status === 'completed' ? 'bg-switch-green-600 text-white' : ''}\n                        ${status === 'active' && isActive ? 'bg-switch-green-600 text-white' : ''}\n                        ${status === 'active' && !isActive ? 'bg-switch-green-100 text-switch-green-700 border-2 border-switch-green-600' : ''}\n                        ${status === 'locked' ? 'bg-gray-200 text-gray-400' : ''}\n                      `}\n                    >\n                      {status === 'completed' ? (\n                        <Check className=\"w-4 h-4\" />\n                      ) : (\n                        item.phase\n                      )}\n                    </div>\n                    <span\n                      className={`\n                        text-xs sm:text-sm font-medium hidden md:block truncate\n                        ${isActive ? 'text-gray-900' : 'text-gray-500'}\n                      `}\n                    >\n                      {item.label}\n                    </span>\n                  </button>\n\n                  {index < PHASES.length - 1 && (\n                    <div className=\"flex-1 mx-2 sm:mx-3 min-w-[12px]\">\n                      <div\n                        className={`\n                          h-0.5 transition-colors\n                          ${phaseStatus[(index + 2) as Phase] !== 'locked' || phaseStatus[(index + 1) as Phase] === 'completed'\n                            ? 'bg-switch-green-600'\n                            : 'bg-gray-200'\n                          }\n                        `}\n                      />\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n\n          <div className=\"mt-3\">\n            <div className=\"h-1 bg-gray-100 rounded-full overflow-hidden\">\n              <div\n                className=\"h-full bg-switch-green-600 transition-all duration-500\"\n                style={{\n                  width: `${((currentPhase - 1) / 3) * 100 + (phaseStatus[currentPhase] === 'completed' ? 25 : 0)}%`,\n                }}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <main className=\"flex-1 max-w-4xl w-full mx-auto px-4 py-6\">\n        {children}\n      </main>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { Mail, Clock, Upload, Zap, CheckCircle2, Loader2, Bell, BellOff, FlaskConical } from 'lucide-react';\n\ninterface AnalysisSubmissionInterstitialProps {\n  email: string;\n  onEmailChange: (email: string) => void;\n  notifyOnCompletion: boolean;\n  onNotifyChange: (notify: boolean) => void;\n  enableSound: boolean;\n  onEnableSoundChange: (enable: boolean) => void;\n  onRequestNotificationPermission: () => Promise<string>;\n  notificationPermission: string;\n  bidCount: number;\n  onSaveAndContinue: () => void;\n  isSaving: boolean;\n}\n\nexport function AnalysisSubmissionInterstitial({\n  email,\n  onEmailChange,\n  notifyOnCompletion,\n  onNotifyChange,\n  enableSound,\n  onEnableSoundChange,\n  onRequestNotificationPermission,\n  notificationPermission,\n  bidCount,\n  onSaveAndContinue,\n  isSaving,\n}: AnalysisSubmissionInterstitialProps) {\n  const [emailError, setEmailError] = useState('');\n  const [showPermissionInfo, setShowPermissionInfo] = useState(false);\n\n  const validateEmail = (value: string) => {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!value.trim()) {\n      setEmailError('Email is required');\n      return false;\n    }\n    if (!emailRegex.test(value.trim())) {\n      setEmailError('Please enter a valid email address');\n      return false;\n    }\n    setEmailError('');\n    return true;\n  };\n\n  useEffect(() => {\n    if (email) {\n      validateEmail(email);\n    }\n  }, [email]);\n\n  const handleEmailChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    onEmailChange(value);\n    if (value) {\n      validateEmail(value);\n    }\n  };\n\n  const handleContinue = () => {\n    if (validateEmail(email)) {\n      onSaveAndContinue();\n    }\n  };\n\n  const isValid = email.trim() && !emailError;\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-switch-green-50 via-white to-blue-50 flex items-center justify-center p-4\">\n      <div className=\"max-w-2xl w-full\">\n        {/* Main Card */}\n        <div className=\"bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden\">\n          {/* Header */}\n          <div className=\"bg-gradient-to-r from-switch-green-600 to-switch-green-700 px-8 py-6 text-white\">\n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center\">\n                <Zap className=\"w-6 h-6\" />\n              </div>\n              <div>\n                <h1 className=\"text-2xl font-bold\">Starting Your Analysis</h1>\n                <p className=\"text-switch-green-100 text-sm\">\n                  {bidCount} bid{bidCount !== 1 ? 's' : ''} ready to compare\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Content */}\n          <div className=\"px-8 py-6 space-y-6\">\n            {/* Beta Timing Notice */}\n            <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-4\">\n              <div className=\"flex items-start gap-3\">\n                <FlaskConical className=\"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5\" />\n                <div className=\"flex-1\">\n                  <p className=\"text-sm font-semibold text-amber-900 mb-1\">\n                    Beta Processing Time\n                  </p>\n                  <p className=\"text-sm text-amber-800\">\n                    Analysis typically takes <strong>10-30 minutes</strong> during our beta phase. \n                    You can leave this page and we'll email you when ready.\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* What Happens Next */}\n            <div>\n              <h3 className=\"text-sm font-semibold text-gray-900 mb-3\">What happens next:</h3>\n              <div className=\"space-y-3\">\n                <div className=\"flex items-start gap-3\">\n                  <div className=\"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5\">\n                    <Upload className=\"w-3.5 h-3.5 text-blue-600\" />\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium text-gray-900\">Upload & Secure</p>\n                    <p className=\"text-xs text-gray-600\">Your PDFs are uploaded securely to our servers</p>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-3\">\n                  <div className=\"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5\">\n                    <Zap className=\"w-3.5 h-3.5 text-purple-600\" />\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium text-gray-900\">AI Extraction</p>\n                    <p className=\"text-xs text-gray-600\">Our AI extracts pricing, equipment, and contractor details</p>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-3\">\n                  <div className=\"w-6 h-6 bg-switch-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5\">\n                    <CheckCircle2 className=\"w-3.5 h-3.5 text-switch-green-600\" />\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium text-gray-900\">Results Ready</p>\n                    <p className=\"text-xs text-gray-600\">Compare bids side-by-side with personalized insights</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Email Input */}\n            <div>\n              <label htmlFor=\"notification-email\" className=\"block text-sm font-semibold text-gray-900 mb-2\">\n                Email Address\n              </label>\n              <p className=\"text-xs text-gray-600 mb-3\">\n                We'll notify you when your analysis is complete\n              </p>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                <input\n                  id=\"notification-email\"\n                  type=\"email\"\n                  value={email}\n                  onChange={handleEmailChange}\n                  placeholder=\"you@example.com\"\n                  className={`w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent ${\n                    emailError ? 'border-red-300 bg-red-50' : 'border-gray-300'\n                  }`}\n                  disabled={isSaving}\n                />\n              </div>\n              {emailError && (\n                <p className=\"text-sm text-red-600 mt-1\">{emailError}</p>\n              )}\n            </div>\n\n            {/* Notification Preferences */}\n            <div className=\"space-y-3 bg-gray-50 rounded-xl p-4\">\n              <h3 className=\"text-sm font-semibold text-gray-900\">Notification Preferences</h3>\n              \n              {/* Email Notification Toggle */}\n              <label className=\"flex items-start gap-3 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={notifyOnCompletion}\n                  onChange={(e) => onNotifyChange(e.target.checked)}\n                  className=\"w-5 h-5 mt-0.5 rounded border-gray-300 text-switch-green-600 focus:ring-switch-green-500\"\n                  disabled={isSaving}\n                />\n                <div className=\"flex-1\">\n                  <span className=\"text-sm font-medium text-gray-900\">\n                    Email me when analysis is complete\n                  </span>\n                  <p className=\"text-xs text-gray-600 mt-0.5\">\n                    Recommended - you can close this page and return later\n                  </p>\n                </div>\n              </label>\n\n              {/* Sound Notification Toggle */}\n              <label className=\"flex items-start gap-3 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={enableSound}\n                  onChange={(e) => onEnableSoundChange(e.target.checked)}\n                  className=\"w-5 h-5 mt-0.5 rounded border-gray-300 text-switch-green-600 focus:ring-switch-green-500\"\n                  disabled={isSaving}\n                />\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-2\">\n                    {enableSound ? (\n                      <Bell className=\"w-4 h-4 text-gray-600\" />\n                    ) : (\n                      <BellOff className=\"w-4 h-4 text-gray-400\" />\n                    )}\n                    <span className=\"text-sm font-medium text-gray-900\">\n                      Play sound when complete\n                    </span>\n                  </div>\n                  <p className=\"text-xs text-gray-600 mt-0.5\">\n                    One-time alert beep (only if you stay on this page)\n                  </p>\n                </div>\n              </label>\n\n              {/* Browser Notification Permission */}\n              {notificationPermission !== 'granted' && notificationPermission !== 'denied' && (\n                <div className=\"pt-2 border-t border-gray-200\">\n                  <button\n                    onClick={async () => {\n                      const result = await onRequestNotificationPermission();\n                      if (result === 'granted') {\n                        setShowPermissionInfo(false);\n                      }\n                    }}\n                    className=\"text-sm text-switch-green-600 hover:text-switch-green-700 font-medium flex items-center gap-2\"\n                    disabled={isSaving}\n                  >\n                    <Bell className=\"w-4 h-4\" />\n                    Enable desktop notifications (optional)\n                  </button>\n                  {showPermissionInfo && (\n                    <p className=\"text-xs text-gray-600 mt-2\">\n                      Desktop notifications work even when this tab is in the background\n                    </p>\n                  )}\n                </div>\n              )}\n\n              {notificationPermission === 'granted' && (\n                <div className=\"flex items-center gap-2 text-xs text-switch-green-700 bg-switch-green-50 rounded px-3 py-2\">\n                  <CheckCircle2 className=\"w-4 h-4\" />\n                  Desktop notifications enabled\n                </div>\n              )}\n            </div>\n\n            {/* Info Box */}\n            <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4\">\n              <div className=\"flex items-start gap-3\">\n                <Clock className=\"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5\" />\n                <div>\n                  <p className=\"text-sm font-medium text-blue-900 mb-1\">\n                    You can leave this page\n                  </p>\n                  <p className=\"text-sm text-blue-800\">\n                    Your analysis will continue in the background. Use your email address to find your results on the home page when you return.\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Footer */}\n          <div className=\"px-8 py-6 bg-gray-50 border-t border-gray-200\">\n            <button\n              onClick={handleContinue}\n              disabled={!isValid || isSaving}\n              className=\"w-full btn btn-primary py-4 text-base font-semibold\"\n            >\n              {isSaving ? (\n                <>\n                  <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  Starting Analysis...\n                </>\n              ) : (\n                <>\n                  <Zap className=\"w-5 h-5\" />\n                  Start Analysis\n                </>\n              )}\n            </button>\n            <p className=\"text-xs text-center text-gray-500 mt-3\">\n              By continuing, your bids will be uploaded and analyzed. This typically takes 10-30 minutes.\n            </p>\n          </div>\n        </div>\n\n        {/* Additional Info */}\n        <div className=\"text-center mt-6\">\n          <p className=\"text-sm text-gray-600\">\n            Questions? Your data is secure and private. \n            <button className=\"text-switch-green-600 hover:text-switch-green-700 ml-1 underline\">\n              Learn more\n            </button>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useCallback, useRef, useState } from 'react';\n\ninterface NotificationOptions {\n  title: string;\n  body: string;\n  playSound?: boolean;\n  showBrowserNotification?: boolean;\n}\n\nexport function useAnalysisNotification() {\n  const audioRef = useRef<HTMLAudioElement | null>(null);\n  const lastNotifiedProjectRef = useRef<string | null>(null);\n  const [soundEnabled, setSoundEnabled] = useState(true);\n\n  // Initialize audio element with a simple beep sound\n  const initAudio = useCallback(() => {\n    if (!audioRef.current) {\n      // Use a simple notification beep sound (data URL)\n      // This is a short, pleasant notification tone\n      const beepSound = 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIGGe77eeeTRAMUKfj8LZjHAY4ktfyzHksBSR3x/DdkEAKFF606+uoVRQKRp/g8r5sIQUrgs7y2Yk2CBhnu+3nnk0QDFCn4/C2YxwGOJLX8sx5LAUkd8fw3ZBBChRetevrqFUUCkaf4PK+bCEFK4LO8tmJNggYZ7vt555NEAxQp+PwtmMcBjiS1/LMeSwFJHfH8N2QQQoUXrXr66hVFApGn+DyvmwhBSuCzvLZiTYIGGe77eeeTRAMUKfj8LZjHAY4ktfyzHksBSR3x/DdkEEKFF616+uoVRQKRp/g8r5sIQUrgs7y2Yk2CBhnu+3nnk0QDFCn4/C2YxwGOJLX8sx5LAUkd8fw3ZBBChRetevrqFUUCkaf4PK+bCEFK4LO8tmJNggYZ7vt555NEAxQp+PwtmMcBjiS1/LMeSwFJHfH8N2QQQoUXrXr66hVFApGn+DyvmwhBSuCzvLZiTYIGGe77eeeTRAMUKfj8LZjHAY4ktfyzHksBSR3x/DdkEEKFF616+uoVRQKRp/g8r5sIQUrgs7y2Yk2CBhnu+3nnk0QDFCn4/C2YxwGOJLX8sx5LAUkd8fw3ZBBChRetevrqFUUCkaf4PK+bCEFK4LO8tmJNggYZ7vt555NEAxQp+PwtmMcBjiS1/LMeSwFJHfH8N2QQQoUXrXr66hVFApGn+DyvmwhBSuCzvLZiTYIGGe77eeeTRAMUKfj8LZjHAY4ktfyzHksBSR3x/DdkEEKFF616+uoVRQKRp/g8r5s';\n      audioRef.current = new Audio(beepSound);\n      audioRef.current.volume = 0.6; // 60% volume\n    }\n  }, []);\n\n  // Play sound (with fallback)\n  const playSound = useCallback(async () => {\n    if (!soundEnabled) return false;\n    \n    initAudio();\n    try {\n      await audioRef.current?.play();\n      return true;\n    } catch (err) {\n      console.log('Audio playback blocked:', err);\n      return false;\n    }\n  }, [initAudio, soundEnabled]);\n\n  // Request browser notification permission\n  const requestPermission = useCallback(async () => {\n    if (!('Notification' in window)) {\n      return 'unsupported';\n    }\n    \n    if (Notification.permission === 'granted') {\n      return 'granted';\n    }\n    \n    if (Notification.permission === 'denied') {\n      return 'denied';\n    }\n    \n    const permission = await Notification.requestPermission();\n    return permission;\n  }, []);\n\n  // Show browser notification\n  const showBrowserNotification = useCallback((title: string, body: string) => {\n    if (Notification.permission === 'granted') {\n      const notification = new Notification(title, {\n        body,\n        icon: '/favicon.svg',\n        badge: '/favicon.svg',\n        tag: 'analysis-complete',\n        requireInteraction: false,\n        silent: !soundEnabled, // Use system sound if enabled\n      });\n\n      // Auto-close after 10 seconds\n      setTimeout(() => notification.close(), 10000);\n\n      // Focus window when clicked\n      notification.onclick = () => {\n        window.focus();\n        notification.close();\n      };\n\n      return true;\n    }\n    return false;\n  }, [soundEnabled]);\n\n  // Main notification function (hybrid approach)\n  const notify = useCallback(async (\n    projectId: string,\n    options: NotificationOptions\n  ) => {\n    // Prevent duplicate notifications\n    if (lastNotifiedProjectRef.current === projectId) {\n      return;\n    }\n    lastNotifiedProjectRef.current = projectId;\n\n    const { \n      title, \n      body, \n      playSound: shouldPlaySound = true, \n      showBrowserNotification: shouldShowBrowser = true \n    } = options;\n\n    // 1. Try playing sound (if enabled)\n    if (shouldPlaySound && soundEnabled) {\n      await playSound();\n    }\n\n    // 2. Show browser notification if permission granted\n    if (shouldShowBrowser) {\n      showBrowserNotification(title, body);\n    }\n\n    // Note: Visual toast should be handled by the component\n  }, [playSound, showBrowserNotification, soundEnabled]);\n\n  // Reset notification tracking (for new analysis)\n  const reset = useCallback(() => {\n    lastNotifiedProjectRef.current = null;\n  }, []);\n\n  // Toggle sound on/off\n  const toggleSound = useCallback((enabled: boolean) => {\n    setSoundEnabled(enabled);\n  }, []);\n\n  return {\n    notify,\n    playSound,\n    requestPermission,\n    showBrowserNotification,\n    reset,\n    toggleSound,\n    soundEnabled,\n    isSupported: 'Notification' in window,\n    permission: typeof Notification !== 'undefined' ? Notification.permission : 'unsupported',\n  };\n}\n","import { CheckCircle2, X } from 'lucide-react';\nimport { useEffect, useState } from 'react';\n\ninterface NotificationToastProps {\n  show: boolean;\n  title: string;\n  message: string;\n  onClose: () => void;\n  autoClose?: number; // milliseconds\n}\n\nexport function NotificationToast({ \n  show, \n  title, \n  message, \n  onClose, \n  autoClose = 8000 \n}: NotificationToastProps) {\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    if (show) {\n      setIsVisible(true);\n      if (autoClose) {\n        const timer = setTimeout(() => {\n          setIsVisible(false);\n          setTimeout(onClose, 300); // Wait for animation\n        }, autoClose);\n        return () => clearTimeout(timer);\n      }\n    }\n  }, [show, autoClose, onClose]);\n\n  if (!show && !isVisible) return null;\n\n  return (\n    <div className={`\n      fixed top-4 right-4 z-50 max-w-sm w-full\n      transform transition-all duration-300 ease-out\n      ${isVisible ? 'translate-x-0 opacity-100' : 'translate-x-full opacity-0'}\n    `}>\n      <div className=\"bg-white rounded-xl shadow-lg border border-gray-200 p-4\">\n        <div className=\"flex items-start gap-3\">\n          <div className=\"w-10 h-10 bg-switch-green-100 rounded-full flex items-center justify-center flex-shrink-0\">\n            <CheckCircle2 className=\"w-6 h-6 text-switch-green-600\" />\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <h3 className=\"text-sm font-semibold text-gray-900\">{title}</h3>\n            <p className=\"text-sm text-gray-600 mt-1\">{message}</p>\n          </div>\n          <button\n            onClick={() => {\n              setIsVisible(false);\n              setTimeout(onClose, 300);\n            }}\n            className=\"p-1 hover:bg-gray-100 rounded flex-shrink-0\"\n            aria-label=\"Close notification\"\n          >\n            <X className=\"w-4 h-4 text-gray-500\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect, useRef, useCallback } from 'react';\nimport { Upload, FileText, CheckCircle2, Clock, AlertCircle, Plus, ArrowRight, Users, Shield, X, Loader2, Info, Mail, FlaskConical, Save } from 'lucide-react';\nimport { usePhase } from '../../context/PhaseContext';\nimport { useUser } from '../../hooks/useUser';\nimport { saveProjectRequirements, updateProjectDataSharingConsent, updateProject, validatePdfFile, updateProjectNotificationSettings } from '../../lib/database/bidsmartService';\nimport { startBatchAnalysisWithBase64, pollBatchExtractionStatus, type BatchExtractionStatus } from '../../lib/services/mindpalService';\nimport { AnalysisSubmissionInterstitial } from '../AnalysisSubmissionInterstitial';\nimport { useAnalysisNotification } from '../../hooks/useAnalysisNotification';\nimport { NotificationToast } from '../NotificationToast';\n\ninterface PrioritySliderProps {\n  label: string;\n  value: number;\n  onChange: (value: number) => void;\n  description: string;\n}\n\nfunction PrioritySlider({ label, value, onChange, description }: PrioritySliderProps) {\n  return (\n    <div className=\"space-y-2\">\n      <div className=\"flex items-center justify-between\">\n        <label className=\"text-sm font-medium text-gray-700\">{label}</label>\n        <span className=\"text-sm text-gray-500\">{value}/5</span>\n      </div>\n      <input\n        type=\"range\"\n        min=\"1\"\n        max=\"5\"\n        value={value}\n        onChange={(e) => onChange(parseInt(e.target.value))}\n        className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-switch-green-600\"\n      />\n      <p className=\"text-xs text-gray-500\">{description}</p>\n    </div>\n  );\n}\n\ninterface UploadedPdf {\n  id: string;\n  file: File;\n  pdfUploadId?: string;\n  status: 'pending' | 'uploading' | 'uploaded' | 'error';\n  progress: number;\n  error?: string;\n}\n\ntype AnalysisState = 'idle' | 'submitting' | 'uploading' | 'analyzing' | 'complete' | 'error' | 'timeout';\n\nexport function GatherPhase() {\n  const { projectId, project, bids, requirements, completePhase, refreshRequirements, refreshBids, ensureProjectExists } = usePhase();\n  const { user } = useUser();\n\n  const [priorities, setPriorities] = useState({\n    price: requirements?.priority_price ?? 3,\n    efficiency: requirements?.priority_efficiency ?? 3,\n    warranty: requirements?.priority_warranty ?? 3,\n    reputation: requirements?.priority_reputation ?? 3,\n    timeline: requirements?.priority_timeline ?? 3,\n  });\n\n  const [uploadedPdfs, setUploadedPdfs] = useState<UploadedPdf[]>([]);\n  const [analysisState, setAnalysisState] = useState<AnalysisState>('idle');\n  const [analysisProgress, setAnalysisProgress] = useState<BatchExtractionStatus | null>(null);\n  const [analysisError, setAnalysisError] = useState<string | null>(null);\n  const [analysisElapsedSeconds, setAnalysisElapsedSeconds] = useState(0);\n  const [dragActive, setDragActive] = useState(false);\n  const analysisTimerRef = useRef<ReturnType<typeof setInterval> | null>(null);\n  const [dataSharingConsent, setDataSharingConsent] = useState(project?.data_sharing_consent ?? false);\n  const [showPrivacyDetails, setShowPrivacyDetails] = useState(false);\n  const [projectDetails, setProjectDetails] = useState(project?.project_details ?? '');\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [notificationEmail, setNotificationEmail] = useState(project?.notification_email ?? '');\n  const [notifyOnCompletion, setNotifyOnCompletion] = useState(project?.notify_on_completion ?? true);\n  const [savingNotification, setSavingNotification] = useState(false);\n  const [notificationSaved, setNotificationSaved] = useState(false);\n  const [enableSound, setEnableSound] = useState(true);\n  const [showCompletionToast, setShowCompletionToast] = useState(false);\n  const { notify, requestPermission, permission, toggleSound } = useAnalysisNotification();\n\n  useEffect(() => {\n    if (requirements) {\n      setPriorities({\n        price: requirements.priority_price ?? 3,\n        efficiency: requirements.priority_efficiency ?? 3,\n        warranty: requirements.priority_warranty ?? 3,\n        reputation: requirements.priority_reputation ?? 3,\n        timeline: requirements.priority_timeline ?? 3,\n      });\n    }\n  }, [requirements]);\n\n  useEffect(() => {\n    if (project) {\n      setDataSharingConsent(project.data_sharing_consent ?? false);\n      setProjectDetails(project.project_details ?? '');\n      if (project.notification_email) {\n        setNotificationEmail(project.notification_email);\n      }\n      setNotifyOnCompletion(project.notify_on_completion ?? true);\n    }\n  }, [project]);\n\n  useEffect(() => {\n    if (user?.email && !notificationEmail) {\n      setNotificationEmail(user.email);\n    }\n  }, [user, notificationEmail]);\n\n  useEffect(() => {\n    if (analysisState === 'analyzing') {\n      setAnalysisElapsedSeconds(0);\n      analysisTimerRef.current = setInterval(() => {\n        setAnalysisElapsedSeconds(prev => prev + 1);\n      }, 1000);\n    } else {\n      if (analysisTimerRef.current) {\n        clearInterval(analysisTimerRef.current);\n        analysisTimerRef.current = null;\n      }\n    }\n    return () => {\n      if (analysisTimerRef.current) {\n        clearInterval(analysisTimerRef.current);\n      }\n    };\n  }, [analysisState]);\n\n  const existingBidsCount = bids.filter(b => b.bid.total_bid_amount > 0 && b.bid.contractor_name).length;\n  const validPendingCount = uploadedPdfs.filter(p => p.status === 'pending' || p.status === 'uploaded').length;\n  const totalReadyBids = existingBidsCount + validPendingCount;\n  const canContinue = validPendingCount >= 2 || existingBidsCount >= 2;\n\n  const handleFiles = useCallback(async (files: FileList | File[]) => {\n    const fileArray = Array.from(files);\n    const validFiles: UploadedPdf[] = [];\n\n    for (const file of fileArray) {\n      const validationError = validatePdfFile(file);\n      if (validationError) {\n        validFiles.push({\n          id: crypto.randomUUID(),\n          file,\n          status: 'error',\n          progress: 0,\n          error: validationError.message,\n        });\n      } else {\n        validFiles.push({\n          id: crypto.randomUUID(),\n          file,\n          status: 'pending',\n          progress: 0,\n        });\n      }\n    }\n\n    setUploadedPdfs(prev => [...prev, ...validFiles]);\n  }, []);\n\n  const handleDrag = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n      handleFiles(e.dataTransfer.files);\n    }\n  };\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      handleFiles(e.target.files);\n    }\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const removeFile = (id: string) => {\n    setUploadedPdfs(prev => prev.filter(p => p.id !== id));\n  };\n\n\n  const handleContinue = () => {\n    if (!canContinue) return;\n    // Show interstitial instead of starting immediately\n    setAnalysisState('submitting');\n  };\n\n  const handleConfirmSubmission = async () => {\n    setAnalysisError(null);\n\n    try {\n      const activeProjectId = projectId || await ensureProjectExists();\n\n      await saveProjectRequirements(activeProjectId, {\n        priority_price: priorities.price,\n        priority_efficiency: priorities.efficiency,\n        priority_warranty: priorities.warranty,\n        priority_reputation: priorities.reputation,\n        priority_timeline: priorities.timeline,\n      });\n      await updateProjectDataSharingConsent(activeProjectId, dataSharingConsent);\n      if (projectDetails.trim()) {\n        await updateProject(activeProjectId, { project_details: projectDetails });\n      }\n\n      if (uploadedPdfs.length > 0) {\n        setAnalysisState('uploading');\n\n        if (!user?.email) {\n          setAnalysisState('error');\n          setAnalysisError('User email not found');\n          return;\n        }\n\n        // Get all files from uploadedPdfs\n        const files = uploadedPdfs.map(p => p.file);\n\n        if (files.length < 2) {\n          setAnalysisState('error');\n          setAnalysisError('Please upload at least 2 bid PDFs to compare.');\n          return;\n        }\n\n        setAnalysisState('analyzing');\n\n        // Use Base64 mode - files are converted and sent directly without storage upload\n        const analysisResult = await startBatchAnalysisWithBase64(\n          activeProjectId,\n          files,\n          priorities,\n          user.email,\n          projectDetails,\n          (stage, current, total) => {\n            console.log(`Base64 progress: ${stage} - ${current}/${total}`);\n          }\n        );\n\n        if (!analysisResult.success) {\n          setAnalysisState('error');\n          setAnalysisError(analysisResult.error || 'Failed to start analysis');\n          return;\n        }\n\n        const pollResult = await pollBatchExtractionStatus(activeProjectId, {\n          intervalMs: 3000,\n          maxAttempts: 600, // Extended to 30 minutes for beta\n          onProgress: (status) => {\n            setAnalysisProgress(status);\n          },\n        });\n\n        await refreshBids();\n\n        if (!pollResult.allSuccessful && pollResult.processingPdfs > 0) {\n          setAnalysisState('timeout');\n          return;\n        }\n\n        setAnalysisState('complete');\n        \n        // Trigger notifications on completion\n        if (enableSound) {\n          await notify(activeProjectId, {\n            title: 'Analysis Complete!',\n            body: 'Your bid comparison is ready to view.',\n            playSound: true,\n            showBrowserNotification: true,\n          });\n        }\n        setShowCompletionToast(true);\n      }\n\n      await refreshRequirements();\n      completePhase(1);\n    } catch (err) {\n      console.error('Failed to process:', err);\n      setAnalysisState('error');\n      setAnalysisError(err instanceof Error ? err.message : 'An unexpected error occurred');\n    }\n  };\n\n  const getStatusIcon = (status: UploadedPdf['status']) => {\n    switch (status) {\n      case 'uploaded':\n        return <CheckCircle2 className=\"w-5 h-5 text-switch-green-600\" />;\n      case 'uploading':\n        return <Loader2 className=\"w-5 h-5 text-blue-500 animate-spin\" />;\n      case 'error':\n        return <AlertCircle className=\"w-5 h-5 text-red-500\" />;\n      default:\n        return <Clock className=\"w-5 h-5 text-gray-400\" />;\n    }\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n  };\n\n  const formatElapsedTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return mins > 0 ? `${mins}m ${secs}s` : `${secs}s`;\n  };\n\n  const handleSaveNotification = async () => {\n    if (!projectId || !notificationEmail.trim()) return;\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(notificationEmail.trim())) {\n      return;\n    }\n\n    setSavingNotification(true);\n    try {\n      await updateProjectNotificationSettings(projectId, notificationEmail.trim().toLowerCase(), notifyOnCompletion);\n      setNotificationSaved(true);\n      setTimeout(() => setNotificationSaved(false), 3000);\n    } catch (err) {\n      console.error('Failed to save notification settings:', err);\n    } finally {\n      setSavingNotification(false);\n    }\n  };\n\n  // Show interstitial when user clicks continue\n  if (analysisState === 'submitting') {\n    return (\n      <>\n        <AnalysisSubmissionInterstitial\n          email={notificationEmail}\n          onEmailChange={setNotificationEmail}\n          notifyOnCompletion={notifyOnCompletion}\n          onNotifyChange={setNotifyOnCompletion}\n          enableSound={enableSound}\n          onEnableSoundChange={(enabled) => {\n            setEnableSound(enabled);\n            toggleSound(enabled);\n          }}\n          onRequestNotificationPermission={requestPermission}\n          notificationPermission={permission}\n          bidCount={validPendingCount + existingBidsCount}\n          onSaveAndContinue={handleConfirmSubmission}\n          isSaving={false}\n        />\n        <NotificationToast\n          show={showCompletionToast}\n          title=\"Analysis Complete!\"\n          message=\"Your bid comparison is ready to view.\"\n          onClose={() => setShowCompletionToast(false)}\n        />\n      </>\n    );\n  }\n\n  if (analysisState === 'timeout') {\n    const isEmailValid = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(notificationEmail.trim());\n\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-[400px] space-y-6\">\n        <div className=\"w-16 h-16 bg-switch-green-100 rounded-full flex items-center justify-center\">\n          <CheckCircle2 className=\"w-8 h-8 text-switch-green-600\" />\n        </div>\n\n        <div className=\"text-center space-y-2\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">Your Submission is Saved and Queued</h2>\n          <p className=\"text-gray-600 max-w-md\">\n            Your bids have been uploaded and are being processed. You can leave this page and come back later to view your results.\n          </p>\n        </div>\n\n        <div className=\"bg-white border border-gray-200 rounded-xl p-6 max-w-md w-full space-y-4\">\n          <div>\n            <label htmlFor=\"notification-email\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Email Address\n            </label>\n            <p className=\"text-xs text-gray-500 mb-2\">\n              Enter your email to look up your analysis later\n            </p>\n            <div className=\"relative\">\n              <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n              <input\n                id=\"notification-email\"\n                type=\"email\"\n                value={notificationEmail}\n                onChange={(e) => {\n                  setNotificationEmail(e.target.value);\n                  setNotificationSaved(false);\n                }}\n                placeholder=\"you@example.com\"\n                className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent\"\n              />\n            </div>\n          </div>\n\n          <label className=\"flex items-start gap-3 cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              checked={notifyOnCompletion}\n              onChange={(e) => {\n                setNotifyOnCompletion(e.target.checked);\n                setNotificationSaved(false);\n              }}\n              className=\"w-5 h-5 mt-0.5 rounded border-gray-300 text-switch-green-600 focus:ring-switch-green-500\"\n            />\n            <span className=\"text-sm text-gray-700\">\n              Notify me by email when my analysis is ready\n            </span>\n          </label>\n\n          <button\n            onClick={handleSaveNotification}\n            disabled={!isEmailValid || savingNotification}\n            className=\"w-full btn btn-primary flex items-center justify-center gap-2\"\n          >\n            {savingNotification ? (\n              <>\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n                Saving...\n              </>\n            ) : notificationSaved ? (\n              <>\n                <CheckCircle2 className=\"w-4 h-4\" />\n                Saved!\n              </>\n            ) : (\n              <>\n                <Save className=\"w-4 h-4\" />\n                Save Email\n              </>\n            )}\n          </button>\n        </div>\n\n        {analysisProgress && (\n          <div className=\"w-full max-w-md space-y-3\">\n            <p className=\"text-sm text-center text-gray-600\">\n              Processing: {analysisProgress.completedPdfs} of {analysisProgress.totalPdfs} bids completed\n            </p>\n            <div className=\"space-y-2\">\n              {analysisProgress.pdfStatuses.map(pdf => (\n                <div key={pdf.id} className=\"flex items-center justify-between text-sm p-2 bg-gray-50 rounded\">\n                  <span className=\"truncate flex-1 mr-2\">{pdf.fileName}</span>\n                  <span className={`\n                    px-2 py-0.5 rounded text-xs font-medium\n                    ${pdf.status === 'extracted' || pdf.status === 'verified' ? 'bg-green-100 text-green-700' : ''}\n                    ${pdf.status === 'processing' || pdf.status === 'uploaded' ? 'bg-amber-100 text-amber-700' : ''}\n                    ${pdf.status === 'failed' ? 'bg-red-100 text-red-700' : ''}\n                  `}>\n                    {pdf.status === 'extracted' || pdf.status === 'verified' ? 'Done' : ''}\n                    {pdf.status === 'processing' || pdf.status === 'uploaded' ? 'Processing...' : ''}\n                    {pdf.status === 'failed' ? 'Failed' : ''}\n                  </span>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        <div className=\"bg-gray-50 border border-gray-200 rounded-xl p-4 max-w-md w-full\">\n          <div className=\"flex items-start gap-3\">\n            <FlaskConical className=\"w-5 h-5 text-gray-500 flex-shrink-0 mt-0.5\" />\n            <div>\n              <p className=\"text-sm font-medium text-gray-700\">Beta Testing</p>\n              <p className=\"text-sm text-gray-600 mt-1\">\n                We are actively improving processing speed. Thank you for your patience!\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {analysisProgress && analysisProgress.completedPdfs >= 2 && (\n          <button\n            onClick={() => {\n              setAnalysisState('complete');\n              completePhase(1);\n            }}\n            className=\"text-sm text-switch-green-600 hover:text-switch-green-700 underline\"\n          >\n            Continue with {analysisProgress.completedPdfs} completed bids\n          </button>\n        )}\n\n        <p className=\"text-xs text-gray-500 text-center max-w-md\">\n          You can close this page. Use your email address to find your analysis on the home page when you return.\n        </p>\n      </div>\n    );\n  }\n\n  if (analysisState === 'uploading' || analysisState === 'analyzing') {\n    const showLongWaitMessage = analysisElapsedSeconds > 120;\n\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-[400px] space-y-6\">\n        <div className=\"w-16 h-16 bg-switch-green-100 rounded-full flex items-center justify-center\">\n          <Loader2 className=\"w-8 h-8 text-switch-green-600 animate-spin\" />\n        </div>\n\n        <div className=\"text-center space-y-2\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">\n            {analysisState === 'uploading' ? 'Uploading Your Bids...' : 'Analyzing Your Bids...'}\n          </h2>\n          <p className=\"text-gray-600 max-w-md\">\n            {analysisState === 'uploading'\n              ? 'We are securely uploading your bid documents.'\n              : 'Our AI is extracting and comparing data from your bid documents. This usually takes 1-3 minutes.'}\n          </p>\n          {analysisState === 'analyzing' && (\n            <p className=\"text-sm text-gray-500\">\n              Elapsed: {formatElapsedTime(analysisElapsedSeconds)}\n            </p>\n          )}\n        </div>\n\n        {showLongWaitMessage && (\n          <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-4 max-w-md\">\n            <div className=\"flex items-start gap-3\">\n              <FlaskConical className=\"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5\" />\n              <div>\n                <p className=\"text-sm font-medium text-amber-800\">Taking longer than usual</p>\n                <p className=\"text-sm text-amber-700 mt-1\">\n                  Complex documents may take extra time. Thank you for your patience during our alpha testing!\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {analysisProgress && (\n          <div className=\"w-full max-w-md space-y-4\">\n            <div className=\"bg-gray-100 rounded-full h-3 overflow-hidden\">\n              <div\n                className=\"bg-switch-green-600 h-full transition-all duration-500\"\n                style={{\n                  width: `${analysisProgress.totalPdfs > 0\n                    ? ((analysisProgress.completedPdfs + analysisProgress.failedPdfs) / analysisProgress.totalPdfs) * 100\n                    : 0}%`\n                }}\n              />\n            </div>\n            <p className=\"text-sm text-center text-gray-600\">\n              {analysisProgress.completedPdfs} of {analysisProgress.totalPdfs} bids processed\n            </p>\n\n            <div className=\"space-y-2\">\n              {analysisProgress.pdfStatuses.map(pdf => (\n                <div key={pdf.id} className=\"flex items-center justify-between text-sm p-2 bg-gray-50 rounded\">\n                  <span className=\"truncate flex-1 mr-2\">{pdf.fileName}</span>\n                  <span className={`\n                    px-2 py-0.5 rounded text-xs font-medium\n                    ${pdf.status === 'extracted' || pdf.status === 'verified' ? 'bg-green-100 text-green-700' : ''}\n                    ${pdf.status === 'processing' || pdf.status === 'uploaded' ? 'bg-blue-100 text-blue-700' : ''}\n                    ${pdf.status === 'failed' ? 'bg-red-100 text-red-700' : ''}\n                  `}>\n                    {pdf.status === 'extracted' || pdf.status === 'verified' ? 'Done' : ''}\n                    {pdf.status === 'processing' || pdf.status === 'uploaded' ? 'Processing...' : ''}\n                    {pdf.status === 'failed' ? 'Failed' : ''}\n                  </span>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Gather Your Bids</h1>\n        <p className=\"text-gray-600 mt-1\">\n          Upload at least 2 contractor bids to compare, then tell us what matters most to you.\n        </p>\n      </div>\n\n      <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-4\">\n        <div className=\"flex gap-3\">\n          <Info className=\"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5\" />\n          <div>\n            <p className=\"text-sm font-medium text-amber-800\">One-Time Analysis</p>\n            <p className=\"text-sm text-amber-700 mt-1\">\n              Upload all the bids you want to compare before clicking Continue. All bids will be analyzed together.\n              If you need to add more bids later, you can re-run the analysis with all documents.\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {analysisError && (\n        <div className=\"bg-red-50 border border-red-200 rounded-xl p-4\">\n          <div className=\"flex gap-3\">\n            <AlertCircle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n            <div>\n              <p className=\"text-sm font-medium text-red-800\">Analysis Error</p>\n              <p className=\"text-sm text-red-700 mt-1\">{analysisError}</p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2\">\n          <Upload className=\"w-5 h-5 text-switch-green-600\" />\n          Upload Your Bids\n        </h2>\n\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          accept=\".pdf,application/pdf\"\n          multiple\n          onChange={handleFileSelect}\n          className=\"hidden\"\n        />\n\n        <div\n          onDragEnter={handleDrag}\n          onDragLeave={handleDrag}\n          onDragOver={handleDrag}\n          onDrop={handleDrop}\n          onClick={() => fileInputRef.current?.click()}\n          className={`\n            border-2 border-dashed rounded-xl p-8 text-center transition-colors cursor-pointer\n            ${dragActive ? 'border-switch-green-500 bg-switch-green-50' : 'border-gray-300 hover:border-gray-400'}\n          `}\n        >\n          <div className=\"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <FileText className=\"w-6 h-6 text-gray-400\" />\n          </div>\n          <p className=\"text-gray-600 mb-2\">Drag and drop PDF bid documents here</p>\n          <p className=\"text-sm text-gray-400 mb-4\">or</p>\n          <button\n            type=\"button\"\n            className=\"btn btn-secondary\"\n            onClick={(e) => {\n              e.stopPropagation();\n              fileInputRef.current?.click();\n            }}\n          >\n            Browse Files\n          </button>\n          <p className=\"text-xs text-gray-400 mt-4\">\n            Supported formats: PDF (max 25MB each)\n          </p>\n        </div>\n\n        {uploadedPdfs.length > 0 && (\n          <div className=\"mt-6 space-y-3\">\n            <h3 className=\"text-sm font-medium text-gray-700\">Files to Upload ({uploadedPdfs.length})</h3>\n            {uploadedPdfs.map((pdf) => (\n              <div\n                key={pdf.id}\n                className={`flex items-center justify-between p-4 rounded-lg ${\n                  pdf.status === 'error' ? 'bg-red-50' : 'bg-gray-50'\n                }`}\n              >\n                <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                  <FileText className=\"w-5 h-5 text-gray-400 flex-shrink-0\" />\n                  <div className=\"min-w-0 flex-1\">\n                    <p className=\"font-medium text-gray-900 truncate\">{pdf.file.name}</p>\n                    <p className=\"text-sm text-gray-500\">\n                      {formatFileSize(pdf.file.size)}\n                      {pdf.error && <span className=\"text-red-600 ml-2\">{pdf.error}</span>}\n                    </p>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  {getStatusIcon(pdf.status)}\n                  <button\n                    onClick={() => removeFile(pdf.id)}\n                    className=\"p-1 hover:bg-gray-200 rounded\"\n                  >\n                    <X className=\"w-4 h-4 text-gray-500\" />\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {existingBidsCount > 0 && (\n          <div className=\"mt-6 space-y-3\">\n            <h3 className=\"text-sm font-medium text-gray-700\">Previously Analyzed Bids ({existingBidsCount})</h3>\n            {bids.filter(b => b.bid.total_bid_amount > 0).map((item) => (\n              <div\n                key={item.bid.id}\n                className=\"flex items-center justify-between p-4 bg-green-50 rounded-lg\"\n              >\n                <div className=\"flex items-center gap-3\">\n                  <FileText className=\"w-5 h-5 text-switch-green-600\" />\n                  <div>\n                    <p className=\"font-medium text-gray-900\">\n                      {item.bid.contractor_name || item.bid.contractor_company || 'Unknown Contractor'}\n                    </p>\n                    <p className=\"text-sm text-gray-500\">\n                      ${item.bid.total_bid_amount.toLocaleString()}\n                    </p>\n                  </div>\n                </div>\n                <CheckCircle2 className=\"w-5 h-5 text-switch-green-600\" />\n              </div>\n            ))}\n          </div>\n        )}\n\n        <button\n          type=\"button\"\n          onClick={() => fileInputRef.current?.click()}\n          className=\"btn btn-secondary w-full mt-4 flex items-center justify-center gap-2\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          Add Another Bid\n        </button>\n\n        {totalReadyBids < 2 && (\n          <div className=\"mt-4 flex items-start gap-2 text-amber-600 bg-amber-50 rounded-lg p-3\">\n            <AlertCircle className=\"w-5 h-5 flex-shrink-0 mt-0.5\" />\n            <p className=\"text-sm\">\n              {(() => {\n                const needed = Math.max(0, 2 - totalReadyBids);\n                if (totalReadyBids === 0) return 'Upload your first bid to get started.';\n                return `Upload ${needed} more bid${needed > 1 ? 's' : ''} to continue.`;\n              })()}\n            </p>\n          </div>\n        )}\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-2\">What Matters Most to You?</h2>\n        <p className=\"text-sm text-gray-600 mb-6\">\n          Adjust these sliders to reflect your priorities. We will use these to highlight the best options for you.\n        </p>\n\n        <div className=\"space-y-6\">\n          <PrioritySlider\n            label=\"Upfront Cost\"\n            value={priorities.price}\n            onChange={(v) => setPriorities(p => ({ ...p, price: v }))}\n            description=\"How important is getting the lowest price?\"\n          />\n\n          <PrioritySlider\n            label=\"Energy Efficiency / Long-term Savings\"\n            value={priorities.efficiency}\n            onChange={(v) => setPriorities(p => ({ ...p, efficiency: v }))}\n            description=\"Higher efficiency means lower utility bills over time\"\n          />\n\n          <PrioritySlider\n            label=\"Warranty Length\"\n            value={priorities.warranty}\n            onChange={(v) => setPriorities(p => ({ ...p, warranty: v }))}\n            description=\"Longer warranties provide peace of mind\"\n          />\n\n          <PrioritySlider\n            label=\"Contractor Reputation\"\n            value={priorities.reputation}\n            onChange={(v) => setPriorities(p => ({ ...p, reputation: v }))}\n            description=\"Experience, reviews, and certifications\"\n          />\n\n          <PrioritySlider\n            label=\"Installation Timeline\"\n            value={priorities.timeline}\n            onChange={(v) => setPriorities(p => ({ ...p, timeline: v }))}\n            description=\"How quickly can they complete the work?\"\n          />\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-2\">Tell Us About Your Project</h2>\n        <p className=\"text-sm text-gray-600 mb-4\">\n          Share any details about your home, priorities, or what you care about in a contractor. This is optional but helps us provide better guidance.\n        </p>\n        <textarea\n          value={projectDetails}\n          onChange={(e) => setProjectDetails(e.target.value)}\n          placeholder=\"For example: My home is a 1950s ranch with poor insulation. I'm looking for a contractor who is patient with explaining technical details and has experience with older homes. Budget is somewhat flexible but I want to prioritize long-term savings over upfront cost...\"\n          rows={6}\n          className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent text-sm resize-none\"\n        />\n        <p className=\"text-xs text-gray-500 mt-2\">\n          This information helps us understand your unique needs and provide more personalized recommendations.\n        </p>\n      </div>\n\n      <div className=\"bg-gray-50 rounded-xl border border-gray-200 p-5\">\n        <label className=\"flex items-start gap-3 cursor-pointer group\">\n          <div className=\"pt-0.5\">\n            <input\n              type=\"checkbox\"\n              checked={dataSharingConsent}\n              onChange={(e) => setDataSharingConsent(e.target.checked)}\n              className=\"w-5 h-5 rounded border-gray-300 text-switch-green-600 focus:ring-switch-green-500 focus:ring-offset-0 cursor-pointer\"\n            />\n          </div>\n          <div className=\"flex-1\">\n            <div className=\"flex items-center gap-2 mb-1\">\n              <Users className=\"w-4 h-4 text-switch-green-600\" />\n              <span className=\"font-medium text-gray-900\">\n                Help other homeowners by sharing anonymized bid data\n              </span>\n            </div>\n            <p className=\"text-sm text-gray-600 leading-relaxed\">\n              Your pricing data helps others understand fair market rates in your area.\n              All personal and contractor details are removed before sharing.\n            </p>\n            <button\n              type=\"button\"\n              onClick={(e) => {\n                e.preventDefault();\n                setShowPrivacyDetails(!showPrivacyDetails);\n              }}\n              className=\"text-sm text-switch-green-600 hover:text-switch-green-700 mt-2 flex items-center gap-1\"\n            >\n              <Shield className=\"w-3.5 h-3.5\" />\n              {showPrivacyDetails ? 'Hide privacy details' : 'What data is shared?'}\n            </button>\n\n            {showPrivacyDetails && (\n              <div className=\"mt-3 p-4 bg-white rounded-lg border border-gray-200 text-sm text-gray-600\">\n                <p className=\"font-medium text-gray-900 mb-2\">Data that IS shared (anonymized):</p>\n                <ul className=\"list-disc list-inside space-y-1 mb-4\">\n                  <li>Bid amounts and pricing breakdowns</li>\n                  <li>Equipment types, efficiency ratings, and specifications</li>\n                  <li>General location (ZIP code area only)</li>\n                  <li>Project scope (system size, features included)</li>\n                </ul>\n                <p className=\"font-medium text-gray-900 mb-2\">Data that is NEVER shared:</p>\n                <ul className=\"list-disc list-inside space-y-1\">\n                  <li>Your name, email, or contact information</li>\n                  <li>Your exact address</li>\n                  <li>Contractor names or contact details</li>\n                  <li>Original PDF documents</li>\n                </ul>\n                <p className=\"mt-4 text-gray-500 text-xs\">\n                  You can change this preference at any time in your project settings.\n                </p>\n              </div>\n            )}\n          </div>\n        </label>\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <div className=\"flex items-center gap-2 mb-4\">\n          <Mail className=\"w-5 h-5 text-switch-green-600\" />\n          <h2 className=\"text-lg font-semibold text-gray-900\">Get Notified When Ready</h2>\n        </div>\n        <p className=\"text-sm text-gray-600 mb-4\">\n          Bid analysis typically takes 2-3 minutes. We'll email you when your results are ready to view.\n        </p>\n\n        <div className=\"space-y-4\">\n          <div>\n            <label htmlFor=\"notify-email\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Email Address\n            </label>\n            <input\n              id=\"notify-email\"\n              type=\"email\"\n              value={notificationEmail}\n              onChange={(e) => {\n                setNotificationEmail(e.target.value);\n                setNotificationSaved(false);\n              }}\n              placeholder=\"your.email@example.com\"\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent\"\n            />\n          </div>\n\n          <label className=\"flex items-start gap-3 cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              checked={notifyOnCompletion}\n              onChange={(e) => {\n                setNotifyOnCompletion(e.target.checked);\n                setNotificationSaved(false);\n              }}\n              className=\"mt-0.5 w-4 h-4 rounded border-gray-300 text-switch-green-600 focus:ring-switch-green-500 focus:ring-offset-0 cursor-pointer\"\n            />\n            <span className=\"text-sm text-gray-700\">\n              Send me an email when my analysis is complete\n            </span>\n          </label>\n\n          {notificationEmail && (\n            <button\n              type=\"button\"\n              onClick={handleSaveNotification}\n              disabled={savingNotification || !notificationEmail.trim() || !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(notificationEmail.trim())}\n              className=\"btn btn-secondary text-sm flex items-center gap-2\"\n            >\n              {savingNotification ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  Saving...\n                </>\n              ) : notificationSaved ? (\n                <>\n                  <CheckCircle2 className=\"w-4 h-4\" />\n                  Saved!\n                </>\n              ) : (\n                <>\n                  <Save className=\"w-4 h-4\" />\n                  Save Notification Settings\n                </>\n              )}\n            </button>\n          )}\n        </div>\n      </div>\n\n      <div className=\"flex justify-end\">\n        <button\n          onClick={handleContinue}\n          disabled={!canContinue}\n          className=\"btn btn-primary flex items-center gap-2 px-6\"\n        >\n          Continue to Compare\n          <ArrowRight className=\"w-4 h-4\" />\n        </button>\n      </div>\n\n      {!canContinue && (\n        <p className=\"text-center text-sm text-gray-500\">\n          Upload at least 2 bids to continue\n        </p>\n      )}\n\n      <NotificationToast\n        show={showCompletionToast}\n        title=\"Analysis Complete!\"\n        message=\"Your bid comparison is ready to view.\"\n        onClose={() => setShowCompletionToast(false)}\n      />\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { ArrowRight, Award, Zap, DollarSign, Star, CheckCircle, XCircle, ChevronDown, ChevronUp, HelpCircle, FlaskConical, Download, Mail, Loader2 } from 'lucide-react';\nimport { usePhase } from '../../context/PhaseContext';\nimport { useUser } from '../../hooks/useUser';\nimport { formatCurrency, formatDate } from '../../lib/utils/formatters';\n\ntype CompareTab = 'equipment' | 'contractors' | 'costs';\n\ninterface TabConfig {\n  key: CompareTab;\n  label: string;\n  description: string;\n  icon: React.ReactNode;\n}\n\nconst LABEL_COL_WIDTH = '200px';\nconst BID_COL_MIN_WIDTH = '180px';\n\nconst SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL;\nconst SUPABASE_ANON_KEY = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\nexport function ComparePhase() {\n  const { bids, completePhase, projectId } = usePhase();\n  const { user } = useUser();\n  const [activeTab, setActiveTab] = useState<CompareTab>('equipment');\n  const [showMoreEquipment, setShowMoreEquipment] = useState(false);\n  const [showMoreContractors, setShowMoreContractors] = useState(false);\n  const [showFinancingDetails, setShowFinancingDetails] = useState(false);\n  const [downloadingReport, setDownloadingReport] = useState(false);\n  const [emailingReport, setEmailingReport] = useState(false);\n  const [reportSent, setReportSent] = useState(false);\n\n  const formatDateDisplay = (dateString: string | null | undefined) => {\n    return formatDate(dateString) || '-';\n  };\n\n  const getHighestValue = (\n    values: (number | null | undefined)[],\n    higherIsBetter = true\n  ): number | null => {\n    const validValues = values.filter((v): v is number => v != null);\n    if (validValues.length === 0) return null;\n    return higherIsBetter ? Math.max(...validValues) : Math.min(...validValues);\n  };\n\n  const isHighlighted = (\n    value: number | null | undefined,\n    bestValue: number | null\n  ): boolean => {\n    if (value == null || bestValue == null) return false;\n    return value === bestValue;\n  };\n\n  const tabs: TabConfig[] = [\n    {\n      key: 'equipment',\n      label: 'Equipment',\n      description: 'Specs, efficiency ratings, and features',\n      icon: <Zap className=\"w-5 h-5\" />\n    },\n    {\n      key: 'contractors',\n      label: 'Contractors',\n      description: 'Experience, ratings, and certifications',\n      icon: <Award className=\"w-5 h-5\" />\n    },\n    {\n      key: 'costs',\n      label: 'Cost & Scope',\n      description: 'Pricing, warranties, and what\\'s included',\n      icon: <DollarSign className=\"w-5 h-5\" />\n    },\n  ];\n\n  const getEquipmentData = () => {\n    return bids.map((b) => {\n      const mainEquipment = b.equipment.find(\n        (e) => e.equipment_type === 'outdoor_unit' || e.equipment_type === 'heat_pump'\n      ) || b.equipment[0];\n\n      return {\n        bidId: b.bid.id,\n        contractor: b.bid.contractor_name || b.bid.contractor_company || 'Unknown',\n        brand: mainEquipment?.brand || '-',\n        model: mainEquipment?.model_number || mainEquipment?.model_name || '-',\n        seer2: mainEquipment?.seer2_rating || mainEquipment?.seer_rating,\n        hspf2: mainEquipment?.hspf2_rating || mainEquipment?.hspf_rating,\n        capacityTons: mainEquipment?.capacity_tons,\n        capacityBtu: mainEquipment?.capacity_btu,\n        variableSpeed: mainEquipment?.variable_speed,\n        soundLevel: mainEquipment?.sound_level_db,\n        energyStar: mainEquipment?.energy_star_certified,\n        energyStarMostEfficient: mainEquipment?.energy_star_most_efficient,\n        refrigerantType: mainEquipment?.refrigerant_type,\n        voltage: mainEquipment?.voltage,\n        stages: mainEquipment?.stages,\n        cop: mainEquipment?.cop,\n        eer: mainEquipment?.eer_rating,\n        compressorWarranty: mainEquipment?.compressor_warranty_years,\n      };\n    });\n  };\n\n  const getContractorData = () => {\n    return bids.map((b) => ({\n      bidId: b.bid.id,\n      contractor: b.bid.contractor_name || b.bid.contractor_company || 'Unknown',\n      yearsInBusiness: b.bid.contractor_years_in_business,\n      yearEstablished: b.bid.contractor_year_established,\n      googleRating: b.bid.contractor_google_rating,\n      reviewCount: b.bid.contractor_google_review_count,\n      switchRating: b.bid.contractor_switch_rating,\n      certifications: b.bid.contractor_certifications || [],\n      license: b.bid.contractor_license,\n      licenseState: b.bid.contractor_license_state,\n      insuranceVerified: b.bid.contractor_insurance_verified,\n      isSwitchPreferred: b.bid.contractor_is_switch_preferred,\n      phone: b.bid.contractor_phone,\n      email: b.bid.contractor_email,\n      website: b.bid.contractor_website,\n      totalInstalls: b.bid.contractor_total_installs,\n    }));\n  };\n\n  const getCostData = () => {\n    return bids.map((b) => ({\n      bidId: b.bid.id,\n      contractor: b.bid.contractor_name || b.bid.contractor_company || 'Unknown',\n      totalAmount: b.bid.total_bid_amount,\n      equipmentCost: b.bid.equipment_cost,\n      laborCost: b.bid.labor_cost,\n      materialsCost: b.bid.materials_cost,\n      permitCost: b.bid.permit_cost,\n      laborWarranty: b.bid.labor_warranty_years,\n      equipmentWarranty: b.bid.equipment_warranty_years,\n      financingAvailable: b.bid.financing_offered,\n      financingTerms: b.bid.financing_terms,\n      exclusions: b.bid.exclusions || [],\n      estimatedDays: b.bid.estimated_days,\n      startDateAvailable: b.bid.start_date_available,\n      validUntil: b.bid.valid_until,\n      bidDate: b.bid.bid_date,\n      depositRequired: b.bid.deposit_required,\n      depositPercentage: b.bid.deposit_percentage,\n      paymentSchedule: b.bid.payment_schedule,\n    }));\n  };\n\n  const getScopeData = () => {\n    return bids.map((b) => ({\n      bidId: b.bid.id,\n      contractor: b.bid.contractor_name || b.bid.contractor_company || 'Unknown',\n      permit: b.bid.scope_permit_included,\n      permitDetail: b.bid.scope_permit_detail,\n      disposal: b.bid.scope_disposal_included,\n      disposalDetail: b.bid.scope_disposal_detail,\n      electrical: b.bid.scope_electrical_included,\n      electricalDetail: b.bid.scope_electrical_detail,\n      ductwork: b.bid.scope_ductwork_included,\n      ductworkDetail: b.bid.scope_ductwork_detail,\n      thermostat: b.bid.scope_thermostat_included,\n      thermostatDetail: b.bid.scope_thermostat_detail,\n      manualJ: b.bid.scope_manual_j_included,\n      manualJDetail: b.bid.scope_manual_j_detail,\n      commissioning: b.bid.scope_commissioning_included,\n      commissioningDetail: b.bid.scope_commissioning_detail,\n      airHandler: b.bid.scope_air_handler_included,\n      airHandlerDetail: b.bid.scope_air_handler_detail,\n      lineSet: b.bid.scope_line_set_included,\n      lineSetDetail: b.bid.scope_line_set_detail,\n      disconnect: b.bid.scope_disconnect_included,\n      disconnectDetail: b.bid.scope_disconnect_detail,\n      pad: b.bid.scope_pad_included,\n      padDetail: b.bid.scope_pad_detail,\n      drainLine: b.bid.scope_drain_line_included,\n      drainLineDetail: b.bid.scope_drain_line_detail,\n    }));\n  };\n\n  const equipmentData = getEquipmentData();\n  const contractorData = getContractorData();\n  const costData = getCostData();\n  const scopeData = getScopeData();\n\n  const bestSeer = getHighestValue(equipmentData.map((e) => e.seer2));\n  const bestHspf = getHighestValue(equipmentData.map((e) => e.hspf2));\n  const bestYears = getHighestValue(contractorData.map((c) => c.yearsInBusiness));\n  const bestRating = getHighestValue(contractorData.map((c) => c.googleRating));\n  const lowestPrice = getHighestValue(costData.map((c) => c.totalAmount), false);\n  const bestLaborWarranty = getHighestValue(costData.map((c) => c.laborWarranty));\n  const bestEquipmentWarranty = getHighestValue(costData.map((c) => c.equipmentWarranty));\n  const fastestTimeline = getHighestValue(costData.map((c) => c.estimatedDays), false);\n\n  const handleContinue = () => {\n    completePhase(2);\n  };\n\n  const handleDownloadReport = async () => {\n    if (!projectId || !user?.email) {\n      alert('Missing project or user information');\n      return;\n    }\n\n    setDownloadingReport(true);\n    try {\n      const response = await fetch(`${SUPABASE_URL}/functions/v1/generate-pdf-report`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,\n          'Content-Type': 'application/json',\n          'apikey': SUPABASE_ANON_KEY,\n          'X-User-Email': user.email,\n        },\n        body: JSON.stringify({\n          project_id: projectId,\n          send_email: false,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));\n        console.error('Report generation failed:', errorData);\n        throw new Error(errorData.error || `Server error: ${response.status}`);\n      }\n\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `bidsmart-report-${new Date().toISOString().split('T')[0]}.html`;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n    } catch (error) {\n      console.error('Error downloading report:', error);\n      const message = error instanceof Error ? error.message : 'Failed to download report';\n      alert(`Download failed: ${message}`);\n    } finally {\n      setDownloadingReport(false);\n    }\n  };\n\n  const handleEmailReport = async () => {\n    if (!projectId || !user?.email) {\n      alert('Missing project or user information');\n      return;\n    }\n\n    setEmailingReport(true);\n    try {\n      const response = await fetch(`${SUPABASE_URL}/functions/v1/generate-pdf-report`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,\n          'Content-Type': 'application/json',\n          'apikey': SUPABASE_ANON_KEY,\n          'X-User-Email': user.email,\n        },\n        body: JSON.stringify({\n          project_id: projectId,\n          send_email: true,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));\n        console.error('Email send failed:', errorData);\n        throw new Error(errorData.error || `Server error: ${response.status}`);\n      }\n\n      const result = await response.json();\n      console.log('Email sent successfully:', result);\n\n      setReportSent(true);\n      setTimeout(() => setReportSent(false), 5000);\n    } catch (error) {\n      console.error('Error emailing report:', error);\n      const message = error instanceof Error ? error.message : 'Failed to send report';\n      alert(`Email failed: ${message}`);\n    } finally {\n      setEmailingReport(false);\n    }\n  };\n\n  const bidCount = bids.length;\n  const tableMinWidth = `calc(${LABEL_COL_WIDTH} + (${bidCount} * ${BID_COL_MIN_WIDTH}))`;\n\n  const labelCellStyle = { width: LABEL_COL_WIDTH, minWidth: LABEL_COL_WIDTH, maxWidth: LABEL_COL_WIDTH };\n  const bidCellStyle = { minWidth: BID_COL_MIN_WIDTH };\n\n  const scopeItems = [\n    { key: 'permit', detailKey: 'permitDetail', label: 'Permits & Filing' },\n    { key: 'disposal', detailKey: 'disposalDetail', label: 'Old Equipment Disposal' },\n    { key: 'electrical', detailKey: 'electricalDetail', label: 'Electrical Work' },\n    { key: 'disconnect', detailKey: 'disconnectDetail', label: 'Electrical Disconnect' },\n    { key: 'ductwork', detailKey: 'ductworkDetail', label: 'Ductwork Modifications' },\n    { key: 'thermostat', detailKey: 'thermostatDetail', label: 'Thermostat' },\n    { key: 'manualJ', detailKey: 'manualJDetail', label: 'Manual J Calculation' },\n    { key: 'commissioning', detailKey: 'commissioningDetail', label: 'System Commissioning' },\n    { key: 'airHandler', detailKey: 'airHandlerDetail', label: 'Air Handler' },\n    { key: 'lineSet', detailKey: 'lineSetDetail', label: 'Refrigerant Line Set' },\n    { key: 'pad', detailKey: 'padDetail', label: 'Equipment Pad' },\n    { key: 'drainLine', detailKey: 'drainLineDetail', label: 'Condensate Drain Line' },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Compare Your Bids</h1>\n        <p className=\"text-gray-600 mt-1\">\n          Review the equipment, contractors, and costs side by side.\n        </p>\n      </div>\n\n      <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-3 flex items-start gap-2\">\n        <FlaskConical className=\"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5\" />\n        <p className=\"text-sm text-amber-800\">\n          <span className=\"font-medium\">Alpha:</span> Some extracted data may be incomplete. If something looks wrong, please verify against the original bid document.\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-6\">\n        {tabs.map((tab, index) => (\n          <button\n            key={tab.key}\n            onClick={() => setActiveTab(tab.key)}\n            className={`\n              relative p-3 sm:p-4 rounded-xl text-left transition-all duration-200 border-2\n              ${activeTab === tab.key\n                ? 'bg-gradient-to-br from-switch-green-50 to-switch-green-100 border-switch-green-500 shadow-md'\n                : 'bg-white border-gray-200 hover:border-gray-300 hover:shadow-sm'\n              }\n            `}\n          >\n            <div className=\"flex items-start gap-2 sm:gap-3\">\n              <div className={`\n                w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0\n                ${activeTab === tab.key\n                  ? 'bg-switch-green-600 text-white'\n                  : 'bg-gray-100 text-gray-500'\n                }\n              `}>\n                {tab.icon}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-center gap-2 flex-wrap\">\n                  <span className={`\n                    text-xs font-medium px-2 py-0.5 rounded-full whitespace-nowrap\n                    ${activeTab === tab.key\n                      ? 'bg-switch-green-600 text-white'\n                      : 'bg-gray-200 text-gray-600'\n                    }\n                  `}>\n                    {index + 1} of 3\n                  </span>\n                </div>\n                <h3 className={`\n                  font-semibold mt-1 text-sm sm:text-base\n                  ${activeTab === tab.key ? 'text-switch-green-800' : 'text-gray-900'}\n                `}>\n                  {tab.label}\n                </h3>\n                <p className={`\n                  text-xs sm:text-sm mt-0.5 line-clamp-2\n                  ${activeTab === tab.key ? 'text-switch-green-700' : 'text-gray-500'}\n                `}>\n                  {tab.description}\n                </p>\n              </div>\n            </div>\n            {activeTab === tab.key && (\n              <div className=\"hidden sm:block absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2\">\n                <div className=\"w-3 h-3 bg-switch-green-500 rotate-45\"></div>\n              </div>\n            )}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"bg-white rounded-xl border-2 border-gray-200 shadow-lg overflow-hidden\">\n        <div className={`\n          px-5 py-3 border-b-2 border-gray-200 flex items-center gap-3\n          bg-gradient-to-r from-switch-green-600 to-switch-green-700\n        `}>\n          <div className=\"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-white\">\n            {tabs.find(t => t.key === activeTab)?.icon}\n          </div>\n          <h2 className=\"font-semibold text-white\">\n            {tabs.find(t => t.key === activeTab)?.label} Comparison\n          </h2>\n        </div>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\" style={{ minWidth: tableMinWidth, tableLayout: 'fixed' }}>\n            {activeTab === 'equipment' && (\n              <>\n                <thead>\n                  <tr className=\"bg-gray-900\">\n                    <th style={labelCellStyle} className=\"px-5 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider border-r border-gray-700\">\n                      Specification\n                    </th>\n                    {equipmentData.map((e, idx) => (\n                      <th key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-left text-sm font-semibold text-white ${idx < equipmentData.length - 1 ? 'border-r border-gray-700' : ''}`}>\n                        {e.contractor}\n                      </th>\n                    ))}\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Manufacturer & Model</td>\n                    {equipmentData.map((e, idx) => (\n                      <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {e.brand} {e.model}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">SEER2 Rating</td>\n                    {equipmentData.map((e, idx) => (\n                      <td\n                        key={e.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm font-semibold ${isHighlighted(e.seer2, bestSeer) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {e.seer2 || '-'}\n                          {isHighlighted(e.seer2, bestSeer) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              <Star className=\"w-3 h-3\" /> BEST\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">HSPF2 Rating</td>\n                    {equipmentData.map((e, idx) => (\n                      <td\n                        key={e.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm font-semibold ${isHighlighted(e.hspf2, bestHspf) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {e.hspf2 || '-'}\n                          {isHighlighted(e.hspf2, bestHspf) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              <Star className=\"w-3 h-3\" /> BEST\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Capacity (tons)</td>\n                    {equipmentData.map((e, idx) => (\n                      <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {e.capacityTons || '-'}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Variable Speed</td>\n                    {equipmentData.map((e, idx) => (\n                      <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {e.variableSpeed ? (\n                          <span className=\"inline-flex items-center gap-1 text-switch-green-700 font-medium\">\n                            <CheckCircle className=\"w-5 h-5\" /> Yes\n                          </span>\n                        ) : e.variableSpeed === false ? (\n                          <span className=\"inline-flex items-center gap-1 text-gray-400\">\n                            <XCircle className=\"w-5 h-5\" /> No\n                          </span>\n                        ) : (\n                          <span className=\"text-gray-400\">-</span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Sound Level (dB)</td>\n                    {equipmentData.map((e, idx) => (\n                      <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {e.soundLevel || '-'}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className={showMoreEquipment ? 'border-b border-gray-200' : ''}>\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">ENERGY STAR</td>\n                    {equipmentData.map((e, idx) => (\n                      <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {e.energyStar ? (\n                          <span className=\"inline-flex items-center gap-1 text-switch-green-700 font-medium\">\n                            <CheckCircle className=\"w-5 h-5\" /> Certified\n                          </span>\n                        ) : e.energyStar === false ? (\n                          <span className=\"inline-flex items-center gap-1 text-gray-400\">\n                            <XCircle className=\"w-5 h-5\" /> No\n                          </span>\n                        ) : (\n                          <span className=\"text-gray-400\">-</span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n\n                  {showMoreEquipment && (\n                    <>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Capacity (BTU)</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.capacityBtu ? e.capacityBtu.toLocaleString() : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Refrigerant Type</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.refrigerantType || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Voltage</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.voltage ? `${e.voltage}V` : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Stages</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.stages || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">COP Rating</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.cop || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">EER Rating</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.eer || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Compressor Warranty</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.compressorWarranty ? `${e.compressorWarranty} years` : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr>\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Most Efficient</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.energyStarMostEfficient ? (\n                              <span className=\"inline-flex items-center gap-1 text-switch-green-700 font-medium\">\n                                <CheckCircle className=\"w-5 h-5\" /> Yes\n                              </span>\n                            ) : (\n                              <span className=\"text-gray-400\">-</span>\n                            )}\n                          </td>\n                        ))}\n                      </tr>\n                    </>\n                  )}\n                </tbody>\n              </>\n            )}\n\n            {activeTab === 'contractors' && (\n              <>\n                <thead>\n                  <tr className=\"bg-gray-900\">\n                    <th style={labelCellStyle} className=\"px-5 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider border-r border-gray-700\">\n                      Information\n                    </th>\n                    {contractorData.map((c, idx) => (\n                      <th key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-left text-sm font-semibold text-white ${idx < contractorData.length - 1 ? 'border-r border-gray-700' : ''}`}>\n                        {c.contractor}\n                      </th>\n                    ))}\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Years in Business</td>\n                    {contractorData.map((c, idx) => (\n                      <td\n                        key={c.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm font-semibold ${isHighlighted(c.yearsInBusiness, bestYears) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {c.yearsInBusiness ? `${c.yearsInBusiness} years` : '-'}\n                          {isHighlighted(c.yearsInBusiness, bestYears) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              <Star className=\"w-3 h-3\" /> MOST\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Google Rating</td>\n                    {contractorData.map((c, idx) => (\n                      <td\n                        key={c.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm font-semibold ${isHighlighted(c.googleRating, bestRating) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {c.googleRating ? (\n                            <span className=\"flex items-center gap-1\">\n                              {c.googleRating}\n                              <Star className=\"w-4 h-4 text-yellow-500 fill-yellow-500\" />\n                            </span>\n                          ) : '-'}\n                          {isHighlighted(c.googleRating, bestRating) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              TOP\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Review Count</td>\n                    {contractorData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {c.reviewCount ? `${c.reviewCount} reviews` : '-'}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">\n                      <div className=\"flex items-center gap-2\">\n                        <span>Switch Rating</span>\n                        <span className=\"text-xs text-gray-500 font-normal\">(verified homeowners)</span>\n                      </div>\n                    </td>\n                    {contractorData.map((c, idx) => {\n                      const bestSwitchRating = getHighestValue(contractorData.map((cd) => cd.switchRating), true);\n                      return (\n                        <td\n                          key={c.bidId}\n                          style={bidCellStyle}\n                          className={`px-5 py-4 text-sm font-semibold ${isHighlighted(c.switchRating, bestSwitchRating) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                        >\n                          {c.switchRating ? (\n                            <span className=\"flex items-center gap-2\">\n                              <span className=\"flex items-center gap-1\">\n                                {c.switchRating.toFixed(1)}\n                                <Star className=\"w-4 h-4 text-switch-green-600 fill-switch-green-600\" />\n                              </span>\n                              {isHighlighted(c.switchRating, bestSwitchRating) && (\n                                <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                                  TOP\n                                </span>\n                              )}\n                            </span>\n                          ) : (\n                            <span className=\"text-gray-400 text-xs\">No reviews yet</span>\n                          )}\n                        </td>\n                      );\n                    })}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Certifications</td>\n                    {contractorData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-900 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {c.certifications.length > 0 ? (\n                          <div className=\"flex flex-wrap gap-1\">\n                            {c.certifications.slice(0, 3).map((cert, i) => (\n                              <span key={i} className=\"inline-flex px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium rounded\">\n                                {cert}\n                              </span>\n                            ))}\n                            {c.certifications.length > 3 && (\n                              <span className=\"inline-flex px-2 py-0.5 bg-gray-100 text-gray-500 text-xs rounded\">\n                                +{c.certifications.length - 3}\n                              </span>\n                            )}\n                          </div>\n                        ) : (\n                          <span className=\"text-gray-400\">-</span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">License Number</td>\n                    {contractorData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {c.license || <span className=\"text-gray-400\">Not provided</span>}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className={showMoreContractors ? 'border-b border-gray-200 bg-gray-50/50' : ''}>\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Switch Preferred</td>\n                    {contractorData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {c.isSwitchPreferred ? (\n                          <span className=\"inline-flex items-center gap-1.5 px-3 py-1 bg-gradient-to-r from-switch-green-500 to-switch-green-600 text-white rounded-full text-xs font-semibold shadow-sm\">\n                            <CheckCircle className=\"w-3.5 h-3.5\" /> Preferred Partner\n                          </span>\n                        ) : (\n                          <span className=\"text-gray-400\">-</span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n\n                  {showMoreContractors && (\n                    <>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Phone</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.phone || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Email</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.email ? (\n                              <a href={`mailto:${c.email}`} className=\"text-switch-green-600 hover:underline truncate block\">\n                                {c.email}\n                              </a>\n                            ) : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Website</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.website ? (\n                              <a href={c.website} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-switch-green-600 hover:underline truncate block\">\n                                {c.website.replace(/^https?:\\/\\//, '')}\n                              </a>\n                            ) : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">License State</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.licenseState || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Insurance Verified</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.insuranceVerified ? (\n                              <span className=\"inline-flex items-center gap-1 text-switch-green-700\">\n                                <CheckCircle className=\"w-4 h-4\" /> Verified\n                              </span>\n                            ) : (\n                              <span className=\"text-gray-400\">-</span>\n                            )}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Year Established</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.yearEstablished || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr>\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Total Installs</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.totalInstalls ? c.totalInstalls.toLocaleString() : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                    </>\n                  )}\n                </tbody>\n              </>\n            )}\n\n            {activeTab === 'costs' && (\n              <>\n                <thead>\n                  <tr className=\"bg-gray-900\">\n                    <th style={labelCellStyle} className=\"px-5 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider border-r border-gray-700\">\n                      Cost Item\n                    </th>\n                    {costData.map((c, idx) => (\n                      <th key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-left text-sm font-semibold text-white ${idx < costData.length - 1 ? 'border-r border-gray-700' : ''}`}>\n                        {c.contractor}\n                      </th>\n                    ))}\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr className=\"border-b-2 border-gray-200 bg-gradient-to-r from-gray-50 to-white\">\n                    <td style={labelCellStyle} className=\"px-5 py-5 text-sm font-bold text-gray-900 bg-gray-100 border-r border-gray-200\">Total Bid Amount</td>\n                    {costData.map((c, idx) => (\n                      <td\n                        key={c.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-5 ${isHighlighted(c.totalAmount, lowestPrice) ? 'bg-gradient-to-r from-switch-green-50 to-switch-green-100' : ''} ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          <span className={`text-xl font-bold ${isHighlighted(c.totalAmount, lowestPrice) ? 'text-switch-green-700' : 'text-gray-900'}`}>\n                            {formatCurrency(c.totalAmount)}\n                          </span>\n                          {isHighlighted(c.totalAmount, lowestPrice) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              <Star className=\"w-3 h-3\" /> LOWEST\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Equipment Cost</td>\n                    {costData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {formatCurrency(c.equipmentCost)}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Labor Cost</td>\n                    {costData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {formatCurrency(c.laborCost)}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Labor Warranty</td>\n                    {costData.map((c, idx) => (\n                      <td\n                        key={c.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm font-semibold ${isHighlighted(c.laborWarranty, bestLaborWarranty) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {c.laborWarranty ? `${c.laborWarranty} years` : '-'}\n                          {isHighlighted(c.laborWarranty, bestLaborWarranty) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              <Star className=\"w-3 h-3\" /> BEST\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Equipment Warranty</td>\n                    {costData.map((c, idx) => (\n                      <td\n                        key={c.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm font-semibold ${isHighlighted(c.equipmentWarranty, bestEquipmentWarranty) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {c.equipmentWarranty ? `${c.equipmentWarranty} years` : '-'}\n                          {isHighlighted(c.equipmentWarranty, bestEquipmentWarranty) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              <Star className=\"w-3 h-3\" /> BEST\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Estimated Duration</td>\n                    {costData.map((c, idx) => (\n                      <td\n                        key={c.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm ${isHighlighted(c.estimatedDays, fastestTimeline) ? 'text-switch-green-700 font-semibold' : 'text-gray-600'} ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        {c.estimatedDays ? `${c.estimatedDays} days` : '-'}\n                        {isHighlighted(c.estimatedDays, fastestTimeline) && c.estimatedDays && (\n                          <span className=\"ml-2 inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                            FASTEST\n                          </span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Financing Available</td>\n                    {costData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {c.financingAvailable ? (\n                          <span className=\"inline-flex items-center gap-1 text-switch-green-700 font-medium\">\n                            <CheckCircle className=\"w-5 h-5\" /> Available\n                          </span>\n                        ) : (\n                          <span className=\"inline-flex items-center gap-1 text-gray-400\">\n                            <XCircle className=\"w-5 h-5\" /> No\n                          </span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className={showFinancingDetails ? 'border-b border-gray-200 bg-gray-50/50' : ''}>\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">What is NOT Included</td>\n                    {costData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-900 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {c.exclusions.length > 0 ? (\n                          <ul className=\"text-xs space-y-1.5\">\n                            {c.exclusions.slice(0, 4).map((item, i) => (\n                              <li key={i} className=\"flex items-start gap-1.5\">\n                                <XCircle className=\"w-3.5 h-3.5 text-red-500 flex-shrink-0 mt-0.5\" />\n                                <span className=\"text-gray-700\">{item}</span>\n                              </li>\n                            ))}\n                            {c.exclusions.length > 4 && (\n                              <li className=\"text-gray-500 pl-5\">+{c.exclusions.length - 4} more items</li>\n                            )}\n                          </ul>\n                        ) : (\n                          <span className=\"text-gray-400\">Not specified</span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n\n                  {showFinancingDetails && (\n                    <>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Available Start Date</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {formatDateDisplay(c.startDateAvailable)}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Quote Valid Until</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {formatDateDisplay(c.validUntil)}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Bid Date</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {formatDateDisplay(c.bidDate)}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Materials Cost</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {formatCurrency(c.materialsCost)}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Permit Cost</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {formatCurrency(c.permitCost)}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Deposit Required</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.depositRequired ? formatCurrency(c.depositRequired) : c.depositPercentage ? `${c.depositPercentage}%` : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Payment Schedule</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.paymentSchedule || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr>\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Financing Terms</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.financingTerms || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                    </>\n                  )}\n                </tbody>\n              </>\n            )}\n          </table>\n        </div>\n\n        {(activeTab === 'equipment' || activeTab === 'contractors' || activeTab === 'costs') && (\n          <div className=\"px-5 py-3 bg-gray-50 border-t border-gray-200\">\n            <button\n              onClick={() => {\n                if (activeTab === 'equipment') setShowMoreEquipment(!showMoreEquipment);\n                if (activeTab === 'contractors') setShowMoreContractors(!showMoreContractors);\n                if (activeTab === 'costs') setShowFinancingDetails(!showFinancingDetails);\n              }}\n              className=\"flex items-center gap-2 text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors\"\n            >\n              {(activeTab === 'equipment' && showMoreEquipment) ||\n               (activeTab === 'contractors' && showMoreContractors) ||\n               (activeTab === 'costs' && showFinancingDetails) ? (\n                <>\n                  <ChevronUp className=\"w-4 h-4\" />\n                  Show Less\n                </>\n              ) : (\n                <>\n                  <ChevronDown className=\"w-4 h-4\" />\n                  {activeTab === 'costs' ? 'Show Financial Terms & Details' : 'Show More Details'}\n                </>\n              )}\n            </button>\n          </div>\n        )}\n      </div>\n\n      {activeTab === 'costs' && (\n        <div className=\"bg-white rounded-xl border-2 border-gray-200 shadow-lg overflow-hidden\">\n          <div className=\"px-5 py-3 border-b-2 border-gray-200 bg-gradient-to-r from-gray-700 to-gray-800\">\n            <h2 className=\"font-semibold text-white\">Scope - What's Included</h2>\n          </div>\n\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\" style={{ minWidth: tableMinWidth, tableLayout: 'fixed' }}>\n              <thead>\n                <tr className=\"bg-gray-900\">\n                  <th style={labelCellStyle} className=\"px-5 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider border-r border-gray-700\">\n                    Scope Item\n                  </th>\n                  {scopeData.map((s, idx) => (\n                    <th key={s.bidId} style={bidCellStyle} className={`px-5 py-4 text-left text-sm font-semibold text-white ${idx < scopeData.length - 1 ? 'border-r border-gray-700' : ''}`}>\n                      {s.contractor}\n                    </th>\n                  ))}\n                </tr>\n              </thead>\n              <tbody>\n                {scopeItems.map((item, rowIdx) => (\n                  <tr key={item.key} className={`border-b border-gray-200 ${rowIdx % 2 === 1 ? 'bg-gray-50/50' : ''}`}>\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">\n                      {item.label}\n                    </td>\n                    {scopeData.map((s, idx) => {\n                      const value = s[item.key as keyof typeof s];\n                      const detail = s[item.detailKey as keyof typeof s];\n                      return (\n                        <td key={s.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < scopeData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                          {value === true ? (\n                            <div>\n                              <span className=\"inline-flex items-center gap-1 text-switch-green-700 font-medium\">\n                                <CheckCircle className=\"w-5 h-5\" /> Included\n                              </span>\n                              {detail && typeof detail === 'string' && (\n                                <p className=\"text-xs text-gray-600 mt-1\">{detail}</p>\n                              )}\n                            </div>\n                          ) : value === false ? (\n                            <span className=\"inline-flex items-center gap-1 text-red-500\">\n                              <XCircle className=\"w-5 h-5\" /> Not Included\n                            </span>\n                          ) : (\n                            <span className=\"inline-flex items-center gap-1 text-gray-400\" title=\"Not specified in bid\">\n                              <HelpCircle className=\"w-5 h-5\" /> Unknown\n                            </span>\n                          )}\n                        </td>\n                      );\n                    })}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-2\">Export Your Analysis</h2>\n        <p className=\"text-sm text-gray-600 mb-4\">\n          Download or email a comprehensive report with all your bid comparisons.\n        </p>\n\n        <div className=\"flex flex-wrap gap-3\">\n          <button\n            onClick={handleDownloadReport}\n            disabled={downloadingReport}\n            className=\"btn btn-secondary flex items-center gap-2\"\n          >\n            {downloadingReport ? (\n              <>\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n                Generating...\n              </>\n            ) : (\n              <>\n                <Download className=\"w-4 h-4\" />\n                Download Report\n              </>\n            )}\n          </button>\n\n          <button\n            onClick={handleEmailReport}\n            disabled={emailingReport}\n            className=\"btn btn-secondary flex items-center gap-2\"\n          >\n            {emailingReport ? (\n              <>\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n                Sending...\n              </>\n            ) : reportSent ? (\n              <>\n                <CheckCircle className=\"w-4 h-4\" />\n                Sent to {user?.email}\n              </>\n            ) : (\n              <>\n                <Mail className=\"w-4 h-4\" />\n                Email Report\n              </>\n            )}\n          </button>\n        </div>\n\n        {reportSent && (\n          <p className=\"text-sm text-switch-green-600 mt-3 flex items-center gap-2\">\n            <CheckCircle className=\"w-4 h-4\" />\n            Report sent successfully! Check your email.\n          </p>\n        )}\n      </div>\n\n      <div className=\"flex justify-end\">\n        <button\n          onClick={handleContinue}\n          className=\"btn btn-primary flex items-center gap-2 px-6\"\n        >\n          Continue to Decide\n          <ArrowRight className=\"w-4 h-4\" />\n        </button>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { ChevronDown, ChevronRight, DollarSign, CheckSquare, Square, ExternalLink, Calendar, Clock, Info } from 'lucide-react';\nimport type { RebateProgram } from '../lib/types';\nimport { formatCurrency, formatDate } from '../lib/utils/formatters';\n\ninterface IncentivesTableProps {\n  rebatePrograms: RebateProgram[];\n  selectedIncentives: Set<string>;\n  onToggleIncentive: (programId: string) => void;\n}\n\nexport function IncentivesTable({ rebatePrograms, selectedIncentives, onToggleIncentive }: IncentivesTableProps) {\n  const [expandedRows, setExpandedRows] = useState<Set<string>>(new Set());\n\n  const toggleExpand = (programId: string) => {\n    const newExpanded = new Set(expandedRows);\n    if (newExpanded.has(programId)) {\n      newExpanded.delete(programId);\n    } else {\n      newExpanded.add(programId);\n    }\n    setExpandedRows(newExpanded);\n  };\n\n  const getAmount = (program: RebateProgram) => {\n    return program.max_rebate || program.rebate_amount || 0;\n  };\n\n  const totalSelectedAmount = Array.from(selectedIncentives).reduce((sum, id) => {\n    const program = rebatePrograms.find(p => p.id === id);\n    return sum + (program ? getAmount(program) : 0);\n  }, 0);\n\n  if (rebatePrograms.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-white rounded-xl border-2 border-gray-200 shadow-lg overflow-hidden\">\n      <div className=\"bg-gradient-to-r from-switch-green-600 to-switch-green-700 px-5 py-4\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center\">\n            <DollarSign className=\"w-5 h-5 text-white\" />\n          </div>\n          <div>\n            <h3 className=\"font-semibold text-white text-lg\">Available Rebates & Incentives</h3>\n            <p className=\"text-switch-green-100 text-sm\">\n              Select the incentives you plan to apply for\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"divide-y divide-gray-200\">\n        {rebatePrograms.map((program) => {\n          const isExpanded = expandedRows.has(program.id);\n          const isSelected = selectedIncentives.has(program.id);\n          const amount = getAmount(program);\n\n          return (\n            <div key={program.id} className={isSelected ? 'bg-switch-green-50/50' : ''}>\n              <div className=\"flex items-center gap-3 px-5 py-4\">\n                <button\n                  onClick={() => toggleExpand(program.id)}\n                  className=\"p-1 hover:bg-gray-100 rounded transition-colors\"\n                >\n                  {isExpanded ? (\n                    <ChevronDown className=\"w-5 h-5 text-gray-500\" />\n                  ) : (\n                    <ChevronRight className=\"w-5 h-5 text-gray-500\" />\n                  )}\n                </button>\n\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2\">\n                    <h4 className=\"font-semibold text-gray-900\">{program.program_name}</h4>\n                    {program.program_type && (\n                      <span className=\"text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full\">\n                        {program.program_type}\n                      </span>\n                    )}\n                    {program.income_qualified && (\n                      <span className=\"text-xs px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full\">\n                        Income Qualified\n                      </span>\n                    )}\n                  </div>\n                  {!isExpanded && program.description && (\n                    <p className=\"text-sm text-gray-500 mt-0.5 truncate\">{program.description}</p>\n                  )}\n                </div>\n\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"text-right\">\n                    <span className=\"text-lg font-bold text-switch-green-700\">\n                      {program.rebate_percentage\n                        ? `Up to ${program.rebate_percentage}%`\n                        : formatCurrency(amount)\n                      }\n                    </span>\n                    {program.rebate_percentage && program.max_rebate && (\n                      <p className=\"text-xs text-gray-500\">Max: {formatCurrency(program.max_rebate)}</p>\n                    )}\n                  </div>\n\n                  <button\n                    onClick={() => onToggleIncentive(program.id)}\n                    className=\"p-1 hover:bg-gray-100 rounded transition-colors\"\n                  >\n                    {isSelected ? (\n                      <CheckSquare className=\"w-6 h-6 text-switch-green-600\" />\n                    ) : (\n                      <Square className=\"w-6 h-6 text-gray-400 hover:text-gray-600\" />\n                    )}\n                  </button>\n                </div>\n              </div>\n\n              {isExpanded && (\n                <div className=\"px-5 pb-5 pl-14 space-y-4\">\n                  {program.description && (\n                    <div>\n                      <p className=\"text-sm text-gray-700\">{program.description}</p>\n                    </div>\n                  )}\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    {(program.valid_from || program.valid_until) && (\n                      <div className=\"flex items-start gap-2\">\n                        <Calendar className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <span className=\"text-xs font-medium text-gray-500 uppercase\">Valid Period</span>\n                          <p className=\"text-sm text-gray-900\">\n                            {program.valid_from && formatDate(program.valid_from)}\n                            {program.valid_from && program.valid_until && ' - '}\n                            {program.valid_until && formatDate(program.valid_until)}\n                            {!program.valid_from && !program.valid_until && 'Ongoing'}\n                          </p>\n                        </div>\n                      </div>\n                    )}\n\n                    {program.typical_processing_days && (\n                      <div className=\"flex items-start gap-2\">\n                        <Clock className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <span className=\"text-xs font-medium text-gray-500 uppercase\">Processing Time</span>\n                          <p className=\"text-sm text-gray-900\">\n                            ~{program.typical_processing_days} days\n                          </p>\n                        </div>\n                      </div>\n                    )}\n\n                    {program.available_states && program.available_states.length > 0 && !program.available_nationwide && (\n                      <div className=\"flex items-start gap-2\">\n                        <Info className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <span className=\"text-xs font-medium text-gray-500 uppercase\">Available In</span>\n                          <p className=\"text-sm text-gray-900\">\n                            {program.available_states.join(', ')}\n                          </p>\n                        </div>\n                      </div>\n                    )}\n\n                    {program.available_nationwide && (\n                      <div className=\"flex items-start gap-2\">\n                        <Info className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <span className=\"text-xs font-medium text-gray-500 uppercase\">Availability</span>\n                          <p className=\"text-sm text-gray-900\">Available Nationwide</p>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n\n                  {program.application_process && (\n                    <div className=\"bg-gray-50 rounded-lg p-3\">\n                      <span className=\"text-xs font-medium text-gray-500 uppercase\">How to Apply</span>\n                      <p className=\"text-sm text-gray-700 mt-1\">{program.application_process}</p>\n                    </div>\n                  )}\n\n                  {program.requirements && Object.keys(program.requirements).length > 0 && (\n                    <div className=\"bg-gray-50 rounded-lg p-3\">\n                      <span className=\"text-xs font-medium text-gray-500 uppercase\">Requirements</span>\n                      <ul className=\"text-sm text-gray-700 mt-1 space-y-1\">\n                        {Object.entries(program.requirements).map(([key, value]) => (\n                          <li key={key} className=\"flex items-start gap-2\">\n                            <span className=\"text-gray-400\">-</span>\n                            <span>{String(value)}</span>\n                          </li>\n                        ))}\n                      </ul>\n                    </div>\n                  )}\n\n                  {!program.stackable && program.cannot_stack_with && program.cannot_stack_with.length > 0 && (\n                    <div className=\"text-sm text-amber-700 bg-amber-50 rounded-lg p-3\">\n                      <span className=\"font-medium\">Note:</span> Cannot be combined with: {program.cannot_stack_with.join(', ')}\n                    </div>\n                  )}\n\n                  {program.application_url && (\n                    <a\n                      href={program.application_url}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"inline-flex items-center gap-2 text-sm text-switch-green-600 hover:text-switch-green-700 font-medium\"\n                    >\n                      <ExternalLink className=\"w-4 h-4\" />\n                      View Application Details\n                    </a>\n                  )}\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n\n      <div className=\"bg-gray-50 px-5 py-4 border-t-2 border-gray-200\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"text-sm text-gray-600\">\n            {selectedIncentives.size} of {rebatePrograms.length} selected\n          </div>\n          <div className=\"text-right\">\n            <span className=\"text-sm text-gray-500\">Estimated Total Savings</span>\n            <p className=\"text-2xl font-bold text-switch-green-700\">\n              {formatCurrency(totalSelectedAmount)}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { ChevronDown, ChevronRight, Lightbulb, CheckCircle, AlertCircle } from 'lucide-react';\nimport type { OverallFaq } from '../lib/types';\n\ninterface OverallFaqsCardProps {\n  faqs: OverallFaq[];\n}\n\nexport function OverallFaqsCard({ faqs }: OverallFaqsCardProps) {\n  const [expandedFaqs, setExpandedFaqs] = useState<Set<string>>(new Set());\n\n  const toggleExpand = (faqId: string) => {\n    const newExpanded = new Set(expandedFaqs);\n    if (newExpanded.has(faqId)) {\n      newExpanded.delete(faqId);\n    } else {\n      newExpanded.add(faqId);\n    }\n    setExpandedFaqs(newExpanded);\n  };\n\n  const getConfidenceBadge = (confidence?: string | null) => {\n    if (!confidence) return null;\n\n    const badgeConfig = {\n      high: { color: 'bg-switch-green-100 text-switch-green-700', icon: CheckCircle },\n      medium: { color: 'bg-amber-100 text-amber-700', icon: AlertCircle },\n      low: { color: 'bg-gray-100 text-gray-600', icon: AlertCircle },\n    };\n\n    const config = badgeConfig[confidence as keyof typeof badgeConfig];\n    if (!config) return null;\n\n    const Icon = config.icon;\n\n    return (\n      <span className={`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${config.color}`}>\n        <Icon className=\"w-3 h-3\" />\n      </span>\n    );\n  };\n\n  if (faqs.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-white rounded-xl border-2 border-gray-200 shadow-md overflow-hidden\">\n      <div className=\"bg-gradient-to-r from-switch-green-600 to-switch-green-700 px-5 py-4\">\n        <div className=\"flex items-center gap-3\">\n          <Lightbulb className=\"w-6 h-6 text-white\" />\n          <div>\n            <h3 className=\"font-bold text-white text-lg\">Overall Comparison Common Questions</h3>\n            <p className=\"text-switch-green-100 text-sm\">General questions about your bids</p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"divide-y divide-gray-200\">\n        {faqs.map((faq) => {\n          const isExpanded = expandedFaqs.has(faq.id);\n          const hasAnswer = faq.answer_text;\n\n          return (\n            <div key={faq.id} className={hasAnswer ? '' : 'bg-gray-50'}>\n              <button\n                onClick={() => toggleExpand(faq.id)}\n                className=\"w-full px-5 py-4 flex items-start gap-3 hover:bg-gray-50 transition-colors text-left\"\n              >\n                <div className=\"pt-0.5\">\n                  {isExpanded ? (\n                    <ChevronDown className=\"w-5 h-5 text-gray-500\" />\n                  ) : (\n                    <ChevronRight className=\"w-5 h-5 text-gray-500\" />\n                  )}\n                </div>\n\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-start justify-between gap-3\">\n                    <p className=\"font-medium text-gray-900 pr-4\">{faq.question_text}</p>\n                    {hasAnswer && getConfidenceBadge(faq.answer_confidence)}\n                  </div>\n\n                  {!hasAnswer && !isExpanded && (\n                    <p className=\"text-sm text-gray-500 mt-1\">\n                      Being analyzed...\n                    </p>\n                  )}\n                </div>\n              </button>\n\n              {isExpanded && (\n                <div className=\"px-5 pb-5 pl-14\">\n                  {hasAnswer ? (\n                    <div className=\"prose prose-sm max-w-none\">\n                      <p className=\"text-gray-700 whitespace-pre-wrap\">{faq.answer_text}</p>\n                    </div>\n                  ) : (\n                    <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4\">\n                      <p className=\"text-sm text-amber-800\">\n                        This answer is being generated during bid analysis. The AI will review all your\n                        bids and provide insights to help you make an informed decision.\n                      </p>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { ChevronDown, ChevronRight, FileText, CheckCircle, AlertCircle, Award } from 'lucide-react';\nimport type { BidFaqSet } from '../lib/types';\n\ninterface BidSpecificFaqsCardProps {\n  bidFaqSets: BidFaqSet[];\n  switchPreferredBids?: Set<string>;\n}\n\nexport function BidSpecificFaqsCard({ bidFaqSets, switchPreferredBids = new Set() }: BidSpecificFaqsCardProps) {\n  const [activeTabIndex, setActiveTabIndex] = useState(0);\n  const [expandedFaqs, setExpandedFaqs] = useState<Set<string>>(new Set());\n\n  const toggleExpand = (faqId: string) => {\n    const newExpanded = new Set(expandedFaqs);\n    if (newExpanded.has(faqId)) {\n      newExpanded.delete(faqId);\n    } else {\n      newExpanded.add(faqId);\n    }\n    setExpandedFaqs(newExpanded);\n  };\n\n  const getConfidenceBadge = (confidence?: string | null) => {\n    if (!confidence) return null;\n\n    const badgeConfig = {\n      high: { color: 'bg-switch-green-100 text-switch-green-700', icon: CheckCircle },\n      medium: { color: 'bg-amber-100 text-amber-700', icon: AlertCircle },\n      low: { color: 'bg-gray-100 text-gray-600', icon: AlertCircle },\n    };\n\n    const config = badgeConfig[confidence as keyof typeof badgeConfig];\n    if (!config) return null;\n\n    const Icon = config.icon;\n\n    return (\n      <span className={`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${config.color}`}>\n        <Icon className=\"w-3 h-3\" />\n      </span>\n    );\n  };\n\n  if (bidFaqSets.length === 0) {\n    return null;\n  }\n\n  const activeBidFaqSet = bidFaqSets[activeTabIndex];\n\n  return (\n    <div className=\"bg-white rounded-xl border-2 border-gray-200 shadow-md overflow-hidden\">\n      <div className=\"bg-gradient-to-r from-blue-600 to-blue-700 px-5 py-4\">\n        <div className=\"flex items-center gap-3\">\n          <FileText className=\"w-6 h-6 text-white\" />\n          <div>\n            <h3 className=\"font-bold text-white text-lg\">Bid-Specific Common Questions</h3>\n            <p className=\"text-blue-100 text-sm\">Questions about each contractor's bid</p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"border-b border-gray-200 bg-gray-50\">\n        <div className=\"flex overflow-x-auto scrollbar-hide\">\n          {bidFaqSets.map((bidFaqSet, index) => {\n            const isActive = activeTabIndex === index;\n            const isPreferred = switchPreferredBids.has(bidFaqSet.bid_id);\n\n            return (\n              <button\n                key={bidFaqSet.bid_id}\n                onClick={() => setActiveTabIndex(index)}\n                className={`\n                  relative px-4 sm:px-6 py-3 text-sm font-medium whitespace-nowrap transition-all duration-200\n                  flex items-center gap-2 border-b-2\n                  ${isActive\n                    ? 'text-blue-700 border-blue-600 bg-white'\n                    : 'text-gray-600 border-transparent hover:text-gray-900 hover:bg-gray-100'\n                  }\n                `}\n              >\n                <span>{bidFaqSet.contractor_name}</span>\n                {isPreferred && (\n                  <Award className=\"w-3.5 h-3.5 text-switch-green-600\" />\n                )}\n              </button>\n            );\n          })}\n        </div>\n      </div>\n\n      <div className=\"divide-y divide-gray-200\">\n        {activeBidFaqSet.faqs.length === 0 ? (\n          <div className=\"p-8 text-center\">\n            <FileText className=\"w-12 h-12 text-gray-300 mx-auto mb-3\" />\n            <p className=\"text-gray-600 text-sm\">\n              No common questions available for this bid yet. They will be generated during analysis.\n            </p>\n          </div>\n        ) : (\n          activeBidFaqSet.faqs.map((faq) => {\n            const isExpanded = expandedFaqs.has(faq.id);\n            const hasAnswer = faq.is_answered && faq.answer_text;\n\n            return (\n              <div key={faq.id} className={hasAnswer ? '' : 'bg-gray-50'}>\n                <button\n                  onClick={() => toggleExpand(faq.id)}\n                  className=\"w-full px-5 py-4 flex items-start gap-3 hover:bg-gray-50 transition-colors text-left\"\n                >\n                  <div className=\"pt-0.5\">\n                    {isExpanded ? (\n                      <ChevronDown className=\"w-5 h-5 text-gray-500\" />\n                    ) : (\n                      <ChevronRight className=\"w-5 h-5 text-gray-500\" />\n                    )}\n                  </div>\n\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-start justify-between gap-3\">\n                      <p className=\"font-medium text-gray-900 pr-4\">{faq.question_text}</p>\n                      {hasAnswer && getConfidenceBadge(faq.answer_confidence)}\n                    </div>\n\n                    {!hasAnswer && !isExpanded && (\n                      <p className=\"text-sm text-gray-500 mt-1\">\n                        Being analyzed...\n                      </p>\n                    )}\n                  </div>\n                </button>\n\n                {isExpanded && (\n                  <div className=\"px-5 pb-5 pl-14\">\n                    {hasAnswer ? (\n                      <div className=\"prose prose-sm max-w-none\">\n                        <p className=\"text-gray-700 whitespace-pre-wrap\">{faq.answer_text}</p>\n                      </div>\n                    ) : (\n                      <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4\">\n                        <p className=\"text-sm text-amber-800\">\n                          This answer is being generated during bid analysis. The AI will review {activeBidFaqSet.contractor_name}'s\n                          bid and provide detailed insights to help you make an informed decision.\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            );\n          })\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { DollarSign, Star, Shield, Zap, CheckCircle, Copy, Check, ArrowRight, HelpCircle, BookOpen, Award, ChevronDown, ChevronUp, Phone, Mail, Globe, Calendar, Clock, FlaskConical, Download, FileCheck2 } from 'lucide-react';\nimport { usePhase } from '../../context/PhaseContext';\nimport { supabase } from '../../lib/supabaseClient';\nimport { IncentivesTable } from '../IncentivesTable';\nimport { OverallFaqsCard } from '../OverallFaqsCard';\nimport { BidSpecificFaqsCard } from '../BidSpecificFaqsCard';\nimport type { BidQuestion, RebateProgram, ProjectFaqData } from '../../lib/types';\nimport { getFaqsByProject } from '../../lib/database/bidsmartService';\nimport { formatCurrency, formatDate } from '../../lib/utils/formatters';\n\ntype DecideTab = 'incentives' | 'questions' | 'faqs';\n\ninterface TabConfig {\n  key: DecideTab;\n  label: string;\n  description: string;\n  icon: React.ReactNode;\n}\n\nexport function DecidePhase() {\n  const { bids, questions, refreshQuestions, completePhase, projectId } = usePhase();\n  const [activeTab, setActiveTab] = useState<DecideTab>('incentives');\n  const [rebatePrograms, setRebatePrograms] = useState<RebateProgram[]>([]);\n  const [selectedIncentives, setSelectedIncentives] = useState<Set<string>>(new Set());\n  const [selectedContractor, setSelectedContractor] = useState<string | null>(null);\n  const [copiedContractor, setCopiedContractor] = useState<string | null>(null);\n  const [expandedBids, setExpandedBids] = useState<Set<string>>(new Set());\n  const [projectFaqData, setProjectFaqData] = useState<ProjectFaqData>({ overall: [], by_bid: [] });\n\n  useEffect(() => {\n    loadRebatePrograms();\n    loadAllFaqs();\n  }, [projectId, bids]);\n\n  const loadRebatePrograms = async () => {\n    const { data } = await supabase\n      .from('rebate_programs')\n      .select('*')\n      .eq('is_active', true)\n      .order('program_name');\n\n    if (data) {\n      setRebatePrograms(data);\n      setSelectedIncentives(new Set(data.map(p => p.id)));\n    }\n  };\n\n  const loadAllFaqs = async () => {\n    if (!projectId || bids.length === 0) return;\n\n    try {\n      const faqData = await getFaqsByProject(projectId, bids);\n      setProjectFaqData(faqData);\n    } catch (error) {\n      console.error('Error loading FAQs:', error);\n    }\n  };\n\n  const toggleIncentive = (programId: string) => {\n    const newSelected = new Set(selectedIncentives);\n    if (newSelected.has(programId)) {\n      newSelected.delete(programId);\n    } else {\n      newSelected.add(programId);\n    }\n    setSelectedIncentives(newSelected);\n  };\n\n  const getTotalSelectedRebates = () => {\n    return Array.from(selectedIncentives).reduce((sum, id) => {\n      const program = rebatePrograms.find(p => p.id === id);\n      return sum + (program ? (Number(program.max_rebate) || Number(program.rebate_amount) || 0) : 0);\n    }, 0);\n  };\n\n  const toggleQuestionAnswered = async (question: BidQuestion) => {\n    await supabase\n      .from('bid_questions')\n      .update({\n        is_answered: !question.is_answered,\n        answered_at: !question.is_answered ? new Date().toISOString() : null,\n      })\n      .eq('id', question.id);\n\n    refreshQuestions();\n  };\n\n  const getQuestionsForBid = (bidId: string): BidQuestion[] => {\n    return questions.filter((q) => q.bid_id === bidId);\n  };\n\n  const copyQuestionsToClipboard = async (bidId: string, contractorName: string) => {\n    const bidQuestions = getQuestionsForBid(bidId);\n    const unansweredQuestions = bidQuestions.filter((q) => !q.is_answered);\n\n    const text = `Questions for ${contractorName}:\\n\\n${unansweredQuestions\n      .map((q, i) => `${i + 1}. ${q.question_text}`)\n      .join('\\n\\n')}`;\n\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopiedContractor(bidId);\n      setTimeout(() => setCopiedContractor(null), 2000);\n    } catch {\n      const textArea = document.createElement('textarea');\n      textArea.value = text;\n      textArea.style.position = 'fixed';\n      textArea.style.opacity = '0';\n      document.body.appendChild(textArea);\n      textArea.select();\n      try {\n        document.execCommand('copy');\n        setCopiedContractor(bidId);\n        setTimeout(() => setCopiedContractor(null), 2000);\n      } catch {\n        console.error('Failed to copy to clipboard');\n      }\n      document.body.removeChild(textArea);\n    }\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'high':\n        return 'bg-red-100 text-red-700 border-red-200';\n      case 'medium':\n        return 'bg-amber-100 text-amber-700 border-amber-200';\n      default:\n        return 'bg-gray-100 text-gray-600 border-gray-200';\n    }\n  };\n\n  const toggleBidExpanded = (bidId: string) => {\n    const newExpanded = new Set(expandedBids);\n    if (newExpanded.has(bidId)) {\n      newExpanded.delete(bidId);\n    } else {\n      newExpanded.add(bidId);\n    }\n    setExpandedBids(newExpanded);\n  };\n\n  const totalSelectedRebates = getTotalSelectedRebates();\n\n  const getBidData = () => {\n    return bids.map((b) => {\n      const mainEquipment = b.equipment.find(\n        (e) => e.equipment_type === 'outdoor_unit' || e.equipment_type === 'heat_pump'\n      ) || b.equipment[0];\n\n      const netCost = b.bid.total_bid_amount - totalSelectedRebates;\n\n      return {\n        bidId: b.bid.id,\n        contractor: b.bid.contractor_name || b.bid.contractor_company || 'Unknown',\n        totalAmount: b.bid.total_bid_amount,\n        estimatedRebates: totalSelectedRebates,\n        netCost,\n        equipmentBrand: mainEquipment?.brand || '-',\n        equipmentModel: mainEquipment?.model_number || mainEquipment?.model_name || '-',\n        seer2: mainEquipment?.seer2_rating || mainEquipment?.seer_rating,\n        googleRating: b.bid.contractor_google_rating,\n        reviewCount: b.bid.contractor_google_review_count,\n        laborWarranty: b.bid.labor_warranty_years,\n        equipmentWarranty: b.bid.equipment_warranty_years,\n        isSwitchPreferred: b.bid.contractor_is_switch_preferred,\n        phone: b.bid.contractor_phone,\n        email: b.bid.contractor_email,\n        website: b.bid.contractor_website,\n        license: b.bid.contractor_license,\n        licenseState: b.bid.contractor_license_state,\n        insuranceVerified: b.bid.contractor_insurance_verified,\n        yearsInBusiness: b.bid.contractor_years_in_business,\n        totalInstalls: b.bid.contractor_total_installs,\n        certifications: b.bid.contractor_certifications || [],\n        estimatedDays: b.bid.estimated_days,\n        startDateAvailable: b.bid.start_date_available,\n        validUntil: b.bid.valid_until,\n        bidDate: b.bid.bid_date,\n        financingOffered: b.bid.financing_offered,\n        financingTerms: b.bid.financing_terms,\n        userNotes: b.bid.user_notes,\n        isFavorite: b.bid.is_favorite,\n        verifiedByUser: b.bid.verified_by_user,\n        extractionConfidence: b.bid.extraction_confidence,\n        valueScore: b.bid.value_score,\n        qualityScore: b.bid.quality_score,\n        completenessScore: b.bid.completeness_score,\n      };\n    });\n  };\n\n  const bidData = getBidData();\n  const lowestPrice = bidData.length > 0 ? Math.min(...bidData.map((b) => b.totalAmount || Infinity)) : 0;\n  const lowestNetCost = bidData.length > 0 ? Math.min(...bidData.map((b) => b.netCost || Infinity)) : 0;\n  const bestRating = bidData.length > 0 ? Math.max(...bidData.map((b) => b.googleRating || 0)) : 0;\n  const bestSeer = bidData.length > 0 ? Math.max(...bidData.map((b) => b.seer2 || 0)) : 0;\n  const bestWarranty = bidData.length > 0 ? Math.max(...bidData.map((b) => (b.laborWarranty || 0) + (b.equipmentWarranty || 0))) : 0;\n\n  const handleContinue = () => {\n    completePhase(3);\n  };\n\n  const toggleSelection = (bidId: string) => {\n    setSelectedContractor(selectedContractor === bidId ? null : bidId);\n  };\n\n  function handleDownloadChecklist() {\n    const url = `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/generate-contractor-checklist?project_id=${projectId}`;\n    window.open(url, '_blank');\n  }\n\n  const tabs: TabConfig[] = [\n    {\n      key: 'incentives',\n      label: 'Available Incentives',\n      description: 'Select rebates you plan to apply for',\n      icon: <DollarSign className=\"w-5 h-5\" />\n    },\n    {\n      key: 'faqs',\n      label: 'Common Questions',\n      description: 'Questions about your bids and contractors',\n      icon: <BookOpen className=\"w-5 h-5\" />\n    },\n    {\n      key: 'questions',\n      label: 'Contractor Questions',\n      description: 'Ask contractors for clarification',\n      icon: <HelpCircle className=\"w-5 h-5\" />\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Make Your Decision</h1>\n        <p className=\"text-gray-600 mt-1\">\n          Review incentives, ask questions, and understand your bids to choose the best contractor.\n        </p>\n      </div>\n\n      <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-3 flex items-start gap-2\">\n        <FlaskConical className=\"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5\" />\n        <p className=\"text-sm text-amber-800\">\n          <span className=\"font-medium\">Alpha:</span> Rebate eligibility and amounts are estimates. Always verify with the program administrator before making decisions.\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-6\">\n        {tabs.map((tab, index) => (\n          <button\n            key={tab.key}\n            onClick={() => setActiveTab(tab.key)}\n            className={`\n              relative p-3 sm:p-4 rounded-xl text-left transition-all duration-200 border-2\n              ${activeTab === tab.key\n                ? 'bg-gradient-to-br from-switch-green-50 to-switch-green-100 border-switch-green-500 shadow-md'\n                : 'bg-white border-gray-200 hover:border-gray-300 hover:shadow-sm'\n              }\n            `}\n          >\n            <div className=\"flex items-start gap-2 sm:gap-3\">\n              <div className={`\n                w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0\n                ${activeTab === tab.key\n                  ? 'bg-switch-green-600 text-white'\n                  : 'bg-gray-100 text-gray-500'\n                }\n              `}>\n                {tab.icon}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-center gap-2 flex-wrap\">\n                  <span className={`\n                    text-xs font-medium px-2 py-0.5 rounded-full whitespace-nowrap\n                    ${activeTab === tab.key\n                      ? 'bg-switch-green-600 text-white'\n                      : 'bg-gray-200 text-gray-600'\n                    }\n                  `}>\n                    {index + 1} of 3\n                  </span>\n                </div>\n                <h3 className={`\n                  font-semibold mt-1 text-sm sm:text-base\n                  ${activeTab === tab.key ? 'text-switch-green-800' : 'text-gray-900'}\n                `}>\n                  {tab.label}\n                </h3>\n                <p className={`\n                  text-xs sm:text-sm mt-0.5 line-clamp-2\n                  ${activeTab === tab.key ? 'text-switch-green-700' : 'text-gray-500'}\n                `}>\n                  {tab.description}\n                </p>\n              </div>\n            </div>\n            {activeTab === tab.key && (\n              <div className=\"hidden sm:block absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2\">\n                <div className=\"w-3 h-3 bg-switch-green-500 rotate-45\"></div>\n              </div>\n            )}\n          </button>\n        ))}\n      </div>\n\n      {selectedContractor && (\n        <div className=\"bg-gradient-to-r from-switch-green-50 to-blue-50 border-2 border-switch-green-300 rounded-xl p-6 shadow-lg\">\n          <div className=\"flex items-start gap-4\">\n            <div className=\"p-3 bg-white rounded-lg\">\n              <FileCheck2 className=\"w-8 h-8 text-switch-green-600\" />\n            </div>\n            <div className=\"flex-1\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <CheckCircle className=\"w-5 h-5 text-switch-green-600\" />\n                <h3 className=\"text-lg font-bold text-gray-900\">\n                  {bidData.find(b => b.bidId === selectedContractor)?.contractor} Selected\n                </h3>\n              </div>\n              <p className=\"text-gray-700 mb-4\">\n                Give your contractor this quality installation checklist before work begins.\n                It sets clear expectations and ensures industry-standard practices are followed.\n              </p>\n              <div className=\"flex flex-wrap gap-3\">\n                <button\n                  onClick={handleDownloadChecklist}\n                  className=\"btn btn-primary flex items-center gap-2\"\n                >\n                  <Download className=\"w-4 h-4\" />\n                  Download Checklist\n                </button>\n                <div className=\"text-sm text-gray-600 flex items-center gap-2 px-4 py-2 bg-white rounded-lg border border-gray-200\">\n                  <span className=\"font-medium\">Next Step:</span> Share this with your contractor before installation\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {activeTab === 'incentives' && (\n        <div className=\"space-y-6\">\n          {rebatePrograms.length > 0 ? (\n            <IncentivesTable\n              rebatePrograms={rebatePrograms}\n              selectedIncentives={selectedIncentives}\n              onToggleIncentive={toggleIncentive}\n            />\n          ) : (\n            <div className=\"bg-white rounded-xl border-2 border-gray-200 p-12 text-center\">\n              <DollarSign className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Incentives Available</h3>\n              <p className=\"text-gray-600\">There are currently no active rebate programs in the system.</p>\n            </div>\n          )}\n        </div>\n      )}\n\n      {activeTab === 'faqs' && (\n        <div className=\"space-y-6\">\n          {bids.length === 0 ? (\n            <div className=\"bg-white rounded-xl border-2 border-gray-200 p-12 text-center\">\n              <BookOpen className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Bids Available</h3>\n              <p className=\"text-gray-600\">Upload your contractor bids to see common questions and answers.</p>\n            </div>\n          ) : (\n            <>\n              {projectFaqData.overall.length > 0 && (\n                <OverallFaqsCard faqs={projectFaqData.overall} />\n              )}\n\n              {projectFaqData.by_bid.length > 0 && (\n                <BidSpecificFaqsCard\n                  bidFaqSets={projectFaqData.by_bid}\n                  switchPreferredBids={new Set(bids.filter(b => b.bid.contractor_is_switch_preferred).map(b => b.bid.id))}\n                />\n              )}\n\n              {projectFaqData.overall.length === 0 && projectFaqData.by_bid.length === 0 && (\n                <div className=\"bg-white rounded-xl border-2 border-gray-200 p-12 text-center\">\n                  <BookOpen className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Common Questions Data Available Yet</h3>\n                  <p className=\"text-gray-600\">\n                    Answers will be generated by AI during bid processing. Check back soon!\n                  </p>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      )}\n\n      {activeTab === 'questions' && (\n        <div className=\"space-y-6\">\n        {bidData.map((bid) => {\n          const bidQuestions = getQuestionsForBid(bid.bidId);\n          const answeredCount = bidQuestions.filter((q) => q.is_answered).length;\n          const unansweredQuestions = bidQuestions.filter((q) => !q.is_answered);\n          const isSelected = selectedContractor === bid.bidId;\n          const isExpanded = expandedBids.has(bid.bidId);\n\n          const isBestPrice = bid.totalAmount === lowestPrice;\n          const isBestNetCost = bid.netCost === lowestNetCost;\n          const isBestRating = bid.googleRating === bestRating && bid.googleRating > 0;\n          const isBestEfficiency = bid.seer2 === bestSeer && bid.seer2 > 0;\n          const totalWarranty = (bid.laborWarranty || 0) + (bid.equipmentWarranty || 0);\n          const isBestWarranty = totalWarranty === bestWarranty && totalWarranty > 0;\n\n          return (\n            <div\n              key={bid.bidId}\n              className={`\n                relative bg-white rounded-xl overflow-hidden transition-all duration-200\n                ${isSelected\n                  ? 'ring-4 ring-switch-green-500 shadow-xl border-2 border-switch-green-500'\n                  : 'border-2 border-gray-200 shadow-md hover:shadow-lg hover:border-gray-300'\n                }\n              `}\n            >\n              <div className={`\n                absolute top-0 left-0 w-1.5 h-full\n                ${isSelected ? 'bg-switch-green-500' : 'bg-gradient-to-b from-switch-green-400 to-switch-green-600'}\n              `} />\n\n              <div className=\"p-6 pl-8\">\n                <div className=\"flex items-start justify-between mb-5\">\n                  <div className=\"flex items-center gap-4\">\n                    <h3 className=\"text-xl font-bold text-gray-900\">{bid.contractor}</h3>\n                    {bid.isSwitchPreferred && (\n                      <span className=\"inline-flex items-center gap-1 px-2.5 py-1 bg-gradient-to-r from-switch-green-500 to-switch-green-600 text-white rounded-full text-xs font-medium\">\n                        <Award className=\"w-3 h-3\" /> Switch Preferred\n                      </span>\n                    )}\n                  </div>\n                  <div className=\"flex items-center gap-3\">\n                    {isSelected && (\n                      <div className=\"w-8 h-8 bg-switch-green-500 rounded-full flex items-center justify-center\">\n                        <CheckCircle className=\"w-5 h-5 text-white\" />\n                      </div>\n                    )}\n                    <button\n                      onClick={() => toggleSelection(bid.bidId)}\n                      className={`\n                        py-2 px-4 rounded-lg font-medium transition-all duration-200 flex items-center gap-2 text-sm\n                        ${isSelected\n                          ? 'bg-switch-green-600 text-white hover:bg-switch-green-700'\n                          : 'bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300'\n                        }\n                      `}\n                    >\n                      {isSelected ? (\n                        <>\n                          <CheckCircle className=\"w-4 h-4\" />\n                          My Choice\n                        </>\n                      ) : (\n                        'Mark as My Choice'\n                      )}\n                    </button>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6\">\n                  <div className=\"lg:col-span-5 space-y-4\">\n                    <div className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-5 border border-gray-200\">\n                      <div className=\"flex items-center justify-between mb-3\">\n                        <span className=\"text-sm font-semibold text-gray-600 uppercase tracking-wide\">Total Price</span>\n                        {isBestPrice && (\n                          <span className=\"inline-flex items-center gap-1 px-2.5 py-1 bg-switch-green-600 text-white text-xs font-semibold rounded-full\">\n                            <Star className=\"w-3 h-3\" /> LOWEST\n                          </span>\n                        )}\n                      </div>\n                      <div className={`text-3xl font-bold ${isBestPrice ? 'text-switch-green-700' : 'text-gray-900'}`}>\n                        {formatCurrency(bid.totalAmount)}\n                      </div>\n                      {totalSelectedRebates > 0 && (\n                        <div className=\"mt-3 pt-3 border-t border-gray-200\">\n                          <div className=\"flex items-center justify-between text-sm\">\n                            <span className=\"text-gray-500\">Selected Rebates</span>\n                            <span className=\"text-switch-green-600 font-semibold\">-{formatCurrency(totalSelectedRebates)}</span>\n                          </div>\n                          <div className=\"flex items-center justify-between mt-2\">\n                            <span className=\"text-sm font-semibold text-gray-700\">Net Cost</span>\n                            <span className={`text-xl font-bold ${isBestNetCost ? 'text-switch-green-700' : 'text-gray-900'}`}>\n                              {formatCurrency(bid.netCost)}\n                            </span>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n\n                    <div className=\"grid grid-cols-3 gap-3\">\n                      <div className=\"bg-gray-50 rounded-lg p-4 border border-gray-200\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <Zap className=\"w-4 h-4 text-amber-500\" />\n                          <span className=\"text-xs font-semibold text-gray-500 uppercase\">Equipment</span>\n                        </div>\n                        <div className=\"text-sm font-bold text-gray-900\" title={`${bid.equipmentBrand} ${bid.equipmentModel}`}>\n                          {bid.equipmentBrand}\n                        </div>\n                        {bid.seer2 && (\n                          <div className=\"flex items-center gap-1 mt-1\">\n                            <span className={`text-xs ${isBestEfficiency ? 'text-switch-green-700 font-bold' : 'text-gray-600'}`}>\n                              SEER2: {bid.seer2}\n                            </span>\n                            {isBestEfficiency && <Star className=\"w-3 h-3 text-switch-green-600\" />}\n                          </div>\n                        )}\n                      </div>\n\n                      <div className=\"bg-gray-50 rounded-lg p-4 border border-gray-200\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <Star className=\"w-4 h-4 text-yellow-500\" />\n                          <span className=\"text-xs font-semibold text-gray-500 uppercase\">Rating</span>\n                        </div>\n                        {bid.googleRating ? (\n                          <>\n                            <div className={`text-sm font-bold ${isBestRating ? 'text-switch-green-700' : 'text-gray-900'}`}>\n                              {bid.googleRating.toFixed(1)} / 5\n                              {isBestRating && <Star className=\"w-3 h-3 inline ml-1 text-switch-green-600\" />}\n                            </div>\n                            {bid.reviewCount && (\n                              <div className=\"text-xs text-gray-500 mt-0.5\">{bid.reviewCount} reviews</div>\n                            )}\n                          </>\n                        ) : (\n                          <div className=\"text-sm text-gray-400\">N/A</div>\n                        )}\n                      </div>\n\n                      <div className=\"bg-gray-50 rounded-lg p-4 border border-gray-200\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <Shield className=\"w-4 h-4 text-switch-green-600\" />\n                          <span className=\"text-xs font-semibold text-gray-500 uppercase\">Warranty</span>\n                        </div>\n                        {(bid.laborWarranty || bid.equipmentWarranty) ? (\n                          <div className=\"space-y-0.5\">\n                            {bid.laborWarranty && (\n                              <div className={`text-xs ${isBestWarranty ? 'text-switch-green-700 font-bold' : 'text-gray-900'}`}>\n                                {bid.laborWarranty}yr labor\n                              </div>\n                            )}\n                            {bid.equipmentWarranty && (\n                              <div className={`text-xs ${isBestWarranty ? 'text-switch-green-700 font-bold' : 'text-gray-900'}`}>\n                                {bid.equipmentWarranty}yr equip\n                              </div>\n                            )}\n                            {isBestWarranty && (\n                              <span className=\"inline-flex items-center gap-1 px-1.5 py-0.5 bg-switch-green-600 text-white text-[10px] font-medium rounded mt-1\">\n                                BEST\n                              </span>\n                            )}\n                          </div>\n                        ) : (\n                          <div className=\"text-sm text-gray-400\">N/A</div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"lg:col-span-7\">\n                    <div className=\"border-2 border-gray-200 rounded-xl overflow-hidden h-full flex flex-col\">\n                      <div className=\"bg-gray-100 px-5 py-3 flex items-center justify-between border-b border-gray-200\">\n                        <div className=\"flex items-center gap-2\">\n                          <HelpCircle className=\"w-5 h-5 text-gray-600\" />\n                          <span className=\"text-sm font-bold text-gray-800\">Questions to Ask This Contractor</span>\n                        </div>\n                        <div className=\"flex items-center gap-3\">\n                          <span className=\"text-xs text-gray-500 bg-white px-2 py-1 rounded-full border\">\n                            {answeredCount}/{bidQuestions.length} answered\n                          </span>\n                          {unansweredQuestions.length > 0 && (\n                            <button\n                              onClick={() => copyQuestionsToClipboard(bid.bidId, bid.contractor)}\n                              className=\"flex items-center gap-1.5 px-3 py-1.5 text-sm text-gray-600 hover:text-gray-800 bg-white hover:bg-gray-50 border border-gray-300 rounded-lg transition-colors\"\n                              title=\"Copy questions\"\n                            >\n                              {copiedContractor === bid.bidId ? (\n                                <>\n                                  <Check className=\"w-4 h-4 text-switch-green-600\" />\n                                  <span className=\"text-switch-green-600 font-medium\">Copied!</span>\n                                </>\n                              ) : (\n                                <>\n                                  <Copy className=\"w-4 h-4\" />\n                                  <span>Copy All</span>\n                                </>\n                              )}\n                            </button>\n                          )}\n                        </div>\n                      </div>\n                      <div className=\"p-4 flex-1 overflow-y-auto max-h-72\">\n                        {bidQuestions.length === 0 ? (\n                          <p className=\"text-sm text-gray-500 text-center py-6\">\n                            No questions for this bid.\n                          </p>\n                        ) : (\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                            {bidQuestions.map((question) => (\n                              <div\n                                key={question.id}\n                                className={`flex items-start gap-2 p-3 rounded-lg transition-colors ${\n                                  question.is_answered ? 'bg-gray-50 opacity-60' : 'bg-white border border-gray-200 hover:border-gray-300'\n                                }`}\n                              >\n                                <button\n                                  onClick={() => toggleQuestionAnswered(question)}\n                                  className=\"flex-shrink-0 mt-0.5\"\n                                >\n                                  {question.is_answered ? (\n                                    <CheckCircle className=\"w-5 h-5 text-switch-green-600\" />\n                                  ) : (\n                                    <div className=\"w-5 h-5 rounded-full border-2 border-gray-300 hover:border-switch-green-500 transition-colors\" />\n                                  )}\n                                </button>\n                                <div className=\"flex-1 min-w-0\">\n                                  <p className={`text-sm ${question.is_answered ? 'text-gray-400 line-through' : 'text-gray-800'}`}>\n                                    {question.question_text}\n                                  </p>\n                                  {!question.is_answered && (\n                                    <div className=\"flex items-center gap-1 mt-1.5\">\n                                      <span className={`text-[10px] px-2 py-0.5 rounded border font-medium ${getPriorityColor(question.priority)}`}>\n                                        {question.priority}\n                                      </span>\n                                    </div>\n                                  )}\n                                </div>\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {isExpanded && (\n                  <div className=\"mt-5 pt-5 border-t border-gray-200\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                      <div className=\"space-y-3\">\n                        <h4 className=\"text-sm font-semibold text-gray-700 uppercase tracking-wide\">Contact Info</h4>\n                        {bid.phone && (\n                          <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                            <Phone className=\"w-4 h-4 text-gray-400\" />\n                            {bid.phone}\n                          </div>\n                        )}\n                        {bid.email && (\n                          <div className=\"flex items-center gap-2 text-sm\">\n                            <Mail className=\"w-4 h-4 text-gray-400\" />\n                            <a href={`mailto:${bid.email}`} className=\"text-switch-green-600 hover:underline\">\n                              {bid.email}\n                            </a>\n                          </div>\n                        )}\n                        {bid.website && (\n                          <div className=\"flex items-center gap-2 text-sm\">\n                            <Globe className=\"w-4 h-4 text-gray-400\" />\n                            <a href={bid.website} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-switch-green-600 hover:underline truncate\">\n                              {bid.website.replace(/^https?:\\/\\//, '')}\n                            </a>\n                          </div>\n                        )}\n                        {bid.license && (\n                          <div className=\"text-sm text-gray-600\">\n                            <span className=\"text-gray-500\">License:</span> {bid.license}\n                            {bid.licenseState && ` (${bid.licenseState})`}\n                          </div>\n                        )}\n                        {bid.insuranceVerified && (\n                          <div className=\"flex items-center gap-1.5 text-sm text-switch-green-700\">\n                            <CheckCircle className=\"w-4 h-4\" /> Insurance Verified\n                          </div>\n                        )}\n                      </div>\n\n                      <div className=\"space-y-3\">\n                        <h4 className=\"text-sm font-semibold text-gray-700 uppercase tracking-wide\">Timeline & Details</h4>\n                        {bid.estimatedDays && (\n                          <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                            <Clock className=\"w-4 h-4 text-gray-400\" />\n                            Est. {bid.estimatedDays} days to complete\n                          </div>\n                        )}\n                        {bid.startDateAvailable && (\n                          <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                            <Calendar className=\"w-4 h-4 text-gray-400\" />\n                            Available: {formatDate(bid.startDateAvailable)}\n                          </div>\n                        )}\n                        {bid.validUntil && (\n                          <div className=\"text-sm text-gray-600\">\n                            <span className=\"text-gray-500\">Quote valid until:</span> {formatDate(bid.validUntil)}\n                          </div>\n                        )}\n                        {bid.bidDate && (\n                          <div className=\"text-sm text-gray-600\">\n                            <span className=\"text-gray-500\">Bid date:</span> {formatDate(bid.bidDate)}\n                          </div>\n                        )}\n                        {bid.financingOffered && (\n                          <div className=\"text-sm text-gray-600\">\n                            <span className=\"text-switch-green-700 font-medium\">Financing Available</span>\n                            {bid.financingTerms && <span className=\"text-gray-500 ml-1\">- {bid.financingTerms}</span>}\n                          </div>\n                        )}\n                      </div>\n\n                      <div className=\"space-y-3\">\n                        <h4 className=\"text-sm font-semibold text-gray-700 uppercase tracking-wide\">Experience</h4>\n                        {bid.yearsInBusiness && (\n                          <div className=\"text-sm text-gray-600\">\n                            {bid.yearsInBusiness} years in business\n                          </div>\n                        )}\n                        {bid.totalInstalls && (\n                          <div className=\"text-sm text-gray-600\">\n                            {bid.totalInstalls.toLocaleString()} total installs\n                          </div>\n                        )}\n                        {bid.certifications.length > 0 && (\n                          <div className=\"flex flex-wrap gap-1\">\n                            {bid.certifications.map((cert, i) => (\n                              <span key={i} className=\"text-xs px-2 py-0.5 bg-gray-100 text-gray-700 rounded\">\n                                {cert}\n                              </span>\n                            ))}\n                          </div>\n                        )}\n                        {bid.extractionConfidence && (\n                          <div className=\"text-xs text-gray-500\">\n                            Extraction confidence: <span className=\"capitalize font-medium\">{bid.extractionConfidence}</span>\n                          </div>\n                        )}\n                        {(bid.valueScore || bid.qualityScore || bid.completenessScore) && (\n                          <div className=\"flex items-center gap-2\">\n                            {bid.valueScore && (\n                              <span className=\"text-xs px-2 py-0.5 bg-switch-green-100 text-switch-green-700 rounded\">\n                                Value: {bid.valueScore}\n                              </span>\n                            )}\n                            {bid.qualityScore && (\n                              <span className=\"text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded\">\n                                Quality: {bid.qualityScore}\n                              </span>\n                            )}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"mt-4 pt-4 border-t border-gray-100\">\n                  <button\n                    onClick={() => toggleBidExpanded(bid.bidId)}\n                    className=\"flex items-center gap-2 text-sm font-medium text-gray-500 hover:text-gray-700 transition-colors\"\n                  >\n                    {isExpanded ? (\n                      <>\n                        <ChevronUp className=\"w-4 h-4\" />\n                        Show Less\n                      </>\n                    ) : (\n                      <>\n                        <ChevronDown className=\"w-4 h-4\" />\n                        Show More Details\n                      </>\n                    )}\n                  </button>\n                </div>\n              </div>\n            </div>\n          );\n        })}\n\n          {bids.length === 0 && (\n            <div className=\"bg-white rounded-xl border-2 border-gray-200 p-12 text-center\">\n              <HelpCircle className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Bids to Review</h3>\n              <p className=\"text-gray-600\">Upload your contractor bids in the Gather phase to see them here.</p>\n            </div>\n          )}\n        </div>\n      )}\n\n      <div className=\"bg-gray-50 rounded-xl border border-gray-200 p-4\">\n        <p className=\"text-sm text-gray-600\">\n          <strong>Note:</strong> Marking a contractor as your choice is optional and for your reference only.\n          You will work directly with your chosen contractor to finalize the installation.\n        </p>\n      </div>\n\n      <div className=\"flex justify-end\">\n        <button\n          onClick={handleContinue}\n          className=\"btn btn-primary flex items-center gap-2 px-6\"\n        >\n          Continue\n          <ArrowRight className=\"w-4 h-4\" />\n        </button>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { Star, CheckCircle2, AlertCircle, Loader2, Download } from 'lucide-react';\nimport { supabase } from '../lib/supabaseClient';\n\ninterface ContractorReviewSurveyProps {\n  projectId: string;\n  contractorBidId: string;\n  onSubmitSuccess?: () => void;\n}\n\nconst ISSUE_OPTIONS = [\n  'Delayed start date',\n  'Project took longer than expected',\n  'Additional costs not in original bid',\n  'Equipment different than specified',\n  'Lack of communication',\n  'Quality concerns',\n  'Cleanup issues',\n  'Incomplete work',\n  'Other',\n];\n\nexport function ContractorReviewSurvey({\n  projectId,\n  contractorBidId,\n  onSubmitSuccess,\n}: ContractorReviewSurveyProps) {\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [existingReview, setExistingReview] = useState<any>(null);\n\n  const [overallRating, setOverallRating] = useState(0);\n  const [qualityRating, setQualityRating] = useState(0);\n  const [professionalismRating, setProfessionalismRating] = useState(0);\n  const [communicationRating, setCommunicationRating] = useState(0);\n  const [timelinessRating, setTimelinessRating] = useState(0);\n\n  const [usedChecklist, setUsedChecklist] = useState<boolean | null>(null);\n  const [checklistCompletenessRating, setChecklistCompletenessRating] = useState(0);\n\n  const [wouldRecommend, setWouldRecommend] = useState<boolean | null>(null);\n  const [completedOnTime, setCompletedOnTime] = useState<boolean | null>(null);\n  const [stayedWithinBudget, setStayedWithinBudget] = useState<boolean | null>(null);\n  const [criticalItemsVerified, setCriticalItemsVerified] = useState<boolean | null>(null);\n  const [photoDocumentationProvided, setPhotoDocumentationProvided] = useState<boolean | null>(null);\n\n  const [issuesEncountered, setIssuesEncountered] = useState<string[]>([]);\n  const [positiveComments, setPositiveComments] = useState('');\n  const [improvementSuggestions, setImprovementSuggestions] = useState('');\n\n  const [errors, setErrors] = useState<string[]>([]);\n\n  useEffect(() => {\n    loadExistingReview();\n  }, [projectId]);\n\n  async function loadExistingReview() {\n    const { data } = await supabase\n      .from('contractor_installation_reviews')\n      .select('*')\n      .eq('project_id', projectId)\n      .maybeSingle();\n\n    if (data) {\n      setExistingReview(data);\n      setOverallRating(data.overall_rating);\n      setQualityRating(data.quality_of_work_rating);\n      setProfessionalismRating(data.professionalism_rating);\n      setCommunicationRating(data.communication_rating);\n      setTimelinessRating(data.timeliness_rating);\n      setUsedChecklist(data.used_checklist);\n      setChecklistCompletenessRating(data.checklist_completeness_rating || 0);\n      setWouldRecommend(data.would_recommend);\n      setCompletedOnTime(data.completed_on_time);\n      setStayedWithinBudget(data.stayed_within_budget);\n      setCriticalItemsVerified(data.critical_items_verified);\n      setPhotoDocumentationProvided(data.photo_documentation_provided);\n      setIssuesEncountered(data.issues_encountered || []);\n      setPositiveComments(data.positive_comments || '');\n      setImprovementSuggestions(data.improvement_suggestions || '');\n      setSubmitted(true);\n    }\n\n    setLoading(false);\n  }\n\n  function validateForm(): boolean {\n    const newErrors: string[] = [];\n\n    if (!overallRating) newErrors.push('Overall rating is required');\n    if (!qualityRating) newErrors.push('Quality rating is required');\n    if (!professionalismRating) newErrors.push('Professionalism rating is required');\n    if (!communicationRating) newErrors.push('Communication rating is required');\n    if (!timelinessRating) newErrors.push('Timeliness rating is required');\n    if (usedChecklist === null) newErrors.push('Please indicate if the contractor used the checklist');\n    if (wouldRecommend === null) newErrors.push('Please indicate if you would recommend this contractor');\n    if (completedOnTime === null) newErrors.push('Please indicate if the project was completed on time');\n    if (stayedWithinBudget === null) newErrors.push('Please indicate if the project stayed within budget');\n    if (criticalItemsVerified === null) newErrors.push('Please indicate if critical items were verified');\n    if (photoDocumentationProvided === null) newErrors.push('Please indicate if photo documentation was provided');\n\n    setErrors(newErrors);\n    return newErrors.length === 0;\n  }\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n\n    if (!validateForm()) {\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n      return;\n    }\n\n    setSubmitting(true);\n\n    try {\n      const response = await fetch(\n        `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/submit-contractor-review`,\n        {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${import.meta.env.VITE_SUPABASE_ANON_KEY}`,\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            project_id: projectId,\n            contractor_bid_id: contractorBidId,\n            overall_rating: overallRating,\n            quality_of_work_rating: qualityRating,\n            professionalism_rating: professionalismRating,\n            communication_rating: communicationRating,\n            timeliness_rating: timelinessRating,\n            used_checklist: usedChecklist,\n            checklist_completeness_rating: usedChecklist && checklistCompletenessRating > 0 ? checklistCompletenessRating : null,\n            would_recommend: wouldRecommend,\n            completed_on_time: completedOnTime,\n            stayed_within_budget: stayedWithinBudget,\n            critical_items_verified: criticalItemsVerified,\n            photo_documentation_provided: photoDocumentationProvided,\n            issues_encountered: issuesEncountered,\n            positive_comments: positiveComments.trim() || null,\n            improvement_suggestions: improvementSuggestions.trim() || null,\n          }),\n        }\n      );\n\n      const result = await response.json();\n\n      if (!response.ok) {\n        throw new Error(result.error || 'Failed to submit review');\n      }\n\n      setSubmitted(true);\n      if (onSubmitSuccess) {\n        onSubmitSuccess();\n      }\n    } catch (error: any) {\n      setErrors([error.message || 'Failed to submit review. Please try again.']);\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  function handleDownloadChecklist() {\n    const url = `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/generate-contractor-checklist?project_id=${projectId}`;\n    window.open(url, '_blank');\n  }\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-switch-green-600 mx-auto mb-4\" />\n        <p className=\"text-gray-500\">Loading survey...</p>\n      </div>\n    );\n  }\n\n  if (submitted && !existingReview) {\n    return (\n      <div className=\"bg-switch-green-50 border border-switch-green-200 rounded-xl p-8 text-center\">\n        <CheckCircle2 className=\"w-16 h-16 text-switch-green-600 mx-auto mb-4\" />\n        <h2 className=\"text-2xl font-bold text-switch-green-900 mb-2\">Thank You!</h2>\n        <p className=\"text-switch-green-800 mb-4\">\n          Your review has been submitted successfully and will help other homeowners make informed decisions.\n        </p>\n        <p className=\"text-sm text-switch-green-700\">\n          Your feedback helps improve contractor quality standards and supports the TheSwitchIsOn community.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-8\">\n      {errors.length > 0 && (\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n          <div className=\"flex items-start gap-3\">\n            <AlertCircle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n            <div>\n              <h3 className=\"font-semibold text-red-900 mb-2\">Please fix the following errors:</h3>\n              <ul className=\"list-disc list-inside text-sm text-red-700 space-y-1\">\n                {errors.map((error, idx) => (\n                  <li key={idx}>{error}</li>\n                ))}\n              </ul>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3\">\n        <Download className=\"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5\" />\n        <div className=\"flex-1\">\n          <h3 className=\"font-semibold text-blue-900 mb-1\">Need the Quality Checklist?</h3>\n          <p className=\"text-sm text-blue-800 mb-3\">\n            Download a printable quality installation checklist to review with your contractor.\n          </p>\n          <button\n            type=\"button\"\n            onClick={handleDownloadChecklist}\n            className=\"btn btn-secondary text-sm\"\n          >\n            Download Checklist\n          </button>\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Overall Experience</h2>\n\n        <StarRating\n          label=\"Overall Satisfaction\"\n          value={overallRating}\n          onChange={setOverallRating}\n          required\n        />\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Detailed Ratings</h2>\n        <div className=\"space-y-6\">\n          <StarRating\n            label=\"Quality of Work\"\n            description=\"Installation quality, attention to detail, workmanship\"\n            value={qualityRating}\n            onChange={setQualityRating}\n            required\n          />\n          <StarRating\n            label=\"Professionalism\"\n            description=\"Conduct, appearance, respect for your property\"\n            value={professionalismRating}\n            onChange={setProfessionalismRating}\n            required\n          />\n          <StarRating\n            label=\"Communication\"\n            description=\"Responsiveness, clarity, updates throughout the project\"\n            value={communicationRating}\n            onChange={setCommunicationRating}\n            required\n          />\n          <StarRating\n            label=\"Timeliness\"\n            description=\"Punctuality, meeting deadlines, project duration\"\n            value={timelinessRating}\n            onChange={setTimelinessRating}\n            required\n          />\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Quality Checklist Usage</h2>\n\n        <YesNoQuestion\n          label=\"Did the contractor use the quality installation checklist provided?\"\n          value={usedChecklist}\n          onChange={setUsedChecklist}\n          required\n        />\n\n        {usedChecklist && (\n          <div className=\"mt-6 pl-4 border-l-4 border-switch-green-200\">\n            <StarRating\n              label=\"How thoroughly did they complete the checklist?\"\n              value={checklistCompletenessRating}\n              onChange={setChecklistCompletenessRating}\n            />\n          </div>\n        )}\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Project Outcomes</h2>\n        <div className=\"space-y-6\">\n          <YesNoQuestion\n            label=\"Would you recommend this contractor to others?\"\n            value={wouldRecommend}\n            onChange={setWouldRecommend}\n            required\n          />\n          <YesNoQuestion\n            label=\"Was the project completed on time?\"\n            value={completedOnTime}\n            onChange={setCompletedOnTime}\n            required\n          />\n          <YesNoQuestion\n            label=\"Did the final cost stay within the original budget?\"\n            description=\"No unexpected or unreasonable additional charges\"\n            value={stayedWithinBudget}\n            onChange={setStayedWithinBudget}\n            required\n          />\n          <YesNoQuestion\n            label=\"Were all critical safety and quality items verified?\"\n            description=\"Equipment properly sized, electrical work up to code, system tested\"\n            value={criticalItemsVerified}\n            onChange={setCriticalItemsVerified}\n            required\n          />\n          <YesNoQuestion\n            label=\"Did the contractor provide photo documentation of the installation?\"\n            description=\"Photos of equipment, electrical, ductwork, etc.\"\n            value={photoDocumentationProvided}\n            onChange={setPhotoDocumentationProvided}\n            required\n          />\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Issues Encountered</h2>\n        <p className=\"text-sm text-gray-600 mb-4\">Select any issues you experienced (optional)</p>\n\n        <div className=\"grid sm:grid-cols-2 gap-3\">\n          {ISSUE_OPTIONS.map((issue) => (\n            <label key={issue} className=\"flex items-center gap-2 cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={issuesEncountered.includes(issue)}\n                onChange={(e) => {\n                  if (e.target.checked) {\n                    setIssuesEncountered([...issuesEncountered, issue]);\n                  } else {\n                    setIssuesEncountered(issuesEncountered.filter((i) => i !== issue));\n                  }\n                }}\n                className=\"w-4 h-4 text-switch-green-600 border-gray-300 rounded focus:ring-switch-green-500\"\n              />\n              <span className=\"text-sm text-gray-700\">{issue}</span>\n            </label>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Additional Feedback</h2>\n\n        <div className=\"space-y-6\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              What went well? (optional)\n            </label>\n            <textarea\n              value={positiveComments}\n              onChange={(e) => setPositiveComments(e.target.value)}\n              placeholder=\"Share what you appreciated about this contractor's work...\"\n              rows={4}\n              maxLength={1000}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-switch-green-500 focus:border-transparent\"\n            />\n            <p className=\"text-xs text-gray-500 mt-1\">{positiveComments.length}/1000 characters</p>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Suggestions for improvement (optional)\n            </label>\n            <textarea\n              value={improvementSuggestions}\n              onChange={(e) => setImprovementSuggestions(e.target.value)}\n              placeholder=\"Constructive feedback helps contractors improve their service...\"\n              rows={4}\n              maxLength={1000}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-switch-green-500 focus:border-transparent\"\n            />\n            <p className=\"text-xs text-gray-500 mt-1\">{improvementSuggestions.length}/1000 characters</p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex items-center justify-between pt-4\">\n        <p className=\"text-sm text-gray-600\">\n          <span className=\"text-red-600\">*</span> Required fields\n        </p>\n        <button\n          type=\"submit\"\n          disabled={submitting}\n          className=\"btn btn-primary flex items-center gap-2\"\n        >\n          {submitting ? (\n            <>\n              <Loader2 className=\"w-5 h-5 animate-spin\" />\n              Submitting...\n            </>\n          ) : (\n            <>\n              <CheckCircle2 className=\"w-5 h-5\" />\n              {existingReview ? 'Update Review' : 'Submit Review'}\n            </>\n          )}\n        </button>\n      </div>\n    </form>\n  );\n}\n\nfunction StarRating({\n  label,\n  description,\n  value,\n  onChange,\n  required = false,\n}: {\n  label: string;\n  description?: string;\n  value: number;\n  onChange: (value: number) => void;\n  required?: boolean;\n}) {\n  return (\n    <div>\n      <label className=\"block text-sm font-medium text-gray-900 mb-2\">\n        {label} {required && <span className=\"text-red-600\">*</span>}\n      </label>\n      {description && <p className=\"text-sm text-gray-600 mb-3\">{description}</p>}\n      <div className=\"flex items-center gap-2\">\n        {[1, 2, 3, 4, 5].map((star) => (\n          <button\n            key={star}\n            type=\"button\"\n            onClick={() => onChange(star)}\n            className=\"focus:outline-none focus:ring-2 focus:ring-switch-green-500 rounded\"\n          >\n            <Star\n              className={`w-8 h-8 ${\n                star <= value\n                  ? 'fill-yellow-400 text-yellow-400'\n                  : 'text-gray-300 hover:text-yellow-300'\n              } transition-colors`}\n            />\n          </button>\n        ))}\n        {value > 0 && (\n          <span className=\"ml-2 text-sm font-medium text-gray-700\">\n            {value} of 5 stars\n          </span>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction YesNoQuestion({\n  label,\n  description,\n  value,\n  onChange,\n  required = false,\n}: {\n  label: string;\n  description?: string;\n  value: boolean | null;\n  onChange: (value: boolean) => void;\n  required?: boolean;\n}) {\n  return (\n    <div>\n      <label className=\"block text-sm font-medium text-gray-900 mb-2\">\n        {label} {required && <span className=\"text-red-600\">*</span>}\n      </label>\n      {description && <p className=\"text-sm text-gray-600 mb-3\">{description}</p>}\n      <div className=\"flex gap-4\">\n        <button\n          type=\"button\"\n          onClick={() => onChange(true)}\n          className={`px-6 py-2 rounded-lg font-medium transition-all ${\n            value === true\n              ? 'bg-switch-green-600 text-white'\n              : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n          }`}\n        >\n          Yes\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => onChange(false)}\n          className={`px-6 py-2 rounded-lg font-medium transition-all ${\n            value === false\n              ? 'bg-red-600 text-white'\n              : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n          }`}\n        >\n          No\n        </button>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { ClipboardCheck, Download, FileCheck2, MessageSquare } from 'lucide-react';\nimport { usePhase } from '../../context/PhaseContext';\nimport { supabase } from '../../lib/supabaseClient';\nimport { ContractorReviewSurvey } from '../ContractorReviewSurvey';\n\nexport function VerifyPhase() {\n  const { projectId } = usePhase();\n  const [loading, setLoading] = useState(true);\n  const [contractorBid, setContractorBid] = useState<any>(null);\n\n  useEffect(() => {\n    if (projectId) {\n      loadProjectData();\n    }\n  }, [projectId]);\n\n  async function loadProjectData() {\n    const { data: projectData } = await supabase\n      .from('projects')\n      .select('*, users_ext(*)')\n      .eq('id', projectId)\n      .single();\n\n    if (projectData?.selected_bid_id) {\n      const { data: bidData } = await supabase\n        .from('contractor_bids')\n        .select('*')\n        .eq('id', projectData.selected_bid_id)\n        .single();\n\n      setContractorBid(bidData);\n    }\n\n    setLoading(false);\n  }\n\n  function handleDownloadChecklist() {\n    const url = `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/generate-contractor-checklist?project_id=${projectId}`;\n    window.open(url, '_blank');\n  }\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12 text-gray-500\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-switch-green-600 mx-auto mb-4\" />\n        Loading...\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Installation Complete & Review</h1>\n        <p className=\"text-gray-600 mt-1\">\n          Help other homeowners by sharing your experience with this contractor.\n        </p>\n      </div>\n\n      <div className=\"bg-gradient-to-r from-blue-50 to-switch-green-50 border border-blue-200 rounded-xl p-6\">\n        <div className=\"flex items-start gap-4\">\n          <div className=\"p-3 bg-white rounded-lg\">\n            <ClipboardCheck className=\"w-8 h-8 text-switch-green-600\" />\n          </div>\n          <div className=\"flex-1\">\n            <h2 className=\"text-lg font-bold text-gray-900 mb-2 flex items-center gap-2\">\n              <FileCheck2 className=\"w-5 h-5\" />\n              Quality Installation Checklist\n            </h2>\n            <p className=\"text-gray-700 mb-4\">\n              Before your installation began, you should have provided the contractor with a quality\n              installation checklist. This ensures industry-standard practices are followed.\n            </p>\n            <div className=\"bg-white rounded-lg p-4 border border-gray-200\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"font-semibold text-gray-900 mb-1\">Download the Checklist</p>\n                  <p className=\"text-sm text-gray-600\">\n                    If you haven't already, you can still download it for your records\n                  </p>\n                </div>\n                <button\n                  onClick={handleDownloadChecklist}\n                  className=\"btn btn-secondary flex items-center gap-2 ml-4\"\n                >\n                  <Download className=\"w-4 h-4\" />\n                  Download\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-white border border-gray-200 rounded-xl p-6\">\n        <div className=\"flex items-start gap-4 mb-6\">\n          <div className=\"p-3 bg-switch-green-50 rounded-lg\">\n            <MessageSquare className=\"w-8 h-8 text-switch-green-600\" />\n          </div>\n          <div>\n            <h2 className=\"text-lg font-bold text-gray-900 mb-1\">\n              Share Your Experience\n            </h2>\n            <p className=\"text-gray-600\">\n              Your feedback helps build a trusted community and improves contractor quality standards.\n              This survey takes about 5 minutes to complete.\n            </p>\n          </div>\n        </div>\n\n        {contractorBid ? (\n          <ContractorReviewSurvey\n            projectId={projectId!}\n            contractorBidId={contractorBid.id}\n            onSubmitSuccess={() => {\n              loadProjectData();\n            }}\n          />\n        ) : (\n          <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4 text-center\">\n            <p className=\"text-amber-800\">\n              Please select a contractor in the previous phase before completing this review.\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { Eye, Upload } from 'lucide-react';\n\ninterface DemoBannerProps {\n  onStartOwn?: () => void;\n}\n\nexport function DemoBanner({ onStartOwn }: DemoBannerProps) {\n  return (\n    <div className=\"bg-teal-50 border border-teal-200 rounded-xl p-4 mb-6\">\n      <div className=\"flex items-center justify-between gap-4\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-8 h-8 rounded-lg bg-teal-100 flex items-center justify-center flex-shrink-0\">\n            <Eye className=\"w-4 h-4 text-teal-600\" />\n          </div>\n          <div>\n            <p className=\"font-medium text-teal-800 text-sm\">Demo Mode - View Only</p>\n            <p className=\"text-teal-700 text-xs\">\n              You are viewing a demo comparison. Data cannot be modified.\n            </p>\n          </div>\n        </div>\n        {onStartOwn && (\n          <button\n            onClick={onStartOwn}\n            className=\"flex items-center gap-2 px-3 py-1.5 bg-teal-600 text-white text-sm font-medium rounded-lg hover:bg-teal-700 transition-colors whitespace-nowrap\"\n          >\n            <Upload className=\"w-4 h-4\" />\n            <span className=\"hidden sm:inline\">Start Your Own</span>\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { PhaseProvider, usePhase } from '../context/PhaseContext';\nimport { PhaseLayout } from './PhaseLayout';\nimport { GatherPhase } from './phases/GatherPhase';\nimport { ComparePhase } from './phases/ComparePhase';\nimport { DecidePhase } from './phases/DecidePhase';\nimport { VerifyPhase } from './phases/VerifyPhase';\nimport { AlphaBanner } from './AlphaBanner';\nimport { DemoBanner } from './DemoBanner';\nimport type { UserExt } from '../lib/types';\n\ninterface BidSmartFlowProps {\n  user: UserExt;\n  projectId?: string;\n  onNavigateHome?: () => void;\n}\n\nfunction PhaseContentWrapper({ onNavigateHome }: { onNavigateHome?: () => void }) {\n  const { currentPhase, loading, error, project, isDemoMode } = usePhase();\n\n  const content = (\n    <PhaseContent loading={loading} error={error} currentPhase={currentPhase} isDemoMode={isDemoMode} />\n  );\n\n  return (\n    <>\n      <AlphaBanner />\n      <PhaseLayout onNavigateHome={onNavigateHome} projectName={project?.project_name} isDemoMode={isDemoMode}>\n        {isDemoMode && <DemoBanner onStartOwn={onNavigateHome} />}\n        {content}\n      </PhaseLayout>\n    </>\n  );\n}\n\nfunction PhaseContent({ loading, error, currentPhase, isDemoMode }: { loading: boolean; error: string | null; currentPhase: number; isDemoMode: boolean }) {\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-switch-green-600 mx-auto mb-4\" />\n          <p className=\"text-gray-500\">Loading your project...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 border border-red-200 rounded-xl p-6 text-center\">\n        <p className=\"text-red-700\">{error}</p>\n        <button\n          onClick={() => window.location.reload()}\n          className=\"btn btn-primary mt-4\"\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  switch (currentPhase) {\n    case 1:\n      return isDemoMode ? <ComparePhase /> : <GatherPhase />;\n    case 2:\n      return <ComparePhase />;\n    case 3:\n      return <DecidePhase />;\n    case 4:\n      return <VerifyPhase />;\n    default:\n      return isDemoMode ? <ComparePhase /> : <GatherPhase />;\n  }\n}\n\nexport function BidSmartFlow({ user, projectId, onNavigateHome }: BidSmartFlowProps) {\n  return (\n    <PhaseProvider userId={user.id} initialProjectId={projectId}>\n      <PhaseContentWrapper onNavigateHome={onNavigateHome} />\n    </PhaseProvider>\n  );\n}\n","import { useState } from 'react';\nimport { useUser } from './hooks/useUser';\nimport { UnifiedHomePage } from './components/UnifiedHomePage';\nimport { BidSmartFlow } from './components/BidSmartFlow';\n\nconst ACTIVE_PROJECT_KEY = 'bidsmart_active_project';\n\nfunction setStoredProjectId(projectId: string | null): void {\n  try {\n    if (projectId) {\n      localStorage.setItem(ACTIVE_PROJECT_KEY, projectId);\n    } else {\n      localStorage.removeItem(ACTIVE_PROJECT_KEY);\n    }\n  } catch {\n  }\n}\n\nfunction App() {\n  const { user, loading, error } = useUser();\n  const [activeProjectId, setActiveProjectId] = useState<string | null>(null);\n  const [showHome, setShowHome] = useState(true);\n\n  const handleSelectProject = (projectId: string) => {\n    setActiveProjectId(projectId);\n    setStoredProjectId(projectId);\n    setShowHome(false);\n  };\n\n  const handleNavigateHome = () => {\n    setActiveProjectId(null);\n    setStoredProjectId(null);\n    setShowHome(true);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-switch-green-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading BidSmart...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center max-w-md mx-auto px-4\">\n          <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <span className=\"text-2xl text-red-600\">!</span>\n          </div>\n          <h1 className=\"text-xl font-semibold text-gray-900 mb-2\">Unable to Load</h1>\n          <p className=\"text-gray-600 mb-4\">\n            There was a problem connecting to the database. Please try refreshing the page.\n          </p>\n          <button\n            onClick={() => window.location.reload()}\n            className=\"btn btn-primary\"\n          >\n            Refresh Page\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (showHome || !activeProjectId) {\n    return (\n      <UnifiedHomePage\n        user={user}\n        onSelectProject={handleSelectProject}\n      />\n    );\n  }\n\n  return <BidSmartFlow user={user} projectId={activeProjectId} onNavigateHome={handleNavigateHome} />;\n}\n\nexport default App;\n","// Version: 2.0.3 - Base64 Upload - Build 20260206-1517\n// Force new bundle hash to bypass aggressive browser caching\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\nimport './index.css';\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","supabaseUrl","supabaseAnonKey","supabase","createClient","getAuthTokenFromUrl","token","parts","payloadB64","payloadJson","base64UrlDecode","payload","now","error","str","base64","padded","AUTH_TOKEN_STORAGE_KEY","storeAuthToken","getStoredAuthToken","getAuthHeaders","userEmail","headers","STORAGE_KEY","DEFAULT_EMAIL","DEFAULT_NAME","getUrlParams","authToken","params","email","name","getStoredUser","stored","storeUser","user","getOrCreateUserByEmail","fullName","existing","fetchError","created","createError","useUser","setUser","useState","loading","setLoading","isReturningUser","setIsReturningUser","setError","useEffect","initializeUser","urlParams","storedUser","userInfo","dbUser","isExisting","err","defaultAttributes","toKebabCase","string","createLucideIcon","iconName","iconNode","Component","forwardRef","color","size","strokeWidth","absoluteStrokeWidth","className","children","rest","ref","createElement","tag","attrs","AlertCircle","ArrowLeft","ArrowRight","Award","BarChart3","BellOff","Bell","BookOpen","Calendar","CheckCircle2","CheckCircle","CheckSquare","Check","ChevronDown","ChevronRight","ChevronUp","ClipboardCheck","Clock","Copy","DollarSign","Download","ExternalLink","Eye","FileCheck2","FileText","FlaskConical","Globe","HelpCircle","Info","Lightbulb","Loader2","Mail","MessageSquare","Phone","Play","Plus","Save","Search","Send","Shield","Square","Star","Upload","Users","XCircle","X","Zap","createProject","userId","projectData","data","getProjectsByUser","getPublicDemoProjects","updateProject","projectId","updates","updateProjectDataSharingConsent","consent","updateProjectNotificationSettings","notifyOnCompletion","getProjectsByNotificationEmail","normalizedEmail","getProjectBySessionId","sessionId","createDraftProject","getBidsByProject","getBidCountByProject","count","getEquipmentByBid","bidId","getPdfUploadsByProject","MAX_PDF_SIZE_BYTES","ALLOWED_PDF_EXTENSIONS","ALLOWED_PDF_MIME_TYPES","validatePdfFile","file","fileExt","_a","getProjectRequirements","createProjectRequirements","requirements","updateProjectRequirements","saveProjectRequirements","updated","getFaqsByBid","getFaqsByProject","bids","overallFaqsPromise","bidFaqsPromises","bidData","index","faqs","overallResult","bidFaqResults","formatCurrency","amount","formatDate","dateString","ReturningUserSection","onSelectProject","setEmail","searching","setSearching","searched","setSearched","projects","setProjects","handleSearch","foundProjects","projectsWithCounts","project","bidCount","getStatusDisplay","status","statusConfig","jsx","config","isProjectReady","isProjectInProgress","jsxs","Fragment","TryTheToolSection","onSelectDemo","demos","setDemos","loadDemos","demoProjects","demosWithCounts","demo","FeedbackPanel","isOpen","onClose","feedbackType","setFeedbackType","message","setMessage","submitting","setSubmitting","submitted","setSubmitted","handleSubmit","option","AlphaBanner","dismissible","variant","dismissed","setDismissed","showFeedback","setShowFeedback","AnalysisSuccessScreen","onViewDemo","onReturnHome","fileToBase64","resolve","reject","reader","fileToBase64Document","content","prepareDocumentsForUpload","files","onProgress","documents","i","doc","validateFileForBase64","ALLOWED_TYPES","ALLOWED_EXTENSIONS","extension","estimateBase64PayloadSize","totalBytes","sum","checkPayloadLimits","estimatedSize","MAX_PAYLOAD_SIZE","validateBase64Encoding","decoded","isPDF","decodeError","exportBase64ToClipboard","SUPABASE_URL","SUPABASE_ANON_KEY","authHeaders","getParentAuthHeaders","startBatchAnalysisWithBase64","userPriorities","projectDetails","payloadCheck","current","total","filename","validation","prioritiesPayload","requestPayload","response","getBatchExtractionStatus","pdfUploads","db.getPdfUploadsByProject","pdfStatuses","pdf","completedPdfs","failedPdfs","processingPdfs","isComplete","allSuccessful","pollBatchExtractionStatus","options","intervalMs","maxAttempts","attempts","poll","SwitchLogo","SESSION_ID_KEY","getOrCreateSessionId","PHASES","PrioritySlider","label","value","onChange","description","UnifiedHomePage","uploadedPdfs","setUploadedPdfs","dragActive","setDragActive","fileInputRef","useRef","priorities","setPriorities","setProjectDetails","dataSharingConsent","setDataSharingConsent","showPrivacyDetails","setShowPrivacyDetails","notificationEmail","setNotificationEmail","analysisState","setAnalysisState","analysisError","setAnalysisError","analysisElapsedSeconds","setAnalysisElapsedSeconds","analysisTimerRef","draftProjectId","setDraftProjectId","demoProjectId","setDemoProjectId","showPriorities","setShowPriorities","showProjectDetails","setShowProjectDetails","isHeaderSticky","setIsHeaderSticky","heroSectionRef","checkForDraftProject","loadDemoProject","handleScroll","handleReturnToDashboard","prev","existingDraft","ensureDraftProject","canContinue","isEmailValid","handleFiles","useCallback","fileArray","validFiles","validationError","handleDrag","handleDrop","handleFileSelect","removeFile","id","getStatusIcon","formatFileSize","bytes","formatElapsedTime","seconds","mins","secs","handleAnalyze","analysisResult","stage","phase","isActive","v","PHASE_LABELS","PhaseContext","createContext","loadStoredState","saveStoredState","state","PhaseProvider","initialProjectId","setState","initializeProject","storedState","existingProjects","foundProject","bidsWithEquipment","questions","bid","questionsData","currentPhase","phaseStatus","canAccessPhase","goToPhase","newState","completePhase","newPhaseStatus","nextPhase","newCurrentPhase","refreshBids","refreshRequirements","refreshQuestions","getPhaseLabel","ensureProjectExists","usePhase","context","useContext","PhaseLayout","onNavigateHome","projectName","isDemoMode","item","isClickable","AnalysisSubmissionInterstitial","onEmailChange","onNotifyChange","enableSound","onEnableSoundChange","onRequestNotificationPermission","notificationPermission","onSaveAndContinue","isSaving","emailError","setEmailError","showPermissionInfo","setShowPermissionInfo","validateEmail","emailRegex","handleEmailChange","handleContinue","isValid","useAnalysisNotification","audioRef","lastNotifiedProjectRef","soundEnabled","setSoundEnabled","initAudio","beepSound","playSound","requestPermission","showBrowserNotification","title","body","notification","notify","shouldPlaySound","shouldShowBrowser","reset","toggleSound","enabled","NotificationToast","show","autoClose","isVisible","setIsVisible","timer","GatherPhase","analysisProgress","setAnalysisProgress","setNotifyOnCompletion","savingNotification","setSavingNotification","notificationSaved","setNotificationSaved","setEnableSound","showCompletionToast","setShowCompletionToast","permission","existingBidsCount","validPendingCount","totalReadyBids","handleConfirmSubmission","activeProjectId","pollResult","handleSaveNotification","showLongWaitMessage","needed","LABEL_COL_WIDTH","BID_COL_MIN_WIDTH","ComparePhase","activeTab","setActiveTab","showMoreEquipment","setShowMoreEquipment","showMoreContractors","setShowMoreContractors","showFinancingDetails","setShowFinancingDetails","downloadingReport","setDownloadingReport","emailingReport","setEmailingReport","reportSent","setReportSent","formatDateDisplay","getHighestValue","values","higherIsBetter","validValues","isHighlighted","bestValue","tabs","getEquipmentData","mainEquipment","getContractorData","getCostData","getScopeData","equipmentData","contractorData","costData","scopeData","bestSeer","bestHspf","bestYears","bestRating","lowestPrice","bestLaborWarranty","bestEquipmentWarranty","fastestTimeline","handleDownloadReport","errorData","blob","url","handleEmailReport","result","tableMinWidth","labelCellStyle","bidCellStyle","scopeItems","tab","_b","idx","bestSwitchRating","cd","cert","s","rowIdx","detail","IncentivesTable","rebatePrograms","selectedIncentives","onToggleIncentive","expandedRows","setExpandedRows","toggleExpand","programId","newExpanded","getAmount","program","totalSelectedAmount","isExpanded","isSelected","key","OverallFaqsCard","expandedFaqs","setExpandedFaqs","faqId","getConfidenceBadge","confidence","Icon","faq","hasAnswer","BidSpecificFaqsCard","bidFaqSets","switchPreferredBids","activeTabIndex","setActiveTabIndex","activeBidFaqSet","bidFaqSet","isPreferred","DecidePhase","setRebatePrograms","setSelectedIncentives","selectedContractor","setSelectedContractor","copiedContractor","setCopiedContractor","expandedBids","setExpandedBids","projectFaqData","setProjectFaqData","loadRebatePrograms","loadAllFaqs","faqData","toggleIncentive","newSelected","getTotalSelectedRebates","toggleQuestionAnswered","question","getQuestionsForBid","copyQuestionsToClipboard","contractorName","unansweredQuestions","text","textArea","getPriorityColor","priority","toggleBidExpanded","totalSelectedRebates","netCost","lowestNetCost","bestWarranty","toggleSelection","handleDownloadChecklist","bidQuestions","answeredCount","isBestPrice","isBestNetCost","isBestRating","isBestEfficiency","totalWarranty","isBestWarranty","ISSUE_OPTIONS","ContractorReviewSurvey","contractorBidId","onSubmitSuccess","existingReview","setExistingReview","overallRating","setOverallRating","qualityRating","setQualityRating","professionalismRating","setProfessionalismRating","communicationRating","setCommunicationRating","timelinessRating","setTimelinessRating","usedChecklist","setUsedChecklist","checklistCompletenessRating","setChecklistCompletenessRating","wouldRecommend","setWouldRecommend","completedOnTime","setCompletedOnTime","stayedWithinBudget","setStayedWithinBudget","criticalItemsVerified","setCriticalItemsVerified","photoDocumentationProvided","setPhotoDocumentationProvided","issuesEncountered","setIssuesEncountered","positiveComments","setPositiveComments","improvementSuggestions","setImprovementSuggestions","errors","setErrors","loadExistingReview","validateForm","newErrors","StarRating","YesNoQuestion","issue","required","star","VerifyPhase","contractorBid","setContractorBid","loadProjectData","DemoBanner","onStartOwn","PhaseContentWrapper","PhaseContent","BidSmartFlow","ACTIVE_PROJECT_KEY","setStoredProjectId","App","setActiveProjectId","showHome","setShowHome","handleSelectProject","handleNavigateHome","ReactDOM","React"],"mappings":"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","x_google_ignoreList":[0,1,2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54]}