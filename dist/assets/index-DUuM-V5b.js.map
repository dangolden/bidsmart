{"version":3,"file":"index-DUuM-V5b.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../src/lib/supabaseClient.ts","../../src/lib/parentAuth.ts","../../src/hooks/useUser.ts","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/activity.js","../../node_modules/lucide-react/dist/esm/icons/alert-circle.js","../../node_modules/lucide-react/dist/esm/icons/alert-triangle.js","../../node_modules/lucide-react/dist/esm/icons/arrow-left.js","../../node_modules/lucide-react/dist/esm/icons/arrow-right.js","../../node_modules/lucide-react/dist/esm/icons/award.js","../../node_modules/lucide-react/dist/esm/icons/bar-chart-3.js","../../node_modules/lucide-react/dist/esm/icons/bell-off.js","../../node_modules/lucide-react/dist/esm/icons/bell.js","../../node_modules/lucide-react/dist/esm/icons/book-open.js","../../node_modules/lucide-react/dist/esm/icons/bug.js","../../node_modules/lucide-react/dist/esm/icons/calendar.js","../../node_modules/lucide-react/dist/esm/icons/check-circle-2.js","../../node_modules/lucide-react/dist/esm/icons/check-circle.js","../../node_modules/lucide-react/dist/esm/icons/check-square.js","../../node_modules/lucide-react/dist/esm/icons/check.js","../../node_modules/lucide-react/dist/esm/icons/chevron-down.js","../../node_modules/lucide-react/dist/esm/icons/chevron-right.js","../../node_modules/lucide-react/dist/esm/icons/chevron-up.js","../../node_modules/lucide-react/dist/esm/icons/clipboard-check.js","../../node_modules/lucide-react/dist/esm/icons/clock.js","../../node_modules/lucide-react/dist/esm/icons/copy.js","../../node_modules/lucide-react/dist/esm/icons/dollar-sign.js","../../node_modules/lucide-react/dist/esm/icons/download.js","../../node_modules/lucide-react/dist/esm/icons/external-link.js","../../node_modules/lucide-react/dist/esm/icons/eye.js","../../node_modules/lucide-react/dist/esm/icons/file-check-2.js","../../node_modules/lucide-react/dist/esm/icons/file-text.js","../../node_modules/lucide-react/dist/esm/icons/flask-conical.js","../../node_modules/lucide-react/dist/esm/icons/globe.js","../../node_modules/lucide-react/dist/esm/icons/help-circle.js","../../node_modules/lucide-react/dist/esm/icons/info.js","../../node_modules/lucide-react/dist/esm/icons/lightbulb.js","../../node_modules/lucide-react/dist/esm/icons/loader-2.js","../../node_modules/lucide-react/dist/esm/icons/lock.js","../../node_modules/lucide-react/dist/esm/icons/mail.js","../../node_modules/lucide-react/dist/esm/icons/map-pin.js","../../node_modules/lucide-react/dist/esm/icons/message-square.js","../../node_modules/lucide-react/dist/esm/icons/mic-off.js","../../node_modules/lucide-react/dist/esm/icons/mic.js","../../node_modules/lucide-react/dist/esm/icons/phone.js","../../node_modules/lucide-react/dist/esm/icons/play.js","../../node_modules/lucide-react/dist/esm/icons/refresh-cw.js","../../node_modules/lucide-react/dist/esm/icons/save.js","../../node_modules/lucide-react/dist/esm/icons/search.js","../../node_modules/lucide-react/dist/esm/icons/send.js","../../node_modules/lucide-react/dist/esm/icons/shield.js","../../node_modules/lucide-react/dist/esm/icons/square.js","../../node_modules/lucide-react/dist/esm/icons/star.js","../../node_modules/lucide-react/dist/esm/icons/thumbs-up.js","../../node_modules/lucide-react/dist/esm/icons/trash-2.js","../../node_modules/lucide-react/dist/esm/icons/upload.js","../../node_modules/lucide-react/dist/esm/icons/users.js","../../node_modules/lucide-react/dist/esm/icons/volume-2.js","../../node_modules/lucide-react/dist/esm/icons/volume-x.js","../../node_modules/lucide-react/dist/esm/icons/x-circle.js","../../node_modules/lucide-react/dist/esm/icons/x.js","../../node_modules/lucide-react/dist/esm/icons/zap.js","../../src/lib/database/bidsmartService.ts","../../src/lib/utils/formatters.ts","../../src/components/ReturningUserSection.tsx","../../src/components/TryTheToolSection.tsx","../../src/components/FeedbackPanel.tsx","../../src/components/AlphaBanner.tsx","../../src/lib/utils/zipToState.ts","../../src/components/IncentivesPanel.tsx","../../src/components/AnalysisSuccessScreen.tsx","../../src/lib/services/mindpalService.ts","../../src/hooks/useSpeechToText.ts","../../src/assets/switchlogo.svg","../../src/components/UnifiedHomePage.tsx","../../src/context/PhaseContext.tsx","../../src/components/PhaseLayout.tsx","../../src/components/AnalysisSubmissionInterstitial.tsx","../../src/hooks/useAnalysisNotification.ts","../../src/components/NotificationToast.tsx","../../src/components/phases/GatherPhase.tsx","../../src/components/phases/ComparePhase.tsx","../../src/components/IncentivesTable.tsx","../../src/components/OverallFaqsCard.tsx","../../src/components/BidSpecificFaqsCard.tsx","../../src/components/phases/DecidePhase.tsx","../../src/components/ContractorReviewSurvey.tsx","../../src/components/phases/VerifyPhase.tsx","../../src/components/DemoBanner.tsx","../../src/components/ProcessingBanner.tsx","../../src/components/BidSmartFlow.tsx","../../src/lib/services/adminService.ts","../../src/components/AdminDashboard.tsx","../../src/components/AdminLogin.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * Supabase Client Configuration\n * \n * Bolt Database automatically provisions Supabase and injects these \n * environment variables. No manual setup required when using Bolt.\n */\n\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\nconst supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\n// Bolt auto-injects these - only warn in development if missing\nif (!supabaseUrl || !supabaseAnonKey) {\n  console.warn(\n    'Supabase environment variables not found. ' +\n    'If using Bolt, make sure Bolt Database is enabled for your project.'\n  );\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n  auth: {\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n  },\n});\n\n/**\n * Get the current authenticated user\n */\nexport async function getCurrentUser() {\n  const { data: { user }, error } = await supabase.auth.getUser();\n  if (error) {\n    console.error('Error getting current user:', error);\n    return null;\n  }\n  return user;\n}\n\n/**\n * Get or create user extension record\n */\nexport async function getOrCreateUserExt(authUserId: string, email: string) {\n  // First try to get existing record\n  const { data: existing, error: fetchError } = await supabase\n    .from('users_ext')\n    .select('*')\n    .eq('auth_user_id', authUserId)\n    .maybeSingle();\n\n  if (fetchError) {\n    console.error('Error fetching user_ext:', fetchError);\n    throw fetchError;\n  }\n\n  if (existing) {\n    return existing;\n  }\n\n  // Create new record\n  const { data: created, error: createError } = await supabase\n    .from('users_ext')\n    .insert({\n      auth_user_id: authUserId,\n      email: email,\n    })\n    .select()\n    .single();\n\n  if (createError) {\n    console.error('Error creating user_ext:', createError);\n    throw createError;\n  }\n\n  return created;\n}\n\nexport default supabase;\n","/**\n * Parent Platform Authentication (Frontend)\n * \n * Handles signed token authentication for iframe-embedded context.\n * Tokens are generated by the parent platform (TheSwitchIsOn) and\n * passed via URL parameter.\n */\n\ninterface ParentAuthPayload {\n  email: string;\n  name: string;\n  exp: number;\n  iat: number;\n}\n\ninterface AuthTokenResult {\n  email: string;\n  name: string;\n  token: string;\n}\n\n/**\n * Extracts and validates auth token from URL parameters\n * Token format: base64url(payload).base64url(signature)\n */\nexport function getAuthTokenFromUrl(): AuthTokenResult | null {\n  if (typeof window === 'undefined') return null;\n\n  const params = new URLSearchParams(window.location.search);\n  const token = params.get('auth_token');\n\n  if (!token) return null;\n\n  try {\n    const parts = token.split('.');\n    if (parts.length !== 2) return null;\n\n    const payloadB64 = parts[0];\n    const payloadJson = base64UrlDecode(payloadB64);\n    const payload: ParentAuthPayload = JSON.parse(payloadJson);\n\n    // Check expiration (client-side check, server will verify too)\n    const now = Math.floor(Date.now() / 1000);\n    if (payload.exp < now) {\n      console.warn('Auth token expired');\n      return null;\n    }\n\n    return {\n      email: payload.email,\n      name: payload.name || payload.email.split('@')[0],\n      token,\n    };\n  } catch (error) {\n    console.error('Error parsing auth token:', error);\n    return null;\n  }\n}\n\n/**\n * Decodes base64url string\n */\nfunction base64UrlDecode(str: string): string {\n  const base64 = str.replace(/-/g, '+').replace(/_/g, '/');\n  const padded = base64 + '='.repeat((4 - (base64.length % 4)) % 4);\n  return atob(padded);\n}\n\n/**\n * Storage key for auth token\n */\nconst AUTH_TOKEN_STORAGE_KEY = 'bidsmart_auth_token';\n\n/**\n * Stores the auth token for subsequent requests\n */\nexport function storeAuthToken(token: string): void {\n  try {\n    sessionStorage.setItem(AUTH_TOKEN_STORAGE_KEY, token);\n  } catch {\n    // Ignore storage errors\n  }\n}\n\n/**\n * Gets stored auth token\n */\nexport function getStoredAuthToken(): string | null {\n  try {\n    return sessionStorage.getItem(AUTH_TOKEN_STORAGE_KEY);\n  } catch {\n    return null;\n  }\n}\n\n/**\n * Clears stored auth token\n */\nexport function clearAuthToken(): void {\n  try {\n    sessionStorage.removeItem(AUTH_TOKEN_STORAGE_KEY);\n  } catch {\n    // Ignore storage errors\n  }\n}\n\n/**\n * Gets auth headers for API requests\n * Uses signed token if available, falls back to email header\n */\nexport function getAuthHeaders(userEmail: string): Record<string, string> {\n  const token = getStoredAuthToken();\n  \n  const headers: Record<string, string> = {\n    'Content-Type': 'application/json',\n  };\n\n  if (token) {\n    headers['X-Auth-Token'] = token;\n  } else {\n    headers['X-User-Email'] = userEmail;\n  }\n\n  return headers;\n}\n","import { useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabaseClient';\nimport type { UserExt } from '../lib/types';\nimport { getAuthTokenFromUrl, storeAuthToken } from '../lib/parentAuth';\n\nconst STORAGE_KEY = 'bidsmart_user';\nconst DEFAULT_EMAIL = 'demo@theswitchison.org';\nconst DEFAULT_NAME = 'Demo User';\n\ninterface StoredUser {\n  email: string;\n  name: string;\n}\n\n/**\n * Gets user info from URL parameters\n * Supports both signed auth tokens (preferred) and legacy email params\n */\nfunction getUrlParams(): StoredUser | null {\n  if (typeof window === 'undefined') return null;\n\n  // Try signed auth token first (more secure)\n  const authToken = getAuthTokenFromUrl();\n  if (authToken) {\n    // Store token for subsequent API requests\n    storeAuthToken(authToken.token);\n    return { email: authToken.email, name: authToken.name };\n  }\n\n  // Fall back to legacy email param (less secure, for backward compat)\n  const params = new URLSearchParams(window.location.search);\n  const email = params.get('user_email');\n  const name = params.get('user_name');\n\n  if (email) {\n    return { email, name: name || email.split('@')[0] };\n  }\n  return null;\n}\n\nfunction getStoredUser(): StoredUser | null {\n  try {\n    const stored = localStorage.getItem(STORAGE_KEY);\n    if (stored) {\n      return JSON.parse(stored);\n    }\n  } catch {\n    // Ignore parse errors\n  }\n  return null;\n}\n\nfunction storeUser(user: StoredUser): void {\n  try {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(user));\n  } catch {\n    // Ignore storage errors\n  }\n}\n\nasync function getOrCreateUserByEmail(email: string, fullName: string): Promise<UserExt> {\n  const { data: existing, error: fetchError } = await supabase\n    .from('users_ext')\n    .select('*')\n    .eq('email', email)\n    .maybeSingle();\n\n  if (fetchError) {\n    console.error('Error fetching user:', fetchError);\n    throw fetchError;\n  }\n\n  if (existing) {\n    return existing;\n  }\n\n  const { data: created, error: createError } = await supabase\n    .from('users_ext')\n    .insert({\n      email: email,\n      full_name: fullName,\n    })\n    .select()\n    .single();\n\n  if (createError) {\n    console.error('Error creating user:', createError);\n    throw createError;\n  }\n\n  return created;\n}\n\nexport interface UseUserResult {\n  user: UserExt | null;\n  loading: boolean;\n  isReturningUser: boolean;\n  error: Error | null;\n}\n\nexport function useUser(): UseUserResult {\n  const [user, setUser] = useState<UserExt | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [isReturningUser, setIsReturningUser] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  useEffect(() => {\n    async function initializeUser() {\n      try {\n        const urlParams = getUrlParams();\n        const storedUser = getStoredUser();\n\n        let userInfo: StoredUser;\n\n        if (urlParams) {\n          userInfo = urlParams;\n          storeUser(urlParams);\n        } else if (storedUser) {\n          userInfo = storedUser;\n        } else {\n          userInfo = { email: DEFAULT_EMAIL, name: DEFAULT_NAME };\n          storeUser(userInfo);\n        }\n\n        const dbUser = await getOrCreateUserByEmail(userInfo.email, userInfo.name);\n\n        const isExisting = dbUser.created_at !== dbUser.updated_at ||\n          new Date(dbUser.created_at).getTime() < Date.now() - 5000;\n\n        setUser(dbUser);\n        setIsReturningUser(isExisting);\n      } catch (err) {\n        console.error('Error initializing user:', err);\n        setError(err instanceof Error ? err : new Error('Failed to initialize user'));\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    initializeUser();\n  }, []);\n\n  return { user, loading, isReturningUser, error };\n}\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase().trim();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ color = \"currentColor\", size = 24, strokeWidth = 2, absoluteStrokeWidth, className = \"\", children, ...rest }, ref) => createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: [\"lucide\", `lucide-${toKebabCase(iconName)}`, className].join(\" \"),\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...Array.isArray(children) ? children : [children]\n      ]\n    )\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Activity = createLucideIcon(\"Activity\", [\n  [\"path\", { d: \"M22 12h-4l-3 9L9 3l-3 9H2\", key: \"d5dnw9\" }]\n]);\n\nexport { Activity as default };\n//# sourceMappingURL=activity.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertCircle = createLucideIcon(\"AlertCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n]);\n\nexport { AlertCircle as default };\n//# sourceMappingURL=alert-circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertTriangle = createLucideIcon(\"AlertTriangle\", [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\",\n      key: \"c3ski4\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { AlertTriangle as default };\n//# sourceMappingURL=alert-triangle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowLeft = createLucideIcon(\"ArrowLeft\", [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n]);\n\nexport { ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowRight = createLucideIcon(\"ArrowRight\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"m12 5 7 7-7 7\", key: \"xquz4c\" }]\n]);\n\nexport { ArrowRight as default };\n//# sourceMappingURL=arrow-right.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Award = createLucideIcon(\"Award\", [\n  [\"circle\", { cx: \"12\", cy: \"8\", r: \"6\", key: \"1vp47v\" }],\n  [\"path\", { d: \"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11\", key: \"em7aur\" }]\n]);\n\nexport { Award as default };\n//# sourceMappingURL=award.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BarChart3 = createLucideIcon(\"BarChart3\", [\n  [\"path\", { d: \"M3 3v18h18\", key: \"1s2lah\" }],\n  [\"path\", { d: \"M18 17V9\", key: \"2bz60n\" }],\n  [\"path\", { d: \"M13 17V5\", key: \"1frdt8\" }],\n  [\"path\", { d: \"M8 17v-3\", key: \"17ska0\" }]\n]);\n\nexport { BarChart3 as default };\n//# sourceMappingURL=bar-chart-3.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BellOff = createLucideIcon(\"BellOff\", [\n  [\"path\", { d: \"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5\", key: \"o7mx20\" }],\n  [\"path\", { d: \"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7\", key: \"16f1lm\" }],\n  [\"path\", { d: \"M10.3 21a1.94 1.94 0 0 0 3.4 0\", key: \"qgo35s\" }],\n  [\"path\", { d: \"m2 2 20 20\", key: \"1ooewy\" }]\n]);\n\nexport { BellOff as default };\n//# sourceMappingURL=bell-off.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bell = createLucideIcon(\"Bell\", [\n  [\"path\", { d: \"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9\", key: \"1qo2s2\" }],\n  [\"path\", { d: \"M10.3 21a1.94 1.94 0 0 0 3.4 0\", key: \"qgo35s\" }]\n]);\n\nexport { Bell as default };\n//# sourceMappingURL=bell.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BookOpen = createLucideIcon(\"BookOpen\", [\n  [\"path\", { d: \"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z\", key: \"vv98re\" }],\n  [\"path\", { d: \"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z\", key: \"1cyq3y\" }]\n]);\n\nexport { BookOpen as default };\n//# sourceMappingURL=book-open.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bug = createLucideIcon(\"Bug\", [\n  [\"path\", { d: \"m8 2 1.88 1.88\", key: \"fmnt4t\" }],\n  [\"path\", { d: \"M14.12 3.88 16 2\", key: \"qol33r\" }],\n  [\"path\", { d: \"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1\", key: \"d7y7pr\" }],\n  [\n    \"path\",\n    {\n      d: \"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6\",\n      key: \"xs1cw7\"\n    }\n  ],\n  [\"path\", { d: \"M12 20v-9\", key: \"1qisl0\" }],\n  [\"path\", { d: \"M6.53 9C4.6 8.8 3 7.1 3 5\", key: \"32zzws\" }],\n  [\"path\", { d: \"M6 13H2\", key: \"82j7cp\" }],\n  [\"path\", { d: \"M3 21c0-2.1 1.7-3.9 3.8-4\", key: \"4p0ekp\" }],\n  [\"path\", { d: \"M20.97 5c0 2.1-1.6 3.8-3.5 4\", key: \"18gb23\" }],\n  [\"path\", { d: \"M22 13h-4\", key: \"1jl80f\" }],\n  [\"path\", { d: \"M17.2 17c2.1.1 3.8 1.9 3.8 4\", key: \"k3fwyw\" }]\n]);\n\nexport { Bug as default };\n//# sourceMappingURL=bug.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Calendar = createLucideIcon(\"Calendar\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"4\", rx: \"2\", ry: \"2\", key: \"eu3xkr\" }],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"2\", y2: \"6\", key: \"m3sa8f\" }],\n  [\"line\", { x1: \"8\", x2: \"8\", y1: \"2\", y2: \"6\", key: \"18kwsl\" }],\n  [\"line\", { x1: \"3\", x2: \"21\", y1: \"10\", y2: \"10\", key: \"xt86sb\" }]\n]);\n\nexport { Calendar as default };\n//# sourceMappingURL=calendar.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCircle2 = createLucideIcon(\"CheckCircle2\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n]);\n\nexport { CheckCircle2 as default };\n//# sourceMappingURL=check-circle-2.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCircle = createLucideIcon(\"CheckCircle\", [\n  [\"path\", { d: \"M22 11.08V12a10 10 0 1 1-5.93-9.14\", key: \"g774vq\" }],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n]);\n\nexport { CheckCircle as default };\n//# sourceMappingURL=check-circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckSquare = createLucideIcon(\"CheckSquare\", [\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }],\n  [\"path\", { d: \"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11\", key: \"1jnkn4\" }]\n]);\n\nexport { CheckSquare as default };\n//# sourceMappingURL=check-square.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Check = createLucideIcon(\"Check\", [[\"path\", { d: \"M20 6 9 17l-5-5\", key: \"1gmf2c\" }]]);\n\nexport { Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronDown = createLucideIcon(\"ChevronDown\", [\n  [\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]\n]);\n\nexport { ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronRight = createLucideIcon(\"ChevronRight\", [\n  [\"path\", { d: \"m9 18 6-6-6-6\", key: \"mthhwq\" }]\n]);\n\nexport { ChevronRight as default };\n//# sourceMappingURL=chevron-right.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronUp = createLucideIcon(\"ChevronUp\", [[\"path\", { d: \"m18 15-6-6-6 6\", key: \"153udz\" }]]);\n\nexport { ChevronUp as default };\n//# sourceMappingURL=chevron-up.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ClipboardCheck = createLucideIcon(\"ClipboardCheck\", [\n  [\"rect\", { width: \"8\", height: \"4\", x: \"8\", y: \"2\", rx: \"1\", ry: \"1\", key: \"tgr4d6\" }],\n  [\n    \"path\",\n    {\n      d: \"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\",\n      key: \"116196\"\n    }\n  ],\n  [\"path\", { d: \"m9 14 2 2 4-4\", key: \"df797q\" }]\n]);\n\nexport { ClipboardCheck as default };\n//# sourceMappingURL=clipboard-check.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Clock = createLucideIcon(\"Clock\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"polyline\", { points: \"12 6 12 12 16 14\", key: \"68esgv\" }]\n]);\n\nexport { Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Copy = createLucideIcon(\"Copy\", [\n  [\"rect\", { width: \"14\", height: \"14\", x: \"8\", y: \"8\", rx: \"2\", ry: \"2\", key: \"17jyea\" }],\n  [\"path\", { d: \"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\", key: \"zix9uf\" }]\n]);\n\nexport { Copy as default };\n//# sourceMappingURL=copy.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst DollarSign = createLucideIcon(\"DollarSign\", [\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"2\", y2: \"22\", key: \"7eqyqh\" }],\n  [\"path\", { d: \"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6\", key: \"1b0p4s\" }]\n]);\n\nexport { DollarSign as default };\n//# sourceMappingURL=dollar-sign.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Download = createLucideIcon(\"Download\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"7 10 12 15 17 10\", key: \"2ggqvy\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"15\", y2: \"3\", key: \"1vk2je\" }]\n]);\n\nexport { Download as default };\n//# sourceMappingURL=download.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ExternalLink = createLucideIcon(\"ExternalLink\", [\n  [\"path\", { d: \"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\", key: \"a6xqqp\" }],\n  [\"polyline\", { points: \"15 3 21 3 21 9\", key: \"mznyad\" }],\n  [\"line\", { x1: \"10\", x2: \"21\", y1: \"14\", y2: \"3\", key: \"18c3s4\" }]\n]);\n\nexport { ExternalLink as default };\n//# sourceMappingURL=external-link.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Eye = createLucideIcon(\"Eye\", [\n  [\"path\", { d: \"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z\", key: \"rwhkz3\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Eye as default };\n//# sourceMappingURL=eye.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileCheck2 = createLucideIcon(\"FileCheck2\", [\n  [\"path\", { d: \"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4\", key: \"702lig\" }],\n  [\"polyline\", { points: \"14 2 14 8 20 8\", key: \"1ew0cm\" }],\n  [\"path\", { d: \"m3 15 2 2 4-4\", key: \"1lhrkk\" }]\n]);\n\nexport { FileCheck2 as default };\n//# sourceMappingURL=file-check-2.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileText = createLucideIcon(\"FileText\", [\n  [\n    \"path\",\n    { d: \"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\", key: \"1nnpy2\" }\n  ],\n  [\"polyline\", { points: \"14 2 14 8 20 8\", key: \"1ew0cm\" }],\n  [\"line\", { x1: \"16\", x2: \"8\", y1: \"13\", y2: \"13\", key: \"14keom\" }],\n  [\"line\", { x1: \"16\", x2: \"8\", y1: \"17\", y2: \"17\", key: \"17nazh\" }],\n  [\"line\", { x1: \"10\", x2: \"8\", y1: \"9\", y2: \"9\", key: \"1a5vjj\" }]\n]);\n\nexport { FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FlaskConical = createLucideIcon(\"FlaskConical\", [\n  [\n    \"path\",\n    {\n      d: \"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2\",\n      key: \"pzvekw\"\n    }\n  ],\n  [\"path\", { d: \"M8.5 2h7\", key: \"csnxdl\" }],\n  [\"path\", { d: \"M7 16h10\", key: \"wp8him\" }]\n]);\n\nexport { FlaskConical as default };\n//# sourceMappingURL=flask-conical.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Globe = createLucideIcon(\"Globe\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20\", key: \"13o1zl\" }],\n  [\"path\", { d: \"M2 12h20\", key: \"9i4pu4\" }]\n]);\n\nexport { Globe as default };\n//# sourceMappingURL=globe.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst HelpCircle = createLucideIcon(\"HelpCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\", key: \"1u773s\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { HelpCircle as default };\n//# sourceMappingURL=help-circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Info = createLucideIcon(\"Info\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 16v-4\", key: \"1dtifu\" }],\n  [\"path\", { d: \"M12 8h.01\", key: \"e9boi3\" }]\n]);\n\nexport { Info as default };\n//# sourceMappingURL=info.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Lightbulb = createLucideIcon(\"Lightbulb\", [\n  [\n    \"path\",\n    {\n      d: \"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5\",\n      key: \"1gvzjb\"\n    }\n  ],\n  [\"path\", { d: \"M9 18h6\", key: \"x1upvd\" }],\n  [\"path\", { d: \"M10 22h4\", key: \"ceow96\" }]\n]);\n\nexport { Lightbulb as default };\n//# sourceMappingURL=lightbulb.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Loader2 = createLucideIcon(\"Loader2\", [\n  [\"path\", { d: \"M21 12a9 9 0 1 1-6.219-8.56\", key: \"13zald\" }]\n]);\n\nexport { Loader2 as default };\n//# sourceMappingURL=loader-2.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Lock = createLucideIcon(\"Lock\", [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n]);\n\nexport { Lock as default };\n//# sourceMappingURL=lock.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Mail = createLucideIcon(\"Mail\", [\n  [\"rect\", { width: \"20\", height: \"16\", x: \"2\", y: \"4\", rx: \"2\", key: \"18n3k1\" }],\n  [\"path\", { d: \"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7\", key: \"1ocrg3\" }]\n]);\n\nexport { Mail as default };\n//# sourceMappingURL=mail.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MapPin = createLucideIcon(\"MapPin\", [\n  [\"path\", { d: \"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z\", key: \"2oe9fu\" }],\n  [\"circle\", { cx: \"12\", cy: \"10\", r: \"3\", key: \"ilqhr7\" }]\n]);\n\nexport { MapPin as default };\n//# sourceMappingURL=map-pin.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MessageSquare = createLucideIcon(\"MessageSquare\", [\n  [\"path\", { d: \"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\", key: \"1lielz\" }]\n]);\n\nexport { MessageSquare as default };\n//# sourceMappingURL=message-square.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MicOff = createLucideIcon(\"MicOff\", [\n  [\"line\", { x1: \"2\", x2: \"22\", y1: \"2\", y2: \"22\", key: \"a6p6uj\" }],\n  [\"path\", { d: \"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2\", key: \"80xlxr\" }],\n  [\"path\", { d: \"M5 10v2a7 7 0 0 0 12 5\", key: \"p2k8kg\" }],\n  [\"path\", { d: \"M15 9.34V5a3 3 0 0 0-5.68-1.33\", key: \"1gzdoj\" }],\n  [\"path\", { d: \"M9 9v3a3 3 0 0 0 5.12 2.12\", key: \"r2i35w\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"19\", y2: \"22\", key: \"x3vr5v\" }]\n]);\n\nexport { MicOff as default };\n//# sourceMappingURL=mic-off.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Mic = createLucideIcon(\"Mic\", [\n  [\"path\", { d: \"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z\", key: \"131961\" }],\n  [\"path\", { d: \"M19 10v2a7 7 0 0 1-14 0v-2\", key: \"1vc78b\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"19\", y2: \"22\", key: \"x3vr5v\" }]\n]);\n\nexport { Mic as default };\n//# sourceMappingURL=mic.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Phone = createLucideIcon(\"Phone\", [\n  [\n    \"path\",\n    {\n      d: \"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\",\n      key: \"foiqr5\"\n    }\n  ]\n]);\n\nexport { Phone as default };\n//# sourceMappingURL=phone.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Play = createLucideIcon(\"Play\", [\n  [\"polygon\", { points: \"5 3 19 12 5 21 5 3\", key: \"191637\" }]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCw = createLucideIcon(\"RefreshCw\", [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Save = createLucideIcon(\"Save\", [\n  [\"path\", { d: \"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\", key: \"1owoqh\" }],\n  [\"polyline\", { points: \"17 21 17 13 7 13 7 21\", key: \"1md35c\" }],\n  [\"polyline\", { points: \"7 3 7 8 15 8\", key: \"8nz8an\" }]\n]);\n\nexport { Save as default };\n//# sourceMappingURL=save.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Search = createLucideIcon(\"Search\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"path\", { d: \"m21 21-4.3-4.3\", key: \"1qie3q\" }]\n]);\n\nexport { Search as default };\n//# sourceMappingURL=search.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"Send\", [\n  [\"path\", { d: \"m22 2-7 20-4-9-9-4Z\", key: \"1q3vgg\" }],\n  [\"path\", { d: \"M22 2 11 13\", key: \"nzbqef\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shield = createLucideIcon(\"Shield\", [\n  [\"path\", { d: \"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10\", key: \"1irkt0\" }]\n]);\n\nexport { Shield as default };\n//# sourceMappingURL=shield.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Square = createLucideIcon(\"Square\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }]\n]);\n\nexport { Square as default };\n//# sourceMappingURL=square.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Star = createLucideIcon(\"Star\", [\n  [\n    \"polygon\",\n    {\n      points: \"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\",\n      key: \"8f66p6\"\n    }\n  ]\n]);\n\nexport { Star as default };\n//# sourceMappingURL=star.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ThumbsUp = createLucideIcon(\"ThumbsUp\", [\n  [\"path\", { d: \"M7 10v12\", key: \"1qc93n\" }],\n  [\n    \"path\",\n    {\n      d: \"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z\",\n      key: \"y3tblf\"\n    }\n  ]\n]);\n\nexport { ThumbsUp as default };\n//# sourceMappingURL=thumbs-up.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trash2 = createLucideIcon(\"Trash2\", [\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\", key: \"4alrt4\" }],\n  [\"path\", { d: \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\", key: \"v07s0e\" }],\n  [\"line\", { x1: \"10\", x2: \"10\", y1: \"11\", y2: \"17\", key: \"1uufr5\" }],\n  [\"line\", { x1: \"14\", x2: \"14\", y1: \"11\", y2: \"17\", key: \"xtxkd\" }]\n]);\n\nexport { Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Upload = createLucideIcon(\"Upload\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"17 8 12 3 7 8\", key: \"t8dd8p\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"3\", y2: \"15\", key: \"widbto\" }]\n]);\n\nexport { Upload as default };\n//# sourceMappingURL=upload.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Users = createLucideIcon(\"Users\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"path\", { d: \"M22 21v-2a4 4 0 0 0-3-3.87\", key: \"kshegd\" }],\n  [\"path\", { d: \"M16 3.13a4 4 0 0 1 0 7.75\", key: \"1da9ce\" }]\n]);\n\nexport { Users as default };\n//# sourceMappingURL=users.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Volume2 = createLucideIcon(\"Volume2\", [\n  [\"polygon\", { points: \"11 5 6 9 2 9 2 15 6 15 11 19 11 5\", key: \"16drj5\" }],\n  [\"path\", { d: \"M15.54 8.46a5 5 0 0 1 0 7.07\", key: \"ltjumu\" }],\n  [\"path\", { d: \"M19.07 4.93a10 10 0 0 1 0 14.14\", key: \"1kegas\" }]\n]);\n\nexport { Volume2 as default };\n//# sourceMappingURL=volume-2.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst VolumeX = createLucideIcon(\"VolumeX\", [\n  [\"polygon\", { points: \"11 5 6 9 2 9 2 15 6 15 11 19 11 5\", key: \"16drj5\" }],\n  [\"line\", { x1: \"22\", x2: \"16\", y1: \"9\", y2: \"15\", key: \"1ewh16\" }],\n  [\"line\", { x1: \"16\", x2: \"22\", y1: \"9\", y2: \"15\", key: \"5ykzw1\" }]\n]);\n\nexport { VolumeX as default };\n//# sourceMappingURL=volume-x.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst XCircle = createLucideIcon(\"XCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m15 9-6 6\", key: \"1uzhvr\" }],\n  [\"path\", { d: \"m9 9 6 6\", key: \"z0biqf\" }]\n]);\n\nexport { XCircle as default };\n//# sourceMappingURL=x-circle.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Zap = createLucideIcon(\"Zap\", [\n  [\"polygon\", { points: \"13 2 3 14 12 14 11 22 21 10 12 10 13 2\", key: \"45s27k\" }]\n]);\n\nexport { Zap as default };\n//# sourceMappingURL=zap.js.map\n","/**\n * BidSmart Database Service\n * \n * Core CRUD operations for projects, bids, and related data.\n */\n\nimport { supabase } from '../supabaseClient';\nimport type {\n  Project,\n  Bid,\n  BidScope,\n  BidContractor,\n  BidScore,\n  BidLineItem,\n  BidEquipment,\n  BidAnalysis,\n  PdfUpload,\n  MindPalExtraction,\n  RebateProgram,\n  ProjectRebate,\n  ProjectRequirements,\n  UserExt,\n  ProjectStatus,\n  PdfStatus,\n  ProjectSummary,\n  BidComparisonTableRow,\n  BidWithChildren,\n  BidFaq,\n  BidQuestion,\n  IncentiveProgramDB,\n} from '../types';\n\n// ============================================\n// USERS\n// ============================================\n\nexport async function getUserById(userId: string): Promise<UserExt | null> {\n  const { data, error } = await supabase\n    .from('users_ext')\n    .select('*')\n    .eq('id', userId)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateUser(\n  userId: string,\n  updates: Partial<UserExt>\n): Promise<UserExt | null> {\n  const { data, error } = await supabase\n    .from('users_ext')\n    .update(updates)\n    .eq('id', userId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// PROJECTS\n// ============================================\n\nexport async function createProject(\n  userId: string,\n  projectData: Partial<Project> = {}\n): Promise<Project> {\n  const { data, error } = await supabase\n    .from('projects')\n    .insert({\n      user_id: userId,\n      project_name: projectData.project_name || 'My Heat Pump Project',\n      status: projectData.status || 'draft',\n      ...projectData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getProject(projectId: string): Promise<Project | null> {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .eq('id', projectId)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getProjectsByUser(userId: string): Promise<Project[]> {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .eq('user_id', userId)\n    .order('created_at', { ascending: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function getDemoProject(userId: string): Promise<Project | null> {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .eq('user_id', userId)\n    .eq('is_demo', true)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getPublicDemoProjects(): Promise<Project[]> {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .eq('is_public_demo', true)\n    .order('created_at', { ascending: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function getProjectsWithPublicDemos(userId: string): Promise<Project[]> {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .or(`user_id.eq.${userId},is_public_demo.eq.true`)\n    .order('is_public_demo', { ascending: false })\n    .order('created_at', { ascending: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updateProject(\n  projectId: string,\n  updates: Partial<Project>\n): Promise<Project | null> {\n  const { data, error } = await supabase\n    .from('projects')\n    .update(updates)\n    .eq('id', projectId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateProjectStatus(\n  projectId: string,\n  status: ProjectStatus\n): Promise<Project | null> {\n  return updateProject(projectId, { status });\n}\n\nexport async function updateProjectDataSharingConsent(\n  projectId: string,\n  consent: boolean\n): Promise<Project | null> {\n  const updates: Partial<Project> = {\n    data_sharing_consent: consent,\n  };\n  if (consent) {\n    updates.data_sharing_consented_at = new Date().toISOString();\n  }\n  return updateProject(projectId, updates);\n}\n\nexport async function updateProjectNotificationSettings(\n  projectId: string,\n  email: string,\n  notifyOnCompletion: boolean\n): Promise<Project | null> {\n  return updateProject(projectId, {\n    notification_email: email,\n    notify_on_completion: notifyOnCompletion,\n  });\n}\n\nexport async function setProjectAnalysisQueued(\n  projectId: string\n): Promise<Project | null> {\n  return updateProject(projectId, {\n    analysis_queued_at: new Date().toISOString(),\n    status: 'analyzing',\n  });\n}\n\nexport async function incrementProjectRerunCount(\n  projectId: string\n): Promise<Project | null> {\n  const project = await getProject(projectId);\n  if (!project) return null;\n\n  return updateProject(projectId, {\n    rerun_count: (project.rerun_count || 0) + 1,\n  });\n}\n\nexport async function getProjectsByNotificationEmail(\n  email: string\n): Promise<Project[]> {\n  const normalizedEmail = email.toLowerCase().trim();\n\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .ilike('notification_email', normalizedEmail)\n    .order('created_at', { ascending: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function deleteProject(projectId: string): Promise<void> {\n  const { error } = await supabase\n    .from('projects')\n    .delete()\n    .eq('id', projectId);\n\n  if (error) throw error;\n}\n\nexport async function getProjectBySessionId(sessionId: string): Promise<Project | null> {\n  const { data, error } = await supabase\n    .from('projects')\n    .select('*')\n    .eq('session_id', sessionId)\n    .eq('status', 'draft')\n    .order('created_at', { ascending: false })\n    .limit(1)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function createDraftProject(\n  userId: string,\n  sessionId: string\n): Promise<Project> {\n  const { data, error } = await supabase\n    .from('projects')\n    .insert({\n      user_id: userId,\n      session_id: sessionId,\n      project_name: 'My Heat Pump Project',\n      status: 'draft',\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// BIDS (V2  thin identity stubs)\n// ============================================\n\n/**\n * Create a bid stub at PDF upload time.\n * The stub is updated by the MindPal callback with status='completed'.\n */\nexport async function createBidStub(\n  projectId: string,\n  pdfUploadId: string,\n  requestId: string,\n  storageKey?: string\n): Promise<Bid> {\n  const { data, error } = await supabase\n    .from('bids')\n    .insert({\n      project_id: projectId,\n      pdf_upload_id: pdfUploadId,\n      request_id: requestId,\n      storage_key: storageKey || null,\n      status: 'pending',\n      contractor_name: 'TBD',\n      verified_by_user: false,\n      is_favorite: false,\n      processing_attempts: 0,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\n/** @deprecated Use createBidStub for V2 flow. Kept for backward compat. */\nexport async function createBid(\n  projectId: string,\n  bidData: Partial<Bid>\n): Promise<Bid> {\n  const { data, error } = await supabase\n    .from('bids')\n    .insert({\n      project_id: projectId,\n      contractor_name: bidData.contractor_name || 'Unknown Contractor',\n      request_id: bidData.request_id || '',\n      status: bidData.status || 'pending',\n      verified_by_user: bidData.verified_by_user || false,\n      is_favorite: bidData.is_favorite || false,\n      processing_attempts: 0,\n      ...bidData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// V1 COMPATIBILITY LAYER\n// Production DB still uses V1 schema (contractor_bids monolith).\n// These helpers detect V2 table availability and fall back to V1.\n// Remove once the V2 migration is applied to production.\n// ============================================\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nfunction v1ToBid(row: any): Bid {\n  return {\n    id: row.id,\n    project_id: row.project_id,\n    pdf_upload_id: row.pdf_upload_id ?? null,\n    bid_index: row.bid_index ?? null,\n    status: row.status ?? 'complete',\n    request_id: row.request_id ?? row.id,\n    storage_key: null,\n    source_doc_url: null,\n    source_doc_mime: null,\n    processing_attempts: 0,\n    last_error: null,\n    contractor_name: row.contractor_name ?? 'Unknown',\n    verified_by_user: row.verified_by_user ?? false,\n    verified_at: row.verified_at ?? null,\n    user_notes: row.user_notes ?? null,\n    is_favorite: row.is_favorite ?? false,\n    created_at: row.created_at,\n    updated_at: row.updated_at,\n  };\n}\n\nfunction v1ToScope(row: any): BidScope {\n  return {\n    id: row.id, // reuse bid id as pseudo-scope id\n    bid_id: row.id,\n    total_bid_amount: row.total_bid_amount,\n    labor_cost: row.labor_cost,\n    equipment_cost: row.equipment_cost,\n    materials_cost: row.materials_cost,\n    permit_cost: row.permit_cost,\n    disposal_cost: row.disposal_cost,\n    electrical_cost: row.electrical_cost,\n    total_before_rebates: row.total_before_rebates,\n    estimated_rebates: row.estimated_rebates,\n    total_after_rebates: row.total_after_rebates,\n    deposit_required: row.deposit_required,\n    deposit_percentage: row.deposit_percentage,\n    payment_schedule: row.payment_schedule,\n    financing_offered: row.financing_offered,\n    financing_terms: row.financing_terms,\n    labor_warranty_years: row.labor_warranty_years,\n    equipment_warranty_years: row.equipment_warranty_years,\n    compressor_warranty_years: row.compressor_warranty_years,\n    additional_warranty_details: row.additional_warranty_details,\n    estimated_days: row.estimated_days,\n    start_date_available: row.start_date_available,\n    bid_date: row.bid_date,\n    valid_until: row.valid_until,\n    extraction_confidence: row.extraction_confidence,\n    extraction_notes: row.extraction_notes,\n    summary: row.scope_summary ?? null,\n    inclusions: row.inclusions,\n    exclusions: row.exclusions,\n    // V1 scope booleans have scope_ prefix\n    permit_included: row.scope_permit_included,\n    disposal_included: row.scope_disposal_included,\n    electrical_included: row.scope_electrical_included,\n    ductwork_included: row.scope_ductwork_included,\n    thermostat_included: row.scope_thermostat_included,\n    manual_j_included: row.scope_manual_j_included,\n    commissioning_included: row.scope_commissioning_included,\n    air_handler_included: row.scope_air_handler_included,\n    line_set_included: row.scope_line_set_included,\n    disconnect_included: row.scope_disconnect_included,\n    pad_included: row.scope_pad_included,\n    drain_line_included: row.scope_drain_line_included,\n    // V1 electrical fields keep electrical_ prefix\n    panel_assessment_included: row.electrical_panel_assessment_included,\n    panel_upgrade_included: row.electrical_panel_upgrade_included,\n    dedicated_circuit_included: row.electrical_dedicated_circuit_included,\n    electrical_permit_included: row.electrical_permit_included,\n    load_calculation_included: row.electrical_load_calculation_included,\n    existing_panel_amps: row.electrical_existing_panel_amps,\n    proposed_panel_amps: row.electrical_proposed_panel_amps,\n    breaker_size_required: row.electrical_breaker_size_required,\n    panel_upgrade_cost: row.electrical_panel_upgrade_cost,\n    electrical_notes: row.electrical_notes,\n    created_at: row.created_at,\n    updated_at: row.updated_at,\n  };\n}\n\nfunction v1ToContractor(row: any): BidContractor {\n  return {\n    id: row.id, // reuse bid id as pseudo-contractor id\n    bid_id: row.id,\n    name: row.contractor_name,\n    company: row.contractor_company,\n    phone: row.contractor_phone,\n    email: row.contractor_email,\n    website: row.contractor_website,\n    license: row.contractor_license,\n    license_state: row.contractor_license_state,\n    insurance_verified: row.contractor_insurance_verified,\n    bonded: row.contractor_bonded ?? null,\n    years_in_business: row.contractor_years_in_business,\n    year_established: row.contractor_year_established,\n    total_installs: row.contractor_total_installs,\n    certifications: row.contractor_certifications,\n    employee_count: row.contractor_employee_count ? Number(row.contractor_employee_count) : null,\n    service_area: row.contractor_service_area,\n    google_rating: row.contractor_google_rating,\n    google_review_count: row.contractor_google_review_count,\n    yelp_rating: row.contractor_yelp_rating,\n    yelp_review_count: row.contractor_yelp_review_count,\n    bbb_rating: row.contractor_bbb_rating,\n    bbb_accredited: row.contractor_bbb_accredited,\n    bbb_complaints_3yr: row.contractor_bbb_complaints_3yr,\n    contact_name: row.contractor_contact_name ?? null,\n    address: row.contractor_address ?? null,\n    created_at: row.created_at,\n    updated_at: row.updated_at,\n  };\n}\n\nfunction v1ToScore(row: any): BidScore {\n  return {\n    id: row.id, // reuse bid id as pseudo-score id\n    bid_id: row.id,\n    overall_score: row.overall_score ?? row.mindpal_overall_score,\n    value_score: row.value_score ?? row.mindpal_value_score,\n    quality_score: row.quality_score ?? row.mindpal_quality_score,\n    completeness_score: row.completeness_score,\n    ranking_recommendation: row.ranking_recommendation,\n    red_flags: row.red_flags ?? [],\n    positive_indicators: row.positive_indicators ?? [],\n    created_at: row.created_at,\n    updated_at: row.updated_at,\n  };\n}\n\n// Cache whether V2 bids table exists to avoid repeated failed queries\nlet _v2Available: boolean | null = null;\n\nasync function isV2Schema(): Promise<boolean> {\n  if (_v2Available !== null) return _v2Available;\n  const { error } = await supabase\n    .from('bids')\n    .select('id', { count: 'exact', head: true })\n    .limit(0);\n  _v2Available = !error;\n  return _v2Available;\n}\n\nasync function getV1BidsByProject(projectId: string): Promise<any[]> {\n  const { data, error } = await supabase\n    .from('contractor_bids')\n    .select('*')\n    .eq('project_id', projectId)\n    .order('created_at', { ascending: true });\n  if (error) throw error;\n  return data || [];\n}\n\nasync function getV1BidById(bidId: string): Promise<any | null> {\n  const { data, error } = await supabase\n    .from('contractor_bids')\n    .select('*')\n    .eq('id', bidId)\n    .maybeSingle();\n  if (error) throw error;\n  return data;\n}\n/* eslint-enable @typescript-eslint/no-explicit-any */\n\n// ============================================\n\nexport async function getBid(bidId: string): Promise<Bid | null> {\n  if (await isV2Schema()) {\n    const { data, error } = await supabase\n      .from('bids')\n      .select('*')\n      .eq('id', bidId)\n      .maybeSingle();\n    if (error) throw error;\n    return data;\n  }\n  const row = await getV1BidById(bidId);\n  return row ? v1ToBid(row) : null;\n}\n\nexport async function getBidsByProject(projectId: string): Promise<Bid[]> {\n  if (await isV2Schema()) {\n    const { data, error } = await supabase\n      .from('bids')\n      .select('*')\n      .eq('project_id', projectId)\n      .order('created_at', { ascending: true });\n    if (error) throw error;\n    return data || [];\n  }\n  const rows = await getV1BidsByProject(projectId);\n  return rows.map(v1ToBid);\n}\n\nexport async function getBidCountByProject(projectId: string): Promise<number> {\n  const table = (await isV2Schema()) ? 'bids' : 'contractor_bids';\n  const { count, error } = await supabase\n    .from(table)\n    .select('*', { count: 'exact', head: true })\n    .eq('project_id', projectId);\n\n  if (error) throw error;\n  return count || 0;\n}\n\nexport async function updateBid(\n  bidId: string,\n  updates: Partial<Bid>\n): Promise<Bid | null> {\n  const { data, error } = await supabase\n    .from('bids')\n    .update(updates)\n    .eq('id', bidId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function deleteBid(bidId: string): Promise<void> {\n  const { error } = await supabase\n    .from('bids')\n    .delete()\n    .eq('id', bidId);\n\n  if (error) throw error;\n}\n\nexport async function getBidWithChildren(bidId: string): Promise<BidWithChildren> {\n  const bid = await getBid(bidId);\n  if (!bid) throw new Error(`Bid not found: ${bidId}`);\n\n  const [scope, contractor, scores, equipment, questions] = await Promise.all([\n    getBidScope(bidId),\n    getBidContractor(bidId),\n    getBidScore(bidId),\n    getEquipmentByBid(bidId),\n    (async () => {\n      const { data, error } = await supabase\n        .from('contractor_questions')\n        .select('*')\n        .eq('bid_id', bidId)\n        .order('display_order', { ascending: true });\n      if (error) throw error;\n      return (data || []) as BidQuestion[];\n    })(),\n  ]);\n\n  return { bid, scope, contractor, scores, equipment, questions };\n}\n\nexport async function toggleBidFavorite(bidId: string): Promise<Bid | null> {\n  const bid = await getBid(bidId);\n  if (!bid) return null;\n\n  return updateBid(bidId, { is_favorite: !bid.is_favorite });\n}\n\nexport async function verifyBid(bidId: string): Promise<Bid | null> {\n  return updateBid(bidId, {\n    verified_by_user: true,\n    verified_at: new Date().toISOString(),\n  });\n}\n\n// ============================================\n// BID SCOPE (V2  all extracted data)\n// ============================================\n\nexport async function getBidScope(bidId: string): Promise<BidScope | null> {\n  if (await isV2Schema()) {\n    const { data, error } = await supabase\n      .from('bid_scope')\n      .select('*')\n      .eq('bid_id', bidId)\n      .maybeSingle();\n    if (error) throw error;\n    return data;\n  }\n  // V1 fallback: scope fields live on contractor_bids\n  const row = await getV1BidById(bidId);\n  return row ? v1ToScope(row) : null;\n}\n\nexport async function getBidScopesByProject(projectId: string): Promise<BidScope[]> {\n  if (await isV2Schema()) {\n    // Join through bids to filter by project\n    const { data, error } = await supabase\n      .from('bid_scope')\n      .select('*, bids!inner(project_id)')\n      .eq('bids.project_id', projectId);\n    if (error) throw error;\n    return (data || []).map((row: Record<string, unknown>) => {\n      const { bids: _, ...scope } = row;\n      return scope as unknown as BidScope;\n    });\n  }\n  // V1 fallback\n  const rows = await getV1BidsByProject(projectId);\n  return rows.map(v1ToScope);\n}\n\n// ============================================\n// BID CONTRACTORS (V2)\n// ============================================\n\nexport async function getBidContractor(bidId: string): Promise<BidContractor | null> {\n  if (await isV2Schema()) {\n    const { data, error } = await supabase\n      .from('bid_contractors')\n      .select('*')\n      .eq('bid_id', bidId)\n      .maybeSingle();\n    if (error) throw error;\n    return data;\n  }\n  // V1 fallback: contractor fields live on contractor_bids\n  const row = await getV1BidById(bidId);\n  return row ? v1ToContractor(row) : null;\n}\n\n// ============================================\n// BID SCORES (V2)\n// ============================================\n\nexport async function getBidScore(bidId: string): Promise<BidScore | null> {\n  if (await isV2Schema()) {\n    const { data, error } = await supabase\n      .from('bid_scores')\n      .select('*')\n      .eq('bid_id', bidId)\n      .maybeSingle();\n    if (error) throw error;\n    return data;\n  }\n  // V1 fallback: score fields live on contractor_bids\n  const row = await getV1BidById(bidId);\n  return row ? v1ToScore(row) : null;\n}\n\n// ============================================\n// BID LINE ITEMS\n// ============================================\n\nexport async function createLineItem(\n  bidId: string,\n  itemData: Partial<BidLineItem>\n): Promise<BidLineItem> {\n  const { data, error } = await supabase\n    .from('bid_line_items')\n    .insert({\n      bid_id: bidId,\n      item_type: itemData.item_type || 'other',\n      description: itemData.description || '',\n      quantity: itemData.quantity || 1,\n      total_price: itemData.total_price || 0,\n      confidence: itemData.confidence || 'manual',\n      ...itemData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getLineItemsByBid(bidId: string): Promise<BidLineItem[]> {\n  const { data, error } = await supabase\n    .from('bid_line_items')\n    .select('*')\n    .eq('bid_id', bidId)\n    .order('line_order', { nullsFirst: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updateLineItem(\n  itemId: string,\n  updates: Partial<BidLineItem>\n): Promise<BidLineItem | null> {\n  const { data, error } = await supabase\n    .from('bid_line_items')\n    .update(updates)\n    .eq('id', itemId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function deleteLineItem(itemId: string): Promise<void> {\n  const { error } = await supabase\n    .from('bid_line_items')\n    .delete()\n    .eq('id', itemId);\n\n  if (error) throw error;\n}\n\nexport async function bulkCreateLineItems(\n  bidId: string,\n  items: Partial<BidLineItem>[]\n): Promise<BidLineItem[]> {\n  const itemsToInsert = items.map((item, index) => ({\n    bid_id: bidId,\n    item_type: item.item_type || 'other',\n    description: item.description || '',\n    quantity: item.quantity || 1,\n    total_price: item.total_price || 0,\n    confidence: item.confidence || 'manual',\n    line_order: index,\n    ...item,\n  }));\n\n  const { data, error } = await supabase\n    .from('bid_line_items')\n    .insert(itemsToInsert)\n    .select();\n\n  if (error) throw error;\n  return data || [];\n}\n\n// ============================================\n// BID EQUIPMENT\n// ============================================\n\nexport async function createEquipment(\n  bidId: string,\n  equipmentData: Partial<BidEquipment>\n): Promise<BidEquipment> {\n  const { data, error } = await supabase\n    .from('bid_equipment')\n    .insert({\n      bid_id: bidId,\n      equipment_type: equipmentData.equipment_type || 'other',\n      brand: equipmentData.brand || 'Unknown',\n      confidence: equipmentData.confidence || 'manual',\n      ...equipmentData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getEquipmentByBid(bidId: string): Promise<BidEquipment[]> {\n  const { data, error } = await supabase\n    .from('bid_equipment')\n    .select('*')\n    .eq('bid_id', bidId);\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updateEquipment(\n  equipmentId: string,\n  updates: Partial<BidEquipment>\n): Promise<BidEquipment | null> {\n  const { data, error } = await supabase\n    .from('bid_equipment')\n    .update(updates)\n    .eq('id', equipmentId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function deleteEquipment(equipmentId: string): Promise<void> {\n  const { error } = await supabase\n    .from('bid_equipment')\n    .delete()\n    .eq('id', equipmentId);\n\n  if (error) throw error;\n}\n\nexport async function bulkCreateEquipment(\n  bidId: string,\n  equipment: Partial<BidEquipment>[]\n): Promise<BidEquipment[]> {\n  const equipmentToInsert = equipment.map((eq) => ({\n    bid_id: bidId,\n    equipment_type: eq.equipment_type || 'other',\n    brand: eq.brand || 'Unknown',\n    confidence: eq.confidence || 'manual',\n    ...eq,\n  }));\n\n  const { data, error } = await supabase\n    .from('bid_equipment')\n    .insert(equipmentToInsert)\n    .select();\n\n  if (error) throw error;\n  return data || [];\n}\n\n// ============================================\n// BID ANALYSIS\n// ============================================\n\nexport async function createAnalysis(\n  projectId: string,\n  analysisData: Partial<BidAnalysis>\n): Promise<BidAnalysis> {\n  const { data, error } = await supabase\n    .from('bid_analysis')\n    .insert({\n      project_id: projectId,\n      analysis_version: '1.0',\n      ...analysisData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getLatestAnalysis(projectId: string): Promise<BidAnalysis | null> {\n  const { data, error } = await supabase\n    .from('bid_analysis')\n    .select('*')\n    .eq('project_id', projectId)\n    .order('created_at', { ascending: false })\n    .limit(1)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateAnalysis(\n  analysisId: string,\n  updates: Partial<BidAnalysis>\n): Promise<BidAnalysis | null> {\n  const { data, error } = await supabase\n    .from('bid_analysis')\n    .update(updates)\n    .eq('id', analysisId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// PDF UPLOADS\n// ============================================\n\nexport async function createPdfUpload(\n  projectId: string,\n  uploadData: Partial<PdfUpload>\n): Promise<PdfUpload> {\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .insert({\n      project_id: projectId,\n      file_name: uploadData.file_name || 'unknown.pdf',\n      file_path: uploadData.file_path || '',\n      status: uploadData.status || 'uploaded',\n      retry_count: 0,\n      ...uploadData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getPdfUpload(uploadId: string): Promise<PdfUpload | null> {\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .select('*')\n    .eq('id', uploadId)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getPdfUploadsByProject(projectId: string): Promise<PdfUpload[]> {\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .select('*')\n    .eq('project_id', projectId)\n    .order('uploaded_at', { ascending: false });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updatePdfUploadStatus(\n  uploadId: string,\n  status: PdfStatus,\n  additionalData: Partial<PdfUpload> = {}\n): Promise<PdfUpload | null> {\n  const updateData: Partial<PdfUpload> & { status: PdfStatus } = {\n    status,\n    ...additionalData,\n  };\n  if (status === 'processing') {\n    updateData.processing_started_at = new Date().toISOString();\n  }\n  if (status === 'extracted' || status === 'failed') {\n    updateData.processing_completed_at = new Date().toISOString();\n  }\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .update(updateData)\n    .eq('id', uploadId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function incrementPdfRetryCount(uploadId: string): Promise<PdfUpload | null> {\n  const upload = await getPdfUpload(uploadId);\n  if (!upload) return null;\n\n  const { data, error } = await supabase\n    .from('pdf_uploads')\n    .update({ retry_count: upload.retry_count + 1 })\n    .eq('id', uploadId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// MINDPAL EXTRACTIONS\n// ============================================\n\nexport async function createMindPalExtraction(\n  pdfUploadId: string,\n  rawJson: Record<string, unknown>\n): Promise<MindPalExtraction> {\n  const { data, error } = await supabase\n    .from('mindpal_extractions')\n    .insert({\n      pdf_upload_id: pdfUploadId,\n      raw_json: rawJson,\n      parsed_successfully: false,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateMindPalExtraction(\n  extractionId: string,\n  updates: Partial<MindPalExtraction>\n): Promise<MindPalExtraction | null> {\n  const { data, error } = await supabase\n    .from('mindpal_extractions')\n    .update(updates)\n    .eq('id', extractionId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function getExtractionByPdfUpload(\n  pdfUploadId: string\n): Promise<MindPalExtraction | null> {\n  const { data, error } = await supabase\n    .from('mindpal_extractions')\n    .select('*')\n    .eq('pdf_upload_id', pdfUploadId)\n    .order('extracted_at', { ascending: false })\n    .limit(1)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// REBATE PROGRAMS\n// ============================================\n\nexport async function getActiveRebates(): Promise<RebateProgram[]> {\n  const { data, error } = await supabase\n    .from('incentive_program_database')\n    .select('*')\n    .eq('is_active', true)\n    .order('program_name');\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function getRebatesByState(stateCode: string): Promise<RebateProgram[]> {\n  const { data, error } = await supabase\n    .from('incentive_program_database')\n    .select('*')\n    .eq('is_active', true)\n    .or(`available_nationwide.eq.true,available_states.cs.{${stateCode}}`);\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function getIncentivesByZip(_zip: string, stateCode?: string): Promise<IncentiveProgramDB[]> {\n  // If we have a state, filter by it; otherwise return all active nationwide programs\n  if (stateCode) {\n    const { data, error } = await supabase\n      .from('incentive_program_database')\n      .select('*')\n      .eq('is_active', true)\n      .or(`available_nationwide.eq.true,available_states.cs.{${stateCode}}`)\n      .order('program_name');\n\n    if (error) throw error;\n    return (data || []) as IncentiveProgramDB[];\n  }\n\n  // Fallback: return nationwide programs\n  const { data, error } = await supabase\n    .from('incentive_program_database')\n    .select('*')\n    .eq('is_active', true)\n    .eq('available_nationwide', true)\n    .order('program_name');\n\n  if (error) throw error;\n  return (data || []) as IncentiveProgramDB[];\n}\n\ninterface ProjectRebateWithProgram {\n  id: string;\n  project_id: string;\n  rebate_program_id: string;\n  is_eligible: boolean | null;\n  eligibility_notes: string | null;\n  estimated_amount: number | null;\n  applied_amount: number | null;\n  application_status: string | null;\n  application_date: string | null;\n  approval_date: string | null;\n  created_at: string;\n  updated_at: string;\n  rebate_programs: RebateProgram;\n}\n\nexport async function getProjectRebates(projectId: string): Promise<Array<{\n  program: RebateProgram;\n  projectRebate: ProjectRebate;\n}>> {\n  const { data, error } = await supabase\n    .from('project_rebates')\n    .select(`\n      *,\n      rebate_programs (*)\n    `)\n    .eq('project_id', projectId);\n\n  if (error) throw error;\n\n  return (data as ProjectRebateWithProgram[] || []).map((item) => ({\n    program: item.rebate_programs,\n    projectRebate: {\n      id: item.id,\n      project_id: item.project_id,\n      rebate_program_id: item.rebate_program_id,\n      is_eligible: item.is_eligible ?? false,\n      eligibility_notes: item.eligibility_notes,\n      estimated_amount: item.estimated_amount,\n      applied_amount: item.applied_amount,\n      application_status: item.application_status,\n      application_date: item.application_date,\n      approval_date: item.approval_date,\n      created_at: item.created_at,\n      updated_at: item.updated_at,\n    },\n  }));\n}\n\nexport async function addProjectRebate(\n  projectId: string,\n  rebateProgramId: string,\n  estimatedAmount?: number\n): Promise<ProjectRebate> {\n  const { data, error } = await supabase\n    .from('project_rebates')\n    .insert({\n      project_id: projectId,\n      rebate_program_id: rebateProgramId,\n      is_eligible: true,\n      estimated_amount: estimatedAmount,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\n// ============================================\n// COMPOSITE QUERIES\n// ============================================\n\nexport async function getProjectSummary(projectId: string): Promise<ProjectSummary | null> {\n  // Get project\n  const project = await getProject(projectId);\n  if (!project) return null;\n\n  // Get bids with their scope, contractor, scores, line items, and equipment\n  const bids = await getBidsByProject(projectId);\n  const bidsWithDetails: BidComparisonTableRow[] = await Promise.all(\n    bids.map(async (bid) => {\n      const [scope, contractor, scores, lineItems, equipment] = await Promise.all([\n        getBidScope(bid.id),\n        getBidContractor(bid.id),\n        getBidScore(bid.id),\n        getLineItemsByBid(bid.id),\n        getEquipmentByBid(bid.id),\n      ]);\n\n      return {\n        bid,\n        scope,\n        contractor,\n        scores,\n        equipment,\n        lineItems,\n      };\n    })\n  );\n\n  // Get analysis\n  const analysis = await getLatestAnalysis(projectId);\n\n  // Get rebates\n  const rebates = await getProjectRebates(projectId);\n\n  // Calculate stats from bid_scope pricing\n  const prices = bidsWithDetails\n    .map((b) => b.scope?.total_bid_amount)\n    .filter((p): p is number => p != null && p > 0);\n\n  const stats = {\n    totalBids: bids.length,\n    averagePrice: prices.length > 0 ? prices.reduce((a, b) => a + b, 0) / prices.length : 0,\n    lowestPrice: prices.length > 0 ? Math.min(...prices) : 0,\n    highestPrice: prices.length > 0 ? Math.max(...prices) : 0,\n    bestValueBidId: bidsWithDetails.reduce((best, row) =>\n      (row.scores?.value_score || 0) > (best?.scores?.value_score || 0) ? row : best,\n      bidsWithDetails[0]\n    )?.bid.id || null,\n    bestQualityBidId: bidsWithDetails.reduce((best, row) =>\n      (row.scores?.quality_score || 0) > (best?.scores?.quality_score || 0) ? row : best,\n      bidsWithDetails[0]\n    )?.bid.id || null,\n  };\n\n  return {\n    project,\n    bids: bidsWithDetails,\n    analysis,\n    rebates,\n    stats,\n  };\n}\n\n// ============================================\n// STORAGE\n// ============================================\n\nconst MAX_PDF_SIZE_BYTES = 25 * 1024 * 1024;\nconst ALLOWED_PDF_EXTENSIONS = ['pdf', 'doc', 'docx'];\nconst ALLOWED_PDF_MIME_TYPES = [\n  'application/pdf',\n  'application/msword',\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document'\n];\n\nexport interface PdfValidationError {\n  code: 'INVALID_EXTENSION' | 'INVALID_MIME_TYPE' | 'FILE_TOO_LARGE';\n  message: string;\n}\n\nexport function validatePdfFile(file: File): PdfValidationError | null {\n  const fileExt = file.name.split('.').pop()?.toLowerCase();\n  if (!fileExt || !ALLOWED_PDF_EXTENSIONS.includes(fileExt)) {\n    return {\n      code: 'INVALID_EXTENSION',\n      message: 'Only PDF and Word documents (.pdf, .doc, .docx) are allowed.',\n    };\n  }\n\n  if (!ALLOWED_PDF_MIME_TYPES.includes(file.type)) {\n    return {\n      code: 'INVALID_MIME_TYPE',\n      message: 'Invalid file type. Please upload a valid PDF or Word document.',\n    };\n  }\n\n  if (file.size > MAX_PDF_SIZE_BYTES) {\n    return {\n      code: 'FILE_TOO_LARGE',\n      message: `File size exceeds the maximum allowed size of ${MAX_PDF_SIZE_BYTES / (1024 * 1024)}MB.`,\n    };\n  }\n\n  return null;\n}\n\nexport async function uploadPdfToStorage(\n  projectId: string,\n  file: File\n): Promise<{ path: string; url: string }> {\n  const validationError = validatePdfFile(file);\n  if (validationError) {\n    throw new Error(validationError.message);\n  }\n\n  const fileExt = file.name.split('.').pop()?.toLowerCase() || 'pdf';\n  const fileName = `${Date.now()}_${crypto.randomUUID()}.${fileExt}`;\n  const filePath = `bids/${projectId}/${fileName}`;\n\n  const { error: uploadError } = await supabase.storage\n    .from('bid-pdfs')\n    .upload(filePath, file);\n\n  if (uploadError) throw uploadError;\n\n  const { data: urlData, error: urlError } = await supabase.storage\n    .from('bid-pdfs')\n    .createSignedUrl(filePath, 3600);\n\n  if (urlError) throw urlError;\n\n  return {\n    path: filePath,\n    url: urlData.signedUrl,\n  };\n}\n\nexport async function getPdfSignedUrl(filePath: string): Promise<string> {\n  const { data, error } = await supabase.storage\n    .from('bid-pdfs')\n    .createSignedUrl(filePath, 3600);\n\n  if (error) throw error;\n  return data.signedUrl;\n}\n\nexport async function deletePdfFromStorage(filePath: string): Promise<void> {\n  const { error } = await supabase.storage\n    .from('bid-pdfs')\n    .remove([filePath]);\n\n  if (error) throw error;\n}\n\n// ============================================\n// PROJECT REQUIREMENTS\n// ============================================\n\nexport async function getProjectRequirements(\n  projectId: string\n): Promise<ProjectRequirements | null> {\n  const { data, error } = await supabase\n    .from('project_requirements')\n    .select('*')\n    .eq('project_id', projectId)\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function createProjectRequirements(\n  projectId: string,\n  requirements: Partial<ProjectRequirements> = {}\n): Promise<ProjectRequirements> {\n  const { data, error } = await supabase\n    .from('project_requirements')\n    .insert({\n      project_id: projectId,\n      priority_price: requirements.priority_price ?? 3,\n      priority_warranty: requirements.priority_warranty ?? 3,\n      priority_efficiency: requirements.priority_efficiency ?? 3,\n      priority_timeline: requirements.priority_timeline ?? 3,\n      priority_reputation: requirements.priority_reputation ?? 3,\n      timeline_urgency: requirements.timeline_urgency ?? 'flexible',\n      specific_concerns: requirements.specific_concerns ?? [],\n      must_have_features: requirements.must_have_features ?? [],\n      nice_to_have_features: requirements.nice_to_have_features ?? [],\n      ...requirements,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function updateProjectRequirements(\n  projectId: string,\n  updates: Partial<ProjectRequirements>\n): Promise<ProjectRequirements | null> {\n  const { data, error } = await supabase\n    .from('project_requirements')\n    .update({\n      ...updates,\n      updated_at: new Date().toISOString(),\n    })\n    .eq('project_id', projectId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function saveProjectRequirements(\n  projectId: string,\n  requirements: Partial<ProjectRequirements>\n): Promise<ProjectRequirements> {\n  const existing = await getProjectRequirements(projectId);\n\n  if (existing) {\n    const updated = await updateProjectRequirements(projectId, {\n      ...requirements,\n      completed_at: new Date().toISOString(),\n    });\n    if (!updated) throw new Error('Failed to update requirements');\n    return updated;\n  }\n\n  return createProjectRequirements(projectId, {\n    ...requirements,\n    completed_at: new Date().toISOString(),\n  });\n}\n\n// ============================================\n// BID FAQs\n// ============================================\n\nexport async function getFaqsByBid(bidId: string): Promise<BidFaq[]> {\n  const { data, error } = await supabase\n    .from('bid_faqs')\n    .select('*')\n    .eq('bid_id', bidId)\n    .order('display_order', { ascending: true });\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function createBidFaq(\n  bidId: string,\n  faqData: Partial<BidFaq>\n): Promise<BidFaq> {\n  const { data, error } = await supabase\n    .from('bid_faqs')\n    .insert({\n      bid_id: bidId,\n      ...faqData,\n    })\n    .select()\n    .single();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function bulkCreateBidFaqs(\n  bidId: string,\n  faqs: Partial<BidFaq>[]\n): Promise<BidFaq[]> {\n  const faqsToInsert = faqs.map(faq => ({\n    bid_id: bidId,\n    ...faq,\n  }));\n\n  const { data, error } = await supabase\n    .from('bid_faqs')\n    .insert(faqsToInsert)\n    .select();\n\n  if (error) throw error;\n  return data || [];\n}\n\nexport async function updateBidFaq(\n  faqId: string,\n  updates: Partial<BidFaq>\n): Promise<BidFaq | null> {\n  const { data, error } = await supabase\n    .from('bid_faqs')\n    .update({\n      ...updates,\n      updated_at: new Date().toISOString(),\n    })\n    .eq('id', faqId)\n    .select()\n    .maybeSingle();\n\n  if (error) throw error;\n  return data;\n}\n\nexport async function deleteBidFaq(faqId: string): Promise<void> {\n  const { error } = await supabase\n    .from('bid_faqs')\n    .delete()\n    .eq('id', faqId);\n\n  if (error) throw error;\n}\n\nexport async function getFaqsByProject(\n  projectId: string,\n  bids: Array<{ bid: Bid }>\n): Promise<import('../types').ProjectFaqData> {\n  const overallFaqsPromise = supabase\n    .from('project_faqs')\n    .select('*')\n    .eq('project_id', projectId)\n    .order('display_order', { ascending: true });\n\n  const bidFaqsPromises = bids.map(async (bidData, index) => {\n    const faqs = await getFaqsByBid(bidData.bid.id);\n    return {\n      bid_id: bidData.bid.id,\n      bid_index: index,\n      contractor_name: bidData.bid.contractor_name || `Bid ${index + 1}`,\n      faqs,\n    };\n  });\n\n  const [overallResult, ...bidFaqResults] = await Promise.all([\n    overallFaqsPromise,\n    ...bidFaqsPromises,\n  ]);\n\n  return {\n    overall: overallResult.data || [],\n    by_bid: bidFaqResults,\n  };\n}\n","export function formatCurrency(amount: number | null | undefined): string {\n  if (amount == null) return '-';\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(amount);\n}\n\nexport function formatDate(dateString: string | null | undefined): string | null {\n  if (!dateString) return null;\n  return new Date(dateString).toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n  });\n}\n","import { useState } from 'react';\nimport { Search, FileText, Calendar, ChevronRight, AlertCircle, Loader2, Clock, CheckCircle2, Mail } from 'lucide-react';\nimport { getProjectsByNotificationEmail, getBidCountByProject } from '../lib/database/bidsmartService';\nimport type { Project } from '../lib/types';\nimport { formatDate } from '../lib/utils/formatters';\n\ninterface ReturningUserSectionProps {\n  onSelectProject: (projectId: string) => void;\n}\n\ninterface ProjectWithBidCount extends Project {\n  bidCount?: number;\n}\n\nexport function ReturningUserSection({ onSelectProject }: ReturningUserSectionProps) {\n  const [email, setEmail] = useState('');\n  const [searching, setSearching] = useState(false);\n  const [searched, setSearched] = useState(false);\n  const [projects, setProjects] = useState<ProjectWithBidCount[]>([]);\n  const [error, setError] = useState<string | null>(null);\n\n  async function handleSearch(e: React.FormEvent) {\n    e.preventDefault();\n\n    if (!email.trim()) {\n      setError('Please enter an email address');\n      return;\n    }\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email.trim())) {\n      setError('Please enter a valid email address');\n      return;\n    }\n\n    setError(null);\n    setSearching(true);\n    setSearched(false);\n\n    try {\n      const foundProjects = await getProjectsByNotificationEmail(email.trim());\n\n      const projectsWithCounts = await Promise.all(\n        foundProjects.map(async (project) => {\n          const bidCount = await getBidCountByProject(project.id);\n          return { ...project, bidCount };\n        })\n      );\n\n      setProjects(projectsWithCounts);\n      setSearched(true);\n    } catch (err) {\n      console.error('Failed to search projects:', err);\n      setError('Failed to search. Please try again.');\n    } finally {\n      setSearching(false);\n    }\n  }\n\n  function getStatusDisplay(status: string) {\n    const statusConfig: Record<string, { label: string; icon: React.ReactNode; className: string }> = {\n      draft: {\n        label: 'Draft',\n        icon: <FileText className=\"w-3.5 h-3.5\" />,\n        className: 'bg-gray-100 text-gray-600'\n      },\n      collecting_bids: {\n        label: 'Gathering Bids',\n        icon: <FileText className=\"w-3.5 h-3.5\" />,\n        className: 'bg-blue-100 text-blue-700'\n      },\n      analyzing: {\n        label: 'Processing',\n        icon: <Clock className=\"w-3.5 h-3.5 animate-pulse\" />,\n        className: 'bg-amber-100 text-amber-700'\n      },\n      comparing: {\n        label: 'Ready to View',\n        icon: <CheckCircle2 className=\"w-3.5 h-3.5\" />,\n        className: 'bg-switch-green-100 text-switch-green-700'\n      },\n      decided: {\n        label: 'Decision Made',\n        icon: <CheckCircle2 className=\"w-3.5 h-3.5\" />,\n        className: 'bg-switch-green-100 text-switch-green-700'\n      },\n      completed: {\n        label: 'Completed',\n        icon: <CheckCircle2 className=\"w-3.5 h-3.5\" />,\n        className: 'bg-gray-100 text-gray-600'\n      },\n    };\n\n    const config = statusConfig[status] || statusConfig.draft;\n    return (\n      <span className={`inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full font-medium ${config.className}`}>\n        {config.icon}\n        {config.label}\n      </span>\n    );\n  }\n\n  function isProjectReady(status: string): boolean {\n    return ['comparing', 'decided', 'completed'].includes(status);\n  }\n\n  function isProjectInProgress(status: string): boolean {\n    return ['draft', 'collecting_bids', 'analyzing'].includes(status);\n  }\n\n  return (\n    <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n      <div className=\"flex items-start gap-4 mb-4\">\n        <div className=\"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center flex-shrink-0\">\n          <Search className=\"w-5 h-5 text-blue-600\" />\n        </div>\n        <div>\n          <h2 className=\"text-lg font-semibold text-gray-900\">Review Previous Bid Comparisons</h2>\n          <p className=\"text-sm text-gray-600 mt-1\">\n            Have you compared bids before? Enter your email to pick up where you left off.\n          </p>\n        </div>\n      </div>\n\n      <form onSubmit={handleSearch} className=\"space-y-4\">\n        <div className=\"flex flex-col sm:flex-row gap-3\">\n          <div className=\"flex-1 relative\">\n            <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n            <input\n              type=\"email\"\n              value={email}\n              onChange={(e) => {\n                setEmail(e.target.value);\n                setError(null);\n                if (searched) {\n                  setSearched(false);\n                  setProjects([]);\n                }\n              }}\n              placeholder=\"you@example.com\"\n              className=\"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent text-sm\"\n              autoComplete=\"email\"\n            />\n          </div>\n          <button\n            type=\"submit\"\n            disabled={searching}\n            className=\"btn btn-secondary flex items-center justify-center gap-2 whitespace-nowrap\"\n          >\n            {searching ? (\n              <>\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n                Searching...\n              </>\n            ) : (\n              <>\n                <Search className=\"w-4 h-4\" />\n                Find My Analysis\n              </>\n            )}\n          </button>\n        </div>\n\n        {error && (\n          <p className=\"text-sm text-red-600 flex items-center gap-1\">\n            <AlertCircle className=\"w-4 h-4\" />\n            {error}\n          </p>\n        )}\n      </form>\n\n      {searched && (\n        <div className=\"mt-6 pt-6 border-t border-gray-100\">\n          {projects.length === 0 ? (\n            <div className=\"text-center py-6\">\n              <div className=\"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3\">\n                <FileText className=\"w-5 h-5 text-gray-400\" />\n              </div>\n              <p className=\"text-gray-900 font-medium mb-1\">No analyses found</p>\n              <p className=\"text-sm text-gray-600\">\n                We could not find any analyses for this email. Try a different email or start a new comparison below.\n              </p>\n            </div>\n          ) : (\n            <div>\n              <h3 className=\"text-sm font-medium text-gray-700 mb-3\">\n                Found {projects.length} {projects.length === 1 ? 'analysis' : 'analyses'}\n              </h3>\n              <div className=\"space-y-2\">\n                {projects.map((project) => (\n                  <button\n                    key={project.id}\n                    onClick={() => onSelectProject(project.id)}\n                    className=\"w-full bg-gray-50 hover:bg-gray-100 rounded-lg p-3 flex items-center gap-3 transition-colors text-left group\"\n                  >\n                    <div className={`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${\n                      isProjectReady(project.status)\n                        ? 'bg-switch-green-100'\n                        : isProjectInProgress(project.status)\n                          ? 'bg-amber-100'\n                          : 'bg-gray-100'\n                    }`}>\n                      {isProjectReady(project.status) ? (\n                        <CheckCircle2 className=\"w-4 h-4 text-switch-green-600\" />\n                      ) : isProjectInProgress(project.status) ? (\n                        <Clock className=\"w-4 h-4 text-amber-600\" />\n                      ) : (\n                        <FileText className=\"w-4 h-4 text-gray-500\" />\n                      )}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center gap-2 mb-0.5\">\n                        <span className=\"font-medium text-gray-900 text-sm truncate\">\n                          {project.project_name}\n                        </span>\n                        {getStatusDisplay(project.status)}\n                      </div>\n                      <div className=\"flex items-center gap-3 text-xs text-gray-500\">\n                        <span className=\"flex items-center gap-1\">\n                          <Calendar className=\"w-3 h-3\" />\n                          {formatDate(project.created_at)}\n                        </span>\n                        {project.bidCount !== undefined && project.bidCount > 0 && (\n                          <span>{project.bidCount} {project.bidCount === 1 ? 'bid' : 'bids'}</span>\n                        )}\n                      </div>\n                    </div>\n                    <ChevronRight className=\"w-4 h-4 text-gray-400 group-hover:text-gray-600 flex-shrink-0\" />\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { Play, ChevronRight, Loader2, FileText } from 'lucide-react';\nimport { getPublicDemoProjects, getBidCountByProject } from '../lib/database/bidsmartService';\nimport type { Project } from '../lib/types';\n\ninterface TryTheToolSectionProps {\n  onSelectDemo: (projectId: string) => void;\n}\n\ninterface DemoProject extends Project {\n  bidCount?: number;\n}\n\nexport function TryTheToolSection({ onSelectDemo }: TryTheToolSectionProps) {\n  const [demos, setDemos] = useState<DemoProject[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadDemos();\n  }, []);\n\n  async function loadDemos() {\n    try {\n      const demoProjects = await getPublicDemoProjects();\n      const demosWithCounts = await Promise.all(\n        demoProjects.map(async (project) => {\n          const bidCount = await getBidCountByProject(project.id);\n          return { ...project, bidCount };\n        })\n      );\n      setDemos(demosWithCounts);\n    } catch (err) {\n      console.error('Failed to load demo projects:', err);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <div className=\"flex items-center justify-center py-8\">\n          <Loader2 className=\"w-6 h-6 text-gray-400 animate-spin\" />\n        </div>\n      </div>\n    );\n  }\n\n  if (demos.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n      <div className=\"flex items-start gap-4 mb-4\">\n        <div className=\"w-10 h-10 rounded-lg bg-teal-100 flex items-center justify-center flex-shrink-0\">\n          <Play className=\"w-5 h-5 text-teal-600\" />\n        </div>\n        <div>\n          <h2 className=\"text-lg font-semibold text-gray-900\">Don't Have Bids Ready?</h2>\n          <p className=\"text-sm text-gray-600 mt-1\">\n            View a sample analysis and give us feedback\n          </p>\n        </div>\n      </div>\n\n      <div className=\"space-y-2\">\n        {demos.map((demo) => (\n          <button\n            key={demo.id}\n            onClick={() => onSelectDemo(demo.id)}\n            className=\"w-full bg-teal-50 hover:bg-teal-100 border border-teal-200 rounded-lg p-3 flex items-center gap-3 transition-colors text-left group\"\n          >\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex items-center gap-2 mb-0.5\">\n                <h3 className=\"font-medium text-gray-900 text-sm\">{demo.project_name}</h3>\n                <span className=\"text-xs px-2 py-0.5 rounded-full font-medium bg-teal-100 text-teal-700\">\n                  Demo\n                </span>\n              </div>\n              {demo.bidCount !== undefined && demo.bidCount > 0 && (\n                <p className=\"text-xs text-gray-500 flex items-center gap-1\">\n                  <FileText className=\"w-3 h-3\" />\n                  {demo.bidCount} {demo.bidCount === 1 ? 'bid' : 'bids'} to compare\n                </p>\n              )}\n            </div>\n            <ChevronRight className=\"w-5 h-5 text-teal-400 group-hover:text-teal-600 flex-shrink-0\" />\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { Send, X, Loader2, CheckCircle2, AlertCircle } from 'lucide-react';\n\ninterface FeedbackPanelProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\ntype FeedbackType = 'liked' | 'wishlist' | 'bug' | null;\n\nexport function FeedbackPanel({ isOpen, onClose }: FeedbackPanelProps) {\n  const [feedbackType, setFeedbackType] = useState<FeedbackType>(null);\n  const [message, setMessage] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  async function handleSubmit() {\n    if (!feedbackType || !message.trim()) return;\n\n    setSubmitting(true);\n    setError(null);\n\n    try {\n      const supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\n      const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\n      if (!supabaseUrl || !supabaseAnonKey) {\n        throw new Error('Supabase configuration missing');\n      }\n\n      const response = await fetch(\n        `${supabaseUrl}/functions/v1/submit-feedback`,\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${supabaseAnonKey}`,\n          },\n          body: JSON.stringify({\n            type: feedbackType,\n            message: message.trim(),\n            url: window.location.href,\n            userAgent: navigator.userAgent,\n            timestamp: new Date().toISOString(),\n          }),\n        }\n      );\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || 'Failed to submit feedback');\n      }\n\n      setSubmitted(true);\n      setTimeout(() => {\n        setFeedbackType(null);\n        setMessage('');\n        setSubmitted(false);\n        onClose();\n      }, 2000);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to submit feedback');\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-2xl max-w-md w-full shadow-xl\">\n        <div className=\"px-6 py-4 border-b border-gray-200 flex items-center justify-between\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">Share Your Feedback</h2>\n          <button\n            onClick={onClose}\n            className=\"p-1 hover:bg-gray-100 rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5 text-gray-500\" />\n          </button>\n        </div>\n\n        <div className=\"p-6 space-y-4\">\n          {submitted ? (\n            <div className=\"text-center py-8 space-y-3\">\n              <div className=\"w-12 h-12 bg-switch-green-100 rounded-full flex items-center justify-center mx-auto\">\n                <CheckCircle2 className=\"w-6 h-6 text-switch-green-600\" />\n              </div>\n              <div>\n                <h3 className=\"font-medium text-gray-900\">Thank you!</h3>\n                <p className=\"text-sm text-gray-600 mt-1\">Your feedback helps us improve BidSmart.</p>\n              </div>\n            </div>\n          ) : (\n            <>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n                  What would you like to share?\n                </label>\n                <div className=\"grid grid-cols-3 gap-2\">\n                  {[\n                    { id: 'liked', label: ' Loved it', description: 'Something you liked' },\n                    { id: 'wishlist', label: ' Wishlist', description: 'Feature idea' },\n                    { id: 'bug', label: ' Bug report', description: 'Something broken' },\n                  ].map((option) => (\n                    <button\n                      key={option.id}\n                      onClick={() => {\n                        setFeedbackType(option.id as FeedbackType);\n                        setMessage('');\n                      }}\n                      className={`p-3 rounded-lg border-2 transition-all text-center ${\n                        feedbackType === option.id\n                          ? 'border-switch-green-500 bg-switch-green-50'\n                          : 'border-gray-200 hover:border-gray-300 bg-white'\n                      }`}\n                    >\n                      <div className=\"text-xl mb-1\">{option.label.split(' ')[0]}</div>\n                      <div className=\"text-xs font-medium text-gray-600\">{option.label.split(' ').slice(1).join(' ')}</div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {feedbackType && (\n                <>\n                  <div>\n                    <label htmlFor=\"feedback-message\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      {feedbackType === 'liked' && 'What did you like?'}\n                      {feedbackType === 'wishlist' && 'What would you like to see?'}\n                      {feedbackType === 'bug' && 'Describe the issue'}\n                    </label>\n                    <textarea\n                      id=\"feedback-message\"\n                      value={message}\n                      onChange={(e) => setMessage(e.target.value)}\n                      placeholder=\"Your feedback here...\"\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent resize-none h-24\"\n                    />\n                    <p className=\"text-xs text-gray-500 mt-1\">\n                      {message.length}/500\n                    </p>\n                  </div>\n\n                  {error && (\n                    <div className=\"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-lg\">\n                      <AlertCircle className=\"w-4 h-4 text-red-600 flex-shrink-0 mt-0.5\" />\n                      <p className=\"text-sm text-red-700\">{error}</p>\n                    </div>\n                  )}\n\n                  <div className=\"flex gap-2 pt-2\">\n                    <button\n                      onClick={() => {\n                        setFeedbackType(null);\n                        setMessage('');\n                        setError(null);\n                      }}\n                      className=\"flex-1 btn btn-secondary\"\n                    >\n                      Back\n                    </button>\n                    <button\n                      onClick={handleSubmit}\n                      disabled={!message.trim() || submitting || message.length > 500}\n                      className=\"flex-1 btn btn-primary flex items-center justify-center gap-2\"\n                    >\n                      {submitting ? (\n                        <>\n                          <Loader2 className=\"w-4 h-4 animate-spin\" />\n                          Sending...\n                        </>\n                      ) : (\n                        <>\n                          <Send className=\"w-4 h-4\" />\n                          Send Feedback\n                        </>\n                      )}\n                    </button>\n                  </div>\n                </>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { FlaskConical, X, MessageSquare } from 'lucide-react';\nimport { useState } from 'react';\nimport { FeedbackPanel } from './FeedbackPanel';\n\ninterface AlphaBannerProps {\n  dismissible?: boolean;\n  variant?: 'full' | 'compact';\n}\n\nexport function AlphaBanner({ dismissible = true, variant = 'full' }: AlphaBannerProps) {\n  const [dismissed, setDismissed] = useState(false);\n  const [showFeedback, setShowFeedback] = useState(false);\n\n  if (dismissed) return null;\n\n  if (variant === 'compact') {\n    return (\n      <div className=\"bg-blue-50 border-b border-blue-200 px-4 py-2\">\n        <div className=\"flex items-center justify-between gap-2 text-sm max-w-4xl mx-auto\">\n          <div className=\"flex items-center gap-2\">\n            <FlaskConical className=\"w-4 h-4 text-blue-600\" />\n            <span className=\"text-blue-800\">\n              <span className=\"font-medium\">Early Access</span> - Actively improving based on your feedback\n            </span>\n          </div>\n          <div className=\"flex items-center gap-1\">\n            <button\n              onClick={() => setShowFeedback(true)}\n              className=\"px-2 py-0.5 text-xs font-medium text-blue-700 hover:bg-blue-100 rounded transition-colors\"\n            >\n              Feedback\n            </button>\n            {dismissible && (\n              <button\n                onClick={() => setDismissed(true)}\n                className=\"p-0.5 hover:bg-blue-100 rounded\"\n              >\n                <X className=\"w-3.5 h-3.5 text-blue-600\" />\n              </button>\n            )}\n          </div>\n        </div>\n        <FeedbackPanel isOpen={showFeedback} onClose={() => setShowFeedback(false)} />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-gradient-to-r from-blue-50 to-cyan-50 border-b border-blue-200\">\n      <div className=\"max-w-4xl mx-auto px-4 py-3\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\n            <FlaskConical className=\"w-4 h-4 text-blue-600\" />\n          </div>\n          <div className=\"flex-1 min-w-0 flex items-center gap-3 flex-wrap\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-blue-200 text-blue-800\">\n                EARLY ACCESS\n              </span>\n              <h3 className=\"text-sm font-semibold text-blue-900\">\n                Help Shape the Future of BidSmart\n              </h3>\n            </div>\n            <button\n              onClick={() => setShowFeedback(true)}\n              className=\"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              <MessageSquare className=\"w-4 h-4\" />\n              Share Feedback\n            </button>\n          </div>\n          {dismissible && (\n            <button\n              onClick={() => setDismissed(true)}\n              className=\"flex-shrink-0 p-1 hover:bg-blue-100 rounded\"\n            >\n              <X className=\"w-4 h-4 text-blue-600\" />\n            </button>\n          )}\n        </div>\n      </div>\n      <FeedbackPanel isOpen={showFeedback} onClose={() => setShowFeedback(false)} />\n    </div>\n  );\n}\n\nexport function AlphaInlineBanner({ message }: { message?: string }) {\n  return (\n    <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-3 flex items-start gap-2\">\n      <FlaskConical className=\"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5\" />\n      <p className=\"text-sm text-amber-800\">\n        {message || 'This feature is in alpha testing and may not work perfectly yet.'}\n      </p>\n    </div>\n  );\n}\n","/**\n * Zip prefix  US state code mapping.\n * Covers all US zip code ranges using 3-digit prefixes.\n * Used as fallback when property_state is not available.\n */\n\nconst ZIP_PREFIX_TO_STATE: Record<string, string> = {\n  // Connecticut\n  '060': 'CT', '061': 'CT', '062': 'CT', '063': 'CT', '064': 'CT', '065': 'CT', '066': 'CT', '067': 'CT', '068': 'CT', '069': 'CT',\n  // Massachusetts\n  '010': 'MA', '011': 'MA', '012': 'MA', '013': 'MA', '014': 'MA', '015': 'MA', '016': 'MA', '017': 'MA', '018': 'MA', '019': 'MA',\n  '020': 'MA', '021': 'MA', '022': 'MA', '023': 'MA', '024': 'MA', '025': 'MA', '026': 'MA', '027': 'MA',\n  // Rhode Island\n  '028': 'RI', '029': 'RI',\n  // New Hampshire\n  '030': 'NH', '031': 'NH', '032': 'NH', '033': 'NH', '034': 'NH', '035': 'NH', '036': 'NH', '037': 'NH', '038': 'NH',\n  // Maine\n  '039': 'ME', '040': 'ME', '041': 'ME', '042': 'ME', '043': 'ME', '044': 'ME', '045': 'ME', '046': 'ME', '047': 'ME', '048': 'ME', '049': 'ME',\n  // Vermont\n  '050': 'VT', '051': 'VT', '052': 'VT', '053': 'VT', '054': 'VT', '056': 'VT', '057': 'VT', '058': 'VT', '059': 'VT',\n  // New Jersey\n  '070': 'NJ', '071': 'NJ', '072': 'NJ', '073': 'NJ', '074': 'NJ', '075': 'NJ', '076': 'NJ', '077': 'NJ', '078': 'NJ', '079': 'NJ',\n  '080': 'NJ', '081': 'NJ', '082': 'NJ', '083': 'NJ', '084': 'NJ', '085': 'NJ', '086': 'NJ', '087': 'NJ', '088': 'NJ', '089': 'NJ',\n  // New York\n  '005': 'NY', '100': 'NY', '101': 'NY', '102': 'NY', '103': 'NY', '104': 'NY', '105': 'NY', '106': 'NY', '107': 'NY', '108': 'NY', '109': 'NY',\n  '110': 'NY', '111': 'NY', '112': 'NY', '113': 'NY', '114': 'NY', '115': 'NY', '116': 'NY', '117': 'NY', '118': 'NY', '119': 'NY',\n  '120': 'NY', '121': 'NY', '122': 'NY', '123': 'NY', '124': 'NY', '125': 'NY', '126': 'NY', '127': 'NY', '128': 'NY', '129': 'NY',\n  '130': 'NY', '131': 'NY', '132': 'NY', '133': 'NY', '134': 'NY', '135': 'NY', '136': 'NY', '137': 'NY', '138': 'NY', '139': 'NY',\n  '140': 'NY', '141': 'NY', '142': 'NY', '143': 'NY', '144': 'NY', '145': 'NY', '146': 'NY', '147': 'NY', '148': 'NY', '149': 'NY',\n  // Pennsylvania\n  '150': 'PA', '151': 'PA', '152': 'PA', '153': 'PA', '154': 'PA', '155': 'PA', '156': 'PA', '157': 'PA', '158': 'PA', '159': 'PA',\n  '160': 'PA', '161': 'PA', '162': 'PA', '163': 'PA', '164': 'PA', '165': 'PA', '166': 'PA', '167': 'PA', '168': 'PA', '169': 'PA',\n  '170': 'PA', '171': 'PA', '172': 'PA', '173': 'PA', '174': 'PA', '175': 'PA', '176': 'PA', '177': 'PA', '178': 'PA', '179': 'PA',\n  '180': 'PA', '181': 'PA', '182': 'PA', '183': 'PA', '184': 'PA', '185': 'PA', '186': 'PA', '187': 'PA', '188': 'PA', '189': 'PA',\n  '190': 'PA', '191': 'PA', '192': 'PA', '193': 'PA', '194': 'PA', '195': 'PA', '196': 'PA',\n  // Delaware\n  '197': 'DE', '198': 'DE', '199': 'DE',\n  // DC\n  '200': 'DC', '202': 'DC', '203': 'DC', '204': 'DC', '205': 'DC',\n  // Maryland\n  '206': 'MD', '207': 'MD', '208': 'MD', '209': 'MD', '210': 'MD', '211': 'MD', '212': 'MD', '214': 'MD', '215': 'MD', '216': 'MD', '217': 'MD', '218': 'MD', '219': 'MD',\n  // Virginia\n  '201': 'VA', '220': 'VA', '221': 'VA', '222': 'VA', '223': 'VA', '224': 'VA', '225': 'VA', '226': 'VA', '227': 'VA', '228': 'VA', '229': 'VA',\n  '230': 'VA', '231': 'VA', '232': 'VA', '233': 'VA', '234': 'VA', '235': 'VA', '236': 'VA', '237': 'VA', '238': 'VA', '239': 'VA',\n  '240': 'VA', '241': 'VA', '242': 'VA', '243': 'VA', '244': 'VA', '245': 'VA', '246': 'VA',\n  // West Virginia\n  '247': 'WV', '248': 'WV', '249': 'WV', '250': 'WV', '251': 'WV', '252': 'WV', '253': 'WV', '254': 'WV', '255': 'WV', '256': 'WV', '257': 'WV', '258': 'WV', '259': 'WV',\n  '260': 'WV', '261': 'WV', '262': 'WV', '263': 'WV', '264': 'WV', '265': 'WV', '266': 'WV', '267': 'WV', '268': 'WV',\n  // North Carolina\n  '270': 'NC', '271': 'NC', '272': 'NC', '273': 'NC', '274': 'NC', '275': 'NC', '276': 'NC', '277': 'NC', '278': 'NC', '279': 'NC',\n  '280': 'NC', '281': 'NC', '282': 'NC', '283': 'NC', '284': 'NC', '285': 'NC', '286': 'NC', '287': 'NC', '288': 'NC', '289': 'NC',\n  // South Carolina\n  '290': 'SC', '291': 'SC', '292': 'SC', '293': 'SC', '294': 'SC', '295': 'SC', '296': 'SC', '297': 'SC', '298': 'SC', '299': 'SC',\n  // Georgia\n  '300': 'GA', '301': 'GA', '302': 'GA', '303': 'GA', '304': 'GA', '305': 'GA', '306': 'GA', '307': 'GA', '308': 'GA', '309': 'GA',\n  '310': 'GA', '311': 'GA', '312': 'GA', '313': 'GA', '314': 'GA', '315': 'GA', '316': 'GA', '317': 'GA', '318': 'GA', '319': 'GA',\n  // Florida\n  '320': 'FL', '321': 'FL', '322': 'FL', '323': 'FL', '324': 'FL', '325': 'FL', '326': 'FL', '327': 'FL', '328': 'FL', '329': 'FL',\n  '330': 'FL', '331': 'FL', '332': 'FL', '333': 'FL', '334': 'FL', '335': 'FL', '336': 'FL', '337': 'FL', '338': 'FL', '339': 'FL',\n  '340': 'FL', '341': 'FL', '342': 'FL', '344': 'FL', '346': 'FL', '347': 'FL', '349': 'FL',\n  // Alabama\n  '350': 'AL', '351': 'AL', '352': 'AL', '354': 'AL', '355': 'AL', '356': 'AL', '357': 'AL', '358': 'AL', '359': 'AL',\n  '360': 'AL', '361': 'AL', '362': 'AL', '363': 'AL', '364': 'AL', '365': 'AL', '366': 'AL', '367': 'AL', '368': 'AL', '369': 'AL',\n  // Tennessee\n  '370': 'TN', '371': 'TN', '372': 'TN', '373': 'TN', '374': 'TN', '375': 'TN', '376': 'TN', '377': 'TN', '378': 'TN', '379': 'TN',\n  '380': 'TN', '381': 'TN', '382': 'TN', '383': 'TN', '384': 'TN', '385': 'TN',\n  // Mississippi\n  '386': 'MS', '387': 'MS', '388': 'MS', '389': 'MS', '390': 'MS', '391': 'MS', '392': 'MS', '393': 'MS', '394': 'MS', '395': 'MS', '396': 'MS', '397': 'MS',\n  // Kentucky\n  '400': 'KY', '401': 'KY', '402': 'KY', '403': 'KY', '404': 'KY', '405': 'KY', '406': 'KY', '407': 'KY', '408': 'KY', '409': 'KY',\n  '410': 'KY', '411': 'KY', '412': 'KY', '413': 'KY', '414': 'KY', '415': 'KY', '416': 'KY', '417': 'KY', '418': 'KY',\n  // Ohio\n  '430': 'OH', '431': 'OH', '432': 'OH', '433': 'OH', '434': 'OH', '435': 'OH', '436': 'OH', '437': 'OH', '438': 'OH', '439': 'OH',\n  '440': 'OH', '441': 'OH', '442': 'OH', '443': 'OH', '444': 'OH', '445': 'OH', '446': 'OH', '447': 'OH', '448': 'OH', '449': 'OH',\n  '450': 'OH', '451': 'OH', '452': 'OH', '453': 'OH', '454': 'OH', '455': 'OH', '456': 'OH', '457': 'OH', '458': 'OH',\n  // Indiana\n  '460': 'IN', '461': 'IN', '462': 'IN', '463': 'IN', '464': 'IN', '465': 'IN', '466': 'IN', '467': 'IN', '468': 'IN', '469': 'IN',\n  '470': 'IN', '471': 'IN', '472': 'IN', '473': 'IN', '474': 'IN', '475': 'IN', '476': 'IN', '477': 'IN', '478': 'IN', '479': 'IN',\n  // Michigan\n  '480': 'MI', '481': 'MI', '482': 'MI', '483': 'MI', '484': 'MI', '485': 'MI', '486': 'MI', '487': 'MI', '488': 'MI', '489': 'MI',\n  '490': 'MI', '491': 'MI', '492': 'MI', '493': 'MI', '494': 'MI', '495': 'MI', '496': 'MI', '497': 'MI', '498': 'MI', '499': 'MI',\n  // Iowa\n  '500': 'IA', '501': 'IA', '502': 'IA', '503': 'IA', '504': 'IA', '505': 'IA', '506': 'IA', '507': 'IA', '508': 'IA', '509': 'IA',\n  '510': 'IA', '511': 'IA', '512': 'IA', '513': 'IA', '514': 'IA', '515': 'IA', '516': 'IA', '520': 'IA', '521': 'IA', '522': 'IA',\n  '523': 'IA', '524': 'IA', '525': 'IA', '526': 'IA', '527': 'IA', '528': 'IA',\n  // Wisconsin\n  '530': 'WI', '531': 'WI', '532': 'WI', '534': 'WI', '535': 'WI', '537': 'WI', '538': 'WI', '539': 'WI',\n  '540': 'WI', '541': 'WI', '542': 'WI', '543': 'WI', '544': 'WI', '545': 'WI', '546': 'WI', '547': 'WI', '548': 'WI', '549': 'WI',\n  // Minnesota\n  '550': 'MN', '551': 'MN', '553': 'MN', '554': 'MN', '555': 'MN', '556': 'MN', '557': 'MN', '558': 'MN', '559': 'MN',\n  '560': 'MN', '561': 'MN', '562': 'MN', '563': 'MN', '564': 'MN', '565': 'MN', '566': 'MN', '567': 'MN',\n  // South Dakota\n  '570': 'SD', '571': 'SD', '572': 'SD', '573': 'SD', '574': 'SD', '575': 'SD', '576': 'SD', '577': 'SD',\n  // North Dakota\n  '580': 'ND', '581': 'ND', '582': 'ND', '583': 'ND', '584': 'ND', '585': 'ND', '586': 'ND', '587': 'ND', '588': 'ND',\n  // Montana\n  '590': 'MT', '591': 'MT', '592': 'MT', '593': 'MT', '594': 'MT', '595': 'MT', '596': 'MT', '597': 'MT', '598': 'MT', '599': 'MT',\n  // Illinois\n  '600': 'IL', '601': 'IL', '602': 'IL', '603': 'IL', '604': 'IL', '605': 'IL', '606': 'IL', '607': 'IL', '608': 'IL', '609': 'IL',\n  '610': 'IL', '611': 'IL', '612': 'IL', '613': 'IL', '614': 'IL', '615': 'IL', '616': 'IL', '617': 'IL', '618': 'IL', '619': 'IL',\n  '620': 'IL', '622': 'IL', '623': 'IL', '624': 'IL', '625': 'IL', '626': 'IL', '627': 'IL', '628': 'IL', '629': 'IL',\n  // Missouri\n  '630': 'MO', '631': 'MO', '633': 'MO', '634': 'MO', '635': 'MO', '636': 'MO', '637': 'MO', '638': 'MO', '639': 'MO',\n  '640': 'MO', '641': 'MO', '644': 'MO', '645': 'MO', '646': 'MO', '647': 'MO', '648': 'MO', '649': 'MO',\n  '650': 'MO', '651': 'MO', '652': 'MO', '653': 'MO', '654': 'MO', '655': 'MO', '656': 'MO', '657': 'MO', '658': 'MO',\n  // Kansas\n  '660': 'KS', '661': 'KS', '662': 'KS', '664': 'KS', '665': 'KS', '666': 'KS', '667': 'KS', '668': 'KS', '669': 'KS',\n  '670': 'KS', '671': 'KS', '672': 'KS', '673': 'KS', '674': 'KS', '675': 'KS', '676': 'KS', '677': 'KS', '678': 'KS', '679': 'KS',\n  // Nebraska\n  '680': 'NE', '681': 'NE', '683': 'NE', '684': 'NE', '685': 'NE', '686': 'NE', '687': 'NE', '688': 'NE', '689': 'NE',\n  '690': 'NE', '691': 'NE', '692': 'NE', '693': 'NE',\n  // Louisiana\n  '700': 'LA', '701': 'LA', '703': 'LA', '704': 'LA', '705': 'LA', '706': 'LA', '707': 'LA', '708': 'LA',\n  '710': 'LA', '711': 'LA', '712': 'LA', '713': 'LA', '714': 'LA',\n  // Arkansas\n  '716': 'AR', '717': 'AR', '718': 'AR', '719': 'AR', '720': 'AR', '721': 'AR', '722': 'AR', '723': 'AR', '724': 'AR', '725': 'AR', '726': 'AR', '727': 'AR', '728': 'AR', '729': 'AR',\n  // Oklahoma\n  '730': 'OK', '731': 'OK', '734': 'OK', '735': 'OK', '736': 'OK', '737': 'OK', '738': 'OK', '739': 'OK',\n  '740': 'OK', '741': 'OK', '743': 'OK', '744': 'OK', '745': 'OK', '746': 'OK', '747': 'OK', '748': 'OK', '749': 'OK',\n  // Texas\n  '750': 'TX', '751': 'TX', '752': 'TX', '753': 'TX', '754': 'TX', '755': 'TX', '756': 'TX', '757': 'TX', '758': 'TX', '759': 'TX',\n  '760': 'TX', '761': 'TX', '762': 'TX', '763': 'TX', '764': 'TX', '765': 'TX', '766': 'TX', '767': 'TX', '768': 'TX', '769': 'TX',\n  '770': 'TX', '771': 'TX', '772': 'TX', '773': 'TX', '774': 'TX', '775': 'TX', '776': 'TX', '777': 'TX', '778': 'TX', '779': 'TX',\n  '780': 'TX', '781': 'TX', '782': 'TX', '783': 'TX', '784': 'TX', '785': 'TX', '786': 'TX', '787': 'TX', '788': 'TX', '789': 'TX',\n  '790': 'TX', '791': 'TX', '792': 'TX', '793': 'TX', '794': 'TX', '795': 'TX', '796': 'TX', '797': 'TX', '798': 'TX', '799': 'TX',\n  // Colorado\n  '800': 'CO', '801': 'CO', '802': 'CO', '803': 'CO', '804': 'CO', '805': 'CO', '806': 'CO', '807': 'CO', '808': 'CO', '809': 'CO',\n  '810': 'CO', '811': 'CO', '812': 'CO', '813': 'CO', '814': 'CO', '815': 'CO', '816': 'CO',\n  // Wyoming\n  '820': 'WY', '821': 'WY', '822': 'WY', '823': 'WY', '824': 'WY', '825': 'WY', '826': 'WY', '827': 'WY', '828': 'WY', '829': 'WY', '831': 'WY',\n  // Idaho\n  '832': 'ID', '833': 'ID', '834': 'ID', '835': 'ID', '836': 'ID', '837': 'ID', '838': 'ID',\n  // Utah\n  '840': 'UT', '841': 'UT', '842': 'UT', '843': 'UT', '844': 'UT', '845': 'UT', '846': 'UT', '847': 'UT',\n  // Arizona\n  '850': 'AZ', '851': 'AZ', '852': 'AZ', '853': 'AZ', '855': 'AZ', '856': 'AZ', '857': 'AZ', '859': 'AZ', '860': 'AZ', '863': 'AZ', '864': 'AZ', '865': 'AZ',\n  // New Mexico\n  '870': 'NM', '871': 'NM', '872': 'NM', '873': 'NM', '874': 'NM', '875': 'NM', '877': 'NM', '878': 'NM', '879': 'NM',\n  '880': 'NM', '881': 'NM', '882': 'NM', '883': 'NM', '884': 'NM',\n  // Nevada\n  '889': 'NV', '890': 'NV', '891': 'NV', '893': 'NV', '894': 'NV', '895': 'NV', '897': 'NV', '898': 'NV',\n  // California\n  '900': 'CA', '901': 'CA', '902': 'CA', '903': 'CA', '904': 'CA', '905': 'CA', '906': 'CA', '907': 'CA', '908': 'CA', '910': 'CA',\n  '911': 'CA', '912': 'CA', '913': 'CA', '914': 'CA', '915': 'CA', '916': 'CA', '917': 'CA', '918': 'CA', '919': 'CA',\n  '920': 'CA', '921': 'CA', '922': 'CA', '923': 'CA', '924': 'CA', '925': 'CA', '926': 'CA', '927': 'CA', '928': 'CA',\n  '930': 'CA', '931': 'CA', '932': 'CA', '933': 'CA', '934': 'CA', '935': 'CA', '936': 'CA', '937': 'CA', '938': 'CA', '939': 'CA',\n  '940': 'CA', '941': 'CA', '942': 'CA', '943': 'CA', '944': 'CA', '945': 'CA', '946': 'CA', '947': 'CA', '948': 'CA', '949': 'CA',\n  '950': 'CA', '951': 'CA', '952': 'CA', '953': 'CA', '954': 'CA', '955': 'CA', '956': 'CA', '957': 'CA', '958': 'CA', '959': 'CA',\n  '960': 'CA', '961': 'CA',\n  // Hawaii\n  '967': 'HI', '968': 'HI',\n  // Oregon\n  '970': 'OR', '971': 'OR', '972': 'OR', '973': 'OR', '974': 'OR', '975': 'OR', '976': 'OR', '977': 'OR', '978': 'OR', '979': 'OR',\n  // Washington\n  '980': 'WA', '981': 'WA', '982': 'WA', '983': 'WA', '984': 'WA', '985': 'WA', '986': 'WA', '988': 'WA', '989': 'WA',\n  '990': 'WA', '991': 'WA', '992': 'WA', '993': 'WA', '994': 'WA',\n  // Alaska\n  '995': 'AK', '996': 'AK', '997': 'AK', '998': 'AK', '999': 'AK',\n  // APO/FPO Military\n  '090': 'AE', '091': 'AE', '092': 'AE', '093': 'AE', '094': 'AE', '095': 'AE', '096': 'AE', '097': 'AE', '098': 'AE',\n  '962': 'AP', '963': 'AP', '964': 'AP', '965': 'AP', '966': 'AP',\n  // Territories\n  '006': 'PR', '007': 'PR', '009': 'PR', // Puerto Rico\n  '008': 'VI', // US Virgin Islands (008 shared with PR)\n};\n\n/**\n * Derive US state code from a 5-digit zip code using prefix mapping.\n * Returns 2-letter state code or null if not found.\n */\nexport function zipToState(zip: string): string | null {\n  if (!zip || zip.length < 3) return null;\n  const prefix = zip.substring(0, 3);\n  return ZIP_PREFIX_TO_STATE[prefix] || null;\n}\n","import { useState, useEffect, useCallback } from 'react';\nimport {\n  DollarSign,\n  ChevronDown,\n  ChevronRight,\n  ExternalLink,\n  Info,\n  MapPin,\n  Search,\n  Loader2,\n  Clock,\n  Shield,\n  Calendar,\n  AlertTriangle,\n} from 'lucide-react';\nimport type { IncentiveProgramDB } from '../lib/types';\nimport { getIncentivesByZip } from '../lib/database/bidsmartService';\nimport { formatCurrency, formatDate } from '../lib/utils/formatters';\nimport { zipToState } from '../lib/utils/zipToState';\n\ninterface IncentivesPanelProps {\n  userZip: string | null;\n  userState: string | null;\n}\n\nfunction getDisplayAmount(incentive: IncentiveProgramDB): string {\n  if (incentive.rebate_percentage && incentive.max_rebate) {\n    return `${incentive.rebate_percentage}% (up to ${formatCurrency(incentive.max_rebate)})`;\n  }\n  if (incentive.rebate_amount && incentive.max_rebate && incentive.rebate_amount !== incentive.max_rebate) {\n    return `${formatCurrency(incentive.rebate_amount)}  ${formatCurrency(incentive.max_rebate)}`;\n  }\n  if (incentive.max_rebate) {\n    return `Up to ${formatCurrency(incentive.max_rebate)}`;\n  }\n  if (incentive.rebate_amount) {\n    return formatCurrency(incentive.rebate_amount);\n  }\n  if (incentive.rebate_percentage) {\n    return `${incentive.rebate_percentage}%`;\n  }\n  return 'Amount varies';\n}\n\nfunction getStatusBadge(incentive: IncentiveProgramDB): { label: string; className: string } | null {\n  if (!incentive.is_active) {\n    return { label: 'Inactive', className: 'bg-red-100 text-red-700' };\n  }\n  if (incentive.valid_until) {\n    const until = new Date(incentive.valid_until);\n    const now = new Date();\n    const daysLeft = Math.ceil((until.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\n    if (daysLeft < 0) {\n      return { label: 'Expired', className: 'bg-red-100 text-red-700' };\n    }\n    if (daysLeft <= 90) {\n      return { label: 'Ending Soon', className: 'bg-amber-100 text-amber-700' };\n    }\n  }\n  return null;\n}\n\nfunction formatRequirements(requirements: Record<string, any>): { label: string; value: string }[] {\n  const items: { label: string; value: string }[] = [];\n  if (requirements.min_seer2) items.push({ label: 'Min SEER2', value: String(requirements.min_seer2) });\n  if (requirements.min_hspf2) items.push({ label: 'Min HSPF2', value: String(requirements.min_hspf2) });\n  if (requirements.energy_star_required) items.push({ label: 'ENERGY STAR', value: 'Required' });\n  if (requirements.energy_star_most_efficient) items.push({ label: 'ENERGY STAR Most Efficient', value: 'Required' });\n  if (requirements.equipment_types) {\n    items.push({ label: 'Equipment', value: (requirements.equipment_types as string[]).join(', ').replace(/_/g, ' ') });\n  }\n  if (requirements.income_qualified) items.push({ label: 'Income Qualified', value: 'Yes' });\n  if (requirements.income_threshold_pct_ami) items.push({ label: 'Income Threshold', value: ` ${requirements.income_threshold_pct_ami}% AMI` });\n  // Show any remaining keys we didn't explicitly handle\n  for (const [key, val] of Object.entries(requirements)) {\n    if (!['min_seer2', 'min_hspf2', 'energy_star_required', 'energy_star_most_efficient', 'equipment_types', 'income_qualified', 'income_threshold_pct_ami'].includes(key)) {\n      items.push({ label: key.replace(/_/g, ' '), value: String(val) });\n    }\n  }\n  return items;\n}\n\nexport function IncentivesPanel({ userZip, userState }: IncentivesPanelProps) {\n  const [zipInput, setZipInput] = useState(userZip || '');\n  const [activeZip, setActiveZip] = useState<string | null>(null);\n  const [isEditing, setIsEditing] = useState(!userZip);\n  const [incentives, setIncentives] = useState<IncentiveProgramDB[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [zipError, setZipError] = useState<string | null>(null);\n  const [expandedRows, setExpandedRows] = useState<Set<string>>(new Set());\n\n  // Simple session cache\n  const [cache] = useState<Map<string, IncentiveProgramDB[]>>(() => new Map());\n\n  const loadIncentives = useCallback(async (zip: string, state?: string) => {\n    const cacheKey = `${zip}_${state || ''}`;\n    if (cache.has(cacheKey)) {\n      setIncentives(cache.get(cacheKey)!);\n      setActiveZip(zip);\n      setIsEditing(false);\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n    try {\n      const results = await getIncentivesByZip(zip, state);\n      setIncentives(results);\n      setActiveZip(zip);\n      setIsEditing(false);\n      cache.set(cacheKey, results);\n    } catch (err) {\n      console.error('Error loading incentives:', err);\n      setError('Failed to load incentives. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  }, [cache]);\n\n  // Auto-load if user has a valid zip\n  useEffect(() => {\n    if (userZip && /^\\d{5}$/.test(userZip)) {\n      const state = userState || zipToState(userZip) || undefined;\n      loadIncentives(userZip, state);\n    }\n  }, [userZip, userState, loadIncentives]);\n\n  const handleSubmitZip = () => {\n    if (!/^\\d{5}$/.test(zipInput)) {\n      setZipError('Enter a valid 5-digit US zip code');\n      return;\n    }\n    setZipError(null);\n    const state = userState || zipToState(zipInput) || undefined;\n    loadIncentives(zipInput, state);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      handleSubmitZip();\n    }\n  };\n\n  const toggleExpand = (id: string) => {\n    setExpandedRows(prev => {\n      const next = new Set(prev);\n      if (next.has(id)) {\n        next.delete(id);\n      } else {\n        next.add(id);\n      }\n      return next;\n    });\n  };\n\n  const totalPotentialSavings = incentives.reduce((sum, inc) => {\n    return sum + (Number(inc.max_rebate) || Number(inc.rebate_amount) || 0);\n  }, 0);\n\n  // --- Zip input bar ---\n  const renderZipBar = () => (\n    <div className=\"bg-white rounded-xl border-2 border-gray-200 p-4\">\n      <div className=\"flex items-center gap-3\">\n        <div className=\"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0\">\n          <MapPin className=\"w-5 h-5 text-gray-500\" />\n        </div>\n        {isEditing || !activeZip ? (\n          <div className=\"flex-1\">\n            <p className=\"text-sm font-medium text-gray-700 mb-2\">Enter your zip code to find available incentives</p>\n            <div className=\"flex items-center gap-2\">\n              <input\n                type=\"text\"\n                value={zipInput}\n                onChange={(e) => {\n                  setZipInput(e.target.value.replace(/\\D/g, '').slice(0, 5));\n                  setZipError(null);\n                }}\n                onKeyDown={handleKeyDown}\n                placeholder=\"e.g. 90210\"\n                className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm w-32 focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent\"\n                maxLength={5}\n              />\n              <button\n                onClick={handleSubmitZip}\n                disabled={loading}\n                className=\"btn btn-primary flex items-center gap-2 text-sm px-4 py-2\"\n              >\n                <Search className=\"w-4 h-4\" />\n                Search\n              </button>\n            </div>\n            {zipError && (\n              <p className=\"text-xs text-red-600 mt-1\">{zipError}</p>\n            )}\n          </div>\n        ) : (\n          <div className=\"flex-1 flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-500\">Showing incentives for</p>\n              <p className=\"font-semibold text-gray-900\">{activeZip}</p>\n            </div>\n            <button\n              onClick={() => setIsEditing(true)}\n              className=\"text-sm text-switch-green-600 hover:text-switch-green-700 font-medium\"\n            >\n              Change\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  // --- Loading ---\n  if (loading) {\n    return (\n      <div className=\"space-y-4\">\n        {renderZipBar()}\n        <div className=\"flex items-center justify-center py-12\">\n          <div className=\"text-center\">\n            <Loader2 className=\"w-10 h-10 text-switch-green-600 animate-spin mx-auto mb-4\" />\n            <p className=\"text-gray-500\">Loading incentives...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // --- Error ---\n  if (error) {\n    return (\n      <div className=\"space-y-4\">\n        {renderZipBar()}\n        <div className=\"bg-red-50 border border-red-200 rounded-xl p-6 text-center\">\n          <AlertTriangle className=\"w-8 h-8 text-red-400 mx-auto mb-3\" />\n          <p className=\"text-red-700 mb-3\">{error}</p>\n          <button\n            onClick={() => activeZip && loadIncentives(activeZip, userState || zipToState(activeZip) || undefined)}\n            className=\"text-sm text-red-600 hover:text-red-700 font-medium\"\n          >\n            Try again\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // --- No zip entered yet ---\n  if (!activeZip) {\n    return (\n      <div className=\"space-y-4\">\n        {renderZipBar()}\n        <div className=\"bg-white rounded-xl border-2 border-gray-200 p-12 text-center\">\n          <DollarSign className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Find Available Incentives</h3>\n          <p className=\"text-gray-600\">Enter your zip code above to see federal, state, and utility incentives for heat pump installations in your area.</p>\n        </div>\n      </div>\n    );\n  }\n\n  // --- Empty results ---\n  if (incentives.length === 0) {\n    return (\n      <div className=\"space-y-4\">\n        {renderZipBar()}\n        <div className=\"bg-white rounded-xl border-2 border-gray-200 p-12 text-center\">\n          <DollarSign className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Incentives Found</h3>\n          <p className=\"text-gray-600\">\n            No incentive programs were found for zip code {activeZip}. Check with your local utility company or visit{' '}\n            <a href=\"https://www.dsireusa.org/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-switch-green-600 hover:text-switch-green-700 font-medium\">\n              DSIRE\n            </a>{' '}\n            for a comprehensive database.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  // --- Results ---\n  return (\n    <div className=\"space-y-4\">\n      {renderZipBar()}\n\n      <div className=\"bg-white rounded-xl border-2 border-gray-200 shadow-lg overflow-hidden\">\n        <div className=\"bg-gradient-to-r from-switch-green-600 to-switch-green-700 px-5 py-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center\">\n              <DollarSign className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <h3 className=\"font-semibold text-white text-lg\">Available Rebates & Incentives</h3>\n              <p className=\"text-switch-green-100 text-sm\">\n                {incentives.length} program{incentives.length !== 1 ? 's' : ''} found for your area\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"divide-y divide-gray-200\">\n          {incentives.map((incentive) => {\n            const isExpanded = expandedRows.has(incentive.id);\n            const statusBadge = getStatusBadge(incentive);\n\n            return (\n              <div key={incentive.id}>\n                <button\n                  onClick={() => toggleExpand(incentive.id)}\n                  className=\"w-full flex items-center gap-3 px-5 py-4 text-left hover:bg-gray-50 transition-colors\"\n                >\n                  <div className=\"p-1\">\n                    {isExpanded ? (\n                      <ChevronDown className=\"w-5 h-5 text-gray-500\" />\n                    ) : (\n                      <ChevronRight className=\"w-5 h-5 text-gray-500\" />\n                    )}\n                  </div>\n\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2 flex-wrap\">\n                      <h4 className=\"font-semibold text-gray-900\">{incentive.program_name}</h4>\n                      {(incentive.program_type_display || incentive.program_type) && (\n                        <span className=\"text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full capitalize\">\n                          {(incentive.program_type_display || incentive.program_type || '').replace(/_/g, ' ')}\n                        </span>\n                      )}\n                      {incentive.income_qualified && (\n                        <span className=\"text-xs px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full\">\n                          Income Qualified\n                        </span>\n                      )}\n                      {statusBadge && (\n                        <span className={`text-xs px-2 py-0.5 rounded-full ${statusBadge.className}`}>\n                          {statusBadge.label}\n                        </span>\n                      )}\n                      {incentive.stackable && (\n                        <span className=\"text-xs px-2 py-0.5 bg-blue-50 text-blue-700 rounded-full\">\n                          Stackable\n                        </span>\n                      )}\n                    </div>\n                    {!isExpanded && incentive.description && (\n                      <p className=\"text-sm text-gray-500 mt-0.5 truncate\">{incentive.description}</p>\n                    )}\n                  </div>\n\n                  <div className=\"text-right flex-shrink-0\">\n                    <span className=\"text-lg font-bold text-switch-green-700\">\n                      {getDisplayAmount(incentive)}\n                    </span>\n                  </div>\n                </button>\n\n                {isExpanded && (\n                  <div className=\"px-5 pb-5 pl-14 space-y-4\">\n                    {incentive.description && (\n                      <div>\n                        <p className=\"text-sm text-gray-700\">{incentive.description}</p>\n                      </div>\n                    )}\n\n                    {/* Requirements */}\n                    {incentive.requirements && Object.keys(incentive.requirements).length > 0 && (\n                      <div>\n                        <span className=\"text-xs font-medium text-gray-500 uppercase\">Equipment Requirements</span>\n                        <div className=\"mt-1 grid grid-cols-2 gap-x-4 gap-y-1\">\n                          {formatRequirements(incentive.requirements).map((req, i) => (\n                            <div key={i} className=\"text-sm\">\n                              <span className=\"text-gray-500\">{req.label}:</span>{' '}\n                              <span className=\"text-gray-900 font-medium capitalize\">{req.value}</span>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n\n                    {/* Income Limits */}\n                    {incentive.income_qualified && incentive.income_limits && (\n                      <div className=\"flex items-start gap-2 bg-amber-50 rounded-lg p-3\">\n                        <Info className=\"w-4 h-4 text-amber-600 mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <span className=\"text-xs font-medium text-amber-800 uppercase\">Income Limits</span>\n                          <div className=\"text-sm text-amber-900 mt-1\">\n                            {typeof incentive.income_limits === 'object' ? (\n                              Object.entries(incentive.income_limits).map(([key, val]) => (\n                                <div key={key}>\n                                  <span className=\"capitalize\">{key.replace(/_/g, ' ')}:</span> {String(val)}\n                                </div>\n                              ))\n                            ) : (\n                              String(incentive.income_limits)\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    )}\n\n                    {/* Validity Dates */}\n                    {(incentive.valid_from || incentive.valid_until) && (\n                      <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                        <Calendar className=\"w-4 h-4 text-gray-400 flex-shrink-0\" />\n                        {incentive.valid_from && <span>From {formatDate(incentive.valid_from)}</span>}\n                        {incentive.valid_from && incentive.valid_until && <span></span>}\n                        {incentive.valid_until && <span>Until {formatDate(incentive.valid_until)}</span>}\n                      </div>\n                    )}\n\n                    {/* How to Apply */}\n                    {incentive.application_process && (\n                      <div className=\"bg-gray-50 rounded-lg p-3\">\n                        <span className=\"text-xs font-medium text-gray-500 uppercase\">How to Apply</span>\n                        <p className=\"text-sm text-gray-700 mt-1\">{incentive.application_process}</p>\n                      </div>\n                    )}\n\n                    {/* Stacking Info */}\n                    {incentive.stackable === false && (\n                      <div className=\"text-sm text-amber-700 bg-amber-50 rounded-lg p-3\">\n                        <span className=\"font-medium\">Not Stackable:</span> This incentive cannot be combined with other programs.\n                      </div>\n                    )}\n                    {incentive.cannot_stack_with && incentive.cannot_stack_with.length > 0 && (\n                      <div className=\"text-sm text-amber-700 bg-amber-50 rounded-lg p-3\">\n                        <span className=\"font-medium\">Stacking Restriction:</span> Cannot combine with {incentive.cannot_stack_with.join(', ')}\n                      </div>\n                    )}\n\n                    {/* Processing Time */}\n                    {incentive.typical_processing_days && (\n                      <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                        <Clock className=\"w-4 h-4 text-gray-400 flex-shrink-0\" />\n                        Typical processing: {incentive.typical_processing_days} days\n                      </div>\n                    )}\n\n                    {/* Last Verified */}\n                    {incentive.last_verified && (\n                      <div className=\"flex items-center gap-2 text-sm text-gray-500\">\n                        <Shield className=\"w-4 h-4 text-gray-400 flex-shrink-0\" />\n                        Last verified: {formatDate(incentive.last_verified)}\n                      </div>\n                    )}\n\n                    {/* Links */}\n                    <div className=\"flex items-center gap-4\">\n                      {incentive.application_url && (\n                        <a\n                          href={incentive.application_url}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"inline-flex items-center gap-2 text-sm text-switch-green-600 hover:text-switch-green-700 font-medium\"\n                        >\n                          <ExternalLink className=\"w-4 h-4\" />\n                          View Application Details\n                        </a>\n                      )}\n                      {incentive.discovery_source_url && (\n                        <a\n                          href={incentive.discovery_source_url}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"inline-flex items-center gap-2 text-sm text-gray-500 hover:text-gray-700\"\n                        >\n                          <ExternalLink className=\"w-4 h-4\" />\n                          Source\n                        </a>\n                      )}\n                    </div>\n                  </div>\n                )}\n              </div>\n            );\n          })}\n        </div>\n\n        {/* Summary Footer */}\n        <div className=\"bg-gray-50 px-5 py-4 border-t-2 border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"text-sm text-gray-600\">\n              {incentives.length} incentive program{incentives.length !== 1 ? 's' : ''} available\n            </div>\n            {totalPotentialSavings > 0 && (\n              <div className=\"text-right\">\n                <span className=\"text-sm text-gray-500\">Total Potential Savings</span>\n                <p className=\"text-2xl font-bold text-switch-green-700\">\n                  {formatCurrency(totalPotentialSavings)}\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect, useRef, useCallback } from 'react';\nimport { CheckCircle2, Clock, Mail, Play, ArrowLeft, Volume2, VolumeX, Bell, ArrowRight } from 'lucide-react';\nimport { AlphaBanner } from './AlphaBanner';\nimport { IncentivesPanel } from './IncentivesPanel';\nimport { getProject } from '../lib/database/bidsmartService';\n\ninterface AnalysisSuccessScreenProps {\n  email: string;\n  projectId: string;\n  onViewDemo: () => void;\n  onReturnHome: () => void;\n  onViewResults: () => void;\n}\n\nconst POLLING_DELAY_MS = 90 * 1000; // 90 seconds before polling starts\nconst POLLING_INTERVAL_MS = 15 * 1000; // 15 seconds between polls\n\nfunction playNotificationSound() {\n  const audioContext = new (window.AudioContext || (window as unknown as { webkitAudioContext: typeof AudioContext }).webkitAudioContext)();\n  const oscillator = audioContext.createOscillator();\n  const gainNode = audioContext.createGain();\n  \n  oscillator.connect(gainNode);\n  gainNode.connect(audioContext.destination);\n  \n  oscillator.frequency.value = 800;\n  oscillator.type = 'sine';\n  gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);\n  gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);\n  \n  oscillator.start(audioContext.currentTime);\n  oscillator.stop(audioContext.currentTime + 0.5);\n}\n\nexport function AnalysisSuccessScreen({\n  email,\n  projectId,\n  onViewDemo,\n  onReturnHome,\n  onViewResults\n}: AnalysisSuccessScreenProps) {\n  const [isComplete, setIsComplete] = useState(false);\n  const [soundEnabled, setSoundEnabled] = useState(true);\n  const [emailEnabled, setEmailEnabled] = useState(true);\n  const [pollingActive, setPollingActive] = useState(false);\n  const [timeRemaining, setTimeRemaining] = useState(POLLING_DELAY_MS / 1000);\n  const pollingIntervalRef = useRef<ReturnType<typeof setInterval> | null>(null);\n  const countdownIntervalRef = useRef<ReturnType<typeof setInterval> | null>(null);\n  const hasPlayedSound = useRef(false);\n\n  const checkProjectStatus = useCallback(async () => {\n    if (!projectId) return;\n    \n    try {\n      const project = await getProject(projectId);\n      if (project && (project.status === 'comparing' || project.status === 'completed')) {\n        setIsComplete(true);\n        if (soundEnabled && !hasPlayedSound.current) {\n          playNotificationSound();\n          hasPlayedSound.current = true;\n        }\n        if (pollingIntervalRef.current) {\n          clearInterval(pollingIntervalRef.current);\n          pollingIntervalRef.current = null;\n        }\n      }\n    } catch (error) {\n      console.error('Error checking project status:', error);\n    }\n  }, [projectId, soundEnabled]);\n\n  useEffect(() => {\n    // Countdown timer until polling starts\n    countdownIntervalRef.current = setInterval(() => {\n      setTimeRemaining(prev => {\n        if (prev <= 1) {\n          if (countdownIntervalRef.current) {\n            clearInterval(countdownIntervalRef.current);\n          }\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    // Start polling after delay\n    const delayTimeout = setTimeout(() => {\n      setPollingActive(true);\n      checkProjectStatus(); // Check immediately when polling starts\n      pollingIntervalRef.current = setInterval(checkProjectStatus, POLLING_INTERVAL_MS);\n    }, POLLING_DELAY_MS);\n\n    return () => {\n      clearTimeout(delayTimeout);\n      if (pollingIntervalRef.current) clearInterval(pollingIntervalRef.current);\n      if (countdownIntervalRef.current) clearInterval(countdownIntervalRef.current);\n    };\n  }, [checkProjectStatus]);\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const handlePreviewSound = () => {\n    playNotificationSound();\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-switch-green-50 via-white to-blue-50\">\n      <AlphaBanner />\n      <div className=\"max-w-2xl mx-auto px-4 py-12\">\n        <div className=\"bg-white rounded-2xl shadow-xl border border-gray-200 p-8\">\n          {/* Success/Complete Icon */}\n          <div className={`w-16 h-16 ${isComplete ? 'bg-switch-green-500' : 'bg-switch-green-100'} rounded-full flex items-center justify-center mx-auto mb-6 transition-colors`}>\n            <CheckCircle2 className={`w-8 h-8 ${isComplete ? 'text-white' : 'text-switch-green-600'}`} />\n          </div>\n          \n          {/* Headline */}\n          <h1 className=\"text-2xl font-bold text-center text-gray-900 mb-2\">\n            {isComplete ? 'Analysis Complete!' : 'Analysis Started Successfully!'}\n          </h1>\n          <p className=\"text-center text-gray-600 mb-8\">\n            {isComplete \n              ? 'Your bid comparison is ready to view'\n              : 'Your bids are being analyzed by our AI'\n            }\n          </p>\n\n          {/* Analysis Complete Banner */}\n          {isComplete && (\n            <div className=\"bg-switch-green-50 border border-switch-green-200 rounded-xl p-6 mb-6\">\n              <div className=\"flex items-center gap-3 mb-4\">\n                <CheckCircle2 className=\"w-6 h-6 text-switch-green-600\" />\n                <p className=\"font-semibold text-switch-green-900\">\n                  Your analysis is ready!\n                </p>\n              </div>\n              <button\n                onClick={onViewResults}\n                className=\"w-full bg-switch-green-600 hover:bg-switch-green-700 text-white rounded-lg py-4 px-6 font-semibold flex items-center justify-center gap-2 transition-colors\"\n              >\n                <ArrowRight className=\"w-5 h-5\" />\n                View Results\n              </button>\n            </div>\n          )}\n          \n          {/* Timing Info - only show when not complete */}\n          {!isComplete && (\n            <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-6 mb-6\">\n              <div className=\"flex items-start gap-3\">\n                <Clock className=\"w-6 h-6 text-amber-600 flex-shrink-0 mt-0.5\" />\n                <div>\n                  <p className=\"font-semibold text-amber-900 mb-2\">\n                    Expected Time: 20-30 minutes\n                  </p>\n                  <p className=\"text-sm text-amber-800 mb-3\">\n                    Our technology performs research and analysis involving sometimes \n                    hundreds of searches to give you the most comprehensive comparison.\n                  </p>\n                  {!pollingActive && (\n                    <p className=\"text-xs text-amber-700\">\n                      Status check starts in: {formatTime(timeRemaining)}\n                    </p>\n                  )}\n                  {pollingActive && (\n                    <p className=\"text-xs text-amber-700\">\n                       Checking for results every 15 seconds...\n                    </p>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Notification Settings */}\n          <div className=\"bg-gray-50 border border-gray-200 rounded-xl p-4 mb-6\">\n            <p className=\"text-sm font-medium text-gray-900 mb-3\">\n              <Bell className=\"w-4 h-4 inline mr-2\" />\n              Notification Settings\n            </p>\n            \n            {/* Sound Toggle */}\n            <div className=\"flex items-center justify-between py-2 border-b border-gray-200\">\n              <div className=\"flex items-center gap-2\">\n                {soundEnabled ? (\n                  <Volume2 className=\"w-4 h-4 text-gray-600\" />\n                ) : (\n                  <VolumeX className=\"w-4 h-4 text-gray-400\" />\n                )}\n                <span className=\"text-sm text-gray-700\">Sound alert when ready</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={handlePreviewSound}\n                  className=\"text-xs text-switch-green-600 hover:text-switch-green-700 underline\"\n                >\n                  Preview\n                </button>\n                <button\n                  onClick={() => setSoundEnabled(!soundEnabled)}\n                  className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${\n                    soundEnabled ? 'bg-switch-green-600' : 'bg-gray-300'\n                  }`}\n                >\n                  <span\n                    className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\n                      soundEnabled ? 'translate-x-6' : 'translate-x-1'\n                    }`}\n                  />\n                </button>\n              </div>\n            </div>\n\n            {/* Email Toggle */}\n            <div className=\"flex items-center justify-between py-2\">\n              <div className=\"flex items-center gap-2\">\n                <Mail className=\"w-4 h-4 text-gray-600\" />\n                <span className=\"text-sm text-gray-700\">Email notification to {email}</span>\n              </div>\n              <button\n                onClick={() => setEmailEnabled(!emailEnabled)}\n                className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${\n                  emailEnabled ? 'bg-switch-green-600' : 'bg-gray-300'\n                }`}\n              >\n                <span\n                  className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\n                    emailEnabled ? 'translate-x-6' : 'translate-x-1'\n                  }`}\n                />\n              </button>\n            </div>\n          </div>\n          \n          {/* Incentives Panel  give user something useful while they wait */}\n          {!isComplete && (\n            <div className=\"mb-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">\n                While you wait  available rebates & incentives\n              </h3>\n              <IncentivesPanel userZip={null} userState={null} />\n            </div>\n          )}\n\n          {/* CTAs */}\n          <div className=\"space-y-3 mb-6\">\n            <button\n              onClick={onViewDemo}\n              className=\"w-full bg-switch-green-600 hover:bg-switch-green-700 text-white rounded-lg py-4 px-6 font-semibold flex items-center justify-center gap-2 transition-colors\"\n            >\n              <Play className=\"w-5 h-5\" />\n              View a Sample Analysis\n            </button>\n            <button\n              onClick={onReturnHome}\n              className=\"w-full bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 rounded-lg py-3 px-6 font-medium flex items-center justify-center gap-2 transition-colors\"\n            >\n              <ArrowLeft className=\"w-4 h-4\" />\n              Return to Home\n            </button>\n          </div>\n          \n          {/* Instructions */}\n          <div className=\"bg-gray-50 rounded-xl p-4\">\n            <p className=\"text-sm font-medium text-gray-900 mb-2\">\n               To find your results later:\n            </p>\n            <p className=\"text-sm text-gray-600\">\n              Return to the home page and use the \"Find Previous Analysis\" \n              feature with your email address.\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import * as db from '../database/bidsmartService';\nimport { getAuthHeaders as getParentAuthHeaders } from '../parentAuth';\n\nconst SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL;\nconst SUPABASE_ANON_KEY = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\nexport interface UserPriorities {\n  price: number;\n  efficiency: number;\n  warranty: number;\n  reputation: number;\n  timeline: number;\n}\n\nexport interface BatchAnalysisResult {\n  success: boolean;\n  projectId: string;\n  requestId?: string;\n  workflowRunId?: string;\n  pdfCount?: number;\n  error?: string;\n}\n\nexport interface UploadedFile {\n  id: string;\n  file: File;\n  status: 'uploading' | 'uploaded' | 'error';\n  progress: number;\n  error?: string;\n}\n\nasync function getAuthHeaders(userEmail: string): Promise<Record<string, string>> {\n  // Get auth headers (uses signed token if available, falls back to email)\n  const authHeaders = getParentAuthHeaders(userEmail);\n  \n  return {\n    'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,\n    'apikey': SUPABASE_ANON_KEY,\n    ...authHeaders,\n  };\n}\n\n//  V1 LEGACY CODE REMOVED \n// The following V1 functions were removed (callback now handled server-side\n// by the mindpal-callback edge function):\n//   - uploadAndExtract()\n//   - triggerExtraction()\n//   - getExtractionStatus()\n//   - pollExtractionStatus()\n//   - retryExtraction()\n//   - processMindPalCallback()\n//   - mapExtractionToBid()\n//   - mapConfidenceToLevel()\n//   - mapLineItemType()\n//   - recalculateProjectScores()\n// \n\n/**\n * V2: Upload a PDF and create both a pdf_uploads record AND a bids stub.\n * Returns pdfUploadId + bidId so the frontend can track both.\n */\nexport async function uploadPdfFile(\n  projectId: string,\n  file: File,\n  requestId?: string\n): Promise<{ pdfUploadId: string; bidId: string; storagePath: string; error?: string }> {\n  try {\n    const { path } = await db.uploadPdfToStorage(projectId, file);\n\n    const pdfUpload = await db.createPdfUpload(projectId, {\n      file_name: file.name,\n      file_path: path,\n      file_size_bytes: file.size,\n      status: 'uploaded',\n    });\n\n    // V2: Create bid stub immediately, linked to this pdf_upload\n    const effectiveRequestId = requestId || crypto.randomUUID();\n    const bidStub = await db.createBidStub(\n      projectId,\n      pdfUpload.id,\n      effectiveRequestId,\n      path // storage_key = stable file path\n    );\n\n    // Link pdf_upload  bid\n    await db.updatePdfUploadStatus(pdfUpload.id, 'uploaded', {\n      extracted_bid_id: bidStub.id,\n    } as Partial<import('../types').PdfUpload>);\n\n    return {\n      pdfUploadId: pdfUpload.id,\n      bidId: bidStub.id,\n      storagePath: path,\n    };\n  } catch (error) {\n    console.error('Error uploading PDF:', error);\n    return {\n      pdfUploadId: '',\n      bidId: '',\n      storagePath: '',\n      error: error instanceof Error ? error.message : 'Upload failed',\n    };\n  }\n}\n\nexport interface DocumentForAnalysis {\n  bid_id: string;\n  pdf_upload_id: string;\n}\n\nexport async function startBatchAnalysis(\n  projectId: string,\n  pdfUploadIds: string[],\n  userPriorities: UserPriorities,\n  userEmail: string,\n  projectDetails?: string,\n  documents?: DocumentForAnalysis[]\n): Promise<BatchAnalysisResult> {\n  try {\n    const headers = await getAuthHeaders(userEmail);\n\n    const prioritiesPayload = {\n      upfront_cost: userPriorities.price,\n      energy_efficiency: userPriorities.efficiency,\n      warranty_length: userPriorities.warranty,\n      contractor_reputation: userPriorities.reputation,\n      installation_timeline: userPriorities.timeline,\n      project_details: projectDetails || '',\n    };\n\n    // V2: Send documents array with bid_ids if available\n    const requestBody: Record<string, unknown> = {\n      projectId,\n      userPriorities: prioritiesPayload,\n    };\n\n    if (documents && documents.length > 0) {\n      // V2 path: documents with pre-created bid_ids\n      requestBody.documents = documents;\n    } else {\n      // V1 compat: flat pdfUploadIds\n      requestBody.pdfUploadIds = pdfUploadIds;\n    }\n\n    const response = await fetch(`${SUPABASE_URL}/functions/v1/start-mindpal-analysis`, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(requestBody),\n    });\n\n    let data;\n    try {\n      data = await response.json();\n    } catch {\n      const text = await response.text();\n      console.error('Failed to parse response as JSON:', text);\n      return {\n        success: false,\n        projectId,\n        error: `Server error: ${response.status} - ${text.substring(0, 200)}`,\n      };\n    }\n\n    console.log(' Edge Function Response:', {\n      status: response.status,\n      ok: response.ok,\n      data\n    });\n\n    if (!response.ok) {\n      console.error('Edge Function error:', data);\n      return {\n        success: false,\n        projectId,\n        error: data.error || `Request failed: ${response.status}`,\n      };\n    }\n\n    return {\n      success: true,\n      projectId,\n      requestId: data.requestId,\n      workflowRunId: data.workflowRunId,\n      pdfCount: data.pdfCount,\n    };\n  } catch (error) {\n    console.error('Error starting batch analysis:', error);\n    return {\n      success: false,\n      projectId,\n      error: error instanceof Error ? error.message : 'Failed to start analysis',\n    };\n  }\n}\n\nexport interface BatchExtractionStatus {\n  projectId: string;\n  totalPdfs: number;\n  completedPdfs: number;\n  failedPdfs: number;\n  processingPdfs: number;\n  isComplete: boolean;\n  allSuccessful: boolean;\n  pdfStatuses: Array<{\n    id: string;\n    fileName: string;\n    status: string;\n    bidId?: string;\n    error?: string;\n  }>;\n}\n\nexport async function getBatchExtractionStatus(\n  projectId: string\n): Promise<BatchExtractionStatus> {\n  const pdfUploads = await db.getPdfUploadsByProject(projectId);\n\n  const pdfStatuses = pdfUploads.map(pdf => ({\n    id: pdf.id,\n    fileName: pdf.file_name,\n    status: pdf.status,\n    bidId: pdf.extracted_bid_id || undefined,\n    error: pdf.error_message || undefined,\n  }));\n\n  const completedPdfs = pdfUploads.filter(\n    p => p.status === 'extracted' || p.status === 'verified' || p.status === 'review_needed'\n  ).length;\n  const failedPdfs = pdfUploads.filter(p => p.status === 'failed').length;\n  const processingPdfs = pdfUploads.filter(\n    p => p.status === 'processing' || p.status === 'uploaded'\n  ).length;\n\n  const isComplete = processingPdfs === 0;\n  const allSuccessful = isComplete && failedPdfs === 0 && completedPdfs > 0;\n\n  return {\n    projectId,\n    totalPdfs: pdfUploads.length,\n    completedPdfs,\n    failedPdfs,\n    processingPdfs,\n    isComplete,\n    allSuccessful,\n    pdfStatuses,\n  };\n}\n\nexport async function pollBatchExtractionStatus(\n  projectId: string,\n  options: {\n    intervalMs?: number;\n    maxAttempts?: number;\n    onProgress?: (status: BatchExtractionStatus) => void;\n  } = {}\n): Promise<BatchExtractionStatus> {\n  const { intervalMs = 5000, maxAttempts = 120, onProgress } = options;\n\n  let attempts = 0;\n\n  return new Promise((resolve, reject) => {\n    const poll = async () => {\n      attempts++;\n\n      try {\n        const status = await getBatchExtractionStatus(projectId);\n        onProgress?.(status);\n\n        if (status.isComplete) {\n          resolve(status);\n          return;\n        }\n\n        if (attempts >= maxAttempts) {\n          resolve({\n            ...status,\n            isComplete: true,\n            allSuccessful: false,\n          });\n          return;\n        }\n\n        setTimeout(poll, intervalMs);\n      } catch (error) {\n        if (attempts >= maxAttempts) {\n          reject(error);\n          return;\n        }\n        setTimeout(poll, intervalMs);\n      }\n    };\n\n    poll();\n  });\n}\n","/**\n * Speech-to-Text Hook\n * \n * Uses the browser's Web Speech API for on-device dictation.\n * Falls back gracefully if not supported.\n */\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\n\ninterface UseSpeechToTextOptions {\n  onResult?: (transcript: string) => void;\n  onInterimResult?: (transcript: string) => void;\n  continuous?: boolean;\n  language?: string;\n}\n\ninterface UseSpeechToTextReturn {\n  isListening: boolean;\n  isSupported: boolean;\n  transcript: string;\n  interimTranscript: string;\n  startListening: () => void;\n  stopListening: () => void;\n  toggleListening: () => void;\n  error: string | null;\n}\n\n// Check for browser support\nconst SpeechRecognition = \n  typeof window !== 'undefined' \n    ? (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition \n    : null;\n\nexport function useSpeechToText(options: UseSpeechToTextOptions = {}): UseSpeechToTextReturn {\n  const { \n    onResult, \n    onInterimResult, \n    continuous = true, \n    language = 'en-US' \n  } = options;\n\n  const [isListening, setIsListening] = useState(false);\n  const [transcript, setTranscript] = useState('');\n  const [interimTranscript, setInterimTranscript] = useState('');\n  const [error, setError] = useState<string | null>(null);\n  \n  const recognitionRef = useRef<any>(null);\n  const isSupported = !!SpeechRecognition;\n\n  // Initialize recognition\n  useEffect(() => {\n    if (!isSupported) return;\n\n    const recognition = new SpeechRecognition();\n    recognition.continuous = continuous;\n    recognition.interimResults = true;\n    recognition.lang = language;\n\n    recognition.onstart = () => {\n      setIsListening(true);\n      setError(null);\n    };\n\n    recognition.onend = () => {\n      setIsListening(false);\n    };\n\n    recognition.onerror = (event: any) => {\n      setIsListening(false);\n      if (event.error === 'not-allowed') {\n        setError('Microphone access denied. Please allow microphone access and try again.');\n      } else if (event.error === 'no-speech') {\n        setError('No speech detected. Please try again.');\n      } else {\n        setError(`Error: ${event.error}`);\n      }\n    };\n\n    recognition.onresult = (event: any) => {\n      let finalTranscript = '';\n      let interimText = '';\n\n      for (let i = event.resultIndex; i < event.results.length; i++) {\n        const result = event.results[i];\n        if (result.isFinal) {\n          finalTranscript += result[0].transcript;\n        } else {\n          interimText += result[0].transcript;\n        }\n      }\n\n      if (finalTranscript) {\n        setTranscript((prev) => prev + finalTranscript);\n        onResult?.(finalTranscript);\n      }\n\n      setInterimTranscript(interimText);\n      if (interimText) {\n        onInterimResult?.(interimText);\n      }\n    };\n\n    recognitionRef.current = recognition;\n\n    return () => {\n      recognition.abort();\n    };\n  }, [isSupported, continuous, language, onResult, onInterimResult]);\n\n  const startListening = useCallback(() => {\n    if (!isSupported || !recognitionRef.current) {\n      setError('Speech recognition is not supported in this browser.');\n      return;\n    }\n\n    setTranscript('');\n    setInterimTranscript('');\n    setError(null);\n\n    try {\n      recognitionRef.current.start();\n    } catch (err) {\n      // Already started\n      console.warn('Recognition already started');\n    }\n  }, [isSupported]);\n\n  const stopListening = useCallback(() => {\n    if (recognitionRef.current) {\n      recognitionRef.current.stop();\n    }\n  }, []);\n\n  const toggleListening = useCallback(() => {\n    if (isListening) {\n      stopListening();\n    } else {\n      startListening();\n    }\n  }, [isListening, startListening, stopListening]);\n\n  return {\n    isListening,\n    isSupported,\n    transcript,\n    interimTranscript,\n    startListening,\n    stopListening,\n    toggleListening,\n    error,\n  };\n}\n","export default \"__VITE_ASSET__CPsNGGld__\"","import { useState, useRef, useCallback, useEffect } from 'react';\nimport { Upload, BarChart3, CheckCircle, ClipboardCheck, FileText, X, Clock, CheckCircle2, AlertCircle, ArrowRight, Users, Shield, Info, Mail, Loader2, ChevronRight, Mic, MicOff } from 'lucide-react';\nimport type { UserExt } from '../lib/types';\nimport { ReturningUserSection } from './ReturningUserSection';\nimport { TryTheToolSection } from './TryTheToolSection';\nimport { AnalysisSuccessScreen } from './AnalysisSuccessScreen';\nimport { updateProject, saveProjectRequirements, updateProjectDataSharingConsent, updateProjectNotificationSettings, validatePdfFile, getProjectBySessionId, createDraftProject, getPublicDemoProjects } from '../lib/database/bidsmartService';\nimport { uploadPdfFile, startBatchAnalysis, type DocumentForAnalysis } from '../lib/services/mindpalService';\nimport { useSpeechToText } from '../hooks/useSpeechToText';\nimport SwitchLogo from '../assets/switchlogo.svg';\n\nconst SESSION_ID_KEY = 'bidsmart_session_id';\n\nfunction getOrCreateSessionId(): string {\n  let sessionId = localStorage.getItem(SESSION_ID_KEY);\n  if (!sessionId) {\n    sessionId = crypto.randomUUID();\n    localStorage.setItem(SESSION_ID_KEY, sessionId);\n  }\n  return sessionId;\n}\n\nconst PHASES = [\n  {\n    number: 1,\n    label: 'GATHER',\n    title: 'Upload & Prioritize',\n    description: 'Upload contractor bids and set your priorities',\n    icon: Upload,\n    color: 'bg-switch-green-100 text-switch-green-700',\n  },\n  {\n    number: 2,\n    label: 'COMPARE',\n    title: 'Analyze Options',\n    description: 'Compare equipment, costs, and contractors side-by-side',\n    icon: BarChart3,\n    color: 'bg-blue-100 text-blue-700',\n  },\n  {\n    number: 3,\n    label: 'DECIDE',\n    title: 'Make Your Choice',\n    description: 'Review incentives and select your contractor',\n    icon: CheckCircle,\n    color: 'bg-amber-100 text-amber-700',\n  },\n  {\n    number: 4,\n    label: 'VERIFY',\n    title: 'Quality Check',\n    description: 'Ensure proper installation with our checklist',\n    icon: ClipboardCheck,\n    color: 'bg-teal-100 text-teal-700',\n  },\n];\n\ninterface PrioritySliderProps {\n  label: string;\n  value: number;\n  onChange: (value: number) => void;\n  description: string;\n}\n\nfunction PrioritySlider({ label, value, onChange, description }: PrioritySliderProps) {\n  return (\n    <div className=\"space-y-2\">\n      <div className=\"flex items-center justify-between\">\n        <label className=\"text-sm font-medium text-gray-700\">{label}</label>\n        <span className=\"text-sm text-gray-500\">{value}/5</span>\n      </div>\n      <input\n        type=\"range\"\n        min=\"1\"\n        max=\"5\"\n        value={value}\n        onChange={(e) => onChange(parseInt(e.target.value))}\n        className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-switch-green-600\"\n      />\n      <p className=\"text-xs text-gray-500\">{description}</p>\n    </div>\n  );\n}\n\ninterface UploadedPdf {\n  id: string;\n  file: File;\n  pdfUploadId?: string;\n  status: 'pending' | 'uploading' | 'uploaded' | 'error';\n  progress: number;\n  error?: string;\n}\n\ntype AnalysisState = 'idle' | 'uploading' | 'analyzing' | 'submitted' | 'complete' | 'error' | 'timeout';\n\ninterface UnifiedHomePageProps {\n  user: UserExt;\n  onSelectProject: (projectId: string) => void;\n}\n\nexport function UnifiedHomePage({ user, onSelectProject }: UnifiedHomePageProps) {\n  const [uploadedPdfs, setUploadedPdfs] = useState<UploadedPdf[]>([]);\n  const [dragActive, setDragActive] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const [priorities, setPriorities] = useState({\n    price: 3,\n    efficiency: 3,\n    warranty: 3,\n    reputation: 3,\n    timeline: 3,\n  });\n\n  const [projectDetails, setProjectDetails] = useState('');\n  const [dataSharingConsent, setDataSharingConsent] = useState(true);\n  const [showPrivacyDetails, setShowPrivacyDetails] = useState(false);\n  const [notificationEmail, setNotificationEmail] = useState('');\n\n  const [analysisState, setAnalysisState] = useState<AnalysisState>('idle');\n  const [analysisError, setAnalysisError] = useState<string | null>(null);\n  const [analysisElapsedSeconds, setAnalysisElapsedSeconds] = useState(0);\n  const analysisTimerRef = useRef<ReturnType<typeof setInterval> | null>(null);\n\n  const [draftProjectId, setDraftProjectId] = useState<string | null>(null);\n  const [demoProjectId, setDemoProjectId] = useState<string | null>(null);\n  const [showPriorities, setShowPriorities] = useState(true);\n  const [showProjectDetails, setShowProjectDetails] = useState(true);\n  const [isHeaderSticky, setIsHeaderSticky] = useState(false);\n  const heroSectionRef = useRef<HTMLDivElement>(null);\n\n  // Speech-to-text for project details\n  const { \n    isListening, \n    isSupported: isSpeechSupported, \n    toggleListening,\n    error: speechError \n  } = useSpeechToText({\n    onResult: (transcript) => {\n      setProjectDetails((prev) => prev + (prev ? ' ' : '') + transcript);\n    },\n  });\n\n  useEffect(() => {\n    checkForDraftProject();\n    loadDemoProject();\n  }, [user.id]);\n\n  const loadDemoProject = async () => {\n    try {\n      const demos = await getPublicDemoProjects();\n      if (demos.length > 0) {\n        setDemoProjectId(demos[0].id);\n      }\n    } catch (err) {\n      console.error('Failed to load demo project:', err);\n    }\n  };\n\n  useEffect(() => {\n    const handleScroll = () => {\n      if (heroSectionRef.current) {\n        const heroBottom = heroSectionRef.current.getBoundingClientRect().bottom;\n        if (heroBottom <= 0 && !isHeaderSticky) {\n          setIsHeaderSticky(true);\n          window.scrollTo({ top: heroSectionRef.current.offsetHeight, behavior: 'instant' });\n        }\n      }\n    };\n\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, [isHeaderSticky]);\n\n  const handleReturnToDashboard = () => {\n    setIsHeaderSticky(false);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    if (analysisState === 'analyzing') {\n      setAnalysisElapsedSeconds(0);\n      analysisTimerRef.current = setInterval(() => {\n        setAnalysisElapsedSeconds(prev => prev + 1);\n      }, 1000);\n    } else {\n      if (analysisTimerRef.current) {\n        clearInterval(analysisTimerRef.current);\n        analysisTimerRef.current = null;\n      }\n    }\n    return () => {\n      if (analysisTimerRef.current) {\n        clearInterval(analysisTimerRef.current);\n      }\n    };\n  }, [analysisState]);\n\n  async function checkForDraftProject() {\n    const sessionId = getOrCreateSessionId();\n    try {\n      const existingDraft = await getProjectBySessionId(sessionId);\n      if (existingDraft) {\n        setDraftProjectId(existingDraft.id);\n      }\n    } catch (err) {\n      console.error('Failed to check for draft project:', err);\n    }\n  }\n\n  async function ensureDraftProject(): Promise<string> {\n    if (draftProjectId) {\n      return draftProjectId;\n    }\n\n    const sessionId = getOrCreateSessionId();\n    const project = await createDraftProject(user.id, sessionId);\n    setDraftProjectId(project.id);\n    return project.id;\n  }\n\n  const validPendingCount = uploadedPdfs.filter(p => p.status === 'pending' || p.status === 'uploaded').length;\n  const canContinue = validPendingCount >= 1;\n  const isEmailValid = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(notificationEmail.trim());\n\n  const handleFiles = useCallback(async (files: FileList | File[]) => {\n    const fileArray = Array.from(files);\n    const validFiles: UploadedPdf[] = [];\n\n    for (const file of fileArray) {\n      const validationError = validatePdfFile(file);\n      if (validationError) {\n        validFiles.push({\n          id: crypto.randomUUID(),\n          file,\n          status: 'error',\n          progress: 0,\n          error: validationError.message,\n        });\n      } else {\n        validFiles.push({\n          id: crypto.randomUUID(),\n          file,\n          status: 'pending',\n          progress: 0,\n        });\n      }\n    }\n\n    setUploadedPdfs(prev => [...prev, ...validFiles]);\n  }, []);\n\n  const handleDrag = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n      handleFiles(e.dataTransfer.files);\n    }\n  };\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      handleFiles(e.target.files);\n    }\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const removeFile = (id: string) => {\n    setUploadedPdfs(prev => prev.filter(p => p.id !== id));\n  };\n\n  const getStatusIcon = (status: UploadedPdf['status']) => {\n    switch (status) {\n      case 'uploaded':\n        return <CheckCircle2 className=\"w-5 h-5 text-switch-green-600\" />;\n      case 'uploading':\n        return <Loader2 className=\"w-5 h-5 text-blue-500 animate-spin\" />;\n      case 'error':\n        return <AlertCircle className=\"w-5 h-5 text-red-500\" />;\n      default:\n        return <Clock className=\"w-5 h-5 text-gray-400\" />;\n    }\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n  };\n\n  const formatElapsedTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return mins > 0 ? `${mins}m ${secs}s` : `${secs}s`;\n  };\n\n  const handleAnalyze = async () => {\n    if (!canContinue || !isEmailValid) return;\n\n    setAnalysisError(null);\n\n    try {\n      const projectId = draftProjectId || await ensureDraftProject();\n\n      await updateProjectNotificationSettings(projectId, notificationEmail.trim().toLowerCase(), true);\n\n      await saveProjectRequirements(projectId, {\n        priority_price: priorities.price,\n        priority_efficiency: priorities.efficiency,\n        priority_warranty: priorities.warranty,\n        priority_reputation: priorities.reputation,\n        priority_timeline: priorities.timeline,\n      });\n\n      await updateProjectDataSharingConsent(projectId, dataSharingConsent);\n\n      if (projectDetails.trim()) {\n        await updateProject(projectId, { project_details: projectDetails });\n      }\n\n      await updateProject(projectId, { status: 'collecting_bids' });\n\n      const files = uploadedPdfs.map(p => p.file);\n\n      if (files.length < 1) {\n        setAnalysisError('Please upload at least 1 bid PDF to analyze.');\n        return;\n      }\n\n      setAnalysisState('uploading');\n\n      // Upload each PDF to Supabase Storage + create bid stubs\n      const pdfUploadIds: string[] = [];\n      const documents: DocumentForAnalysis[] = [];\n      const batchRequestId = crypto.randomUUID();\n      for (let i = 0; i < files.length; i++) {\n        const file = files[i];\n        console.log(`Uploading ${file.name} (${i + 1}/${files.length})`);\n\n        const uploadResult = await uploadPdfFile(projectId, file, batchRequestId);\n        if (uploadResult.error || !uploadResult.pdfUploadId) {\n          setAnalysisState('error');\n          setAnalysisError(uploadResult.error || `Failed to upload ${file.name}`);\n          return;\n        }\n        pdfUploadIds.push(uploadResult.pdfUploadId);\n\n        // V2: Track bid_id  pdf_upload_id pairing for MindPal\n        if (uploadResult.bidId) {\n          documents.push({\n            bid_id: uploadResult.bidId,\n            pdf_upload_id: uploadResult.pdfUploadId,\n          });\n        }\n      }\n\n      console.log('All PDFs uploaded, starting analysis with IDs:', pdfUploadIds, 'documents:', documents);\n      setAnalysisState('analyzing');\n\n      // Start analysis with V2 documents array (bid_id + pdf_upload_id pairs)\n      const analysisResult = await startBatchAnalysis(\n        projectId,\n        pdfUploadIds,\n        priorities,\n        user.email,\n        projectDetails,\n        documents.length > 0 ? documents : undefined\n      );\n\n      if (!analysisResult.success) {\n        setAnalysisState('error');\n        setAnalysisError(analysisResult.error || 'Failed to start analysis');\n        return;\n      }\n\n      // Save processing project info for banner display when viewing demo\n      try {\n        localStorage.setItem('bidsmart_processing_project', JSON.stringify({\n          id: projectId,\n          email: notificationEmail,\n        }));\n      } catch {\n        // Ignore localStorage errors\n      }\n\n      // Show success screen - analysis takes 20-30 minutes\n      setAnalysisState('submitted');\n    } catch (err) {\n      console.error('Failed to process:', err);\n      setAnalysisState('error');\n      setAnalysisError(err instanceof Error ? err.message : 'An unexpected error occurred');\n    }\n  };\n\n  if (analysisState === 'submitted') {\n    return (\n      <AnalysisSuccessScreen\n        email={notificationEmail}\n        projectId={draftProjectId || ''}\n        onViewDemo={() => {\n          if (demoProjectId) {\n            onSelectProject(demoProjectId);\n          }\n        }}\n        onReturnHome={() => {\n          setAnalysisState('idle');\n          setUploadedPdfs([]);\n          setDraftProjectId(null);\n        }}\n        onViewResults={() => {\n          if (draftProjectId) {\n            onSelectProject(draftProjectId);\n          }\n        }}\n      />\n    );\n  }\n\n  if (analysisState === 'analyzing' || analysisState === 'uploading') {\n    return (\n      <div className=\"min-h-screen bg-gray-50\">\n        <div className=\"max-w-4xl mx-auto px-4 py-12\">\n          <div className=\"flex flex-col items-center justify-center min-h-[400px] space-y-6\">\n            <div className=\"w-16 h-16 bg-switch-green-100 rounded-full flex items-center justify-center\">\n              <Loader2 className=\"w-8 h-8 text-switch-green-600 animate-spin\" />\n            </div>\n\n            <div className=\"text-center space-y-2\">\n              <h2 className=\"text-xl font-semibold text-gray-900\">\n                Uploading Your Bids...\n              </h2>\n              <p className=\"text-gray-600 max-w-md\">\n                Preparing your documents for analysis.\n              </p>\n              <p className=\"text-sm text-gray-500\">\n                Elapsed: {formatElapsedTime(analysisElapsedSeconds)}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (analysisState === 'timeout') {\n    return (\n      <div className=\"min-h-screen bg-gray-50\">\n        <div className=\"max-w-4xl mx-auto px-4 py-12\">\n          <div className=\"flex flex-col items-center justify-center min-h-[400px] space-y-6\">\n            <div className=\"w-16 h-16 bg-switch-green-100 rounded-full flex items-center justify-center\">\n              <CheckCircle2 className=\"w-8 h-8 text-switch-green-600\" />\n            </div>\n\n            <div className=\"text-center space-y-2\">\n              <h2 className=\"text-xl font-semibold text-gray-900\">Your Submission is Saved</h2>\n              <p className=\"text-gray-600 max-w-md\">\n                Your bids are being processed. You will receive an email at <strong>{notificationEmail}</strong> when your analysis is ready.\n              </p>\n            </div>\n\n            <p className=\"text-sm text-gray-500 text-center max-w-md\">\n              You can close this page. Use your email address to find your analysis when you return.\n            </p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col\">\n\n      {!isHeaderSticky && (\n        <div ref={heroSectionRef} className=\"max-w-4xl w-full mx-auto px-4 py-8\">\n          <div className=\"flex items-center justify-center mb-6\">\n            <img src={SwitchLogo} alt=\"SwitchIsOn\" className=\"h-12 w-auto\" />\n          </div>\n\n          <div className=\"text-center mb-6\">\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\n              Heat Pump Bid Compare Tool <span className=\"text-base font-normal text-gray-500\">(Beta)</span>\n            </h1>\n            <p className=\"text-gray-600 max-w-2xl mx-auto text-sm\">\n              Upload your contractor bids to get an AI-powered comparison and make an informed decision.\n            </p>\n          </div>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\n            <ReturningUserSection onSelectProject={onSelectProject} />\n            <TryTheToolSection onSelectDemo={onSelectProject} />\n          </div>\n        </div>\n      )}\n\n      <div className=\"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm\">\n        <div className=\"max-w-4xl mx-auto px-4 py-4\">\n          {isHeaderSticky && (\n            <div className=\"flex items-center gap-2 mb-4 pb-3 border-b border-gray-100\">\n              <button\n                onClick={handleReturnToDashboard}\n                className=\"flex items-center gap-2 text-gray-600 hover:text-switch-green-600 transition-colors group min-h-[44px] -my-2 py-2\"\n                aria-label=\"Return to Bid Compare Dashboard\"\n              >\n                <img src={SwitchLogo} alt=\"Switch Is On\" className=\"w-8 h-8\" />\n                <span className=\"text-sm font-medium hidden sm:inline\">Dashboard</span>\n              </button>\n              <ChevronRight className=\"w-4 h-4 text-gray-300\" />\n              <span className=\"text-sm font-medium text-gray-900 truncate\">\n                Start New Comparison\n              </span>\n            </div>\n          )}\n          <div className=\"flex items-center justify-between mb-3\">\n            {PHASES.map((phase, index) => {\n              const isActive = phase.number === 1;\n\n              return (\n                <div key={phase.number} className=\"flex items-center flex-1\">\n                  <div className=\"flex items-center gap-2 transition-all min-w-0\">\n                    <div\n                      className={`\n                        w-10 h-10 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-sm font-semibold transition-colors flex-shrink-0\n                        ${isActive ? 'bg-switch-green-600 text-white' : 'bg-gray-200 text-gray-400'}\n                      `}\n                    >\n                      {phase.number}\n                    </div>\n                    <span\n                      className={`\n                        text-xs sm:text-sm font-medium hidden md:block truncate\n                        ${isActive ? 'text-gray-900' : 'text-gray-500'}\n                      `}\n                    >\n                      {phase.label}\n                    </span>\n                  </div>\n\n                  {index < PHASES.length - 1 && (\n                    <div className=\"flex-1 mx-2 sm:mx-3 min-w-[12px]\">\n                      <div className=\"h-0.5 bg-gray-200 transition-colors\" />\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n\n          <div className=\"h-1 bg-gray-100 rounded-full overflow-hidden\">\n            <div\n              className=\"h-full bg-switch-green-600 transition-all duration-500\"\n              style={{ width: '0%' }}\n            />\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex-1 max-w-4xl w-full mx-auto px-4 py-6\">\n        <div className=\"bg-white rounded-xl border border-gray-200 p-6 mb-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-2 flex items-center gap-2\">\n            <Upload className=\"w-5 h-5 text-switch-green-600\" />\n            Start a New Bid Comparison\n          </h2>\n          <p className=\"text-sm text-gray-600 mb-6\">\n            Upload your contractor bid documents to compare (PDF, DOC, or DOCX).\n          </p>\n\n          <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6\">\n            <div className=\"flex gap-3\">\n              <Info className=\"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5\" />\n              <div>\n                <p className=\"text-sm font-medium text-amber-800\">One-Time Analysis</p>\n                <p className=\"text-sm text-amber-700 mt-1\">\n                  Upload all the bids you want to compare before clicking Analyze. All bids will be analyzed together.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {analysisError && (\n            <div className=\"bg-red-50 border border-red-200 rounded-xl p-4 mb-6\">\n              <div className=\"flex gap-3\">\n                <AlertCircle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n                <div>\n                  <p className=\"text-sm font-medium text-red-800\">Error</p>\n                  <p className=\"text-sm text-red-700 mt-1\">{analysisError}</p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n            multiple\n            onChange={handleFileSelect}\n            className=\"hidden\"\n          />\n\n          <div\n            onDragEnter={handleDrag}\n            onDragLeave={handleDrag}\n            onDragOver={handleDrag}\n            onDrop={handleDrop}\n            onClick={() => fileInputRef.current?.click()}\n            className={`\n              border-2 border-dashed rounded-xl p-5 text-center transition-colors cursor-pointer\n              ${dragActive ? 'border-switch-green-500 bg-switch-green-50' : 'border-gray-300 hover:border-gray-400'}\n            `}\n          >\n            <div className=\"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3\">\n              <FileText className=\"w-5 h-5 text-gray-400\" />\n            </div>\n            <p className=\"text-gray-600 mb-1.5 text-sm\">Drag and drop bid documents here</p>\n            <p className=\"text-sm text-gray-400 mb-3\">or</p>\n            <button\n              type=\"button\"\n              className=\"btn btn-secondary text-sm\"\n              onClick={(e) => {\n                e.stopPropagation();\n                fileInputRef.current?.click();\n              }}\n            >\n              Browse Files\n            </button>\n            <p className=\"text-xs text-gray-400 mt-3\">\n              Supported formats: PDF, DOC, DOCX (max 25MB each)\n            </p>\n          </div>\n\n          {uploadedPdfs.length > 0 && (\n            <div className=\"mt-6 space-y-3\">\n              <h3 className=\"text-sm font-medium text-gray-700\">Uploaded Files ({uploadedPdfs.length})</h3>\n              {uploadedPdfs.map((pdf) => (\n                <div\n                  key={pdf.id}\n                  className={`flex items-center justify-between p-4 rounded-lg ${\n                    pdf.status === 'error' ? 'bg-red-50' : 'bg-gray-50'\n                  }`}\n                >\n                  <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                    <FileText className=\"w-5 h-5 text-gray-400 flex-shrink-0\" />\n                    <div className=\"min-w-0 flex-1\">\n                      <p className=\"font-medium text-gray-900 truncate\">{pdf.file.name}</p>\n                      <p className=\"text-sm text-gray-500\">\n                        {formatFileSize(pdf.file.size)}\n                        {pdf.error && <span className=\"text-red-600 ml-2\">{pdf.error}</span>}\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-3\">\n                    {getStatusIcon(pdf.status)}\n                    <button onClick={() => removeFile(pdf.id)} className=\"p-1 hover:bg-gray-200 rounded\">\n                      <X className=\"w-4 h-4 text-gray-500\" />\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          <div className=\"mt-8 pt-6 border-t border-gray-100\">\n            <button\n              type=\"button\"\n              onClick={() => setShowPriorities(!showPriorities)}\n              className=\"w-full flex items-center justify-between text-left p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\"\n            >\n              <div>\n                <h3 className=\"font-medium text-gray-900\">What Matters Most to You?</h3>\n                <p className=\"text-sm text-gray-500\">Set your priorities for the comparison (optional)</p>\n              </div>\n              <svg className={`w-5 h-5 text-gray-400 transition-transform ${showPriorities ? 'rotate-180' : ''}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n              </svg>\n            </button>\n\n            {showPriorities && (\n              <div className=\"mt-4 space-y-6 px-1\">\n                <PrioritySlider\n                  label=\"Upfront Cost\"\n                  value={priorities.price}\n                  onChange={(v) => setPriorities(p => ({ ...p, price: v }))}\n                  description=\"How important is getting the lowest price?\"\n                />\n                <PrioritySlider\n                  label=\"Energy Efficiency / Long-term Savings\"\n                  value={priorities.efficiency}\n                  onChange={(v) => setPriorities(p => ({ ...p, efficiency: v }))}\n                  description=\"Higher efficiency means lower utility bills over time\"\n                />\n                <PrioritySlider\n                  label=\"Warranty Length\"\n                  value={priorities.warranty}\n                  onChange={(v) => setPriorities(p => ({ ...p, warranty: v }))}\n                  description=\"Longer warranties provide peace of mind\"\n                />\n                <PrioritySlider\n                  label=\"Contractor Reputation\"\n                  value={priorities.reputation}\n                  onChange={(v) => setPriorities(p => ({ ...p, reputation: v }))}\n                  description=\"Experience, reviews, and certifications\"\n                />\n                <PrioritySlider\n                  label=\"Installation Timeline\"\n                  value={priorities.timeline}\n                  onChange={(v) => setPriorities(p => ({ ...p, timeline: v }))}\n                  description=\"How quickly can they complete the work?\"\n                />\n              </div>\n            )}\n          </div>\n\n          <div className=\"mt-4\">\n            <button\n              type=\"button\"\n              onClick={() => setShowProjectDetails(!showProjectDetails)}\n              className=\"w-full flex items-center justify-between text-left p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\"\n            >\n              <div>\n                <h3 className=\"font-medium text-gray-900\">Tell Us About Your Project</h3>\n                <p className=\"text-sm text-gray-500\">Share details for better recommendations (optional)</p>\n              </div>\n              <svg className={`w-5 h-5 text-gray-400 transition-transform ${showProjectDetails ? 'rotate-180' : ''}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n              </svg>\n            </button>\n\n            {showProjectDetails && (\n              <div className=\"mt-4 px-1\">\n                <div className=\"relative\">\n                  <textarea\n                    value={projectDetails}\n                    onChange={(e) => setProjectDetails(e.target.value)}\n                    placeholder=\"For example: My home is a 1950s ranch with poor insulation. I'm looking for a contractor who is patient with explaining technical details...\"\n                    rows={4}\n                    className=\"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent text-sm resize-none\"\n                  />\n                  {isSpeechSupported && (\n                    <button\n                      type=\"button\"\n                      onClick={toggleListening}\n                      className={`absolute right-3 top-3 p-2 rounded-full transition-colors ${\n                        isListening \n                          ? 'bg-red-100 text-red-600 animate-pulse' \n                          : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                      }`}\n                      title={isListening ? 'Stop dictation' : 'Start dictation'}\n                    >\n                      {isListening ? <MicOff className=\"w-4 h-4\" /> : <Mic className=\"w-4 h-4\" />}\n                    </button>\n                  )}\n                </div>\n                {speechError && (\n                  <p className=\"text-xs text-red-600 mt-1\">{speechError}</p>\n                )}\n                {isListening && (\n                  <p className=\"text-xs text-switch-green-600 mt-1 flex items-center gap-1\">\n                    <span className=\"w-2 h-2 bg-red-500 rounded-full animate-pulse\"></span>\n                    Listening... speak now\n                  </p>\n                )}\n              </div>\n            )}\n          </div>\n\n          <div className=\"mt-6 bg-gray-50 rounded-xl border border-gray-200 p-5\">\n            <label className=\"flex items-start gap-3 cursor-pointer group\">\n              <div className=\"pt-0.5\">\n                <input\n                  type=\"checkbox\"\n                  checked={dataSharingConsent}\n                  onChange={(e) => setDataSharingConsent(e.target.checked)}\n                  className=\"w-5 h-5 rounded border-gray-300 text-switch-green-600 focus:ring-switch-green-500 focus:ring-offset-0 cursor-pointer\"\n                />\n              </div>\n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <Users className=\"w-4 h-4 text-switch-green-600\" />\n                  <span className=\"font-medium text-gray-900\">\n                    Help other homeowners by sharing anonymized bid data\n                  </span>\n                </div>\n                <p className=\"text-sm text-gray-600 leading-relaxed\">\n                  Your pricing data helps others understand fair market rates.\n                  All personal and contractor details are removed.\n                </p>\n                <button\n                  type=\"button\"\n                  onClick={(e) => {\n                    e.preventDefault();\n                    setShowPrivacyDetails(!showPrivacyDetails);\n                  }}\n                  className=\"text-sm text-switch-green-600 hover:text-switch-green-700 mt-2 flex items-center gap-1\"\n                >\n                  <Shield className=\"w-3.5 h-3.5\" />\n                  {showPrivacyDetails ? 'Hide privacy details' : 'What data is shared?'}\n                </button>\n\n                {showPrivacyDetails && (\n                  <div className=\"mt-3 p-4 bg-white rounded-lg border border-gray-200 text-sm text-gray-600\">\n                    <p className=\"font-medium text-gray-900 mb-2\">Data that IS shared (anonymized):</p>\n                    <ul className=\"list-disc list-inside space-y-1 mb-4\">\n                      <li>Bid amounts and pricing breakdowns</li>\n                      <li>Equipment types, efficiency ratings, and specifications</li>\n                      <li>General location (ZIP code area only)</li>\n                    </ul>\n                    <p className=\"font-medium text-gray-900 mb-2\">Data that is NEVER shared:</p>\n                    <ul className=\"list-disc list-inside space-y-1\">\n                      <li>Your name, email, or contact information</li>\n                      <li>Contractor names or contact details</li>\n                      <li>Original PDF documents</li>\n                    </ul>\n                  </div>\n                )}\n              </div>\n            </label>\n          </div>\n\n          <div className=\"mt-8 pt-6 border-t border-gray-100\">\n            <div className=\"mb-4\">\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Email Address\n              </label>\n              <p className=\"text-xs text-gray-500 mb-2\">\n                Used to retrieve your analysis later and notify you when processing is complete\n              </p>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                <input\n                  id=\"email\"\n                  type=\"email\"\n                  value={notificationEmail}\n                  onChange={(e) => setNotificationEmail(e.target.value)}\n                  placeholder=\"you@example.com\"\n                  className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent\"\n                />\n              </div>\n            </div>\n\n            <button\n              onClick={handleAnalyze}\n              disabled={!canContinue || !isEmailValid}\n              className=\"btn btn-primary w-full flex items-center justify-center gap-2 py-3\"\n            >\n              Analyze My Bids\n              <ArrowRight className=\"w-4 h-4\" />\n            </button>\n\n            {(!canContinue || !isEmailValid) && (\n              <p className=\"text-center text-sm text-gray-500 mt-3\">\n                {!canContinue\n                  ? 'Upload at least 1 bid to continue'\n                  : 'Enter a valid email address to continue'}\n              </p>\n            )}\n          </div>\n        </div>\n\n        <p className=\"text-xs text-gray-400 text-center mt-6 pb-4\">\n          Powered by TheSwitchIsOn.org\n        </p>\n      </div>\n    </div>\n  );\n}\n","import { createContext, useContext, useState, useEffect, useCallback, useRef, ReactNode } from 'react';\nimport type { Project, ContractorBid, BidEquipment, BidScope, BidContractor, BidScore, ProjectRequirements, BidQuestion } from '../lib/types';\nimport {\n  createProject,\n  getProjectsWithPublicDemos,\n  getBidsByProject,\n  getEquipmentByBid,\n  getProjectRequirements,\n  getBidScope,\n  getBidContractor,\n  getBidScore,\n} from '../lib/database/bidsmartService';\nimport { supabase } from '../lib/supabaseClient';\n\nexport type Phase = 1 | 2 | 3 | 4;\nexport type PhaseStatus = 'locked' | 'active' | 'completed';\n\nconst PHASE_LABELS: Record<Phase, string> = {\n  1: 'GATHER',\n  2: 'COMPARE',\n  3: 'DECIDE',\n  4: 'VERIFY',\n};\n\ninterface BidWithEquipment {\n  bid: ContractorBid;\n  equipment: BidEquipment[];\n  scope?: BidScope | null;\n  contractor?: BidContractor | null;\n  scores?: BidScore | null;\n}\n\ninterface PhaseState {\n  currentPhase: Phase;\n  phaseStatus: Record<Phase, PhaseStatus>;\n  projectId: string | null;\n  project: Project | null;\n  bids: BidWithEquipment[];\n  requirements: ProjectRequirements | null;\n  questions: BidQuestion[];\n  questionsLoading: boolean;\n  loading: boolean;\n  error: string | null;\n  isDemoMode: boolean;\n}\n\ninterface PhaseContextValue extends PhaseState {\n  goToPhase: (phase: Phase) => void;\n  completePhase: (phase: Phase) => void;\n  canAccessPhase: (phase: Phase) => boolean;\n  refreshBids: () => Promise<void>;\n  refreshRequirements: () => Promise<void>;\n  refreshQuestions: () => Promise<void>;\n  getPhaseLabel: (phase: Phase) => string;\n  ensureProjectExists: () => Promise<string>;\n}\n\nconst PhaseContext = createContext<PhaseContextValue | null>(null);\n\nconst STORAGE_KEY = 'bidsmart_phase_state';\n\ninterface StoredPhaseState {\n  currentPhase: Phase;\n  projectId: string | null;\n  phaseStatus: Record<Phase, PhaseStatus>;\n}\n\nfunction loadStoredState(): StoredPhaseState | null {\n  try {\n    const stored = localStorage.getItem(STORAGE_KEY);\n    if (stored) {\n      return JSON.parse(stored);\n    }\n  } catch {\n  }\n  return null;\n}\n\nfunction saveStoredState(state: StoredPhaseState): void {\n  try {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(state));\n  } catch {\n  }\n}\n\ninterface PhaseProviderProps {\n  children: ReactNode;\n  userId: string;\n  initialProjectId?: string;\n}\n\nexport function PhaseProvider({ children, userId, initialProjectId }: PhaseProviderProps) {\n  const [state, setState] = useState<PhaseState>({\n    currentPhase: 1,\n    phaseStatus: {\n      1: 'active',\n      2: 'locked',\n      3: 'locked',\n      4: 'locked',\n    },\n    projectId: null,\n    project: null,\n    bids: [],\n    requirements: null,\n    questions: [],\n    questionsLoading: false,\n    loading: true,\n    error: null,\n    isDemoMode: false,\n  });\n\n  useEffect(() => {\n    async function initializeProject() {\n      try {\n        const storedState = loadStoredState();\n        const existingProjects = await getProjectsWithPublicDemos(userId);\n\n        let projectId: string | null = null;\n        let project: Project | null = null;\n\n        if (initialProjectId && initialProjectId !== 'new') {\n          const foundProject = existingProjects.find(p => p.id === initialProjectId);\n          if (foundProject) {\n            projectId = initialProjectId;\n            project = foundProject;\n          } else {\n            throw new Error('Project not found');\n          }\n        } else if (initialProjectId === 'new') {\n          projectId = null;\n          project = null;\n        } else if (storedState?.projectId && existingProjects.find(p => p.id === storedState.projectId)) {\n          projectId = storedState.projectId;\n          project = existingProjects.find(p => p.id === storedState.projectId)!;\n        } else if (existingProjects.length > 0) {\n          project = existingProjects[0];\n          projectId = project.id;\n        }\n\n        let bidsWithEquipment: BidWithEquipment[] = [];\n        let requirements: ProjectRequirements | null = null;\n        let questions: BidQuestion[] = [];\n\n        if (projectId) {\n          const bids = await getBidsByProject(projectId);\n          bidsWithEquipment = await Promise.all(\n            bids.map(async (bid) => ({\n              bid,\n              equipment: await getEquipmentByBid(bid.id),\n              scope: await getBidScope(bid.id).catch(() => null),\n              contractor: await getBidContractor(bid.id).catch(() => null),\n              scores: await getBidScore(bid.id).catch(() => null),\n            }))\n          );\n\n          requirements = await getProjectRequirements(projectId);\n\n          const { data: questionsData } = await supabase\n            .from('contractor_questions')\n            .select('*')\n            .in('bid_id', bids.map(b => b.id))\n            .order('display_order', { ascending: true });\n\n          questions = questionsData || [];\n        }\n\n        let currentPhase: Phase = 1;\n        let phaseStatus: Record<Phase, PhaseStatus> = {\n          1: 'active',\n          2: 'locked',\n          3: 'locked',\n          4: 'locked',\n        };\n\n        const projectIsReady =\n          project?.status === 'comparing' || project?.status === 'completed';\n\n        if (projectIsReady) {\n          // Workflow complete  unlock all phases, default to Compare\n          phaseStatus[1] = 'completed';\n          phaseStatus[2] = 'active';\n          phaseStatus[3] = 'active';\n          phaseStatus[4] = 'active';\n          // Use stored phase if user has navigated forward, otherwise default to Compare\n          currentPhase = (storedState && storedState.projectId === projectId && storedState.currentPhase >= 2)\n            ? storedState.currentPhase\n            : 2;\n        } else if (storedState && storedState.projectId === projectId) {\n          currentPhase = storedState.currentPhase;\n          phaseStatus = storedState.phaseStatus;\n        } else if (bidsWithEquipment.length >= 2 && requirements?.completed_at) {\n          phaseStatus[1] = 'completed';\n          phaseStatus[2] = 'active';\n          phaseStatus[3] = 'active';\n          phaseStatus[4] = 'active';\n        }\n\n        setState({\n          currentPhase,\n          phaseStatus,\n          projectId,\n          project,\n          bids: bidsWithEquipment,\n          requirements,\n          questions: questions || [],\n          questionsLoading: false,\n          loading: false,\n          error: null,\n          isDemoMode: project?.is_public_demo ?? false,\n        });\n\n        if (projectId) {\n          saveStoredState({ currentPhase, projectId, phaseStatus });\n        }\n      } catch (err) {\n        console.error('Failed to initialize project:', err);\n        setState(prev => ({\n          ...prev,\n          loading: false,\n          error: 'Failed to load project data',\n        }));\n      }\n    }\n\n    initializeProject();\n  }, [userId, initialProjectId]);\n\n  const canAccessPhase = useCallback((phase: Phase): boolean => {\n    return state.phaseStatus[phase] !== 'locked';\n  }, [state.phaseStatus]);\n\n  const goToPhase = useCallback((phase: Phase) => {\n    if (!canAccessPhase(phase)) return;\n\n    setState(prev => {\n      const newState = { ...prev, currentPhase: phase };\n      saveStoredState({\n        currentPhase: phase,\n        projectId: prev.projectId,\n        phaseStatus: prev.phaseStatus,\n      });\n      return newState;\n    });\n  }, [canAccessPhase]);\n\n  const completePhase = useCallback((phase: Phase) => {\n    setState(prev => {\n      const newPhaseStatus = { ...prev.phaseStatus };\n      newPhaseStatus[phase] = 'completed';\n\n      if (phase === 1) {\n        newPhaseStatus[2] = 'active';\n        newPhaseStatus[3] = 'active';\n        newPhaseStatus[4] = 'active';\n      } else {\n        const nextPhase = (phase + 1) as Phase;\n        if (nextPhase <= 4 && newPhaseStatus[nextPhase] === 'locked') {\n          newPhaseStatus[nextPhase] = 'active';\n        }\n      }\n\n      const nextPhase = (phase + 1) as Phase;\n      const newCurrentPhase = nextPhase <= 4 ? nextPhase : phase;\n\n      saveStoredState({\n        currentPhase: newCurrentPhase,\n        projectId: prev.projectId,\n        phaseStatus: newPhaseStatus,\n      });\n\n      return {\n        ...prev,\n        currentPhase: newCurrentPhase,\n        phaseStatus: newPhaseStatus,\n      };\n    });\n  }, []);\n\n  const refreshBids = useCallback(async () => {\n    if (!state.projectId) return;\n\n    const bids = await getBidsByProject(state.projectId);\n    const bidsWithEquipment = await Promise.all(\n      bids.map(async (bid) => ({\n        bid,\n        equipment: await getEquipmentByBid(bid.id),\n        scope: await getBidScope(bid.id).catch(() => null),\n        contractor: await getBidContractor(bid.id).catch(() => null),\n        scores: await getBidScore(bid.id).catch(() => null),\n      }))\n    );\n\n    setState(prev => ({ ...prev, bids: bidsWithEquipment }));\n  }, [state.projectId]);\n\n  const refreshRequirements = useCallback(async () => {\n    if (!state.projectId) return;\n\n    const requirements = await getProjectRequirements(state.projectId);\n    setState(prev => ({ ...prev, requirements }));\n  }, [state.projectId]);\n\n  const refreshQuestions = useCallback(async () => {\n    if (!state.projectId || state.bids.length === 0) return;\n\n    const { data: questions } = await supabase\n      .from('contractor_questions')\n      .select('*')\n      .in('bid_id', state.bids.map(b => b.bid.id))\n      .order('display_order', { ascending: true });\n\n    setState(prev => ({ ...prev, questions: questions || [] }));\n  }, [state.projectId, state.bids]);\n\n  const getPhaseLabel = useCallback((phase: Phase): string => {\n    return PHASE_LABELS[phase];\n  }, []);\n\n  const ensureProjectExists = useCallback(async (): Promise<string> => {\n    if (state.projectId) {\n      return state.projectId;\n    }\n\n    const project = await createProject(userId, {\n      project_name: 'My Heat Pump Project',\n      status: 'collecting_bids',\n    });\n\n    setState(prev => ({\n      ...prev,\n      projectId: project.id,\n      project,\n    }));\n\n    saveStoredState({\n      currentPhase: state.currentPhase,\n      projectId: project.id,\n      phaseStatus: state.phaseStatus,\n    });\n\n    return project.id;\n  }, [state.projectId, state.currentPhase, state.phaseStatus, userId]);\n\n  // Background question polling  starts after phase 1 completes, polls until questions arrive\n  const bidIdsRef = useRef<string[]>([]);\n  useEffect(() => {\n    bidIdsRef.current = state.bids.map(b => b.bid.id);\n  }, [state.bids]);\n\n  useEffect(() => {\n    if (state.phaseStatus[1] !== 'completed') return;\n    if (!state.projectId || state.bids.length === 0) return;\n    if (state.questions.length > 0) return;\n\n    setState(prev => ({ ...prev, questionsLoading: true }));\n\n    let attempts = 0;\n    const maxAttempts = 60; // 5 minutes at 5s intervals\n\n    const interval = setInterval(async () => {\n      attempts++;\n      const currentBidIds = bidIdsRef.current;\n      if (currentBidIds.length === 0) return;\n\n      try {\n        const { data: questions } = await supabase\n          .from('contractor_questions')\n          .select('*')\n          .in('bid_id', currentBidIds)\n          .order('display_order', { ascending: true });\n\n        if (questions && questions.length > 0) {\n          setState(prev => ({\n            ...prev,\n            questions,\n            questionsLoading: false,\n          }));\n          clearInterval(interval);\n        } else if (attempts >= maxAttempts) {\n          setState(prev => ({ ...prev, questionsLoading: false }));\n          clearInterval(interval);\n        }\n      } catch {\n        if (attempts >= maxAttempts) {\n          setState(prev => ({ ...prev, questionsLoading: false }));\n          clearInterval(interval);\n        }\n      }\n    }, 5000);\n\n    return () => clearInterval(interval);\n  }, [state.phaseStatus[1], state.projectId, state.bids.length, state.questions.length]);\n\n  // Delayed bid re-fetch  picks up late-arriving enrichment data (contractor, scores)\n  useEffect(() => {\n    if (state.phaseStatus[1] !== 'completed') return;\n    if (!state.projectId) return;\n\n    const timer = setTimeout(() => {\n      refreshBids();\n    }, 15000);\n\n    return () => clearTimeout(timer);\n  }, [state.phaseStatus[1], state.projectId]);\n\n  const value: PhaseContextValue = {\n    ...state,\n    goToPhase,\n    completePhase,\n    canAccessPhase,\n    refreshBids,\n    refreshRequirements,\n    refreshQuestions,\n    getPhaseLabel,\n    ensureProjectExists,\n  };\n\n  return (\n    <PhaseContext.Provider value={value}>\n      {children}\n    </PhaseContext.Provider>\n  );\n}\n\nexport function usePhase(): PhaseContextValue {\n  const context = useContext(PhaseContext);\n  if (!context) {\n    throw new Error('usePhase must be used within a PhaseProvider');\n  }\n  return context;\n}\n","import { ReactNode } from 'react';\nimport { Check, ChevronRight } from 'lucide-react';\nimport { usePhase, Phase } from '../context/PhaseContext';\nimport SwitchLogo from '../assets/switchlogo.svg';\n\ninterface PhaseLayoutProps {\n  children: ReactNode;\n  onNavigateHome?: () => void;\n  projectName?: string;\n  isDemoMode?: boolean;\n}\n\nconst PHASES: { phase: Phase; label: string }[] = [\n  { phase: 1, label: 'GATHER' },\n  { phase: 2, label: 'COMPARE' },\n  { phase: 3, label: 'DECIDE' },\n  { phase: 4, label: 'VERIFY' },\n];\n\nexport function PhaseLayout({ children, onNavigateHome, projectName, isDemoMode = false }: PhaseLayoutProps) {\n  const { currentPhase, phaseStatus, goToPhase, canAccessPhase, questionsLoading } = usePhase();\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col\">\n      <div className=\"bg-white border-b border-gray-200 sticky top-0 z-10\">\n        <div className=\"max-w-4xl mx-auto px-4 py-4\">\n          {onNavigateHome && (\n            <div className=\"flex items-center gap-2 mb-4 pb-3 border-b border-gray-100\">\n              <button\n                onClick={onNavigateHome}\n                className=\"flex items-center gap-2 text-gray-600 hover:text-switch-green-600 transition-colors group min-h-[44px] -my-2 py-2\"\n                aria-label=\"Return to Bid Compare Dashboard\"\n              >\n                <img src={SwitchLogo} alt=\"Switch Is On\" className=\"w-8 h-8\" />\n                <span className=\"text-sm font-medium hidden sm:inline\">Dashboard</span>\n              </button>\n              <ChevronRight className=\"w-4 h-4 text-gray-300\" />\n              <span className=\"text-sm font-medium text-gray-900 truncate max-w-[200px] sm:max-w-none\">\n                {projectName || 'Current Project'}\n              </span>\n              {isDemoMode && (\n                <span className=\"text-xs px-2 py-0.5 rounded-full font-medium bg-teal-100 text-teal-700 ml-2 flex-shrink-0\">\n                  Demo\n                </span>\n              )}\n            </div>\n          )}\n          <div className=\"flex items-center justify-between\">\n            {PHASES.map((item, index) => {\n              const status = phaseStatus[item.phase];\n              const isActive = currentPhase === item.phase;\n              const isClickable = canAccessPhase(item.phase);\n\n              return (\n                <div key={item.phase} className=\"flex items-center flex-1\">\n                  <button\n                    onClick={() => isClickable && goToPhase(item.phase)}\n                    disabled={!isClickable}\n                    className={`\n                      flex items-center gap-2 transition-all min-w-0\n                      ${isClickable ? 'cursor-pointer' : 'cursor-not-allowed'}\n                      ${isActive ? 'opacity-100' : isClickable ? 'opacity-70 hover:opacity-100' : 'opacity-40'}\n                    `}\n                    aria-label={`${item.label} (Phase ${item.phase})`}\n                  >\n                    <div\n                      className={`\n                        w-10 h-10 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-sm font-semibold transition-colors flex-shrink-0\n                        ${status === 'completed' ? 'bg-switch-green-600 text-white' : ''}\n                        ${status === 'active' && isActive ? 'bg-switch-green-600 text-white' : ''}\n                        ${status === 'active' && !isActive ? 'bg-switch-green-100 text-switch-green-700 border-2 border-switch-green-600' : ''}\n                        ${status === 'locked' ? 'bg-gray-200 text-gray-400' : ''}\n                      `}\n                    >\n                      {status === 'completed' ? (\n                        <Check className=\"w-4 h-4\" />\n                      ) : (\n                        item.phase\n                      )}\n                    </div>\n                    <span\n                      className={`\n                        text-xs sm:text-sm font-medium hidden md:block truncate\n                        ${isActive ? 'text-gray-900' : 'text-gray-500'}\n                      `}\n                    >\n                      {item.label}\n                    </span>\n                    {item.phase === 3 && questionsLoading && (\n                      <span className=\"relative flex h-2 w-2 flex-shrink-0\">\n                        <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-switch-green-400 opacity-75\"></span>\n                        <span className=\"relative inline-flex rounded-full h-2 w-2 bg-switch-green-500\"></span>\n                      </span>\n                    )}\n                  </button>\n\n                  {index < PHASES.length - 1 && (\n                    <div className=\"flex-1 mx-2 sm:mx-3 min-w-[12px]\">\n                      <div\n                        className={`\n                          h-0.5 transition-colors\n                          ${phaseStatus[(index + 2) as Phase] !== 'locked' || phaseStatus[(index + 1) as Phase] === 'completed'\n                            ? 'bg-switch-green-600'\n                            : 'bg-gray-200'\n                          }\n                        `}\n                      />\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n\n          <div className=\"mt-3\">\n            <div className=\"h-1 bg-gray-100 rounded-full overflow-hidden\">\n              <div\n                className=\"h-full bg-switch-green-600 transition-all duration-500\"\n                style={{\n                  width: `${((currentPhase - 1) / 3) * 100 + (phaseStatus[currentPhase] === 'completed' ? 25 : 0)}%`,\n                }}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <main className=\"flex-1 max-w-4xl w-full mx-auto px-4 py-6\">\n        {children}\n      </main>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { Mail, Clock, Upload, Zap, CheckCircle2, Loader2, Bell, BellOff, FlaskConical, MapPin } from 'lucide-react';\n\ninterface AnalysisSubmissionInterstitialProps {\n  email: string;\n  onEmailChange: (email: string) => void;\n  zip: string;\n  onZipChange: (zip: string) => void;\n  notifyOnCompletion: boolean;\n  onNotifyChange: (notify: boolean) => void;\n  enableSound: boolean;\n  onEnableSoundChange: (enable: boolean) => void;\n  onRequestNotificationPermission: () => Promise<string>;\n  notificationPermission: string;\n  bidCount: number;\n  onSaveAndContinue: () => void;\n  isSaving: boolean;\n}\n\nexport function AnalysisSubmissionInterstitial({\n  email,\n  onEmailChange,\n  zip,\n  onZipChange,\n  notifyOnCompletion,\n  onNotifyChange,\n  enableSound,\n  onEnableSoundChange,\n  onRequestNotificationPermission,\n  notificationPermission,\n  bidCount,\n  onSaveAndContinue,\n  isSaving,\n}: AnalysisSubmissionInterstitialProps) {\n  const [emailError, setEmailError] = useState('');\n  const [showPermissionInfo, setShowPermissionInfo] = useState(false);\n\n  const validateEmail = (value: string) => {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!value.trim()) {\n      setEmailError('Email is required');\n      return false;\n    }\n    if (!emailRegex.test(value.trim())) {\n      setEmailError('Please enter a valid email address');\n      return false;\n    }\n    setEmailError('');\n    return true;\n  };\n\n  useEffect(() => {\n    if (email) {\n      validateEmail(email);\n    }\n  }, [email]);\n\n  const handleEmailChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    onEmailChange(value);\n    if (value) {\n      validateEmail(value);\n    }\n  };\n\n  const handleContinue = () => {\n    if (validateEmail(email)) {\n      onSaveAndContinue();\n    }\n  };\n\n  const isValid = email.trim() && !emailError;\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-switch-green-50 via-white to-blue-50 flex items-center justify-center p-4\">\n      <div className=\"max-w-2xl w-full\">\n        {/* Main Card */}\n        <div className=\"bg-white rounded-2xl shadow-xl border border-gray-200 overflow-hidden\">\n          {/* Header */}\n          <div className=\"bg-gradient-to-r from-switch-green-600 to-switch-green-700 px-8 py-6 text-white\">\n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center\">\n                <Zap className=\"w-6 h-6\" />\n              </div>\n              <div>\n                <h1 className=\"text-2xl font-bold\">Starting Your Analysis</h1>\n                <p className=\"text-switch-green-100 text-sm\">\n                  {bidCount} bid{bidCount !== 1 ? 's' : ''} ready to compare\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Content */}\n          <div className=\"px-8 py-6 space-y-6\">\n            {/* Beta Timing Notice */}\n            <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-4\">\n              <div className=\"flex items-start gap-3\">\n                <FlaskConical className=\"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5\" />\n                <div className=\"flex-1\">\n                  <p className=\"text-sm font-semibold text-amber-900 mb-1\">\n                    Beta Processing Time\n                  </p>\n                  <p className=\"text-sm text-amber-800\">\n                    Analysis typically takes <strong>10-30 minutes</strong> during our beta phase. \n                    You can leave this page and we'll email you when ready.\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* What Happens Next */}\n            <div>\n              <h3 className=\"text-sm font-semibold text-gray-900 mb-3\">What happens next:</h3>\n              <div className=\"space-y-3\">\n                <div className=\"flex items-start gap-3\">\n                  <div className=\"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5\">\n                    <Upload className=\"w-3.5 h-3.5 text-blue-600\" />\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium text-gray-900\">Upload & Secure</p>\n                    <p className=\"text-xs text-gray-600\">Your PDFs are uploaded securely to our servers</p>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-3\">\n                  <div className=\"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5\">\n                    <Zap className=\"w-3.5 h-3.5 text-purple-600\" />\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium text-gray-900\">AI Extraction</p>\n                    <p className=\"text-xs text-gray-600\">Our AI extracts pricing, equipment, and contractor details</p>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-3\">\n                  <div className=\"w-6 h-6 bg-switch-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5\">\n                    <CheckCircle2 className=\"w-3.5 h-3.5 text-switch-green-600\" />\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium text-gray-900\">Results Ready</p>\n                    <p className=\"text-xs text-gray-600\">Compare bids side-by-side with personalized insights</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Email Input */}\n            <div>\n              <label htmlFor=\"notification-email\" className=\"block text-sm font-semibold text-gray-900 mb-2\">\n                Email Address\n              </label>\n              <p className=\"text-xs text-gray-600 mb-3\">\n                We'll notify you when your analysis is complete\n              </p>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                <input\n                  id=\"notification-email\"\n                  type=\"email\"\n                  value={email}\n                  onChange={handleEmailChange}\n                  placeholder=\"you@example.com\"\n                  className={`w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent ${\n                    emailError ? 'border-red-300 bg-red-50' : 'border-gray-300'\n                  }`}\n                  disabled={isSaving}\n                />\n              </div>\n              {emailError && (\n                <p className=\"text-sm text-red-600 mt-1\">{emailError}</p>\n              )}\n            </div>\n\n            {/* Zip Code Input */}\n            <div>\n              <label htmlFor=\"property-zip\" className=\"block text-sm font-semibold text-gray-900 mb-2\">\n                Property Zip Code\n                <span className=\"text-gray-400 font-normal ml-1\">(optional)</span>\n              </label>\n              <p className=\"text-xs text-gray-600 mb-3\">\n                Used to find available rebates and incentives in your area\n              </p>\n              <div className=\"relative\">\n                <MapPin className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n                <input\n                  id=\"property-zip\"\n                  type=\"text\"\n                  inputMode=\"numeric\"\n                  value={zip}\n                  onChange={(e) => onZipChange(e.target.value.replace(/\\D/g, '').slice(0, 5))}\n                  placeholder=\"e.g. 90210\"\n                  className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent\"\n                  maxLength={5}\n                  disabled={isSaving}\n                />\n              </div>\n            </div>\n\n            {/* Notification Preferences */}\n            <div className=\"space-y-3 bg-gray-50 rounded-xl p-4\">\n              <h3 className=\"text-sm font-semibold text-gray-900\">Notification Preferences</h3>\n              \n              {/* Email Notification Toggle */}\n              <label className=\"flex items-start gap-3 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={notifyOnCompletion}\n                  onChange={(e) => onNotifyChange(e.target.checked)}\n                  className=\"w-5 h-5 mt-0.5 rounded border-gray-300 text-switch-green-600 focus:ring-switch-green-500\"\n                  disabled={isSaving}\n                />\n                <div className=\"flex-1\">\n                  <span className=\"text-sm font-medium text-gray-900\">\n                    Email me when analysis is complete\n                  </span>\n                  <p className=\"text-xs text-gray-600 mt-0.5\">\n                    Recommended - you can close this page and return later\n                  </p>\n                </div>\n              </label>\n\n              {/* Sound Notification Toggle */}\n              <label className=\"flex items-start gap-3 cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={enableSound}\n                  onChange={(e) => onEnableSoundChange(e.target.checked)}\n                  className=\"w-5 h-5 mt-0.5 rounded border-gray-300 text-switch-green-600 focus:ring-switch-green-500\"\n                  disabled={isSaving}\n                />\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-2\">\n                    {enableSound ? (\n                      <Bell className=\"w-4 h-4 text-gray-600\" />\n                    ) : (\n                      <BellOff className=\"w-4 h-4 text-gray-400\" />\n                    )}\n                    <span className=\"text-sm font-medium text-gray-900\">\n                      Play sound when complete\n                    </span>\n                  </div>\n                  <p className=\"text-xs text-gray-600 mt-0.5\">\n                    One-time alert beep (only if you stay on this page)\n                  </p>\n                </div>\n              </label>\n\n              {/* Browser Notification Permission */}\n              {notificationPermission !== 'granted' && notificationPermission !== 'denied' && (\n                <div className=\"pt-2 border-t border-gray-200\">\n                  <button\n                    onClick={async () => {\n                      const result = await onRequestNotificationPermission();\n                      if (result === 'granted') {\n                        setShowPermissionInfo(false);\n                      }\n                    }}\n                    className=\"text-sm text-switch-green-600 hover:text-switch-green-700 font-medium flex items-center gap-2\"\n                    disabled={isSaving}\n                  >\n                    <Bell className=\"w-4 h-4\" />\n                    Enable desktop notifications (optional)\n                  </button>\n                  {showPermissionInfo && (\n                    <p className=\"text-xs text-gray-600 mt-2\">\n                      Desktop notifications work even when this tab is in the background\n                    </p>\n                  )}\n                </div>\n              )}\n\n              {notificationPermission === 'granted' && (\n                <div className=\"flex items-center gap-2 text-xs text-switch-green-700 bg-switch-green-50 rounded px-3 py-2\">\n                  <CheckCircle2 className=\"w-4 h-4\" />\n                  Desktop notifications enabled\n                </div>\n              )}\n            </div>\n\n            {/* Info Box */}\n            <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4\">\n              <div className=\"flex items-start gap-3\">\n                <Clock className=\"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5\" />\n                <div>\n                  <p className=\"text-sm font-medium text-blue-900 mb-1\">\n                    You can leave this page\n                  </p>\n                  <p className=\"text-sm text-blue-800\">\n                    Your analysis will continue in the background. Use your email address to find your results on the home page when you return.\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Footer */}\n          <div className=\"px-8 py-6 bg-gray-50 border-t border-gray-200\">\n            <button\n              onClick={handleContinue}\n              disabled={!isValid || isSaving}\n              className=\"w-full btn btn-primary py-4 text-base font-semibold\"\n            >\n              {isSaving ? (\n                <>\n                  <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  Starting Analysis...\n                </>\n              ) : (\n                <>\n                  <Zap className=\"w-5 h-5\" />\n                  Start Analysis\n                </>\n              )}\n            </button>\n            <p className=\"text-xs text-center text-gray-500 mt-3\">\n              By continuing, your bids will be uploaded and analyzed. This typically takes 10-30 minutes.\n            </p>\n          </div>\n        </div>\n\n        {/* Additional Info */}\n        <div className=\"text-center mt-6\">\n          <p className=\"text-sm text-gray-600\">\n            Questions? Your data is secure and private. \n            <button className=\"text-switch-green-600 hover:text-switch-green-700 ml-1 underline\">\n              Learn more\n            </button>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useCallback, useRef, useState } from 'react';\n\ninterface NotificationOptions {\n  title: string;\n  body: string;\n  playSound?: boolean;\n  showBrowserNotification?: boolean;\n}\n\nexport function useAnalysisNotification() {\n  const audioRef = useRef<HTMLAudioElement | null>(null);\n  const lastNotifiedProjectRef = useRef<string | null>(null);\n  const [soundEnabled, setSoundEnabled] = useState(true);\n\n  // Initialize audio element with a simple beep sound\n  const initAudio = useCallback(() => {\n    if (!audioRef.current) {\n      // Use a simple notification beep sound (data URL)\n      // This is a short, pleasant notification tone\n      const beepSound = 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIGGe77eeeTRAMUKfj8LZjHAY4ktfyzHksBSR3x/DdkEAKFF606+uoVRQKRp/g8r5sIQUrgs7y2Yk2CBhnu+3nnk0QDFCn4/C2YxwGOJLX8sx5LAUkd8fw3ZBBChRetevrqFUUCkaf4PK+bCEFK4LO8tmJNggYZ7vt555NEAxQp+PwtmMcBjiS1/LMeSwFJHfH8N2QQQoUXrXr66hVFApGn+DyvmwhBSuCzvLZiTYIGGe77eeeTRAMUKfj8LZjHAY4ktfyzHksBSR3x/DdkEEKFF616+uoVRQKRp/g8r5sIQUrgs7y2Yk2CBhnu+3nnk0QDFCn4/C2YxwGOJLX8sx5LAUkd8fw3ZBBChRetevrqFUUCkaf4PK+bCEFK4LO8tmJNggYZ7vt555NEAxQp+PwtmMcBjiS1/LMeSwFJHfH8N2QQQoUXrXr66hVFApGn+DyvmwhBSuCzvLZiTYIGGe77eeeTRAMUKfj8LZjHAY4ktfyzHksBSR3x/DdkEEKFF616+uoVRQKRp/g8r5sIQUrgs7y2Yk2CBhnu+3nnk0QDFCn4/C2YxwGOJLX8sx5LAUkd8fw3ZBBChRetevrqFUUCkaf4PK+bCEFK4LO8tmJNggYZ7vt555NEAxQp+PwtmMcBjiS1/LMeSwFJHfH8N2QQQoUXrXr66hVFApGn+DyvmwhBSuCzvLZiTYIGGe77eeeTRAMUKfj8LZjHAY4ktfyzHksBSR3x/DdkEEKFF616+uoVRQKRp/g8r5s';\n      audioRef.current = new Audio(beepSound);\n      audioRef.current.volume = 0.6; // 60% volume\n    }\n  }, []);\n\n  // Play sound (with fallback)\n  const playSound = useCallback(async () => {\n    if (!soundEnabled) return false;\n    \n    initAudio();\n    try {\n      await audioRef.current?.play();\n      return true;\n    } catch (err) {\n      console.log('Audio playback blocked:', err);\n      return false;\n    }\n  }, [initAudio, soundEnabled]);\n\n  // Request browser notification permission\n  const requestPermission = useCallback(async () => {\n    if (!('Notification' in window)) {\n      return 'unsupported';\n    }\n    \n    if (Notification.permission === 'granted') {\n      return 'granted';\n    }\n    \n    if (Notification.permission === 'denied') {\n      return 'denied';\n    }\n    \n    const permission = await Notification.requestPermission();\n    return permission;\n  }, []);\n\n  // Show browser notification\n  const showBrowserNotification = useCallback((title: string, body: string) => {\n    if (Notification.permission === 'granted') {\n      const notification = new Notification(title, {\n        body,\n        icon: '/favicon.svg',\n        badge: '/favicon.svg',\n        tag: 'analysis-complete',\n        requireInteraction: false,\n        silent: !soundEnabled, // Use system sound if enabled\n      });\n\n      // Auto-close after 10 seconds\n      setTimeout(() => notification.close(), 10000);\n\n      // Focus window when clicked\n      notification.onclick = () => {\n        window.focus();\n        notification.close();\n      };\n\n      return true;\n    }\n    return false;\n  }, [soundEnabled]);\n\n  // Main notification function (hybrid approach)\n  const notify = useCallback(async (\n    projectId: string,\n    options: NotificationOptions\n  ) => {\n    // Prevent duplicate notifications\n    if (lastNotifiedProjectRef.current === projectId) {\n      return;\n    }\n    lastNotifiedProjectRef.current = projectId;\n\n    const { \n      title, \n      body, \n      playSound: shouldPlaySound = true, \n      showBrowserNotification: shouldShowBrowser = true \n    } = options;\n\n    // 1. Try playing sound (if enabled)\n    if (shouldPlaySound && soundEnabled) {\n      await playSound();\n    }\n\n    // 2. Show browser notification if permission granted\n    if (shouldShowBrowser) {\n      showBrowserNotification(title, body);\n    }\n\n    // Note: Visual toast should be handled by the component\n  }, [playSound, showBrowserNotification, soundEnabled]);\n\n  // Reset notification tracking (for new analysis)\n  const reset = useCallback(() => {\n    lastNotifiedProjectRef.current = null;\n  }, []);\n\n  // Toggle sound on/off\n  const toggleSound = useCallback((enabled: boolean) => {\n    setSoundEnabled(enabled);\n  }, []);\n\n  return {\n    notify,\n    playSound,\n    requestPermission,\n    showBrowserNotification,\n    reset,\n    toggleSound,\n    soundEnabled,\n    isSupported: 'Notification' in window,\n    permission: typeof Notification !== 'undefined' ? Notification.permission : 'unsupported',\n  };\n}\n","import { CheckCircle2, X } from 'lucide-react';\nimport { useEffect, useState } from 'react';\n\ninterface NotificationToastProps {\n  show: boolean;\n  title: string;\n  message: string;\n  onClose: () => void;\n  autoClose?: number; // milliseconds\n}\n\nexport function NotificationToast({ \n  show, \n  title, \n  message, \n  onClose, \n  autoClose = 8000 \n}: NotificationToastProps) {\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    if (show) {\n      setIsVisible(true);\n      if (autoClose) {\n        const timer = setTimeout(() => {\n          setIsVisible(false);\n          setTimeout(onClose, 300); // Wait for animation\n        }, autoClose);\n        return () => clearTimeout(timer);\n      }\n    }\n  }, [show, autoClose, onClose]);\n\n  if (!show && !isVisible) return null;\n\n  return (\n    <div className={`\n      fixed top-4 right-4 z-50 max-w-sm w-full\n      transform transition-all duration-300 ease-out\n      ${isVisible ? 'translate-x-0 opacity-100' : 'translate-x-full opacity-0'}\n    `}>\n      <div className=\"bg-white rounded-xl shadow-lg border border-gray-200 p-4\">\n        <div className=\"flex items-start gap-3\">\n          <div className=\"w-10 h-10 bg-switch-green-100 rounded-full flex items-center justify-center flex-shrink-0\">\n            <CheckCircle2 className=\"w-6 h-6 text-switch-green-600\" />\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <h3 className=\"text-sm font-semibold text-gray-900\">{title}</h3>\n            <p className=\"text-sm text-gray-600 mt-1\">{message}</p>\n          </div>\n          <button\n            onClick={() => {\n              setIsVisible(false);\n              setTimeout(onClose, 300);\n            }}\n            className=\"p-1 hover:bg-gray-100 rounded flex-shrink-0\"\n            aria-label=\"Close notification\"\n          >\n            <X className=\"w-4 h-4 text-gray-500\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect, useRef, useCallback } from 'react';\nimport { Upload, FileText, CheckCircle2, Clock, AlertCircle, ArrowRight, Users, Shield, X, Loader2, Info, Mail, FlaskConical, Save, Mic, MicOff } from 'lucide-react';\nimport { usePhase } from '../../context/PhaseContext';\nimport { useUser } from '../../hooks/useUser';\nimport { saveProjectRequirements, updateProjectDataSharingConsent, updateProject, validatePdfFile, updateProjectNotificationSettings } from '../../lib/database/bidsmartService';\nimport { uploadPdfFile, startBatchAnalysis, pollBatchExtractionStatus, type BatchExtractionStatus, type DocumentForAnalysis } from '../../lib/services/mindpalService';\nimport { AnalysisSubmissionInterstitial } from '../AnalysisSubmissionInterstitial';\nimport { IncentivesPanel } from '../IncentivesPanel';\nimport { useAnalysisNotification } from '../../hooks/useAnalysisNotification';\nimport { NotificationToast } from '../NotificationToast';\nimport { zipToState } from '../../lib/utils/zipToState';\nimport { useSpeechToText } from '../../hooks/useSpeechToText';\n\ninterface PrioritySliderProps {\n  label: string;\n  value: number;\n  onChange: (value: number) => void;\n  description: string;\n}\n\nfunction PrioritySlider({ label, value, onChange, description }: PrioritySliderProps) {\n  return (\n    <div className=\"space-y-2\">\n      <div className=\"flex items-center justify-between\">\n        <label className=\"text-sm font-medium text-gray-700\">{label}</label>\n        <span className=\"text-sm text-gray-500\">{value}/5</span>\n      </div>\n      <input\n        type=\"range\"\n        min=\"1\"\n        max=\"5\"\n        value={value}\n        onChange={(e) => onChange(parseInt(e.target.value))}\n        className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-switch-green-600\"\n      />\n      <p className=\"text-xs text-gray-500\">{description}</p>\n    </div>\n  );\n}\n\ninterface UploadedPdf {\n  id: string;\n  file: File;\n  pdfUploadId?: string;\n  bidId?: string;\n  storagePath?: string;\n  status: 'pending' | 'uploading' | 'uploaded' | 'error';\n  progress: number;\n  error?: string;\n}\n\ntype AnalysisState = 'idle' | 'submitting' | 'uploading' | 'analyzing' | 'complete' | 'error' | 'timeout';\n\nexport function GatherPhase() {\n  const { projectId, project, bids, requirements, completePhase, refreshRequirements, refreshBids, ensureProjectExists } = usePhase();\n  const { user } = useUser();\n\n  const [priorities, setPriorities] = useState({\n    price: requirements?.priority_price ?? 3,\n    efficiency: requirements?.priority_efficiency ?? 3,\n    warranty: requirements?.priority_warranty ?? 3,\n    reputation: requirements?.priority_reputation ?? 3,\n    timeline: requirements?.priority_timeline ?? 3,\n  });\n\n  const [uploadedPdfs, setUploadedPdfs] = useState<UploadedPdf[]>([]);\n  const [analysisState, setAnalysisState] = useState<AnalysisState>('idle');\n  const [analysisProgress, setAnalysisProgress] = useState<BatchExtractionStatus | null>(null);\n  const [analysisError, setAnalysisError] = useState<string | null>(null);\n  const [analysisElapsedSeconds, setAnalysisElapsedSeconds] = useState(0);\n  const [dragActive, setDragActive] = useState(false);\n  const analysisTimerRef = useRef<ReturnType<typeof setInterval> | null>(null);\n  const [dataSharingConsent, setDataSharingConsent] = useState(project?.data_sharing_consent ?? false);\n  const [showPrivacyDetails, setShowPrivacyDetails] = useState(false);\n  const [projectDetails, setProjectDetails] = useState(project?.project_details ?? '');\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [notificationEmail, setNotificationEmail] = useState(project?.notification_email ?? '');\n  const [notifyOnCompletion, setNotifyOnCompletion] = useState(project?.notify_on_completion ?? true);\n  const [savingNotification, setSavingNotification] = useState(false);\n  const [notificationSaved, setNotificationSaved] = useState(false);\n  const [enableSound, setEnableSound] = useState(true);\n  const [showCompletionToast, setShowCompletionToast] = useState(false);\n  const [zipCode, setZipCode] = useState('');\n  const { notify, requestPermission, permission, toggleSound } = useAnalysisNotification();\n\n  // Speech-to-text for project details\n  const { \n    isListening, \n    isSupported: isSpeechSupported, \n    toggleListening,\n    error: speechError \n  } = useSpeechToText({\n    onResult: (transcript) => {\n      setProjectDetails((prev) => prev + (prev ? ' ' : '') + transcript);\n    },\n  });\n\n  useEffect(() => {\n    if (requirements) {\n      setPriorities({\n        price: requirements.priority_price ?? 3,\n        efficiency: requirements.priority_efficiency ?? 3,\n        warranty: requirements.priority_warranty ?? 3,\n        reputation: requirements.priority_reputation ?? 3,\n        timeline: requirements.priority_timeline ?? 3,\n      });\n    }\n  }, [requirements]);\n\n  useEffect(() => {\n    if (project) {\n      setDataSharingConsent(project.data_sharing_consent ?? false);\n      setProjectDetails(project.project_details ?? '');\n      if (project.notification_email) {\n        setNotificationEmail(project.notification_email);\n      }\n      setNotifyOnCompletion(project.notify_on_completion ?? true);\n    }\n  }, [project]);\n\n  useEffect(() => {\n    if (user?.email && !notificationEmail) {\n      setNotificationEmail(user.email);\n    }\n  }, [user, notificationEmail]);\n\n  useEffect(() => {\n    if (analysisState === 'analyzing') {\n      setAnalysisElapsedSeconds(0);\n      analysisTimerRef.current = setInterval(() => {\n        setAnalysisElapsedSeconds(prev => prev + 1);\n      }, 1000);\n    } else {\n      if (analysisTimerRef.current) {\n        clearInterval(analysisTimerRef.current);\n        analysisTimerRef.current = null;\n      }\n    }\n    return () => {\n      if (analysisTimerRef.current) {\n        clearInterval(analysisTimerRef.current);\n      }\n    };\n  }, [analysisState]);\n\n  const existingBidsCount = bids.filter(b => b.bid.status === 'completed' && b.bid.contractor_name && b.bid.contractor_name !== 'TBD').length;\n  const validPendingCount = uploadedPdfs.filter(p => p.status === 'pending' || p.status === 'uploaded').length;\n  const totalBidCount = validPendingCount + existingBidsCount;\n  const canContinue = totalBidCount >= 1;\n\n  const handleFiles = useCallback(async (files: FileList | File[]) => {\n    const fileArray = Array.from(files);\n    const validFiles: UploadedPdf[] = [];\n\n    for (const file of fileArray) {\n      const validationError = validatePdfFile(file);\n      if (validationError) {\n        validFiles.push({\n          id: crypto.randomUUID(),\n          file,\n          status: 'error',\n          progress: 0,\n          error: validationError.message,\n        });\n      } else {\n        validFiles.push({\n          id: crypto.randomUUID(),\n          file,\n          status: 'pending',\n          progress: 0,\n        });\n      }\n    }\n\n    setUploadedPdfs(prev => [...prev, ...validFiles]);\n  }, []);\n\n  const handleDrag = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n      handleFiles(e.dataTransfer.files);\n    }\n  };\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      handleFiles(e.target.files);\n    }\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const removeFile = (id: string) => {\n    setUploadedPdfs(prev => prev.filter(p => p.id !== id));\n  };\n\n\n  const handleContinue = () => {\n    if (!canContinue) return;\n    // Show interstitial instead of starting immediately\n    setAnalysisState('submitting');\n  };\n\n  const handleConfirmSubmission = async () => {\n    setAnalysisError(null);\n\n    try {\n      const activeProjectId = projectId || await ensureProjectExists();\n\n      await saveProjectRequirements(activeProjectId, {\n        priority_price: priorities.price,\n        priority_efficiency: priorities.efficiency,\n        priority_warranty: priorities.warranty,\n        priority_reputation: priorities.reputation,\n        priority_timeline: priorities.timeline,\n      });\n      await updateProjectDataSharingConsent(activeProjectId, dataSharingConsent);\n      if (projectDetails.trim()) {\n        await updateProject(activeProjectId, { project_details: projectDetails });\n      }\n\n      if (uploadedPdfs.length > 0) {\n        setAnalysisState('uploading');\n\n        if (!user?.email) {\n          setAnalysisState('error');\n          setAnalysisError('User email not found');\n          return;\n        }\n\n        // Get all files from uploadedPdfs\n        const files = uploadedPdfs.map(p => p.file);\n\n        if (files.length < 1) {\n          setAnalysisState('error');\n          setAnalysisError('Please upload at least 1 bid PDF to analyze.');\n          return;\n        }\n\n        setAnalysisState('uploading');\n\n        // Generate a shared request_id for this batch\n        const batchRequestId = crypto.randomUUID();\n\n        // Upload each PDF to Supabase Storage + create bid stubs\n        const pdfUploadIds: string[] = [];\n        const documents: DocumentForAnalysis[] = [];\n        for (let i = 0; i < files.length; i++) {\n          const file = files[i];\n          console.log(`Uploading ${file.name} (${i + 1}/${files.length})`);\n\n          const uploadResult = await uploadPdfFile(activeProjectId, file, batchRequestId);\n          if (uploadResult.error || !uploadResult.pdfUploadId) {\n            setAnalysisState('error');\n            setAnalysisError(uploadResult.error || `Failed to upload ${file.name}`);\n            return;\n          }\n          pdfUploadIds.push(uploadResult.pdfUploadId);\n\n          // V2: Track bid_id  pdf_upload_id pairing for MindPal\n          if (uploadResult.bidId) {\n            documents.push({\n              bid_id: uploadResult.bidId,\n              pdf_upload_id: uploadResult.pdfUploadId,\n            });\n          }\n        }\n\n        console.log('All PDFs uploaded, starting analysis with IDs:', pdfUploadIds, 'documents:', documents);\n        setAnalysisState('analyzing');\n\n        // Start analysis with V2 documents array (bid_id + pdf_upload_id pairs)\n        const analysisResult = await startBatchAnalysis(\n          activeProjectId,\n          pdfUploadIds,\n          priorities,\n          user.email,\n          projectDetails,\n          documents.length > 0 ? documents : undefined\n        );\n\n        if (!analysisResult.success) {\n          setAnalysisState('error');\n          setAnalysisError(analysisResult.error || 'Failed to start analysis');\n          return;\n        }\n\n        const pollResult = await pollBatchExtractionStatus(activeProjectId, {\n          intervalMs: 3000,\n          maxAttempts: 600, // Extended to 30 minutes for beta\n          onProgress: (status) => {\n            setAnalysisProgress(status);\n          },\n        });\n\n        await refreshBids();\n\n        if (!pollResult.allSuccessful && pollResult.processingPdfs > 0) {\n          setAnalysisState('timeout');\n          return;\n        }\n\n        setAnalysisState('complete');\n        \n        // Trigger notifications on completion\n        if (enableSound) {\n          await notify(activeProjectId, {\n            title: 'Analysis Complete!',\n            body: 'Your bid comparison is ready to view.',\n            playSound: true,\n            showBrowserNotification: true,\n          });\n        }\n        setShowCompletionToast(true);\n      }\n\n      await refreshRequirements();\n      completePhase(1);\n    } catch (err) {\n      console.error('Failed to process:', err);\n      setAnalysisState('error');\n      setAnalysisError(err instanceof Error ? err.message : 'An unexpected error occurred');\n    }\n  };\n\n  const getStatusIcon = (status: UploadedPdf['status']) => {\n    switch (status) {\n      case 'uploaded':\n        return <CheckCircle2 className=\"w-5 h-5 text-switch-green-600\" />;\n      case 'uploading':\n        return <Loader2 className=\"w-5 h-5 text-blue-500 animate-spin\" />;\n      case 'error':\n        return <AlertCircle className=\"w-5 h-5 text-red-500\" />;\n      default:\n        return <Clock className=\"w-5 h-5 text-gray-400\" />;\n    }\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n  };\n\n  const formatElapsedTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return mins > 0 ? `${mins}m ${secs}s` : `${secs}s`;\n  };\n\n  const handleSaveNotification = async () => {\n    if (!projectId || !notificationEmail.trim()) return;\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(notificationEmail.trim())) {\n      return;\n    }\n\n    setSavingNotification(true);\n    try {\n      await updateProjectNotificationSettings(projectId, notificationEmail.trim().toLowerCase(), notifyOnCompletion);\n      setNotificationSaved(true);\n      setTimeout(() => setNotificationSaved(false), 3000);\n    } catch (err) {\n      console.error('Failed to save notification settings:', err);\n    } finally {\n      setSavingNotification(false);\n    }\n  };\n\n  // Show interstitial when user clicks continue\n  if (analysisState === 'submitting') {\n    return (\n      <>\n        <AnalysisSubmissionInterstitial\n          email={notificationEmail}\n          onEmailChange={setNotificationEmail}\n          zip={zipCode}\n          onZipChange={setZipCode}\n          notifyOnCompletion={notifyOnCompletion}\n          onNotifyChange={setNotifyOnCompletion}\n          enableSound={enableSound}\n          onEnableSoundChange={(enabled) => {\n            setEnableSound(enabled);\n            toggleSound(enabled);\n          }}\n          onRequestNotificationPermission={requestPermission}\n          notificationPermission={permission}\n          bidCount={validPendingCount + existingBidsCount}\n          onSaveAndContinue={handleConfirmSubmission}\n          isSaving={false}\n        />\n        <NotificationToast\n          show={showCompletionToast}\n          title=\"Analysis Complete!\"\n          message=\"Your bid comparison is ready to view.\"\n          onClose={() => setShowCompletionToast(false)}\n        />\n      </>\n    );\n  }\n\n  if (analysisState === 'timeout') {\n    const isEmailValid = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(notificationEmail.trim());\n\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-[400px] space-y-6\">\n        <div className=\"w-16 h-16 bg-switch-green-100 rounded-full flex items-center justify-center\">\n          <CheckCircle2 className=\"w-8 h-8 text-switch-green-600\" />\n        </div>\n\n        <div className=\"text-center space-y-2\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">Your Submission is Saved and Queued</h2>\n          <p className=\"text-gray-600 max-w-md\">\n            Your bids have been uploaded and are being processed. You can leave this page and come back later to view your results.\n          </p>\n        </div>\n\n        <div className=\"bg-white border border-gray-200 rounded-xl p-6 max-w-md w-full space-y-4\">\n          <div>\n            <label htmlFor=\"notification-email\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Email Address\n            </label>\n            <p className=\"text-xs text-gray-500 mb-2\">\n              Enter your email to look up your analysis later\n            </p>\n            <div className=\"relative\">\n              <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n              <input\n                id=\"notification-email\"\n                type=\"email\"\n                value={notificationEmail}\n                onChange={(e) => {\n                  setNotificationEmail(e.target.value);\n                  setNotificationSaved(false);\n                }}\n                placeholder=\"you@example.com\"\n                className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent\"\n              />\n            </div>\n          </div>\n\n          <label className=\"flex items-start gap-3 cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              checked={notifyOnCompletion}\n              onChange={(e) => {\n                setNotifyOnCompletion(e.target.checked);\n                setNotificationSaved(false);\n              }}\n              className=\"w-5 h-5 mt-0.5 rounded border-gray-300 text-switch-green-600 focus:ring-switch-green-500\"\n            />\n            <span className=\"text-sm text-gray-700\">\n              Notify me by email when my analysis is ready\n            </span>\n          </label>\n\n          <button\n            onClick={handleSaveNotification}\n            disabled={!isEmailValid || savingNotification}\n            className=\"w-full btn btn-primary flex items-center justify-center gap-2\"\n          >\n            {savingNotification ? (\n              <>\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n                Saving...\n              </>\n            ) : notificationSaved ? (\n              <>\n                <CheckCircle2 className=\"w-4 h-4\" />\n                Saved!\n              </>\n            ) : (\n              <>\n                <Save className=\"w-4 h-4\" />\n                Save Email\n              </>\n            )}\n          </button>\n        </div>\n\n        {analysisProgress && (\n          <div className=\"w-full max-w-md space-y-3\">\n            <p className=\"text-sm text-center text-gray-600\">\n              Processing: {analysisProgress.completedPdfs} of {analysisProgress.totalPdfs} bids completed\n            </p>\n            <div className=\"space-y-2\">\n              {analysisProgress.pdfStatuses.map(pdf => (\n                <div key={pdf.id} className=\"flex items-center justify-between text-sm p-2 bg-gray-50 rounded\">\n                  <span className=\"truncate flex-1 mr-2\">{pdf.fileName}</span>\n                  <span className={`\n                    px-2 py-0.5 rounded text-xs font-medium\n                    ${pdf.status === 'extracted' || pdf.status === 'verified' ? 'bg-green-100 text-green-700' : ''}\n                    ${pdf.status === 'processing' || pdf.status === 'uploaded' ? 'bg-amber-100 text-amber-700' : ''}\n                    ${pdf.status === 'failed' ? 'bg-red-100 text-red-700' : ''}\n                  `}>\n                    {pdf.status === 'extracted' || pdf.status === 'verified' ? 'Done' : ''}\n                    {pdf.status === 'processing' || pdf.status === 'uploaded' ? 'Processing...' : ''}\n                    {pdf.status === 'failed' ? 'Failed' : ''}\n                  </span>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Incentives while waiting */}\n        {zipCode && (\n          <div className=\"w-full max-w-2xl\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-3 text-center\">\n              While you wait  available rebates & incentives\n            </h3>\n            <IncentivesPanel\n              userZip={zipCode}\n              userState={zipToState(zipCode) || null}\n            />\n          </div>\n        )}\n\n        <div className=\"bg-gray-50 border border-gray-200 rounded-xl p-4 max-w-md w-full\">\n          <div className=\"flex items-start gap-3\">\n            <FlaskConical className=\"w-5 h-5 text-gray-500 flex-shrink-0 mt-0.5\" />\n            <div>\n              <p className=\"text-sm font-medium text-gray-700\">Beta Testing</p>\n              <p className=\"text-sm text-gray-600 mt-1\">\n                We are actively improving processing speed. Thank you for your patience!\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {analysisProgress && analysisProgress.completedPdfs >= 2 && (\n          <button\n            onClick={() => {\n              setAnalysisState('complete');\n              completePhase(1);\n            }}\n            className=\"text-sm text-switch-green-600 hover:text-switch-green-700 underline\"\n          >\n            Continue with {analysisProgress.completedPdfs} completed bids\n          </button>\n        )}\n\n        <p className=\"text-xs text-gray-500 text-center max-w-md\">\n          You can close this page. Use your email address to find your analysis on the home page when you return.\n        </p>\n      </div>\n    );\n  }\n\n  if (analysisState === 'uploading' || analysisState === 'analyzing') {\n    const showLongWaitMessage = analysisElapsedSeconds > 120;\n\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-[400px] space-y-6\">\n        <div className=\"w-16 h-16 bg-switch-green-100 rounded-full flex items-center justify-center\">\n          <Loader2 className=\"w-8 h-8 text-switch-green-600 animate-spin\" />\n        </div>\n\n        <div className=\"text-center space-y-2\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">\n            {analysisState === 'uploading' ? 'Uploading Your Bids...' : 'Analyzing Your Bids...'}\n          </h2>\n          <p className=\"text-gray-600 max-w-md\">\n            {analysisState === 'uploading'\n              ? 'We are securely uploading your bid documents.'\n              : 'Our AI is extracting and comparing data from your bid documents. This usually takes 1-3 minutes.'}\n          </p>\n          {analysisState === 'analyzing' && (\n            <p className=\"text-sm text-gray-500\">\n              Elapsed: {formatElapsedTime(analysisElapsedSeconds)}\n            </p>\n          )}\n        </div>\n\n        {showLongWaitMessage && (\n          <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-4 max-w-md\">\n            <div className=\"flex items-start gap-3\">\n              <FlaskConical className=\"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5\" />\n              <div>\n                <p className=\"text-sm font-medium text-amber-800\">Taking longer than usual</p>\n                <p className=\"text-sm text-amber-700 mt-1\">\n                  Complex documents may take extra time. Thank you for your patience during our alpha testing!\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {analysisProgress && (\n          <div className=\"w-full max-w-md space-y-4\">\n            <div className=\"bg-gray-100 rounded-full h-3 overflow-hidden\">\n              <div\n                className=\"bg-switch-green-600 h-full transition-all duration-500\"\n                style={{\n                  width: `${analysisProgress.totalPdfs > 0\n                    ? ((analysisProgress.completedPdfs + analysisProgress.failedPdfs) / analysisProgress.totalPdfs) * 100\n                    : 0}%`\n                }}\n              />\n            </div>\n            <p className=\"text-sm text-center text-gray-600\">\n              {analysisProgress.completedPdfs} of {analysisProgress.totalPdfs} bids processed\n            </p>\n\n            <div className=\"space-y-2\">\n              {analysisProgress.pdfStatuses.map(pdf => (\n                <div key={pdf.id} className=\"flex items-center justify-between text-sm p-2 bg-gray-50 rounded\">\n                  <span className=\"truncate flex-1 mr-2\">{pdf.fileName}</span>\n                  <span className={`\n                    px-2 py-0.5 rounded text-xs font-medium\n                    ${pdf.status === 'extracted' || pdf.status === 'verified' ? 'bg-green-100 text-green-700' : ''}\n                    ${pdf.status === 'processing' || pdf.status === 'uploaded' ? 'bg-blue-100 text-blue-700' : ''}\n                    ${pdf.status === 'failed' ? 'bg-red-100 text-red-700' : ''}\n                  `}>\n                    {pdf.status === 'extracted' || pdf.status === 'verified' ? 'Done' : ''}\n                    {pdf.status === 'processing' || pdf.status === 'uploaded' ? 'Processing...' : ''}\n                    {pdf.status === 'failed' ? 'Failed' : ''}\n                  </span>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Incentives while waiting */}\n        {zipCode && (\n          <div className=\"w-full max-w-2xl\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-3 text-center\">\n              While you wait  available rebates & incentives\n            </h3>\n            <IncentivesPanel\n              userZip={zipCode}\n              userState={zipToState(zipCode) || null}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Gather Your Bids</h1>\n        <p className=\"text-gray-600 mt-1\">\n          Upload your contractor bids to compare, then tell us what matters most to you.\n        </p>\n      </div>\n\n      <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-4\">\n        <div className=\"flex gap-3\">\n          <Info className=\"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5\" />\n          <div>\n            <p className=\"text-sm font-medium text-amber-800\">One-Time Analysis</p>\n            <p className=\"text-sm text-amber-700 mt-1\">\n              Upload all the bids you want to compare before clicking Continue. All bids will be analyzed together.\n              If you need to add more bids later, you can re-run the analysis with all documents.\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {analysisError && (\n        <div className=\"bg-red-50 border border-red-200 rounded-xl p-4\">\n          <div className=\"flex gap-3\">\n            <AlertCircle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n            <div>\n              <p className=\"text-sm font-medium text-red-800\">Analysis Error</p>\n              <p className=\"text-sm text-red-700 mt-1\">{analysisError}</p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2\">\n          <Upload className=\"w-5 h-5 text-switch-green-600\" />\n          Upload Your Bids\n        </h2>\n\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          accept=\".pdf,application/pdf\"\n          multiple\n          onChange={handleFileSelect}\n          className=\"hidden\"\n        />\n\n        <div\n          onDragEnter={handleDrag}\n          onDragLeave={handleDrag}\n          onDragOver={handleDrag}\n          onDrop={handleDrop}\n          onClick={() => fileInputRef.current?.click()}\n          className={`\n            border-2 border-dashed rounded-xl p-8 text-center transition-colors cursor-pointer\n            ${dragActive ? 'border-switch-green-500 bg-switch-green-50' : 'border-gray-300 hover:border-gray-400'}\n          `}\n        >\n          <div className=\"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <FileText className=\"w-6 h-6 text-gray-400\" />\n          </div>\n          <p className=\"text-gray-600 mb-2\">Drag and drop PDF bid documents here</p>\n          <p className=\"text-sm text-gray-400 mb-4\">or</p>\n          <button\n            type=\"button\"\n            className=\"btn btn-secondary\"\n            onClick={(e) => {\n              e.stopPropagation();\n              fileInputRef.current?.click();\n            }}\n          >\n            Browse Files\n          </button>\n          <p className=\"text-xs text-gray-400 mt-4\">\n            Supported formats: PDF (max 25MB each)\n          </p>\n        </div>\n\n        {uploadedPdfs.length > 0 && (\n          <div className=\"mt-6 space-y-3\">\n            <h3 className=\"text-sm font-medium text-gray-700\">Files to Upload ({uploadedPdfs.length})</h3>\n            {uploadedPdfs.map((pdf) => (\n              <div\n                key={pdf.id}\n                className={`flex items-center justify-between p-4 rounded-lg ${\n                  pdf.status === 'error' ? 'bg-red-50' : 'bg-gray-50'\n                }`}\n              >\n                <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                  <FileText className=\"w-5 h-5 text-gray-400 flex-shrink-0\" />\n                  <div className=\"min-w-0 flex-1\">\n                    <p className=\"font-medium text-gray-900 truncate\">{pdf.file.name}</p>\n                    <p className=\"text-sm text-gray-500\">\n                      {formatFileSize(pdf.file.size)}\n                      {pdf.error && <span className=\"text-red-600 ml-2\">{pdf.error}</span>}\n                    </p>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  {getStatusIcon(pdf.status)}\n                  <button\n                    onClick={() => removeFile(pdf.id)}\n                    className=\"p-1 hover:bg-gray-200 rounded\"\n                  >\n                    <X className=\"w-4 h-4 text-gray-500\" />\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {existingBidsCount > 0 && (\n          <div className=\"mt-6 space-y-3\">\n            <h3 className=\"text-sm font-medium text-gray-700\">Previously Analyzed Bids ({existingBidsCount})</h3>\n            {bids.filter(b => b.bid.status === 'completed' && b.bid.contractor_name && b.bid.contractor_name !== 'TBD').map((item) => (\n              <div\n                key={item.bid.id}\n                className=\"flex items-center justify-between p-4 bg-green-50 rounded-lg\"\n              >\n                <div className=\"flex items-center gap-3\">\n                  <FileText className=\"w-5 h-5 text-switch-green-600\" />\n                  <div>\n                    <p className=\"font-medium text-gray-900\">\n                      {item.bid.contractor_name || 'Unknown Contractor'}\n                    </p>\n                    <p className=\"text-sm text-gray-500\">\n                      {item.bid.status === 'completed' ? 'Analysis complete' : item.bid.status}\n                    </p>\n                  </div>\n                </div>\n                <CheckCircle2 className=\"w-5 h-5 text-switch-green-600\" />\n              </div>\n            ))}\n          </div>\n        )}\n\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-2\">What Matters Most to You?</h2>\n        <p className=\"text-sm text-gray-600 mb-6\">\n          Adjust these sliders to reflect your priorities. We will use these to highlight the best options for you.\n        </p>\n\n        <div className=\"space-y-6\">\n          <PrioritySlider\n            label=\"Upfront Cost\"\n            value={priorities.price}\n            onChange={(v) => setPriorities(p => ({ ...p, price: v }))}\n            description=\"How important is getting the lowest price?\"\n          />\n\n          <PrioritySlider\n            label=\"Energy Efficiency / Long-term Savings\"\n            value={priorities.efficiency}\n            onChange={(v) => setPriorities(p => ({ ...p, efficiency: v }))}\n            description=\"Higher efficiency means lower utility bills over time\"\n          />\n\n          <PrioritySlider\n            label=\"Warranty Length\"\n            value={priorities.warranty}\n            onChange={(v) => setPriorities(p => ({ ...p, warranty: v }))}\n            description=\"Longer warranties provide peace of mind\"\n          />\n\n          <PrioritySlider\n            label=\"Contractor Reputation\"\n            value={priorities.reputation}\n            onChange={(v) => setPriorities(p => ({ ...p, reputation: v }))}\n            description=\"Experience, reviews, and certifications\"\n          />\n\n          <PrioritySlider\n            label=\"Installation Timeline\"\n            value={priorities.timeline}\n            onChange={(v) => setPriorities(p => ({ ...p, timeline: v }))}\n            description=\"How quickly can they complete the work?\"\n          />\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-2\">Tell Us About Your Project</h2>\n        <p className=\"text-sm text-gray-600 mb-4\">\n          Share any details about your home, priorities, or what you care about in a contractor. This is optional but helps us provide better guidance.\n        </p>\n        <div className=\"relative\">\n          <textarea\n            value={projectDetails}\n            onChange={(e) => setProjectDetails(e.target.value)}\n            placeholder=\"For example: My home is a 1950s ranch with poor insulation. I'm looking for a contractor who is patient with explaining technical details and has experience with older homes. Budget is somewhat flexible but I want to prioritize long-term savings over upfront cost...\"\n            rows={6}\n            className=\"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent text-sm resize-none\"\n          />\n          {isSpeechSupported && (\n            <button\n              type=\"button\"\n              onClick={toggleListening}\n              className={`absolute right-3 top-3 p-2 rounded-full transition-colors ${\n                isListening \n                  ? 'bg-red-100 text-red-600 animate-pulse' \n                  : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n              }`}\n              title={isListening ? 'Stop dictation' : 'Start dictation'}\n            >\n              {isListening ? <MicOff className=\"w-4 h-4\" /> : <Mic className=\"w-4 h-4\" />}\n            </button>\n          )}\n        </div>\n        {speechError && (\n          <p className=\"text-xs text-red-600 mt-1\">{speechError}</p>\n        )}\n        {isListening && (\n          <p className=\"text-xs text-switch-green-600 mt-1 flex items-center gap-1\">\n            <span className=\"w-2 h-2 bg-red-500 rounded-full animate-pulse\"></span>\n            Listening... speak now\n          </p>\n        )}\n        <p className=\"text-xs text-gray-500 mt-2\">\n          This information helps us understand your unique needs and provide more personalized recommendations.\n        </p>\n      </div>\n\n      <div className=\"bg-gray-50 rounded-xl border border-gray-200 p-5\">\n        <label className=\"flex items-start gap-3 cursor-pointer group\">\n          <div className=\"pt-0.5\">\n            <input\n              type=\"checkbox\"\n              checked={dataSharingConsent}\n              onChange={(e) => setDataSharingConsent(e.target.checked)}\n              className=\"w-5 h-5 rounded border-gray-300 text-switch-green-600 focus:ring-switch-green-500 focus:ring-offset-0 cursor-pointer\"\n            />\n          </div>\n          <div className=\"flex-1\">\n            <div className=\"flex items-center gap-2 mb-1\">\n              <Users className=\"w-4 h-4 text-switch-green-600\" />\n              <span className=\"font-medium text-gray-900\">\n                Help other homeowners by sharing anonymized bid data\n              </span>\n            </div>\n            <p className=\"text-sm text-gray-600 leading-relaxed\">\n              Your pricing data helps others understand fair market rates in your area.\n              All personal and contractor details are removed before sharing.\n            </p>\n            <button\n              type=\"button\"\n              onClick={(e) => {\n                e.preventDefault();\n                setShowPrivacyDetails(!showPrivacyDetails);\n              }}\n              className=\"text-sm text-switch-green-600 hover:text-switch-green-700 mt-2 flex items-center gap-1\"\n            >\n              <Shield className=\"w-3.5 h-3.5\" />\n              {showPrivacyDetails ? 'Hide privacy details' : 'What data is shared?'}\n            </button>\n\n            {showPrivacyDetails && (\n              <div className=\"mt-3 p-4 bg-white rounded-lg border border-gray-200 text-sm text-gray-600\">\n                <p className=\"font-medium text-gray-900 mb-2\">Data that IS shared (anonymized):</p>\n                <ul className=\"list-disc list-inside space-y-1 mb-4\">\n                  <li>Bid amounts and pricing breakdowns</li>\n                  <li>Equipment types, efficiency ratings, and specifications</li>\n                  <li>General location (ZIP code area only)</li>\n                  <li>Project scope (system size, features included)</li>\n                </ul>\n                <p className=\"font-medium text-gray-900 mb-2\">Data that is NEVER shared:</p>\n                <ul className=\"list-disc list-inside space-y-1\">\n                  <li>Your name, email, or contact information</li>\n                  <li>Your exact address</li>\n                  <li>Contractor names or contact details</li>\n                  <li>Original PDF documents</li>\n                </ul>\n                <p className=\"mt-4 text-gray-500 text-xs\">\n                  You can change this preference at any time in your project settings.\n                </p>\n              </div>\n            )}\n          </div>\n        </label>\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <div className=\"flex items-center gap-2 mb-4\">\n          <Mail className=\"w-5 h-5 text-switch-green-600\" />\n          <h2 className=\"text-lg font-semibold text-gray-900\">Get Notified When Ready</h2>\n        </div>\n        <p className=\"text-sm text-gray-600 mb-4\">\n          Bid analysis typically takes 2-3 minutes. We'll email you when your results are ready to view.\n        </p>\n\n        <div className=\"space-y-4\">\n          <div>\n            <label htmlFor=\"notify-email\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Email Address\n            </label>\n            <input\n              id=\"notify-email\"\n              type=\"email\"\n              value={notificationEmail}\n              onChange={(e) => {\n                setNotificationEmail(e.target.value);\n                setNotificationSaved(false);\n              }}\n              placeholder=\"your.email@example.com\"\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent\"\n            />\n          </div>\n\n          <label className=\"flex items-start gap-3 cursor-pointer\">\n            <input\n              type=\"checkbox\"\n              checked={notifyOnCompletion}\n              onChange={(e) => {\n                setNotifyOnCompletion(e.target.checked);\n                setNotificationSaved(false);\n              }}\n              className=\"mt-0.5 w-4 h-4 rounded border-gray-300 text-switch-green-600 focus:ring-switch-green-500 focus:ring-offset-0 cursor-pointer\"\n            />\n            <span className=\"text-sm text-gray-700\">\n              Send me an email when my analysis is complete\n            </span>\n          </label>\n\n          {notificationEmail && (\n            <button\n              type=\"button\"\n              onClick={handleSaveNotification}\n              disabled={savingNotification || !notificationEmail.trim() || !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(notificationEmail.trim())}\n              className=\"btn btn-secondary text-sm flex items-center gap-2\"\n            >\n              {savingNotification ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  Saving...\n                </>\n              ) : notificationSaved ? (\n                <>\n                  <CheckCircle2 className=\"w-4 h-4\" />\n                  Saved!\n                </>\n              ) : (\n                <>\n                  <Save className=\"w-4 h-4\" />\n                  Save Notification Settings\n                </>\n              )}\n            </button>\n          )}\n        </div>\n      </div>\n\n      <div className=\"flex justify-end\">\n        <button\n          onClick={handleContinue}\n          disabled={!canContinue}\n          className=\"btn btn-primary flex items-center gap-2 px-6\"\n        >\n          Continue to Compare\n          <ArrowRight className=\"w-4 h-4\" />\n        </button>\n      </div>\n\n      {!canContinue && (\n        <p className=\"text-center text-sm text-gray-500\">\n          Upload at least 1 bid to continue\n        </p>\n      )}\n\n      <NotificationToast\n        show={showCompletionToast}\n        title=\"Analysis Complete!\"\n        message=\"Your bid comparison is ready to view.\"\n        onClose={() => setShowCompletionToast(false)}\n      />\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { ArrowRight, Award, Zap, DollarSign, Star, CheckCircle, XCircle, ChevronDown, ChevronUp, HelpCircle, FlaskConical, Download, Mail, Loader2 } from 'lucide-react';\nimport { usePhase } from '../../context/PhaseContext';\nimport { useUser } from '../../hooks/useUser';\nimport { formatCurrency, formatDate } from '../../lib/utils/formatters';\n\ntype CompareTab = 'equipment' | 'contractors' | 'costs';\n\ninterface TabConfig {\n  key: CompareTab;\n  label: string;\n  description: string;\n  icon: React.ReactNode;\n}\n\nconst LABEL_COL_WIDTH = '200px';\nconst BID_COL_MIN_WIDTH = '180px';\n\nconst SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL;\nconst SUPABASE_ANON_KEY = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\nexport function ComparePhase() {\n  const { bids, completePhase, projectId } = usePhase();\n  const { user } = useUser();\n  const [activeTab, setActiveTab] = useState<CompareTab>('equipment');\n  const [showMoreEquipment, setShowMoreEquipment] = useState(false);\n  const [showMoreContractors, setShowMoreContractors] = useState(false);\n  const [showFinancingDetails, setShowFinancingDetails] = useState(false);\n  const [downloadingReport, setDownloadingReport] = useState(false);\n  const [emailingReport, setEmailingReport] = useState(false);\n  const [reportSent, setReportSent] = useState(false);\n\n  const formatDateDisplay = (dateString: string | null | undefined) => {\n    return formatDate(dateString) || '-';\n  };\n\n  const getHighestValue = (\n    values: (number | null | undefined)[],\n    higherIsBetter = true\n  ): number | null => {\n    const validValues = values.filter((v): v is number => v != null);\n    if (validValues.length === 0) return null;\n    return higherIsBetter ? Math.max(...validValues) : Math.min(...validValues);\n  };\n\n  const isHighlighted = (\n    value: number | null | undefined,\n    bestValue: number | null\n  ): boolean => {\n    if (value == null || bestValue == null) return false;\n    return value === bestValue;\n  };\n\n  const tabs: TabConfig[] = [\n    {\n      key: 'equipment',\n      label: 'Equipment',\n      description: 'Specs, efficiency ratings, and features',\n      icon: <Zap className=\"w-5 h-5\" />\n    },\n    {\n      key: 'contractors',\n      label: 'Contractors',\n      description: 'Experience, ratings, and certifications',\n      icon: <Award className=\"w-5 h-5\" />\n    },\n    {\n      key: 'costs',\n      label: 'Cost & Scope',\n      description: 'Pricing, warranties, and what\\'s included',\n      icon: <DollarSign className=\"w-5 h-5\" />\n    },\n  ];\n\n  // Deduplicate bids by contractor name  if the same company submitted multiple PDFs,\n  // merge them into one column using the bid that has the most data.\n  const deduplicatedBids = (() => {\n    const seen = new Map<string, typeof bids[0] & { mergedBidCount?: number }>();\n    for (const b of bids) {\n      const rawKey = (b.bid.contractor_name || '').trim().toLowerCase();\n      const key = rawKey || `__unnamed_${b.bid.id}`;\n      const existing = seen.get(key);\n      if (!existing) {\n        seen.set(key, { ...b, mergedBidCount: 1 });\n      } else {\n        // Keep whichever bid has scope data; if both do, keep the one with the higher total amount\n        const existingHasScope = !!existing.scope;\n        const incomingHasScope = !!b.scope;\n        let winner = existing;\n        if (!existingHasScope && incomingHasScope) {\n          winner = { ...b, mergedBidCount: (existing.mergedBidCount || 1) + 1 };\n        } else if (existingHasScope && incomingHasScope) {\n          const existingAmount = existing.scope?.total_bid_amount ?? 0;\n          const incomingAmount = b.scope?.total_bid_amount ?? 0;\n          winner = {\n            ...(incomingAmount > existingAmount ? b : existing),\n            mergedBidCount: (existing.mergedBidCount || 1) + 1,\n          };\n        } else {\n          winner = { ...existing, mergedBidCount: (existing.mergedBidCount || 1) + 1 };\n        }\n        seen.set(key, winner);\n      }\n    }\n    return Array.from(seen.values());\n  })();\n\n  const getEquipmentData = () => {\n    return deduplicatedBids.map((b) => {\n      const mainEquipment = b.equipment.find(\n        (e) => e.equipment_type === 'outdoor_unit' || e.equipment_type === 'heat_pump'\n      ) || b.equipment[0];\n\n      return {\n        bidId: b.bid.id,\n        contractor: b.bid.contractor_name || 'Unknown',\n        brand: mainEquipment?.brand || '-',\n        model: mainEquipment?.model_number || mainEquipment?.model_name || '-',\n        seer2: mainEquipment?.seer2_rating || mainEquipment?.seer_rating,\n        hspf2: mainEquipment?.hspf2_rating || mainEquipment?.hspf_rating,\n        capacityTons: mainEquipment?.capacity_tons,\n        capacityBtu: mainEquipment?.capacity_btu,\n        variableSpeed: mainEquipment?.variable_speed,\n        soundLevel: mainEquipment?.sound_level_db,\n        energyStar: mainEquipment?.energy_star_certified,\n        energyStarMostEfficient: mainEquipment?.energy_star_most_efficient,\n        refrigerantType: mainEquipment?.refrigerant_type,\n        voltage: mainEquipment?.voltage,\n        stages: mainEquipment?.stages,\n        cop: mainEquipment?.cop,\n        eer: mainEquipment?.eer_rating,\n        compressorWarranty: mainEquipment?.compressor_warranty_years,\n      };\n    });\n  };\n\n  const getContractorData = () => {\n    return deduplicatedBids.map((b) => {\n      const c = b.contractor;\n      const sc = b.scores;\n      return {\n        bidId: b.bid.id,\n        contractor: b.bid.contractor_name || 'Unknown',\n        yearsInBusiness: c?.years_in_business,\n        yearEstablished: c?.year_established,\n        googleRating: c?.google_rating,\n        reviewCount: c?.google_review_count,\n        certifications: c?.certifications || [],\n        license: c?.license,\n        licenseState: c?.license_state,\n        insuranceVerified: c?.insurance_verified,\n        phone: c?.phone,\n        email: c?.email,\n        website: c?.website,\n        totalInstalls: c?.total_installs,\n        yelpRating: c?.yelp_rating,\n        yelpReviewCount: c?.yelp_review_count,\n        bbbRating: c?.bbb_rating,\n        bbbAccredited: c?.bbb_accredited,\n        bbbComplaints: c?.bbb_complaints_3yr,\n        bonded: c?.bonded,\n        contactName: c?.contact_name,\n        address: c?.address,\n        redFlags: sc?.red_flags || [],\n        positiveIndicators: sc?.positive_indicators || [],\n      };\n    });\n  };\n\n  const getCostData = () => {\n    return deduplicatedBids.map((b) => {\n      const sc = b.scope;\n      return {\n        bidId: b.bid.id,\n        contractor: b.bid.contractor_name || 'Unknown',\n        totalAmount: sc?.total_bid_amount ?? 0,\n        equipmentCost: sc?.equipment_cost,\n        laborCost: sc?.labor_cost,\n        materialsCost: sc?.materials_cost,\n        permitCost: sc?.permit_cost,\n        laborWarranty: sc?.labor_warranty_years,\n        equipmentWarranty: sc?.equipment_warranty_years,\n        financingAvailable: sc?.financing_offered,\n        financingTerms: sc?.financing_terms,\n        exclusions: sc?.exclusions || [],\n        estimatedDays: sc?.estimated_days,\n        startDateAvailable: sc?.start_date_available,\n        validUntil: sc?.valid_until,\n        bidDate: sc?.bid_date,\n        depositRequired: sc?.deposit_required,\n        depositPercentage: sc?.deposit_percentage,\n        paymentSchedule: sc?.payment_schedule,\n      };\n    });\n  };\n\n  const getScopeData = () => {\n    return deduplicatedBids.map((b) => {\n      const sc = b.scope;\n      return {\n        bidId: b.bid.id,\n        contractor: b.bid.contractor_name || 'Unknown',\n        permit: sc?.permit_included,\n        permitDetail: sc?.permit_detail,\n        disposal: sc?.disposal_included,\n        disposalDetail: sc?.disposal_detail,\n        electrical: sc?.electrical_included,\n        electricalDetail: sc?.electrical_detail,\n        ductwork: sc?.ductwork_included,\n        ductworkDetail: sc?.ductwork_detail,\n        thermostat: sc?.thermostat_included,\n        thermostatDetail: sc?.thermostat_detail,\n        manualJ: sc?.manual_j_included,\n        manualJDetail: sc?.manual_j_detail,\n        commissioning: sc?.commissioning_included,\n        commissioningDetail: sc?.commissioning_detail,\n        airHandler: sc?.air_handler_included,\n        airHandlerDetail: sc?.air_handler_detail,\n        lineSet: sc?.line_set_included,\n        lineSetDetail: sc?.line_set_detail,\n        disconnect: sc?.disconnect_included,\n        disconnectDetail: sc?.disconnect_detail,\n        pad: sc?.pad_included,\n        padDetail: sc?.pad_detail,\n        drainLine: sc?.drain_line_included,\n        drainLineDetail: sc?.drain_line_detail,\n      };\n    });\n  };\n\n  const equipmentData = getEquipmentData();\n  const contractorData = getContractorData();\n  const costData = getCostData();\n  const scopeData = getScopeData();\n\n  const bestSeer = getHighestValue(equipmentData.map((e) => e.seer2));\n  const bestHspf = getHighestValue(equipmentData.map((e) => e.hspf2));\n  const bestYears = getHighestValue(contractorData.map((c) => c.yearsInBusiness));\n  const bestRating = getHighestValue(contractorData.map((c) => c.googleRating));\n  const lowestPrice = getHighestValue(costData.map((c) => c.totalAmount), false);\n  const bestLaborWarranty = getHighestValue(costData.map((c) => c.laborWarranty));\n  const bestEquipmentWarranty = getHighestValue(costData.map((c) => c.equipmentWarranty));\n  const fastestTimeline = getHighestValue(costData.map((c) => c.estimatedDays), false);\n\n  const handleContinue = () => {\n    completePhase(2);\n  };\n\n  const handleDownloadReport = async () => {\n    if (!projectId || !user?.email) {\n      alert('Missing project or user information');\n      return;\n    }\n\n    setDownloadingReport(true);\n    try {\n      const response = await fetch(`${SUPABASE_URL}/functions/v1/generate-pdf-report`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,\n          'Content-Type': 'application/json',\n          'apikey': SUPABASE_ANON_KEY,\n          'X-User-Email': user.email,\n        },\n        body: JSON.stringify({\n          project_id: projectId,\n          send_email: false,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));\n        console.error('Report generation failed:', errorData);\n        throw new Error(errorData.error || `Server error: ${response.status}`);\n      }\n\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `bidsmart-report-${new Date().toISOString().split('T')[0]}.html`;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n    } catch (error) {\n      console.error('Error downloading report:', error);\n      const message = error instanceof Error ? error.message : 'Failed to download report';\n      alert(`Download failed: ${message}`);\n    } finally {\n      setDownloadingReport(false);\n    }\n  };\n\n  const handleEmailReport = async () => {\n    if (!projectId || !user?.email) {\n      alert('Missing project or user information');\n      return;\n    }\n\n    setEmailingReport(true);\n    try {\n      const response = await fetch(`${SUPABASE_URL}/functions/v1/generate-pdf-report`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,\n          'Content-Type': 'application/json',\n          'apikey': SUPABASE_ANON_KEY,\n          'X-User-Email': user.email,\n        },\n        body: JSON.stringify({\n          project_id: projectId,\n          send_email: true,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));\n        console.error('Email send failed:', errorData);\n        throw new Error(errorData.error || `Server error: ${response.status}`);\n      }\n\n      const result = await response.json();\n      console.log('Email sent successfully:', result);\n\n      setReportSent(true);\n      setTimeout(() => setReportSent(false), 5000);\n    } catch (error) {\n      console.error('Error emailing report:', error);\n      const message = error instanceof Error ? error.message : 'Failed to send report';\n      alert(`Email failed: ${message}`);\n    } finally {\n      setEmailingReport(false);\n    }\n  };\n\n  const bidCount = deduplicatedBids.length;\n  const tableMinWidth = `calc(${LABEL_COL_WIDTH} + (${bidCount} * ${BID_COL_MIN_WIDTH}))`;\n\n  const labelCellStyle = { width: LABEL_COL_WIDTH, minWidth: LABEL_COL_WIDTH, maxWidth: LABEL_COL_WIDTH };\n  const bidCellStyle = { minWidth: BID_COL_MIN_WIDTH };\n\n  const scopeItems = [\n    { key: 'permit', detailKey: 'permitDetail', label: 'Permits & Filing' },\n    { key: 'disposal', detailKey: 'disposalDetail', label: 'Old Equipment Disposal' },\n    { key: 'electrical', detailKey: 'electricalDetail', label: 'Electrical Work' },\n    { key: 'disconnect', detailKey: 'disconnectDetail', label: 'Electrical Disconnect' },\n    { key: 'ductwork', detailKey: 'ductworkDetail', label: 'Ductwork Modifications' },\n    { key: 'thermostat', detailKey: 'thermostatDetail', label: 'Thermostat' },\n    { key: 'manualJ', detailKey: 'manualJDetail', label: 'Manual J Calculation' },\n    { key: 'commissioning', detailKey: 'commissioningDetail', label: 'System Commissioning' },\n    { key: 'airHandler', detailKey: 'airHandlerDetail', label: 'Air Handler' },\n    { key: 'lineSet', detailKey: 'lineSetDetail', label: 'Refrigerant Line Set' },\n    { key: 'pad', detailKey: 'padDetail', label: 'Equipment Pad' },\n    { key: 'drainLine', detailKey: 'drainLineDetail', label: 'Condensate Drain Line' },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Compare Your Bids</h1>\n        <p className=\"text-gray-600 mt-1\">\n          Review the equipment, contractors, and costs side by side.\n        </p>\n      </div>\n\n      <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-3 flex items-start gap-2\">\n        <FlaskConical className=\"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5\" />\n        <p className=\"text-sm text-amber-800\">\n          <span className=\"font-medium\">Alpha:</span> Some extracted data may be incomplete. If something looks wrong, please verify against the original bid document.\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-6\">\n        {tabs.map((tab, index) => (\n          <button\n            key={tab.key}\n            onClick={() => setActiveTab(tab.key)}\n            className={`\n              relative p-3 sm:p-4 rounded-xl text-left transition-all duration-200 border-2\n              ${activeTab === tab.key\n                ? 'bg-gradient-to-br from-switch-green-50 to-switch-green-100 border-switch-green-500 shadow-md'\n                : 'bg-white border-gray-200 hover:border-gray-300 hover:shadow-sm'\n              }\n            `}\n          >\n            <div className=\"flex items-start gap-2 sm:gap-3\">\n              <div className={`\n                w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0\n                ${activeTab === tab.key\n                  ? 'bg-switch-green-600 text-white'\n                  : 'bg-gray-100 text-gray-500'\n                }\n              `}>\n                {tab.icon}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-center gap-2 flex-wrap\">\n                  <span className={`\n                    text-xs font-medium px-2 py-0.5 rounded-full whitespace-nowrap\n                    ${activeTab === tab.key\n                      ? 'bg-switch-green-600 text-white'\n                      : 'bg-gray-200 text-gray-600'\n                    }\n                  `}>\n                    {index + 1} of 3\n                  </span>\n                </div>\n                <h3 className={`\n                  font-semibold mt-1 text-sm sm:text-base\n                  ${activeTab === tab.key ? 'text-switch-green-800' : 'text-gray-900'}\n                `}>\n                  {tab.label}\n                </h3>\n                <p className={`\n                  text-xs sm:text-sm mt-0.5 line-clamp-2\n                  ${activeTab === tab.key ? 'text-switch-green-700' : 'text-gray-500'}\n                `}>\n                  {tab.description}\n                </p>\n              </div>\n            </div>\n            {activeTab === tab.key && (\n              <div className=\"hidden sm:block absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2\">\n                <div className=\"w-3 h-3 bg-switch-green-500 rotate-45\"></div>\n              </div>\n            )}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"bg-white rounded-xl border-2 border-gray-200 shadow-lg overflow-hidden\">\n        <div className={`\n          px-5 py-3 border-b-2 border-gray-200 flex items-center gap-3\n          bg-gradient-to-r from-switch-green-600 to-switch-green-700\n        `}>\n          <div className=\"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-white\">\n            {tabs.find(t => t.key === activeTab)?.icon}\n          </div>\n          <h2 className=\"font-semibold text-white\">\n            {tabs.find(t => t.key === activeTab)?.label} Comparison\n          </h2>\n        </div>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\" style={{ minWidth: tableMinWidth, tableLayout: 'fixed' }}>\n            {activeTab === 'equipment' && (\n              <>\n                <thead>\n                  <tr className=\"bg-gray-900\">\n                    <th style={labelCellStyle} className=\"px-5 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider border-r border-gray-700\">\n                      Specification\n                    </th>\n                    {equipmentData.map((e, idx) => {\n                      const dedupBid = deduplicatedBids[idx];\n                      return (\n                        <th key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-left text-sm font-semibold text-white ${idx < equipmentData.length - 1 ? 'border-r border-gray-700' : ''}`}>\n                          {e.contractor}\n                          {dedupBid?.mergedBidCount && dedupBid.mergedBidCount > 1 && (\n                            <span className=\"block text-xs font-normal text-gray-400 mt-0.5\">\n                              {dedupBid.mergedBidCount} bids merged\n                            </span>\n                          )}\n                        </th>\n                      );\n                    })}\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Manufacturer & Model</td>\n                    {equipmentData.map((e, idx) => (\n                      <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {e.brand} {e.model}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">SEER2 Rating</td>\n                    {equipmentData.map((e, idx) => (\n                      <td\n                        key={e.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm font-semibold ${isHighlighted(e.seer2, bestSeer) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {e.seer2 || '-'}\n                          {isHighlighted(e.seer2, bestSeer) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              <Star className=\"w-3 h-3\" /> BEST\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">HSPF2 Rating</td>\n                    {equipmentData.map((e, idx) => (\n                      <td\n                        key={e.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm font-semibold ${isHighlighted(e.hspf2, bestHspf) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {e.hspf2 || '-'}\n                          {isHighlighted(e.hspf2, bestHspf) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              <Star className=\"w-3 h-3\" /> BEST\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Capacity (tons)</td>\n                    {equipmentData.map((e, idx) => (\n                      <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {e.capacityTons || '-'}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Variable Speed</td>\n                    {equipmentData.map((e, idx) => (\n                      <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {e.variableSpeed ? (\n                          <span className=\"inline-flex items-center gap-1 text-switch-green-700 font-medium\">\n                            <CheckCircle className=\"w-5 h-5\" /> Yes\n                          </span>\n                        ) : e.variableSpeed === false ? (\n                          <span className=\"inline-flex items-center gap-1 text-gray-400\">\n                            <XCircle className=\"w-5 h-5\" /> No\n                          </span>\n                        ) : (\n                          <span className=\"text-gray-400\">-</span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Sound Level (dB)</td>\n                    {equipmentData.map((e, idx) => (\n                      <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {e.soundLevel || '-'}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className={showMoreEquipment ? 'border-b border-gray-200' : ''}>\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">ENERGY STAR</td>\n                    {equipmentData.map((e, idx) => (\n                      <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {e.energyStar ? (\n                          <span className=\"inline-flex items-center gap-1 text-switch-green-700 font-medium\">\n                            <CheckCircle className=\"w-5 h-5\" /> Certified\n                          </span>\n                        ) : e.energyStar === false ? (\n                          <span className=\"inline-flex items-center gap-1 text-gray-400\">\n                            <XCircle className=\"w-5 h-5\" /> No\n                          </span>\n                        ) : (\n                          <span className=\"text-gray-400\">-</span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n\n                  {showMoreEquipment && (\n                    <>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Capacity (BTU)</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.capacityBtu ? e.capacityBtu.toLocaleString() : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Refrigerant Type</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.refrigerantType || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Voltage</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.voltage ? `${e.voltage}V` : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Stages</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.stages || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">COP Rating</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.cop || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">EER Rating</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.eer || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Compressor Warranty</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.compressorWarranty ? `${e.compressorWarranty} years` : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr>\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Most Efficient</td>\n                        {equipmentData.map((e, idx) => (\n                          <td key={e.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < equipmentData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {e.energyStarMostEfficient ? (\n                              <span className=\"inline-flex items-center gap-1 text-switch-green-700 font-medium\">\n                                <CheckCircle className=\"w-5 h-5\" /> Yes\n                              </span>\n                            ) : (\n                              <span className=\"text-gray-400\">-</span>\n                            )}\n                          </td>\n                        ))}\n                      </tr>\n                    </>\n                  )}\n                </tbody>\n              </>\n            )}\n\n            {activeTab === 'contractors' && (\n              <>\n                <thead>\n                  <tr className=\"bg-gray-900\">\n                    <th style={labelCellStyle} className=\"px-5 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider border-r border-gray-700\">\n                      Information\n                    </th>\n                    {contractorData.map((c, idx) => {\n                      const dedupBid = deduplicatedBids[idx];\n                      return (\n                        <th key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-left text-sm font-semibold text-white ${idx < contractorData.length - 1 ? 'border-r border-gray-700' : ''}`}>\n                          {c.contractor}\n                          {dedupBid?.mergedBidCount && dedupBid.mergedBidCount > 1 && (\n                            <span className=\"block text-xs font-normal text-gray-400 mt-0.5\">\n                              {dedupBid.mergedBidCount} bids merged\n                            </span>\n                          )}\n                        </th>\n                      );\n                    })}\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Years in Business</td>\n                    {contractorData.map((c, idx) => (\n                      <td\n                        key={c.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm font-semibold ${isHighlighted(c.yearsInBusiness, bestYears) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {c.yearsInBusiness ? `${c.yearsInBusiness} years` : '-'}\n                          {isHighlighted(c.yearsInBusiness, bestYears) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              <Star className=\"w-3 h-3\" /> MOST\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Google Rating</td>\n                    {contractorData.map((c, idx) => (\n                      <td\n                        key={c.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm font-semibold ${isHighlighted(c.googleRating, bestRating) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {c.googleRating ? (\n                            <span className=\"flex items-center gap-1\">\n                              {c.googleRating}\n                              <Star className=\"w-4 h-4 text-yellow-500 fill-yellow-500\" />\n                            </span>\n                          ) : '-'}\n                          {isHighlighted(c.googleRating, bestRating) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              TOP\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Review Count</td>\n                    {contractorData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {c.reviewCount ? `${c.reviewCount} reviews` : '-'}\n                      </td>\n                    ))}\n                  </tr>\n                  {/* Switch Rating row removed  requires Switch.com integration */}\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Certifications</td>\n                    {contractorData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-900 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {c.certifications.length > 0 ? (\n                          <div className=\"flex flex-wrap gap-1\">\n                            {c.certifications.slice(0, 3).map((cert, i) => (\n                              <span key={i} className=\"inline-flex px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-medium rounded\">\n                                {cert}\n                              </span>\n                            ))}\n                            {c.certifications.length > 3 && (\n                              <span className=\"inline-flex px-2 py-0.5 bg-gray-100 text-gray-500 text-xs rounded\">\n                                +{c.certifications.length - 3}\n                              </span>\n                            )}\n                          </div>\n                        ) : (\n                          <span className=\"text-gray-400\">-</span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">License Number</td>\n                    {contractorData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {c.license || <span className=\"text-gray-400\">Not provided</span>}\n                      </td>\n                    ))}\n                  </tr>\n                  {/* Switch Preferred row removed  requires Switch.com integration */}\n\n                  {showMoreContractors && (\n                    <>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Phone</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.phone || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Email</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.email ? (\n                              <a href={`mailto:${c.email}`} className=\"text-switch-green-600 hover:underline truncate block\">\n                                {c.email}\n                              </a>\n                            ) : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Website</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.website ? (\n                              <a href={c.website} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-switch-green-600 hover:underline truncate block\">\n                                {c.website.replace(/^https?:\\/\\//, '')}\n                              </a>\n                            ) : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">License State</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.licenseState || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Insurance Verified</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.insuranceVerified ? (\n                              <span className=\"inline-flex items-center gap-1 text-switch-green-700\">\n                                <CheckCircle className=\"w-4 h-4\" /> Verified\n                              </span>\n                            ) : (\n                              <span className=\"text-gray-400\">-</span>\n                            )}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Year Established</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.yearEstablished || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr>\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Total Installs</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.totalInstalls ? c.totalInstalls.toLocaleString() : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Yelp Rating</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.yelpRating ? (\n                              <span className=\"flex items-center gap-1\">\n                                <Star className=\"w-4 h-4 text-yellow-500 fill-current\" />\n                                <span className=\"font-semibold\">{c.yelpRating.toFixed(1)}</span>\n                                {c.yelpReviewCount && <span className=\"text-gray-400\">({c.yelpReviewCount.toLocaleString()} reviews)</span>}\n                              </span>\n                            ) : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">BBB Rating</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.bbbRating ? (\n                              <span className=\"flex items-center gap-2\">\n                                <span className=\"font-semibold\">{c.bbbRating}</span>\n                                {c.bbbAccredited && (\n                                  <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded\">\n                                    <CheckCircle className=\"w-3 h-3\" /> Accredited\n                                  </span>\n                                )}\n                              </span>\n                            ) : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">BBB Complaints (3yr)</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.bbbComplaints != null ? (\n                              <span className={c.bbbComplaints > 0 ? 'text-amber-600 font-medium' : 'text-green-600'}>\n                                {c.bbbComplaints === 0 ? 'None' : `${c.bbbComplaints} complaint${c.bbbComplaints !== 1 ? 's' : ''}`}\n                              </span>\n                            ) : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Bonded</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.bonded ? (\n                              <span className=\"inline-flex items-center gap-1 text-switch-green-700\">\n                                <CheckCircle className=\"w-4 h-4\" /> Yes\n                              </span>\n                            ) : (\n                              <span className=\"text-gray-400\">-</span>\n                            )}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Contact Name</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.contactName || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr>\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Address</td>\n                        {contractorData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < contractorData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.address || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                    </>\n                  )}\n                </tbody>\n              </>\n            )}\n\n            {activeTab === 'costs' && (\n              <>\n                <thead>\n                  <tr className=\"bg-gray-900\">\n                    <th style={labelCellStyle} className=\"px-5 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider border-r border-gray-700\">\n                      Cost Item\n                    </th>\n                    {costData.map((c, idx) => {\n                      const dedupBid = deduplicatedBids[idx];\n                      return (\n                        <th key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-left text-sm font-semibold text-white ${idx < costData.length - 1 ? 'border-r border-gray-700' : ''}`}>\n                          {c.contractor}\n                          {dedupBid?.mergedBidCount && dedupBid.mergedBidCount > 1 && (\n                            <span className=\"block text-xs font-normal text-gray-400 mt-0.5\">\n                              {dedupBid.mergedBidCount} bids merged\n                            </span>\n                          )}\n                        </th>\n                      );\n                    })}\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr className=\"border-b-2 border-gray-200 bg-gradient-to-r from-gray-50 to-white\">\n                    <td style={labelCellStyle} className=\"px-5 py-5 text-sm font-bold text-gray-900 bg-gray-100 border-r border-gray-200\">Total Bid Amount</td>\n                    {costData.map((c, idx) => (\n                      <td\n                        key={c.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-5 ${isHighlighted(c.totalAmount, lowestPrice) ? 'bg-gradient-to-r from-switch-green-50 to-switch-green-100' : ''} ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          <span className={`text-xl font-bold ${isHighlighted(c.totalAmount, lowestPrice) ? 'text-switch-green-700' : 'text-gray-900'}`}>\n                            {formatCurrency(c.totalAmount)}\n                          </span>\n                          {isHighlighted(c.totalAmount, lowestPrice) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              <Star className=\"w-3 h-3\" /> LOWEST\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Equipment Cost</td>\n                    {costData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {formatCurrency(c.equipmentCost)}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Labor Cost</td>\n                    {costData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm font-semibold text-gray-900 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {formatCurrency(c.laborCost)}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Labor Warranty</td>\n                    {costData.map((c, idx) => (\n                      <td\n                        key={c.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm font-semibold ${isHighlighted(c.laborWarranty, bestLaborWarranty) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {c.laborWarranty ? `${c.laborWarranty} years` : '-'}\n                          {isHighlighted(c.laborWarranty, bestLaborWarranty) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              <Star className=\"w-3 h-3\" /> BEST\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Equipment Warranty</td>\n                    {costData.map((c, idx) => (\n                      <td\n                        key={c.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm font-semibold ${isHighlighted(c.equipmentWarranty, bestEquipmentWarranty) ? 'text-switch-green-700 bg-gradient-to-r from-switch-green-50 to-switch-green-100' : 'text-gray-900'} ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        <span className=\"flex items-center gap-2\">\n                          {c.equipmentWarranty ? `${c.equipmentWarranty} years` : '-'}\n                          {isHighlighted(c.equipmentWarranty, bestEquipmentWarranty) && (\n                            <span className=\"inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                              <Star className=\"w-3 h-3\" /> BEST\n                            </span>\n                          )}\n                        </span>\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Estimated Duration</td>\n                    {costData.map((c, idx) => (\n                      <td\n                        key={c.bidId}\n                        style={bidCellStyle}\n                        className={`px-5 py-4 text-sm ${isHighlighted(c.estimatedDays, fastestTimeline) ? 'text-switch-green-700 font-semibold' : 'text-gray-600'} ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}\n                      >\n                        {c.estimatedDays ? `${c.estimatedDays} days` : '-'}\n                        {isHighlighted(c.estimatedDays, fastestTimeline) && c.estimatedDays && (\n                          <span className=\"ml-2 inline-flex items-center gap-1 px-2 py-0.5 bg-switch-green-600 text-white text-xs font-medium rounded-full\">\n                            FASTEST\n                          </span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className=\"border-b border-gray-200\">\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">Financing Available</td>\n                    {costData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {c.financingAvailable ? (\n                          <span className=\"inline-flex items-center gap-1 text-switch-green-700 font-medium\">\n                            <CheckCircle className=\"w-5 h-5\" /> Available\n                          </span>\n                        ) : (\n                          <span className=\"inline-flex items-center gap-1 text-gray-400\">\n                            <XCircle className=\"w-5 h-5\" /> No\n                          </span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n                  <tr className={showFinancingDetails ? 'border-b border-gray-200 bg-gray-50/50' : ''}>\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">What is NOT Included</td>\n                    {costData.map((c, idx) => (\n                      <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-900 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                        {c.exclusions.length > 0 ? (\n                          <ul className=\"text-xs space-y-1.5\">\n                            {c.exclusions.slice(0, 4).map((item, i) => (\n                              <li key={i} className=\"flex items-start gap-1.5\">\n                                <XCircle className=\"w-3.5 h-3.5 text-red-500 flex-shrink-0 mt-0.5\" />\n                                <span className=\"text-gray-700\">{item}</span>\n                              </li>\n                            ))}\n                            {c.exclusions.length > 4 && (\n                              <li className=\"text-gray-500 pl-5\">+{c.exclusions.length - 4} more items</li>\n                            )}\n                          </ul>\n                        ) : (\n                          <span className=\"text-gray-400\">Not specified</span>\n                        )}\n                      </td>\n                    ))}\n                  </tr>\n\n                  {showFinancingDetails && (\n                    <>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Available Start Date</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {formatDateDisplay(c.startDateAvailable)}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Quote Valid Until</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {formatDateDisplay(c.validUntil)}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Bid Date</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {formatDateDisplay(c.bidDate)}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Materials Cost</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {formatCurrency(c.materialsCost)}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Permit Cost</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {formatCurrency(c.permitCost)}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200 bg-gray-50/50\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Deposit Required</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.depositRequired ? formatCurrency(c.depositRequired) : c.depositPercentage ? `${c.depositPercentage}%` : '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr className=\"border-b border-gray-200\">\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Payment Schedule</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.paymentSchedule || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                      <tr>\n                        <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-500 bg-gray-50 border-r border-gray-200\">Financing Terms</td>\n                        {costData.map((c, idx) => (\n                          <td key={c.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm text-gray-600 ${idx < costData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                            {c.financingTerms || '-'}\n                          </td>\n                        ))}\n                      </tr>\n                    </>\n                  )}\n                </tbody>\n              </>\n            )}\n          </table>\n        </div>\n\n        {(activeTab === 'equipment' || activeTab === 'contractors' || activeTab === 'costs') && (\n          <div className=\"px-5 py-3 bg-gray-50 border-t border-gray-200\">\n            <button\n              onClick={() => {\n                if (activeTab === 'equipment') setShowMoreEquipment(!showMoreEquipment);\n                if (activeTab === 'contractors') setShowMoreContractors(!showMoreContractors);\n                if (activeTab === 'costs') setShowFinancingDetails(!showFinancingDetails);\n              }}\n              className=\"flex items-center gap-2 text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors\"\n            >\n              {(activeTab === 'equipment' && showMoreEquipment) ||\n               (activeTab === 'contractors' && showMoreContractors) ||\n               (activeTab === 'costs' && showFinancingDetails) ? (\n                <>\n                  <ChevronUp className=\"w-4 h-4\" />\n                  Show Less\n                </>\n              ) : (\n                <>\n                  <ChevronDown className=\"w-4 h-4\" />\n                  {activeTab === 'costs' ? 'Show Financial Terms & Details' : 'Show More Details'}\n                </>\n              )}\n            </button>\n          </div>\n        )}\n      </div>\n\n      {activeTab === 'costs' && (\n        <div className=\"bg-white rounded-xl border-2 border-gray-200 shadow-lg overflow-hidden\">\n          <div className=\"px-5 py-3 border-b-2 border-gray-200 bg-gradient-to-r from-gray-700 to-gray-800\">\n            <h2 className=\"font-semibold text-white\">Scope - What's Included</h2>\n          </div>\n\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\" style={{ minWidth: tableMinWidth, tableLayout: 'fixed' }}>\n              <thead>\n                <tr className=\"bg-gray-900\">\n                  <th style={labelCellStyle} className=\"px-5 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider border-r border-gray-700\">\n                    Scope Item\n                  </th>\n                  {scopeData.map((s, idx) => {\n                    const dedupBid = deduplicatedBids[idx];\n                    return (\n                      <th key={s.bidId} style={bidCellStyle} className={`px-5 py-4 text-left text-sm font-semibold text-white ${idx < scopeData.length - 1 ? 'border-r border-gray-700' : ''}`}>\n                        {s.contractor}\n                        {dedupBid?.mergedBidCount && dedupBid.mergedBidCount > 1 && (\n                          <span className=\"block text-xs font-normal text-gray-400 mt-0.5\">\n                            {dedupBid.mergedBidCount} bids merged\n                          </span>\n                        )}\n                      </th>\n                    );\n                  })}\n                </tr>\n              </thead>\n              <tbody>\n                {scopeItems.map((item, rowIdx) => (\n                  <tr key={item.key} className={`border-b border-gray-200 ${rowIdx % 2 === 1 ? 'bg-gray-50/50' : ''}`}>\n                    <td style={labelCellStyle} className=\"px-5 py-4 text-sm font-medium text-gray-700 bg-gray-50 border-r border-gray-200\">\n                      {item.label}\n                    </td>\n                    {scopeData.map((s, idx) => {\n                      const value = s[item.key as keyof typeof s];\n                      const detail = s[item.detailKey as keyof typeof s];\n                      return (\n                        <td key={s.bidId} style={bidCellStyle} className={`px-5 py-4 text-sm ${idx < scopeData.length - 1 ? 'border-r border-gray-100' : ''}`}>\n                          {value === true ? (\n                            <div>\n                              <span className=\"inline-flex items-center gap-1 text-switch-green-700 font-medium\">\n                                <CheckCircle className=\"w-5 h-5\" /> Included\n                              </span>\n                              {detail && typeof detail === 'string' && (\n                                <p className=\"text-xs text-gray-600 mt-1\">{detail}</p>\n                              )}\n                            </div>\n                          ) : value === false ? (\n                            <span className=\"inline-flex items-center gap-1 text-red-500\">\n                              <XCircle className=\"w-5 h-5\" /> Not Included\n                            </span>\n                          ) : (\n                            <span className=\"inline-flex items-center gap-1 text-gray-400\" title=\"Not specified in bid\">\n                              <HelpCircle className=\"w-5 h-5\" /> Unknown\n                            </span>\n                          )}\n                        </td>\n                      );\n                    })}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-lg font-semibold text-gray-900 mb-2\">Export Your Analysis</h2>\n        <p className=\"text-sm text-gray-600 mb-4\">\n          Download or email a comprehensive report with all your bid comparisons.\n        </p>\n\n        <div className=\"flex flex-wrap gap-3\">\n          <button\n            onClick={handleDownloadReport}\n            disabled={downloadingReport}\n            className=\"btn btn-secondary flex items-center gap-2\"\n          >\n            {downloadingReport ? (\n              <>\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n                Generating...\n              </>\n            ) : (\n              <>\n                <Download className=\"w-4 h-4\" />\n                Download Report\n              </>\n            )}\n          </button>\n\n          <button\n            onClick={handleEmailReport}\n            disabled={emailingReport}\n            className=\"btn btn-secondary flex items-center gap-2\"\n          >\n            {emailingReport ? (\n              <>\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n                Sending...\n              </>\n            ) : reportSent ? (\n              <>\n                <CheckCircle className=\"w-4 h-4\" />\n                Sent to {user?.email}\n              </>\n            ) : (\n              <>\n                <Mail className=\"w-4 h-4\" />\n                Email Report\n              </>\n            )}\n          </button>\n        </div>\n\n        {reportSent && (\n          <p className=\"text-sm text-switch-green-600 mt-3 flex items-center gap-2\">\n            <CheckCircle className=\"w-4 h-4\" />\n            Report sent successfully! Check your email.\n          </p>\n        )}\n      </div>\n\n      <div className=\"flex justify-end\">\n        <button\n          onClick={handleContinue}\n          className=\"btn btn-primary flex items-center gap-2 px-6\"\n        >\n          Continue to Decide\n          <ArrowRight className=\"w-4 h-4\" />\n        </button>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { ChevronDown, ChevronRight, DollarSign, CheckSquare, Square, ExternalLink, Info } from 'lucide-react';\nimport type { RebateProgram } from '../lib/types';\nimport { formatCurrency } from '../lib/utils/formatters';\n\ninterface IncentivesTableProps {\n  rebatePrograms: RebateProgram[];\n  selectedIncentives: Set<string>;\n  onToggleIncentive: (incentiveId: string) => void;\n}\n\nexport function IncentivesTable({ rebatePrograms, selectedIncentives, onToggleIncentive }: IncentivesTableProps) {\n  const [expandedRows, setExpandedRows] = useState<Set<string>>(new Set());\n\n  const toggleExpand = (incentiveId: string) => {\n    const newExpanded = new Set(expandedRows);\n    if (newExpanded.has(incentiveId)) {\n      newExpanded.delete(incentiveId);\n    } else {\n      newExpanded.add(incentiveId);\n    }\n    setExpandedRows(newExpanded);\n  };\n\n  const getAmount = (incentive: RebateProgram) => {\n    return Number(incentive.max_rebate) || Number(incentive.rebate_amount) || 0;\n  };\n\n  const totalSelectedAmount = Array.from(selectedIncentives).reduce((sum, id) => {\n    const incentive = rebatePrograms.find(i => i.id === id);\n    return sum + (incentive ? getAmount(incentive) : 0);\n  }, 0);\n\n  if (rebatePrograms.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-white rounded-xl border-2 border-gray-200 shadow-lg overflow-hidden\">\n      <div className=\"bg-gradient-to-r from-switch-green-600 to-switch-green-700 px-5 py-4\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center\">\n            <DollarSign className=\"w-5 h-5 text-white\" />\n          </div>\n          <div>\n            <h3 className=\"font-semibold text-white text-lg\">Available Rebates & Incentives</h3>\n            <p className=\"text-switch-green-100 text-sm\">\n              Select the incentives you plan to apply for\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"divide-y divide-gray-200\">\n        {rebatePrograms.map((incentive) => {\n          const isExpanded = expandedRows.has(incentive.id);\n          const isSelected = selectedIncentives.has(incentive.id);\n          const amount = getAmount(incentive);\n\n          return (\n            <div key={incentive.id} className={isSelected ? 'bg-switch-green-50/50' : ''}>\n              <div className=\"flex items-center gap-3 px-5 py-4\">\n                <button\n                  onClick={() => toggleExpand(incentive.id)}\n                  className=\"p-1 hover:bg-gray-100 rounded transition-colors\"\n                >\n                  {isExpanded ? (\n                    <ChevronDown className=\"w-5 h-5 text-gray-500\" />\n                  ) : (\n                    <ChevronRight className=\"w-5 h-5 text-gray-500\" />\n                  )}\n                </button>\n\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2\">\n                    <h4 className=\"font-semibold text-gray-900\">{incentive.program_name}</h4>\n                    {incentive.program_type && (\n                      <span className=\"text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full capitalize\">\n                        {incentive.program_type.replace(/_/g, ' ')}\n                      </span>\n                    )}\n                    {incentive.income_qualified && (\n                      <span className=\"text-xs px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full\">\n                        Income Qualified\n                      </span>\n                    )}\n                    {!incentive.is_active && (\n                      <span className=\"text-xs px-2 py-0.5 bg-red-100 text-red-700 rounded-full\">\n                        Inactive\n                      </span>\n                    )}\n                  </div>\n                  {!isExpanded && incentive.description && (\n                    <p className=\"text-sm text-gray-500 mt-0.5 truncate\">{incentive.description}</p>\n                  )}\n                </div>\n\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"text-right\">\n                    {incentive.rebate_percentage ? (\n                      <span className=\"text-base font-bold text-switch-green-700\">\n                        {incentive.rebate_percentage}%{incentive.max_rebate ? ` (up to ${formatCurrency(Number(incentive.max_rebate))})` : ''}\n                      </span>\n                    ) : amount > 0 ? (\n                      <>\n                        <span className=\"text-lg font-bold text-switch-green-700\">\n                          {formatCurrency(amount)}\n                        </span>\n                      </>\n                    ) : (\n                      <span className=\"text-sm text-gray-400\">Amount varies</span>\n                    )}\n                  </div>\n\n                  <button\n                    onClick={() => onToggleIncentive(incentive.id)}\n                    className=\"p-1 hover:bg-gray-100 rounded transition-colors\"\n                  >\n                    {isSelected ? (\n                      <CheckSquare className=\"w-6 h-6 text-switch-green-600\" />\n                    ) : (\n                      <Square className=\"w-6 h-6 text-gray-400 hover:text-gray-600\" />\n                    )}\n                  </button>\n                </div>\n              </div>\n\n              {isExpanded && (\n                <div className=\"px-5 pb-5 pl-14 space-y-4\">\n                  {incentive.description && (\n                    <div>\n                      <span className=\"text-xs font-medium text-gray-500 uppercase\">Description</span>\n                      <p className=\"text-sm text-gray-700 mt-1\">{incentive.description}</p>\n                    </div>\n                  )}\n\n                  {incentive.income_qualified && incentive.income_limits && (\n                    <div className=\"flex items-start gap-2\">\n                      <Info className=\"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0\" />\n                      <div>\n                        <span className=\"text-xs font-medium text-gray-500 uppercase\">Income Limits</span>\n                        <p className=\"text-sm text-gray-900\">\n                          {typeof incentive.income_limits === 'object'\n                            ? Object.entries(incentive.income_limits).map(([k, v]) => `${k}: ${v}`).join(', ')\n                            : String(incentive.income_limits)}\n                        </p>\n                      </div>\n                    </div>\n                  )}\n\n                  {incentive.application_process && (\n                    <div className=\"bg-gray-50 rounded-lg p-3\">\n                      <span className=\"text-xs font-medium text-gray-500 uppercase\">How to Apply</span>\n                      <p className=\"text-sm text-gray-700 mt-1\">{incentive.application_process}</p>\n                    </div>\n                  )}\n\n                  {incentive.stackable === false && (\n                    <div className=\"text-sm text-amber-700 bg-amber-50 rounded-lg p-3\">\n                      <span className=\"font-medium\">Not Stackable:</span> This incentive cannot be combined with other programs.\n                    </div>\n                  )}\n\n                  {incentive.last_verified && (\n                    <div className=\"text-xs text-gray-500\">\n                      Last verified: {incentive.last_verified}\n                    </div>\n                  )}\n\n                  {incentive.application_url && (\n                    <a\n                      href={incentive.application_url}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"inline-flex items-center gap-2 text-sm text-switch-green-600 hover:text-switch-green-700 font-medium\"\n                    >\n                      <ExternalLink className=\"w-4 h-4\" />\n                      View Application Details\n                    </a>\n                  )}\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n\n      <div className=\"bg-gray-50 px-5 py-4 border-t-2 border-gray-200\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"text-sm text-gray-600\">\n            {selectedIncentives.size} of {rebatePrograms.length} selected\n          </div>\n          <div className=\"text-right\">\n            <span className=\"text-sm text-gray-500\">Estimated Total Savings</span>\n            <p className=\"text-2xl font-bold text-switch-green-700\">\n              {formatCurrency(totalSelectedAmount)}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { ChevronDown, ChevronRight, Lightbulb } from 'lucide-react';\nimport type { ProjectFaq } from '../lib/types';\n\ninterface OverallFaqsCardProps {\n  faqs: ProjectFaq[];\n}\n\nexport function OverallFaqsCard({ faqs }: OverallFaqsCardProps) {\n  const [expandedFaqs, setExpandedFaqs] = useState<Set<string>>(new Set());\n\n  const toggleExpand = (faqId: string) => {\n    const newExpanded = new Set(expandedFaqs);\n    if (newExpanded.has(faqId)) {\n      newExpanded.delete(faqId);\n    } else {\n      newExpanded.add(faqId);\n    }\n    setExpandedFaqs(newExpanded);\n  };\n\n  if (faqs.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-white rounded-xl border-2 border-gray-200 shadow-md overflow-hidden\">\n      <div className=\"bg-gradient-to-r from-switch-green-600 to-switch-green-700 px-5 py-4\">\n        <div className=\"flex items-center gap-3\">\n          <Lightbulb className=\"w-6 h-6 text-white\" />\n          <div>\n            <h3 className=\"font-bold text-white text-lg\">Overall Comparison Common Questions</h3>\n            <p className=\"text-switch-green-100 text-sm\">General questions about your bids</p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"divide-y divide-gray-200\">\n        {faqs.map((faq) => {\n          const isExpanded = expandedFaqs.has(faq.id);\n          const hasAnswer = faq.answer;\n\n          return (\n            <div key={faq.id} className={hasAnswer ? '' : 'bg-gray-50'}>\n              <button\n                onClick={() => toggleExpand(faq.id)}\n                className=\"w-full px-5 py-4 flex items-start gap-3 hover:bg-gray-50 transition-colors text-left\"\n              >\n                <div className=\"pt-0.5\">\n                  {isExpanded ? (\n                    <ChevronDown className=\"w-5 h-5 text-gray-500\" />\n                  ) : (\n                    <ChevronRight className=\"w-5 h-5 text-gray-500\" />\n                  )}\n                </div>\n\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-start justify-between gap-3\">\n                    <p className=\"font-medium text-gray-900 pr-4\">{faq.question}</p>\n                    {/* answer_confidence not available for overall FAQs */}\n                  </div>\n\n                  {!hasAnswer && !isExpanded && (\n                    <p className=\"text-sm text-gray-500 mt-1\">\n                      Being analyzed...\n                    </p>\n                  )}\n                </div>\n              </button>\n\n              {isExpanded && (\n                <div className=\"px-5 pb-5 pl-14\">\n                  {hasAnswer ? (\n                    <div className=\"prose prose-sm max-w-none\">\n                      <p className=\"text-gray-700 whitespace-pre-wrap\">{faq.answer}</p>\n                    </div>\n                  ) : (\n                    <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4\">\n                      <p className=\"text-sm text-amber-800\">\n                        This answer is being generated during bid analysis. The AI will review all your\n                        bids and provide insights to help you make an informed decision.\n                      </p>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { ChevronDown, ChevronRight, FileText, CheckCircle, AlertCircle, Award } from 'lucide-react';\nimport type { BidFaqSet } from '../lib/types';\n\ninterface BidSpecificFaqsCardProps {\n  bidFaqSets: BidFaqSet[];\n  switchPreferredBids?: Set<string>;\n}\n\nexport function BidSpecificFaqsCard({ bidFaqSets, switchPreferredBids = new Set() }: BidSpecificFaqsCardProps) {\n  const [activeTabIndex, setActiveTabIndex] = useState(0);\n  const [expandedFaqs, setExpandedFaqs] = useState<Set<string>>(new Set());\n\n  const toggleExpand = (faqId: string) => {\n    const newExpanded = new Set(expandedFaqs);\n    if (newExpanded.has(faqId)) {\n      newExpanded.delete(faqId);\n    } else {\n      newExpanded.add(faqId);\n    }\n    setExpandedFaqs(newExpanded);\n  };\n\n  const getConfidenceBadge = (confidence?: string | null) => {\n    if (!confidence) return null;\n\n    const badgeConfig = {\n      high: { color: 'bg-switch-green-100 text-switch-green-700', icon: CheckCircle },\n      medium: { color: 'bg-amber-100 text-amber-700', icon: AlertCircle },\n      low: { color: 'bg-gray-100 text-gray-600', icon: AlertCircle },\n    };\n\n    const config = badgeConfig[confidence as keyof typeof badgeConfig];\n    if (!config) return null;\n\n    const Icon = config.icon;\n\n    return (\n      <span className={`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${config.color}`}>\n        <Icon className=\"w-3 h-3\" />\n      </span>\n    );\n  };\n\n  if (bidFaqSets.length === 0) {\n    return null;\n  }\n\n  const activeBidFaqSet = bidFaqSets[activeTabIndex];\n\n  return (\n    <div className=\"bg-white rounded-xl border-2 border-gray-200 shadow-md overflow-hidden\">\n      <div className=\"bg-gradient-to-r from-blue-600 to-blue-700 px-5 py-4\">\n        <div className=\"flex items-center gap-3\">\n          <FileText className=\"w-6 h-6 text-white\" />\n          <div>\n            <h3 className=\"font-bold text-white text-lg\">Bid-Specific Common Questions</h3>\n            <p className=\"text-blue-100 text-sm\">Questions about each contractor's bid</p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"border-b border-gray-200 bg-gray-50\">\n        <div className=\"flex overflow-x-auto scrollbar-hide\">\n          {bidFaqSets.map((bidFaqSet, index) => {\n            const isActive = activeTabIndex === index;\n            const isPreferred = switchPreferredBids.has(bidFaqSet.bid_id);\n\n            return (\n              <button\n                key={bidFaqSet.bid_id}\n                onClick={() => setActiveTabIndex(index)}\n                className={`\n                  relative px-4 sm:px-6 py-3 text-sm font-medium whitespace-nowrap transition-all duration-200\n                  flex items-center gap-2 border-b-2\n                  ${isActive\n                    ? 'text-blue-700 border-blue-600 bg-white'\n                    : 'text-gray-600 border-transparent hover:text-gray-900 hover:bg-gray-100'\n                  }\n                `}\n              >\n                <span>{bidFaqSet.contractor_name}</span>\n                {isPreferred && (\n                  <Award className=\"w-3.5 h-3.5 text-switch-green-600\" />\n                )}\n              </button>\n            );\n          })}\n        </div>\n      </div>\n\n      <div className=\"divide-y divide-gray-200\">\n        {activeBidFaqSet.faqs.length === 0 ? (\n          <div className=\"p-8 text-center\">\n            <FileText className=\"w-12 h-12 text-gray-300 mx-auto mb-3\" />\n            <p className=\"text-gray-600 text-sm\">\n              No common questions available for this bid yet. They will be generated during analysis.\n            </p>\n          </div>\n        ) : (\n          activeBidFaqSet.faqs.map((faq) => {\n            const isExpanded = expandedFaqs.has(faq.id);\n            const hasAnswer = !!faq.answer;\n\n            return (\n              <div key={faq.id} className={hasAnswer ? '' : 'bg-gray-50'}>\n                <button\n                  onClick={() => toggleExpand(faq.id)}\n                  className=\"w-full px-5 py-4 flex items-start gap-3 hover:bg-gray-50 transition-colors text-left\"\n                >\n                  <div className=\"pt-0.5\">\n                    {isExpanded ? (\n                      <ChevronDown className=\"w-5 h-5 text-gray-500\" />\n                    ) : (\n                      <ChevronRight className=\"w-5 h-5 text-gray-500\" />\n                    )}\n                  </div>\n\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-start justify-between gap-3\">\n                      <p className=\"font-medium text-gray-900 pr-4\">{faq.question}</p>\n                      {hasAnswer && getConfidenceBadge(faq.answer_confidence)}\n                    </div>\n\n                    {!hasAnswer && !isExpanded && (\n                      <p className=\"text-sm text-gray-500 mt-1\">\n                        Being analyzed...\n                      </p>\n                    )}\n                  </div>\n                </button>\n\n                {isExpanded && (\n                  <div className=\"px-5 pb-5 pl-14\">\n                    {hasAnswer ? (\n                      <div className=\"prose prose-sm max-w-none\">\n                        <p className=\"text-gray-700 whitespace-pre-wrap\">{faq.answer}</p>\n                      </div>\n                    ) : (\n                      <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4\">\n                        <p className=\"text-sm text-amber-800\">\n                          This answer is being generated during bid analysis. The AI will review {activeBidFaqSet.contractor_name}'s\n                          bid and provide detailed insights to help you make an informed decision.\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            );\n          })\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { DollarSign, Star, Shield, Zap, CheckCircle, Copy, Check, ArrowRight, HelpCircle, BookOpen, ChevronDown, ChevronUp, Phone, Mail, Globe, Calendar, Clock, FlaskConical, Download, FileCheck2, AlertTriangle, Loader2 } from 'lucide-react';\nimport { usePhase } from '../../context/PhaseContext';\nimport { supabase } from '../../lib/supabaseClient';\nimport { IncentivesTable } from '../IncentivesTable';\nimport { OverallFaqsCard } from '../OverallFaqsCard';\nimport { BidSpecificFaqsCard } from '../BidSpecificFaqsCard';\nimport type { BidQuestion, RebateProgram, ProjectFaqData } from '../../lib/types';\nimport { getFaqsByProject } from '../../lib/database/bidsmartService';\nimport { formatCurrency, formatDate } from '../../lib/utils/formatters';\n\ntype DecideTab = 'incentives' | 'questions' | 'faqs';\n\ninterface TabConfig {\n  key: DecideTab;\n  label: string;\n  description: string;\n  icon: React.ReactNode;\n}\n\nexport function DecidePhase() {\n  const { bids, questions, questionsLoading, refreshQuestions, completePhase, projectId } = usePhase();\n  const [activeTab, setActiveTab] = useState<DecideTab>('incentives');\n  const [rebatePrograms, setRebatePrograms] = useState<RebateProgram[]>([]);\n  const [selectedIncentives, setSelectedIncentives] = useState<Set<string>>(new Set());\n  const [selectedContractor, setSelectedContractor] = useState<string | null>(null);\n  const [copiedContractor, setCopiedContractor] = useState<string | null>(null);\n  const [expandedBids, setExpandedBids] = useState<Set<string>>(new Set());\n  const [projectFaqData, setProjectFaqData] = useState<ProjectFaqData>({ overall: [], by_bid: [] });\n\n  useEffect(() => {\n    loadRebatePrograms();\n    loadAllFaqs();\n  }, [projectId, bids]);\n\n  const loadRebatePrograms = async () => {\n    const { data } = await supabase\n      .from('incentive_program_database')\n      .select('*')\n      .eq('is_active', true)\n      .order('program_name');\n\n    if (data) {\n      setRebatePrograms(data);\n      setSelectedIncentives(new Set(data.map(p => p.id)));\n    }\n  };\n\n  const loadAllFaqs = async () => {\n    if (!projectId || bids.length === 0) return;\n\n    try {\n      const faqData = await getFaqsByProject(projectId, bids);\n      setProjectFaqData(faqData);\n    } catch (error) {\n      console.error('Error loading FAQs:', error);\n    }\n  };\n\n  const toggleIncentive = (programId: string) => {\n    const newSelected = new Set(selectedIncentives);\n    if (newSelected.has(programId)) {\n      newSelected.delete(programId);\n    } else {\n      newSelected.add(programId);\n    }\n    setSelectedIncentives(newSelected);\n  };\n\n  const getTotalSelectedRebates = () => {\n    return Array.from(selectedIncentives).reduce((sum, id) => {\n      const program = rebatePrograms.find(p => p.id === id);\n      return sum + (program ? (Number(program.max_rebate) || Number(program.rebate_amount) || 0) : 0);\n    }, 0);\n  };\n\n  const toggleQuestionAnswered = async (question: BidQuestion) => {\n    await supabase\n      .from('contractor_questions')\n      .update({\n        is_answered: !question.is_answered,\n        answered_at: !question.is_answered ? new Date().toISOString() : null,\n      })\n      .eq('id', question.id);\n\n    refreshQuestions();\n  };\n\n  const getQuestionsForBid = (bidId: string): BidQuestion[] => {\n    return questions.filter((q) => q.bid_id === bidId);\n  };\n\n  const copyQuestionsToClipboard = async (bidId: string, contractorName: string) => {\n    const bidQuestions = getQuestionsForBid(bidId);\n    const unansweredQuestions = bidQuestions.filter((q) => !q.is_answered);\n\n    const text = `Questions for ${contractorName}:\\n\\n${unansweredQuestions\n      .map((q, i) => `${i + 1}. ${q.question_text}`)\n      .join('\\n\\n')}`;\n\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopiedContractor(bidId);\n      setTimeout(() => setCopiedContractor(null), 2000);\n    } catch {\n      const textArea = document.createElement('textarea');\n      textArea.value = text;\n      textArea.style.position = 'fixed';\n      textArea.style.opacity = '0';\n      document.body.appendChild(textArea);\n      textArea.select();\n      try {\n        document.execCommand('copy');\n        setCopiedContractor(bidId);\n        setTimeout(() => setCopiedContractor(null), 2000);\n      } catch {\n        console.error('Failed to copy to clipboard');\n      }\n      document.body.removeChild(textArea);\n    }\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'high':\n        return 'bg-red-100 text-red-700 border-red-200';\n      case 'medium':\n        return 'bg-amber-100 text-amber-700 border-amber-200';\n      default:\n        return 'bg-gray-100 text-gray-600 border-gray-200';\n    }\n  };\n\n  const toggleBidExpanded = (bidId: string) => {\n    const newExpanded = new Set(expandedBids);\n    if (newExpanded.has(bidId)) {\n      newExpanded.delete(bidId);\n    } else {\n      newExpanded.add(bidId);\n    }\n    setExpandedBids(newExpanded);\n  };\n\n  const totalSelectedRebates = getTotalSelectedRebates();\n\n  const getBidData = () => {\n    return bids.map((b) => {\n      const mainEquipment = b.equipment.find(\n        (e) => e.equipment_type === 'outdoor_unit' || e.equipment_type === 'heat_pump'\n      ) || b.equipment[0];\n\n      const sc = b.scope;\n      const totalAmount = sc?.total_bid_amount ?? 0;\n      const netCost = totalAmount - totalSelectedRebates;\n\n      return {\n        bidId: b.bid.id,\n        contractor: b.bid.contractor_name || 'Unknown',\n        totalAmount,\n        estimatedRebates: totalSelectedRebates,\n        netCost,\n        equipmentBrand: mainEquipment?.brand || '-',\n        equipmentModel: mainEquipment?.model_number || mainEquipment?.model_name || '-',\n        seer2: mainEquipment?.seer2_rating || mainEquipment?.seer_rating,\n        googleRating: b.contractor?.google_rating,\n        reviewCount: b.contractor?.google_review_count,\n        laborWarranty: sc?.labor_warranty_years,\n        equipmentWarranty: sc?.equipment_warranty_years,\n        phone: b.contractor?.phone,\n        email: b.contractor?.email,\n        website: b.contractor?.website,\n        license: b.contractor?.license,\n        licenseState: b.contractor?.license_state,\n        insuranceVerified: b.contractor?.insurance_verified,\n        yearsInBusiness: b.contractor?.years_in_business,\n        totalInstalls: b.contractor?.total_installs,\n        certifications: b.contractor?.certifications || [],\n        estimatedDays: sc?.estimated_days,\n        startDateAvailable: sc?.start_date_available,\n        validUntil: sc?.valid_until,\n        bidDate: sc?.bid_date,\n        financingOffered: sc?.financing_offered,\n        financingTerms: sc?.financing_terms,\n        userNotes: b.bid.user_notes,\n        isFavorite: b.bid.is_favorite,\n        verifiedByUser: b.bid.verified_by_user,\n        extractionConfidence: sc?.extraction_confidence,\n        valueScore: b.scores?.value_score,\n        qualityScore: b.scores?.quality_score,\n        completenessScore: b.scores?.completeness_score,\n      };\n    });\n  };\n\n  const bidData = getBidData();\n  const lowestPrice = bidData.length > 0 ? Math.min(...bidData.map((b) => b.totalAmount || Infinity)) : 0;\n  const lowestNetCost = bidData.length > 0 ? Math.min(...bidData.map((b) => b.netCost || Infinity)) : 0;\n  const bestRating = bidData.length > 0 ? Math.max(...bidData.map((b) => b.googleRating || 0)) : 0;\n  const bestSeer = bidData.length > 0 ? Math.max(...bidData.map((b) => b.seer2 || 0)) : 0;\n  const bestWarranty = bidData.length > 0 ? Math.max(...bidData.map((b) => (b.laborWarranty || 0) + (b.equipmentWarranty || 0))) : 0;\n\n  const handleContinue = () => {\n    completePhase(3);\n  };\n\n  const toggleSelection = (bidId: string) => {\n    setSelectedContractor(selectedContractor === bidId ? null : bidId);\n  };\n\n  function handleDownloadChecklist() {\n    const url = `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/generate-contractor-checklist?project_id=${projectId}`;\n    window.open(url, '_blank');\n  }\n\n  const tabs: TabConfig[] = [\n    {\n      key: 'incentives',\n      label: 'Available Incentives',\n      description: 'Select rebates you plan to apply for',\n      icon: <DollarSign className=\"w-5 h-5\" />\n    },\n    {\n      key: 'faqs',\n      label: 'Common Questions',\n      description: 'Questions about your bids and contractors',\n      icon: <BookOpen className=\"w-5 h-5\" />\n    },\n    {\n      key: 'questions',\n      label: 'Contractor Questions',\n      description: 'Ask contractors for clarification',\n      icon: <HelpCircle className=\"w-5 h-5\" />\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Make Your Decision</h1>\n        <p className=\"text-gray-600 mt-1\">\n          Review incentives, ask questions, and understand your bids to choose the best contractor.\n        </p>\n      </div>\n\n      <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-3 flex items-start gap-2\">\n        <FlaskConical className=\"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5\" />\n        <p className=\"text-sm text-amber-800\">\n          <span className=\"font-medium\">Alpha:</span> Rebate eligibility and amounts are estimates. Always verify with the program administrator before making decisions.\n        </p>\n      </div>\n\n      {/* Red Flags Alert */}\n      {bids.some(b => b.scores?.red_flags && b.scores.red_flags.length > 0) && (\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n          <div className=\"flex items-start gap-3\">\n            <AlertTriangle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n            <div className=\"flex-1\">\n              <h3 className=\"font-medium text-red-900 mb-2\">Potential Issues Identified</h3>\n              <div className=\"space-y-2\">\n                {bids.filter(b => b.scores?.red_flags && b.scores.red_flags.length > 0).map(b => (\n                  <div key={b.bid.id} className=\"text-sm\">\n                    <span className=\"font-medium text-red-800\">{b.bid.contractor_name}:</span>\n                    <ul className=\"list-disc ml-5 mt-1 text-red-700\">\n                      {b.scores?.red_flags?.slice(0, 3).map((flag, i) => (\n                        <li key={i}>{flag.issue}</li>\n                      ))}\n                      {b.scores?.red_flags && b.scores.red_flags.length > 3 && (\n                        <li className=\"text-red-500\">+{b.scores.red_flags.length - 3} more issues</li>\n                      )}\n                    </ul>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Positive Indicators */}\n      {bids.some(b => b.scores?.positive_indicators && b.scores.positive_indicators.length > 0) && (\n        <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n          <div className=\"flex items-start gap-3\">\n            <CheckCircle className=\"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5\" />\n            <div className=\"flex-1\">\n              <h3 className=\"font-medium text-green-900 mb-2\">Positive Indicators</h3>\n              <div className=\"space-y-2\">\n                {bids.filter(b => b.scores?.positive_indicators && b.scores.positive_indicators.length > 0).map(b => (\n                  <div key={b.bid.id} className=\"text-sm\">\n                    <span className=\"font-medium text-green-800\">{b.bid.contractor_name}:</span>\n                    <ul className=\"list-disc ml-5 mt-1 text-green-700\">\n                      {b.scores?.positive_indicators?.slice(0, 3).map((indicator, i) => (\n                        <li key={i}>{indicator.indicator}</li>\n                      ))}\n                      {b.scores?.positive_indicators && b.scores.positive_indicators.length > 3 && (\n                        <li className=\"text-green-500\">+{b.scores.positive_indicators.length - 3} more</li>\n                      )}\n                    </ul>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-6\">\n        {tabs.map((tab, index) => (\n          <button\n            key={tab.key}\n            onClick={() => setActiveTab(tab.key)}\n            className={`\n              relative p-3 sm:p-4 rounded-xl text-left transition-all duration-200 border-2\n              ${activeTab === tab.key\n                ? 'bg-gradient-to-br from-switch-green-50 to-switch-green-100 border-switch-green-500 shadow-md'\n                : 'bg-white border-gray-200 hover:border-gray-300 hover:shadow-sm'\n              }\n            `}\n          >\n            <div className=\"flex items-start gap-2 sm:gap-3\">\n              <div className={`\n                w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0\n                ${activeTab === tab.key\n                  ? 'bg-switch-green-600 text-white'\n                  : 'bg-gray-100 text-gray-500'\n                }\n              `}>\n                {tab.icon}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-center gap-2 flex-wrap\">\n                  <span className={`\n                    text-xs font-medium px-2 py-0.5 rounded-full whitespace-nowrap\n                    ${activeTab === tab.key\n                      ? 'bg-switch-green-600 text-white'\n                      : 'bg-gray-200 text-gray-600'\n                    }\n                  `}>\n                    {index + 1} of 3\n                  </span>\n                </div>\n                <h3 className={`\n                  font-semibold mt-1 text-sm sm:text-base\n                  ${activeTab === tab.key ? 'text-switch-green-800' : 'text-gray-900'}\n                `}>\n                  {tab.label}\n                </h3>\n                <p className={`\n                  text-xs sm:text-sm mt-0.5 line-clamp-2\n                  ${activeTab === tab.key ? 'text-switch-green-700' : 'text-gray-500'}\n                `}>\n                  {tab.description}\n                </p>\n              </div>\n            </div>\n            {activeTab === tab.key && (\n              <div className=\"hidden sm:block absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2\">\n                <div className=\"w-3 h-3 bg-switch-green-500 rotate-45\"></div>\n              </div>\n            )}\n          </button>\n        ))}\n      </div>\n\n      {selectedContractor && (\n        <div className=\"bg-gradient-to-r from-switch-green-50 to-blue-50 border-2 border-switch-green-300 rounded-xl p-6 shadow-lg\">\n          <div className=\"flex items-start gap-4\">\n            <div className=\"p-3 bg-white rounded-lg\">\n              <FileCheck2 className=\"w-8 h-8 text-switch-green-600\" />\n            </div>\n            <div className=\"flex-1\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <CheckCircle className=\"w-5 h-5 text-switch-green-600\" />\n                <h3 className=\"text-lg font-bold text-gray-900\">\n                  {bidData.find(b => b.bidId === selectedContractor)?.contractor} Selected\n                </h3>\n              </div>\n              <p className=\"text-gray-700 mb-4\">\n                Give your contractor this quality installation checklist before work begins.\n                It sets clear expectations and ensures industry-standard practices are followed.\n              </p>\n              <div className=\"flex flex-wrap gap-3\">\n                <button\n                  onClick={handleDownloadChecklist}\n                  className=\"btn btn-primary flex items-center gap-2\"\n                >\n                  <Download className=\"w-4 h-4\" />\n                  Download Checklist\n                </button>\n                <div className=\"text-sm text-gray-600 flex items-center gap-2 px-4 py-2 bg-white rounded-lg border border-gray-200\">\n                  <span className=\"font-medium\">Next Step:</span> Share this with your contractor before installation\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {activeTab === 'incentives' && (\n        <div className=\"space-y-6\">\n          {rebatePrograms.length > 0 ? (\n            <IncentivesTable\n              rebatePrograms={rebatePrograms}\n              selectedIncentives={selectedIncentives}\n              onToggleIncentive={toggleIncentive}\n            />\n          ) : (\n            <div className=\"bg-white rounded-xl border-2 border-gray-200 p-12 text-center\">\n              <DollarSign className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Incentives Available</h3>\n              <p className=\"text-gray-600\">There are currently no active rebate programs in the system.</p>\n            </div>\n          )}\n        </div>\n      )}\n\n      {activeTab === 'faqs' && (\n        <div className=\"space-y-6\">\n          {bids.length === 0 ? (\n            <div className=\"bg-white rounded-xl border-2 border-gray-200 p-12 text-center\">\n              <BookOpen className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Bids Available</h3>\n              <p className=\"text-gray-600\">Upload your contractor bids to see common questions and answers.</p>\n            </div>\n          ) : (\n            <>\n              {projectFaqData.overall.length > 0 && (\n                <OverallFaqsCard faqs={projectFaqData.overall} />\n              )}\n\n              {projectFaqData.by_bid.length > 0 && (\n                <BidSpecificFaqsCard\n                  bidFaqSets={projectFaqData.by_bid}\n                  switchPreferredBids={new Set<string>()}\n                />\n              )}\n\n              {projectFaqData.overall.length === 0 && projectFaqData.by_bid.length === 0 && (\n                <div className=\"bg-white rounded-xl border-2 border-gray-200 p-12 text-center\">\n                  <BookOpen className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Common Questions Data Available Yet</h3>\n                  <p className=\"text-gray-600\">\n                    Answers will be generated by AI during bid processing. Check back soon!\n                  </p>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      )}\n\n      {activeTab === 'questions' && (\n        <div className=\"space-y-6\">\n        {questions.length === 0 && questionsLoading ? (\n          <div className=\"text-center py-12\">\n            <Loader2 className=\"w-8 h-8 text-switch-green-600 animate-spin mx-auto mb-4\" />\n            <p className=\"text-gray-700 font-medium\">Generating questions for your contractors...</p>\n            <p className=\"text-sm text-gray-500 mt-2\">\n              This may take an additional minute. You can browse other tabs while you wait.\n            </p>\n          </div>\n        ) : bidData.map((bid) => {\n          const bidQuestions = getQuestionsForBid(bid.bidId);\n          const answeredCount = bidQuestions.filter((q) => q.is_answered).length;\n          const unansweredQuestions = bidQuestions.filter((q) => !q.is_answered);\n          const isSelected = selectedContractor === bid.bidId;\n          const isExpanded = expandedBids.has(bid.bidId);\n\n          const isBestPrice = bid.totalAmount === lowestPrice;\n          const isBestNetCost = bid.netCost === lowestNetCost;\n          const isBestRating = bid.googleRating === bestRating && bid.googleRating > 0;\n          const isBestEfficiency = bid.seer2 === bestSeer && bid.seer2 > 0;\n          const totalWarranty = (bid.laborWarranty || 0) + (bid.equipmentWarranty || 0);\n          const isBestWarranty = totalWarranty === bestWarranty && totalWarranty > 0;\n\n          return (\n            <div\n              key={bid.bidId}\n              className={`\n                relative bg-white rounded-xl overflow-hidden transition-all duration-200\n                ${isSelected\n                  ? 'ring-4 ring-switch-green-500 shadow-xl border-2 border-switch-green-500'\n                  : 'border-2 border-gray-200 shadow-md hover:shadow-lg hover:border-gray-300'\n                }\n              `}\n            >\n              <div className={`\n                absolute top-0 left-0 w-1.5 h-full\n                ${isSelected ? 'bg-switch-green-500' : 'bg-gradient-to-b from-switch-green-400 to-switch-green-600'}\n              `} />\n\n              <div className=\"p-6 pl-8\">\n                <div className=\"flex items-start justify-between mb-5\">\n                  <div className=\"flex items-center gap-4\">\n                    <h3 className=\"text-xl font-bold text-gray-900\">{bid.contractor}</h3>\n                    {/* Switch Preferred badge  requires Switch.com integration */}\n                  </div>\n                  <div className=\"flex items-center gap-3\">\n                    {isSelected && (\n                      <div className=\"w-8 h-8 bg-switch-green-500 rounded-full flex items-center justify-center\">\n                        <CheckCircle className=\"w-5 h-5 text-white\" />\n                      </div>\n                    )}\n                    <button\n                      onClick={() => toggleSelection(bid.bidId)}\n                      className={`\n                        py-2 px-4 rounded-lg font-medium transition-all duration-200 flex items-center gap-2 text-sm\n                        ${isSelected\n                          ? 'bg-switch-green-600 text-white hover:bg-switch-green-700'\n                          : 'bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300'\n                        }\n                      `}\n                    >\n                      {isSelected ? (\n                        <>\n                          <CheckCircle className=\"w-4 h-4\" />\n                          My Choice\n                        </>\n                      ) : (\n                        'Mark as My Choice'\n                      )}\n                    </button>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6\">\n                  <div className=\"lg:col-span-5 space-y-4\">\n                    <div className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-5 border border-gray-200\">\n                      <div className=\"flex items-center justify-between mb-3\">\n                        <span className=\"text-sm font-semibold text-gray-600 uppercase tracking-wide\">Total Price</span>\n                        {isBestPrice && (\n                          <span className=\"inline-flex items-center gap-1 px-2.5 py-1 bg-switch-green-600 text-white text-xs font-semibold rounded-full\">\n                            <Star className=\"w-3 h-3\" /> LOWEST\n                          </span>\n                        )}\n                      </div>\n                      <div className={`text-3xl font-bold ${isBestPrice ? 'text-switch-green-700' : 'text-gray-900'}`}>\n                        {formatCurrency(bid.totalAmount)}\n                      </div>\n                      {totalSelectedRebates > 0 && (\n                        <div className=\"mt-3 pt-3 border-t border-gray-200\">\n                          <div className=\"flex items-center justify-between text-sm\">\n                            <span className=\"text-gray-500\">Selected Rebates</span>\n                            <span className=\"text-switch-green-600 font-semibold\">-{formatCurrency(totalSelectedRebates)}</span>\n                          </div>\n                          <div className=\"flex items-center justify-between mt-2\">\n                            <span className=\"text-sm font-semibold text-gray-700\">Net Cost</span>\n                            <span className={`text-xl font-bold ${isBestNetCost ? 'text-switch-green-700' : 'text-gray-900'}`}>\n                              {formatCurrency(bid.netCost)}\n                            </span>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n\n                    <div className=\"grid grid-cols-3 gap-3\">\n                      <div className=\"bg-gray-50 rounded-lg p-4 border border-gray-200\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <Zap className=\"w-4 h-4 text-amber-500\" />\n                          <span className=\"text-xs font-semibold text-gray-500 uppercase\">Equipment</span>\n                        </div>\n                        <div className=\"text-sm font-bold text-gray-900\" title={`${bid.equipmentBrand} ${bid.equipmentModel}`}>\n                          {bid.equipmentBrand}\n                        </div>\n                        {bid.seer2 && (\n                          <div className=\"flex items-center gap-1 mt-1\">\n                            <span className={`text-xs ${isBestEfficiency ? 'text-switch-green-700 font-bold' : 'text-gray-600'}`}>\n                              SEER2: {bid.seer2}\n                            </span>\n                            {isBestEfficiency && <Star className=\"w-3 h-3 text-switch-green-600\" />}\n                          </div>\n                        )}\n                      </div>\n\n                      <div className=\"bg-gray-50 rounded-lg p-4 border border-gray-200\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <Star className=\"w-4 h-4 text-yellow-500\" />\n                          <span className=\"text-xs font-semibold text-gray-500 uppercase\">Rating</span>\n                        </div>\n                        {bid.googleRating ? (\n                          <>\n                            <div className={`text-sm font-bold ${isBestRating ? 'text-switch-green-700' : 'text-gray-900'}`}>\n                              {bid.googleRating.toFixed(1)} / 5\n                              {isBestRating && <Star className=\"w-3 h-3 inline ml-1 text-switch-green-600\" />}\n                            </div>\n                            {bid.reviewCount && (\n                              <div className=\"text-xs text-gray-500 mt-0.5\">{bid.reviewCount} reviews</div>\n                            )}\n                          </>\n                        ) : (\n                          <div className=\"text-sm text-gray-400\">N/A</div>\n                        )}\n                      </div>\n\n                      <div className=\"bg-gray-50 rounded-lg p-4 border border-gray-200\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <Shield className=\"w-4 h-4 text-switch-green-600\" />\n                          <span className=\"text-xs font-semibold text-gray-500 uppercase\">Warranty</span>\n                        </div>\n                        {(bid.laborWarranty || bid.equipmentWarranty) ? (\n                          <div className=\"space-y-0.5\">\n                            {bid.laborWarranty && (\n                              <div className={`text-xs ${isBestWarranty ? 'text-switch-green-700 font-bold' : 'text-gray-900'}`}>\n                                {bid.laborWarranty}yr labor\n                              </div>\n                            )}\n                            {bid.equipmentWarranty && (\n                              <div className={`text-xs ${isBestWarranty ? 'text-switch-green-700 font-bold' : 'text-gray-900'}`}>\n                                {bid.equipmentWarranty}yr equip\n                              </div>\n                            )}\n                            {isBestWarranty && (\n                              <span className=\"inline-flex items-center gap-1 px-1.5 py-0.5 bg-switch-green-600 text-white text-[10px] font-medium rounded mt-1\">\n                                BEST\n                              </span>\n                            )}\n                          </div>\n                        ) : (\n                          <div className=\"text-sm text-gray-400\">N/A</div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"lg:col-span-7\">\n                    <div className=\"border-2 border-gray-200 rounded-xl overflow-hidden h-full flex flex-col\">\n                      <div className=\"bg-gray-100 px-5 py-3 flex items-center justify-between border-b border-gray-200\">\n                        <div className=\"flex items-center gap-2\">\n                          <HelpCircle className=\"w-5 h-5 text-gray-600\" />\n                          <span className=\"text-sm font-bold text-gray-800\">Questions to Ask This Contractor</span>\n                        </div>\n                        <div className=\"flex items-center gap-3\">\n                          <span className=\"text-xs text-gray-500 bg-white px-2 py-1 rounded-full border\">\n                            {answeredCount}/{bidQuestions.length} answered\n                          </span>\n                          {unansweredQuestions.length > 0 && (\n                            <button\n                              onClick={() => copyQuestionsToClipboard(bid.bidId, bid.contractor)}\n                              className=\"flex items-center gap-1.5 px-3 py-1.5 text-sm text-gray-600 hover:text-gray-800 bg-white hover:bg-gray-50 border border-gray-300 rounded-lg transition-colors\"\n                              title=\"Copy questions\"\n                            >\n                              {copiedContractor === bid.bidId ? (\n                                <>\n                                  <Check className=\"w-4 h-4 text-switch-green-600\" />\n                                  <span className=\"text-switch-green-600 font-medium\">Copied!</span>\n                                </>\n                              ) : (\n                                <>\n                                  <Copy className=\"w-4 h-4\" />\n                                  <span>Copy All</span>\n                                </>\n                              )}\n                            </button>\n                          )}\n                        </div>\n                      </div>\n                      <div className=\"p-4 flex-1 overflow-y-auto max-h-72\">\n                        {bidQuestions.length === 0 ? (\n                          <p className=\"text-sm text-gray-500 text-center py-6\">\n                            No questions for this bid.\n                          </p>\n                        ) : (\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                            {bidQuestions.map((question) => (\n                              <div\n                                key={question.id}\n                                className={`flex items-start gap-2 p-3 rounded-lg transition-colors ${\n                                  question.is_answered ? 'bg-gray-50 opacity-60' : 'bg-white border border-gray-200 hover:border-gray-300'\n                                }`}\n                              >\n                                <button\n                                  onClick={() => toggleQuestionAnswered(question)}\n                                  className=\"flex-shrink-0 mt-0.5\"\n                                >\n                                  {question.is_answered ? (\n                                    <CheckCircle className=\"w-5 h-5 text-switch-green-600\" />\n                                  ) : (\n                                    <div className=\"w-5 h-5 rounded-full border-2 border-gray-300 hover:border-switch-green-500 transition-colors\" />\n                                  )}\n                                </button>\n                                <div className=\"flex-1 min-w-0\">\n                                  <p className={`text-sm ${question.is_answered ? 'text-gray-400 line-through' : 'text-gray-800'}`}>\n                                    {question.question_text}\n                                  </p>\n                                  {!question.is_answered && (\n                                    <div className=\"flex items-center gap-1 mt-1.5\">\n                                      <span className={`text-[10px] px-2 py-0.5 rounded border font-medium ${getPriorityColor(question.priority)}`}>\n                                        {question.priority}\n                                      </span>\n                                    </div>\n                                  )}\n                                </div>\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {isExpanded && (\n                  <div className=\"mt-5 pt-5 border-t border-gray-200\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                      <div className=\"space-y-3\">\n                        <h4 className=\"text-sm font-semibold text-gray-700 uppercase tracking-wide\">Contact Info</h4>\n                        {bid.phone && (\n                          <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                            <Phone className=\"w-4 h-4 text-gray-400\" />\n                            {bid.phone}\n                          </div>\n                        )}\n                        {bid.email && (\n                          <div className=\"flex items-center gap-2 text-sm\">\n                            <Mail className=\"w-4 h-4 text-gray-400\" />\n                            <a href={`mailto:${bid.email}`} className=\"text-switch-green-600 hover:underline\">\n                              {bid.email}\n                            </a>\n                          </div>\n                        )}\n                        {bid.website && (\n                          <div className=\"flex items-center gap-2 text-sm\">\n                            <Globe className=\"w-4 h-4 text-gray-400\" />\n                            <a href={bid.website} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-switch-green-600 hover:underline truncate\">\n                              {bid.website.replace(/^https?:\\/\\//, '')}\n                            </a>\n                          </div>\n                        )}\n                        {bid.license && (\n                          <div className=\"text-sm text-gray-600\">\n                            <span className=\"text-gray-500\">License:</span> {bid.license}\n                            {bid.licenseState && ` (${bid.licenseState})`}\n                          </div>\n                        )}\n                        {bid.insuranceVerified && (\n                          <div className=\"flex items-center gap-1.5 text-sm text-switch-green-700\">\n                            <CheckCircle className=\"w-4 h-4\" /> Insurance Verified\n                          </div>\n                        )}\n                      </div>\n\n                      <div className=\"space-y-3\">\n                        <h4 className=\"text-sm font-semibold text-gray-700 uppercase tracking-wide\">Timeline & Details</h4>\n                        {bid.estimatedDays && (\n                          <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                            <Clock className=\"w-4 h-4 text-gray-400\" />\n                            Est. {bid.estimatedDays} days to complete\n                          </div>\n                        )}\n                        {bid.startDateAvailable && (\n                          <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                            <Calendar className=\"w-4 h-4 text-gray-400\" />\n                            Available: {formatDate(bid.startDateAvailable)}\n                          </div>\n                        )}\n                        {bid.validUntil && (\n                          <div className=\"text-sm text-gray-600\">\n                            <span className=\"text-gray-500\">Quote valid until:</span> {formatDate(bid.validUntil)}\n                          </div>\n                        )}\n                        {bid.bidDate && (\n                          <div className=\"text-sm text-gray-600\">\n                            <span className=\"text-gray-500\">Bid date:</span> {formatDate(bid.bidDate)}\n                          </div>\n                        )}\n                        {bid.financingOffered && (\n                          <div className=\"text-sm text-gray-600\">\n                            <span className=\"text-switch-green-700 font-medium\">Financing Available</span>\n                            {bid.financingTerms && <span className=\"text-gray-500 ml-1\">- {bid.financingTerms}</span>}\n                          </div>\n                        )}\n                      </div>\n\n                      <div className=\"space-y-3\">\n                        <h4 className=\"text-sm font-semibold text-gray-700 uppercase tracking-wide\">Experience</h4>\n                        {bid.yearsInBusiness && (\n                          <div className=\"text-sm text-gray-600\">\n                            {bid.yearsInBusiness} years in business\n                          </div>\n                        )}\n                        {bid.totalInstalls && (\n                          <div className=\"text-sm text-gray-600\">\n                            {bid.totalInstalls.toLocaleString()} total installs\n                          </div>\n                        )}\n                        {bid.certifications.length > 0 && (\n                          <div className=\"flex flex-wrap gap-1\">\n                            {bid.certifications.map((cert, i) => (\n                              <span key={i} className=\"text-xs px-2 py-0.5 bg-gray-100 text-gray-700 rounded\">\n                                {cert}\n                              </span>\n                            ))}\n                          </div>\n                        )}\n                        {bid.extractionConfidence && (\n                          <div className=\"text-xs text-gray-500\">\n                            Extraction confidence: <span className=\"capitalize font-medium\">{bid.extractionConfidence}</span>\n                          </div>\n                        )}\n                        {(bid.valueScore || bid.qualityScore || bid.completenessScore) && (\n                          <div className=\"flex items-center gap-2\">\n                            {bid.valueScore && (\n                              <span className=\"text-xs px-2 py-0.5 bg-switch-green-100 text-switch-green-700 rounded\">\n                                Value: {bid.valueScore}\n                              </span>\n                            )}\n                            {bid.qualityScore && (\n                              <span className=\"text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded\">\n                                Quality: {bid.qualityScore}\n                              </span>\n                            )}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"mt-4 pt-4 border-t border-gray-100\">\n                  <button\n                    onClick={() => toggleBidExpanded(bid.bidId)}\n                    className=\"flex items-center gap-2 text-sm font-medium text-gray-500 hover:text-gray-700 transition-colors\"\n                  >\n                    {isExpanded ? (\n                      <>\n                        <ChevronUp className=\"w-4 h-4\" />\n                        Show Less\n                      </>\n                    ) : (\n                      <>\n                        <ChevronDown className=\"w-4 h-4\" />\n                        Show More Details\n                      </>\n                    )}\n                  </button>\n                </div>\n              </div>\n            </div>\n          );\n        })}\n\n          {bids.length === 0 && (\n            <div className=\"bg-white rounded-xl border-2 border-gray-200 p-12 text-center\">\n              <HelpCircle className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Bids to Review</h3>\n              <p className=\"text-gray-600\">Upload your contractor bids in the Gather phase to see them here.</p>\n            </div>\n          )}\n        </div>\n      )}\n\n      <div className=\"bg-gray-50 rounded-xl border border-gray-200 p-4\">\n        <p className=\"text-sm text-gray-600\">\n          <strong>Note:</strong> Marking a contractor as your choice is optional and for your reference only.\n          You will work directly with your chosen contractor to finalize the installation.\n        </p>\n      </div>\n\n      <div className=\"flex justify-end\">\n        <button\n          onClick={handleContinue}\n          className=\"btn btn-primary flex items-center gap-2 px-6\"\n        >\n          Continue\n          <ArrowRight className=\"w-4 h-4\" />\n        </button>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { Star, CheckCircle2, AlertCircle, Loader2, Download } from 'lucide-react';\nimport { supabase } from '../lib/supabaseClient';\n\ninterface ContractorReviewSurveyProps {\n  projectId: string;\n  contractorBidId: string;\n  onSubmitSuccess?: () => void;\n}\n\nconst ISSUE_OPTIONS = [\n  'Delayed start date',\n  'Project took longer than expected',\n  'Additional costs not in original bid',\n  'Equipment different than specified',\n  'Lack of communication',\n  'Quality concerns',\n  'Cleanup issues',\n  'Incomplete work',\n  'Other',\n];\n\nexport function ContractorReviewSurvey({\n  projectId,\n  contractorBidId,\n  onSubmitSuccess,\n}: ContractorReviewSurveyProps) {\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [existingReview, setExistingReview] = useState<any>(null);\n\n  const [overallRating, setOverallRating] = useState(0);\n  const [qualityRating, setQualityRating] = useState(0);\n  const [professionalismRating, setProfessionalismRating] = useState(0);\n  const [communicationRating, setCommunicationRating] = useState(0);\n  const [timelinessRating, setTimelinessRating] = useState(0);\n\n  const [usedChecklist, setUsedChecklist] = useState<boolean | null>(null);\n  const [checklistCompletenessRating, setChecklistCompletenessRating] = useState(0);\n\n  const [wouldRecommend, setWouldRecommend] = useState<boolean | null>(null);\n  const [completedOnTime, setCompletedOnTime] = useState<boolean | null>(null);\n  const [stayedWithinBudget, setStayedWithinBudget] = useState<boolean | null>(null);\n  const [criticalItemsVerified, setCriticalItemsVerified] = useState<boolean | null>(null);\n  const [photoDocumentationProvided, setPhotoDocumentationProvided] = useState<boolean | null>(null);\n\n  const [issuesEncountered, setIssuesEncountered] = useState<string[]>([]);\n  const [positiveComments, setPositiveComments] = useState('');\n  const [improvementSuggestions, setImprovementSuggestions] = useState('');\n\n  const [errors, setErrors] = useState<string[]>([]);\n\n  useEffect(() => {\n    loadExistingReview();\n  }, [projectId]);\n\n  async function loadExistingReview() {\n    const { data } = await supabase\n      .from('contractor_installation_reviews')\n      .select('*')\n      .eq('project_id', projectId)\n      .maybeSingle();\n\n    if (data) {\n      setExistingReview(data);\n      setOverallRating(data.overall_rating);\n      setQualityRating(data.quality_of_work_rating);\n      setProfessionalismRating(data.professionalism_rating);\n      setCommunicationRating(data.communication_rating);\n      setTimelinessRating(data.timeliness_rating);\n      setUsedChecklist(data.used_checklist);\n      setChecklistCompletenessRating(data.checklist_completeness_rating || 0);\n      setWouldRecommend(data.would_recommend);\n      setCompletedOnTime(data.completed_on_time);\n      setStayedWithinBudget(data.stayed_within_budget);\n      setCriticalItemsVerified(data.critical_items_verified);\n      setPhotoDocumentationProvided(data.photo_documentation_provided);\n      setIssuesEncountered(data.issues_encountered || []);\n      setPositiveComments(data.positive_comments || '');\n      setImprovementSuggestions(data.improvement_suggestions || '');\n      setSubmitted(true);\n    }\n\n    setLoading(false);\n  }\n\n  function validateForm(): boolean {\n    const newErrors: string[] = [];\n\n    if (!overallRating) newErrors.push('Overall rating is required');\n    if (!qualityRating) newErrors.push('Quality rating is required');\n    if (!professionalismRating) newErrors.push('Professionalism rating is required');\n    if (!communicationRating) newErrors.push('Communication rating is required');\n    if (!timelinessRating) newErrors.push('Timeliness rating is required');\n    if (usedChecklist === null) newErrors.push('Please indicate if the contractor used the checklist');\n    if (wouldRecommend === null) newErrors.push('Please indicate if you would recommend this contractor');\n    if (completedOnTime === null) newErrors.push('Please indicate if the project was completed on time');\n    if (stayedWithinBudget === null) newErrors.push('Please indicate if the project stayed within budget');\n    if (criticalItemsVerified === null) newErrors.push('Please indicate if critical items were verified');\n    if (photoDocumentationProvided === null) newErrors.push('Please indicate if photo documentation was provided');\n\n    setErrors(newErrors);\n    return newErrors.length === 0;\n  }\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n\n    if (!validateForm()) {\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n      return;\n    }\n\n    setSubmitting(true);\n\n    try {\n      const response = await fetch(\n        `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/submit-contractor-review`,\n        {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${import.meta.env.VITE_SUPABASE_ANON_KEY}`,\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            project_id: projectId,\n            contractor_bid_id: contractorBidId,\n            overall_rating: overallRating,\n            quality_of_work_rating: qualityRating,\n            professionalism_rating: professionalismRating,\n            communication_rating: communicationRating,\n            timeliness_rating: timelinessRating,\n            used_checklist: usedChecklist,\n            checklist_completeness_rating: usedChecklist && checklistCompletenessRating > 0 ? checklistCompletenessRating : null,\n            would_recommend: wouldRecommend,\n            completed_on_time: completedOnTime,\n            stayed_within_budget: stayedWithinBudget,\n            critical_items_verified: criticalItemsVerified,\n            photo_documentation_provided: photoDocumentationProvided,\n            issues_encountered: issuesEncountered,\n            positive_comments: positiveComments.trim() || null,\n            improvement_suggestions: improvementSuggestions.trim() || null,\n          }),\n        }\n      );\n\n      const result = await response.json();\n\n      if (!response.ok) {\n        throw new Error(result.error || 'Failed to submit review');\n      }\n\n      setSubmitted(true);\n      if (onSubmitSuccess) {\n        onSubmitSuccess();\n      }\n    } catch (error: any) {\n      setErrors([error.message || 'Failed to submit review. Please try again.']);\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  function handleDownloadChecklist() {\n    const url = `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/generate-contractor-checklist?project_id=${projectId}`;\n    window.open(url, '_blank');\n  }\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-switch-green-600 mx-auto mb-4\" />\n        <p className=\"text-gray-500\">Loading survey...</p>\n      </div>\n    );\n  }\n\n  if (submitted && !existingReview) {\n    return (\n      <div className=\"bg-switch-green-50 border border-switch-green-200 rounded-xl p-8 text-center\">\n        <CheckCircle2 className=\"w-16 h-16 text-switch-green-600 mx-auto mb-4\" />\n        <h2 className=\"text-2xl font-bold text-switch-green-900 mb-2\">Thank You!</h2>\n        <p className=\"text-switch-green-800 mb-4\">\n          Your review has been submitted successfully and will help other homeowners make informed decisions.\n        </p>\n        <p className=\"text-sm text-switch-green-700\">\n          Your feedback helps improve contractor quality standards and supports the TheSwitchIsOn community.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-8\">\n      {errors.length > 0 && (\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n          <div className=\"flex items-start gap-3\">\n            <AlertCircle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\n            <div>\n              <h3 className=\"font-semibold text-red-900 mb-2\">Please fix the following errors:</h3>\n              <ul className=\"list-disc list-inside text-sm text-red-700 space-y-1\">\n                {errors.map((error, idx) => (\n                  <li key={idx}>{error}</li>\n                ))}\n              </ul>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3\">\n        <Download className=\"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5\" />\n        <div className=\"flex-1\">\n          <h3 className=\"font-semibold text-blue-900 mb-1\">Need the Quality Checklist?</h3>\n          <p className=\"text-sm text-blue-800 mb-3\">\n            Download a printable quality installation checklist to review with your contractor.\n          </p>\n          <button\n            type=\"button\"\n            onClick={handleDownloadChecklist}\n            className=\"btn btn-secondary text-sm\"\n          >\n            Download Checklist\n          </button>\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Overall Experience</h2>\n\n        <StarRating\n          label=\"Overall Satisfaction\"\n          value={overallRating}\n          onChange={setOverallRating}\n          required\n        />\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Detailed Ratings</h2>\n        <div className=\"space-y-6\">\n          <StarRating\n            label=\"Quality of Work\"\n            description=\"Installation quality, attention to detail, workmanship\"\n            value={qualityRating}\n            onChange={setQualityRating}\n            required\n          />\n          <StarRating\n            label=\"Professionalism\"\n            description=\"Conduct, appearance, respect for your property\"\n            value={professionalismRating}\n            onChange={setProfessionalismRating}\n            required\n          />\n          <StarRating\n            label=\"Communication\"\n            description=\"Responsiveness, clarity, updates throughout the project\"\n            value={communicationRating}\n            onChange={setCommunicationRating}\n            required\n          />\n          <StarRating\n            label=\"Timeliness\"\n            description=\"Punctuality, meeting deadlines, project duration\"\n            value={timelinessRating}\n            onChange={setTimelinessRating}\n            required\n          />\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Quality Checklist Usage</h2>\n\n        <YesNoQuestion\n          label=\"Did the contractor use the quality installation checklist provided?\"\n          value={usedChecklist}\n          onChange={setUsedChecklist}\n          required\n        />\n\n        {usedChecklist && (\n          <div className=\"mt-6 pl-4 border-l-4 border-switch-green-200\">\n            <StarRating\n              label=\"How thoroughly did they complete the checklist?\"\n              value={checklistCompletenessRating}\n              onChange={setChecklistCompletenessRating}\n            />\n          </div>\n        )}\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Project Outcomes</h2>\n        <div className=\"space-y-6\">\n          <YesNoQuestion\n            label=\"Would you recommend this contractor to others?\"\n            value={wouldRecommend}\n            onChange={setWouldRecommend}\n            required\n          />\n          <YesNoQuestion\n            label=\"Was the project completed on time?\"\n            value={completedOnTime}\n            onChange={setCompletedOnTime}\n            required\n          />\n          <YesNoQuestion\n            label=\"Did the final cost stay within the original budget?\"\n            description=\"No unexpected or unreasonable additional charges\"\n            value={stayedWithinBudget}\n            onChange={setStayedWithinBudget}\n            required\n          />\n          <YesNoQuestion\n            label=\"Were all critical safety and quality items verified?\"\n            description=\"Equipment properly sized, electrical work up to code, system tested\"\n            value={criticalItemsVerified}\n            onChange={setCriticalItemsVerified}\n            required\n          />\n          <YesNoQuestion\n            label=\"Did the contractor provide photo documentation of the installation?\"\n            description=\"Photos of equipment, electrical, ductwork, etc.\"\n            value={photoDocumentationProvided}\n            onChange={setPhotoDocumentationProvided}\n            required\n          />\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Issues Encountered</h2>\n        <p className=\"text-sm text-gray-600 mb-4\">Select any issues you experienced (optional)</p>\n\n        <div className=\"grid sm:grid-cols-2 gap-3\">\n          {ISSUE_OPTIONS.map((issue) => (\n            <label key={issue} className=\"flex items-center gap-2 cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={issuesEncountered.includes(issue)}\n                onChange={(e) => {\n                  if (e.target.checked) {\n                    setIssuesEncountered([...issuesEncountered, issue]);\n                  } else {\n                    setIssuesEncountered(issuesEncountered.filter((i) => i !== issue));\n                  }\n                }}\n                className=\"w-4 h-4 text-switch-green-600 border-gray-300 rounded focus:ring-switch-green-500\"\n              />\n              <span className=\"text-sm text-gray-700\">{issue}</span>\n            </label>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Additional Feedback</h2>\n\n        <div className=\"space-y-6\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              What went well? (optional)\n            </label>\n            <textarea\n              value={positiveComments}\n              onChange={(e) => setPositiveComments(e.target.value)}\n              placeholder=\"Share what you appreciated about this contractor's work...\"\n              rows={4}\n              maxLength={1000}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-switch-green-500 focus:border-transparent\"\n            />\n            <p className=\"text-xs text-gray-500 mt-1\">{positiveComments.length}/1000 characters</p>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Suggestions for improvement (optional)\n            </label>\n            <textarea\n              value={improvementSuggestions}\n              onChange={(e) => setImprovementSuggestions(e.target.value)}\n              placeholder=\"Constructive feedback helps contractors improve their service...\"\n              rows={4}\n              maxLength={1000}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-switch-green-500 focus:border-transparent\"\n            />\n            <p className=\"text-xs text-gray-500 mt-1\">{improvementSuggestions.length}/1000 characters</p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex items-center justify-between pt-4\">\n        <p className=\"text-sm text-gray-600\">\n          <span className=\"text-red-600\">*</span> Required fields\n        </p>\n        <button\n          type=\"submit\"\n          disabled={submitting}\n          className=\"btn btn-primary flex items-center gap-2\"\n        >\n          {submitting ? (\n            <>\n              <Loader2 className=\"w-5 h-5 animate-spin\" />\n              Submitting...\n            </>\n          ) : (\n            <>\n              <CheckCircle2 className=\"w-5 h-5\" />\n              {existingReview ? 'Update Review' : 'Submit Review'}\n            </>\n          )}\n        </button>\n      </div>\n    </form>\n  );\n}\n\nfunction StarRating({\n  label,\n  description,\n  value,\n  onChange,\n  required = false,\n}: {\n  label: string;\n  description?: string;\n  value: number;\n  onChange: (value: number) => void;\n  required?: boolean;\n}) {\n  return (\n    <div>\n      <label className=\"block text-sm font-medium text-gray-900 mb-2\">\n        {label} {required && <span className=\"text-red-600\">*</span>}\n      </label>\n      {description && <p className=\"text-sm text-gray-600 mb-3\">{description}</p>}\n      <div className=\"flex items-center gap-2\">\n        {[1, 2, 3, 4, 5].map((star) => (\n          <button\n            key={star}\n            type=\"button\"\n            onClick={() => onChange(star)}\n            className=\"focus:outline-none focus:ring-2 focus:ring-switch-green-500 rounded\"\n          >\n            <Star\n              className={`w-8 h-8 ${\n                star <= value\n                  ? 'fill-yellow-400 text-yellow-400'\n                  : 'text-gray-300 hover:text-yellow-300'\n              } transition-colors`}\n            />\n          </button>\n        ))}\n        {value > 0 && (\n          <span className=\"ml-2 text-sm font-medium text-gray-700\">\n            {value} of 5 stars\n          </span>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction YesNoQuestion({\n  label,\n  description,\n  value,\n  onChange,\n  required = false,\n}: {\n  label: string;\n  description?: string;\n  value: boolean | null;\n  onChange: (value: boolean) => void;\n  required?: boolean;\n}) {\n  return (\n    <div>\n      <label className=\"block text-sm font-medium text-gray-900 mb-2\">\n        {label} {required && <span className=\"text-red-600\">*</span>}\n      </label>\n      {description && <p className=\"text-sm text-gray-600 mb-3\">{description}</p>}\n      <div className=\"flex gap-4\">\n        <button\n          type=\"button\"\n          onClick={() => onChange(true)}\n          className={`px-6 py-2 rounded-lg font-medium transition-all ${\n            value === true\n              ? 'bg-switch-green-600 text-white'\n              : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n          }`}\n        >\n          Yes\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => onChange(false)}\n          className={`px-6 py-2 rounded-lg font-medium transition-all ${\n            value === false\n              ? 'bg-red-600 text-white'\n              : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n          }`}\n        >\n          No\n        </button>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { ClipboardCheck, Download, FileCheck2, MessageSquare } from 'lucide-react';\nimport { usePhase } from '../../context/PhaseContext';\nimport { supabase } from '../../lib/supabaseClient';\nimport { getBidWithChildren } from '../../lib/database/bidsmartService';\nimport { ContractorReviewSurvey } from '../ContractorReviewSurvey';\nimport type { BidWithChildren } from '../../lib/types';\n\nexport function VerifyPhase() {\n  const { projectId } = usePhase();\n  const [loading, setLoading] = useState(true);\n  const [selectedBid, setSelectedBid] = useState<BidWithChildren | null>(null);\n\n  useEffect(() => {\n    if (projectId) {\n      loadProjectData();\n    }\n  }, [projectId]);\n\n  async function loadProjectData() {\n    const { data: projectData } = await supabase\n      .from('projects')\n      .select('id, selected_bid_id')\n      .eq('id', projectId)\n      .single();\n\n    if (projectData?.selected_bid_id) {\n      try {\n        const bidWithChildren = await getBidWithChildren(projectData.selected_bid_id);\n        setSelectedBid(bidWithChildren);\n      } catch (error) {\n        console.error('Error loading selected bid:', error);\n      }\n    }\n\n    setLoading(false);\n  }\n\n  function handleDownloadChecklist() {\n    const url = `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/generate-contractor-checklist?project_id=${projectId}`;\n    window.open(url, '_blank');\n  }\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12 text-gray-500\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-switch-green-600 mx-auto mb-4\" />\n        Loading...\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Installation Complete & Review</h1>\n        <p className=\"text-gray-600 mt-1\">\n          Help other homeowners by sharing your experience with this contractor.\n        </p>\n      </div>\n\n      <div className=\"bg-gradient-to-r from-blue-50 to-switch-green-50 border border-blue-200 rounded-xl p-6\">\n        <div className=\"flex items-start gap-4\">\n          <div className=\"p-3 bg-white rounded-lg\">\n            <ClipboardCheck className=\"w-8 h-8 text-switch-green-600\" />\n          </div>\n          <div className=\"flex-1\">\n            <h2 className=\"text-lg font-bold text-gray-900 mb-2 flex items-center gap-2\">\n              <FileCheck2 className=\"w-5 h-5\" />\n              Quality Installation Checklist\n            </h2>\n            <p className=\"text-gray-700 mb-4\">\n              Before your installation began, you should have provided the contractor with a quality\n              installation checklist. This ensures industry-standard practices are followed.\n            </p>\n            <div className=\"bg-white rounded-lg p-4 border border-gray-200\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"font-semibold text-gray-900 mb-1\">Download the Checklist</p>\n                  <p className=\"text-sm text-gray-600\">\n                    If you haven't already, you can still download it for your records\n                  </p>\n                </div>\n                <button\n                  onClick={handleDownloadChecklist}\n                  className=\"btn btn-secondary flex items-center gap-2 ml-4\"\n                >\n                  <Download className=\"w-4 h-4\" />\n                  Download\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-white border border-gray-200 rounded-xl p-6\">\n        <div className=\"flex items-start gap-4 mb-6\">\n          <div className=\"p-3 bg-switch-green-50 rounded-lg\">\n            <MessageSquare className=\"w-8 h-8 text-switch-green-600\" />\n          </div>\n          <div>\n            <h2 className=\"text-lg font-bold text-gray-900 mb-1\">\n              Share Your Experience\n            </h2>\n            <p className=\"text-gray-600\">\n              Your feedback helps build a trusted community and improves contractor quality standards.\n              This survey takes about 5 minutes to complete.\n            </p>\n          </div>\n        </div>\n\n        {selectedBid ? (\n          <ContractorReviewSurvey\n            projectId={projectId!}\n            contractorBidId={selectedBid.bid.id}\n            onSubmitSuccess={() => {\n              loadProjectData();\n            }}\n          />\n        ) : (\n          <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4 text-center\">\n            <p className=\"text-amber-800\">\n              Please select a contractor in the previous phase before completing this review.\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { Eye, Upload } from 'lucide-react';\n\ninterface DemoBannerProps {\n  onStartOwn?: () => void;\n}\n\nexport function DemoBanner({ onStartOwn }: DemoBannerProps) {\n  return (\n    <div className=\"bg-teal-50 border border-teal-200 rounded-xl p-4 mb-6\">\n      <div className=\"flex items-center justify-between gap-4\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-8 h-8 rounded-lg bg-teal-100 flex items-center justify-center flex-shrink-0\">\n            <Eye className=\"w-4 h-4 text-teal-600\" />\n          </div>\n          <div>\n            <p className=\"font-medium text-teal-800 text-sm\">Demo Mode - View Only</p>\n            <p className=\"text-teal-700 text-xs\">\n              You are viewing a demo comparison. Data cannot be modified.\n            </p>\n          </div>\n        </div>\n        {onStartOwn && (\n          <button\n            onClick={onStartOwn}\n            className=\"flex items-center gap-2 px-3 py-1.5 bg-teal-600 text-white text-sm font-medium rounded-lg hover:bg-teal-700 transition-colors whitespace-nowrap\"\n          >\n            <Upload className=\"w-4 h-4\" />\n            <span className=\"hidden sm:inline\">Start Your Own</span>\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { Clock, Bell } from 'lucide-react';\n\ninterface ProcessingBannerProps {\n  email?: string;\n}\n\nexport function ProcessingBanner({ email }: ProcessingBannerProps) {\n  return (\n    <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6\">\n      <div className=\"flex items-center gap-3\">\n        <div className=\"w-8 h-8 rounded-lg bg-amber-100 flex items-center justify-center flex-shrink-0\">\n          <Clock className=\"w-4 h-4 text-amber-600 animate-pulse\" />\n        </div>\n        <div className=\"flex-1\">\n          <p className=\"font-medium text-amber-800 text-sm flex items-center gap-2\">\n            <Bell className=\"w-4 h-4\" />\n            Your bids are being analyzed\n          </p>\n          <p className=\"text-amber-700 text-xs\">\n            We'll notify you{email ? ` at ${email}` : ''} when your analysis is ready. Feel free to explore this demo in the meantime!\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { PhaseProvider, usePhase } from '../context/PhaseContext';\nimport { PhaseLayout } from './PhaseLayout';\nimport { GatherPhase } from './phases/GatherPhase';\nimport { ComparePhase } from './phases/ComparePhase';\nimport { DecidePhase } from './phases/DecidePhase';\nimport { VerifyPhase } from './phases/VerifyPhase';\nimport { AlphaBanner } from './AlphaBanner';\nimport { DemoBanner } from './DemoBanner';\nimport { ProcessingBanner } from './ProcessingBanner';\nimport type { UserExt } from '../lib/types';\n\ninterface BidSmartFlowProps {\n  user: UserExt;\n  projectId?: string;\n  onNavigateHome?: () => void;\n  processingProject?: {\n    email?: string;\n  } | null;\n}\n\nfunction PhaseContentWrapper({ onNavigateHome, processingProject }: { onNavigateHome?: () => void; processingProject?: { email?: string } | null }) {\n  const { currentPhase, loading, error, project, isDemoMode } = usePhase();\n\n  const content = (\n    <PhaseContent loading={loading} error={error} currentPhase={currentPhase} isDemoMode={isDemoMode} />\n  );\n\n  return (\n    <>\n      <AlphaBanner />\n      <PhaseLayout onNavigateHome={onNavigateHome} projectName={project?.project_name} isDemoMode={isDemoMode}>\n        {isDemoMode && processingProject && <ProcessingBanner email={processingProject.email} />}\n        {isDemoMode && <DemoBanner onStartOwn={onNavigateHome} />}\n        {content}\n      </PhaseLayout>\n    </>\n  );\n}\n\nfunction PhaseContent({ loading, error, currentPhase, isDemoMode }: { loading: boolean; error: string | null; currentPhase: number; isDemoMode: boolean }) {\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-switch-green-600 mx-auto mb-4\" />\n          <p className=\"text-gray-500\">Loading your project...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 border border-red-200 rounded-xl p-6 text-center\">\n        <p className=\"text-red-700\">{error}</p>\n        <button\n          onClick={() => window.location.reload()}\n          className=\"btn btn-primary mt-4\"\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  switch (currentPhase) {\n    case 1:\n      return isDemoMode ? <ComparePhase /> : <GatherPhase />;\n    case 2:\n      return <ComparePhase />;\n    case 3:\n      return <DecidePhase />;\n    case 4:\n      return <VerifyPhase />;\n    default:\n      return isDemoMode ? <ComparePhase /> : <GatherPhase />;\n  }\n}\n\nexport function BidSmartFlow({ user, projectId, onNavigateHome, processingProject }: BidSmartFlowProps) {\n  return (\n    <PhaseProvider userId={user.id} initialProjectId={projectId}>\n      <PhaseContentWrapper onNavigateHome={onNavigateHome} processingProject={processingProject} />\n    </PhaseProvider>\n  );\n}\n","/**\n * Admin Service\n * \n * Functions for admin dashboard: stats retrieval and analytics tracking\n */\n\nimport { supabase } from '../supabaseClient';\n\n// ============================================\n// TYPES\n// ============================================\n\nexport interface AdminStats {\n  total_projects: number;\n  draft_projects: number;\n  analyzing_projects: number;\n  comparing_projects: number;\n  completed_projects: number;\n  total_runs: number;\n  total_bids: number;\n  unique_contractors: number;\n  total_pdfs: number;\n  extracted_pdfs: number;\n  failed_pdfs: number;\n  total_users: number;\n  active_users_7d: number;\n  active_users_30d: number;\n  feedback_liked: number;\n  feedback_wishlist: number;\n  feedback_bugs: number;\n  projects_24h: number;\n  projects_7d: number;\n  bids_24h: number;\n  bids_7d: number;\n  generated_at: string;\n}\n\nexport interface FeatureUsageStat {\n  event_name: string;\n  event_category: string | null;\n  total_count: number;\n  unique_sessions: number;\n  unique_users: number;\n  first_occurrence: string;\n  last_occurrence: string;\n  count_24h: number;\n  count_7d: number;\n}\n\nexport interface DailyStat {\n  date: string;\n  projects_created: number;\n  unique_users: number;\n}\n\nexport interface AnalyticsEvent {\n  event_type: 'click' | 'view' | 'action';\n  event_name: string;\n  event_category?: string;\n  session_id?: string;\n  user_email?: string;\n  project_id?: string;\n  event_data?: Record<string, unknown>;\n  page_url?: string;\n  referrer?: string;\n}\n\nexport interface UserFeedback {\n  id: string;\n  type: 'liked' | 'wishlist' | 'bug';\n  message: string;\n  url: string | null;\n  user_agent: string | null;\n  timestamp: string | null;\n  created_at: string;\n}\n\n// ============================================\n// SESSION MANAGEMENT\n// ============================================\n\nconst SESSION_KEY = 'bidsmart_session_id';\n\nexport function getSessionId(): string {\n  let sessionId = sessionStorage.getItem(SESSION_KEY);\n  if (!sessionId) {\n    sessionId = crypto.randomUUID();\n    sessionStorage.setItem(SESSION_KEY, sessionId);\n  }\n  return sessionId;\n}\n\n// ============================================\n// ADMIN STATS\n// ============================================\n\nexport async function getAdminStats(): Promise<AdminStats | null> {\n  const { data, error } = await supabase\n    .from('admin_stats')\n    .select('*')\n    .single();\n\n  if (error) {\n    console.error('Error fetching admin stats:', error);\n    return null;\n  }\n\n  return data;\n}\n\nexport async function getFeatureUsageStats(): Promise<FeatureUsageStat[]> {\n  const { data, error } = await supabase\n    .from('feature_usage_stats')\n    .select('*')\n    .order('total_count', { ascending: false });\n\n  if (error) {\n    console.error('Error fetching feature usage stats:', error);\n    return [];\n  }\n\n  return data || [];\n}\n\nexport async function getDailyStats(days: number = 30): Promise<DailyStat[]> {\n  const { data, error } = await supabase\n    .from('daily_stats')\n    .select('*')\n    .limit(days);\n\n  if (error) {\n    console.error('Error fetching daily stats:', error);\n    return [];\n  }\n\n  return data || [];\n}\n\nexport async function getUserFeedback(): Promise<UserFeedback[]> {\n  const { data, error } = await supabase\n    .from('user_feedback')\n    .select('*')\n    .order('created_at', { ascending: false })\n    .limit(100);\n\n  if (error) {\n    console.error('Error fetching user feedback:', error);\n    return [];\n  }\n\n  return data || [];\n}\n\n// ============================================\n// ANALYTICS TRACKING\n// ============================================\n\nexport async function trackEvent(event: AnalyticsEvent): Promise<void> {\n  try {\n    const { error } = await supabase.from('analytics_events').insert({\n      event_type: event.event_type,\n      event_name: event.event_name,\n      event_category: event.event_category,\n      session_id: event.session_id || getSessionId(),\n      user_email: event.user_email,\n      project_id: event.project_id,\n      event_data: event.event_data,\n      page_url: event.page_url || window.location.href,\n      referrer: event.referrer || document.referrer,\n      user_agent: navigator.userAgent,\n      client_timestamp: new Date().toISOString(),\n    });\n\n    if (error) {\n      console.error('Error tracking event:', error);\n    }\n  } catch (err) {\n    // Silently fail - don't break user experience for analytics\n    console.error('Analytics tracking failed:', err);\n  }\n}\n\n// Convenience functions for common events\nexport function trackClick(name: string, category?: string, data?: Record<string, unknown>): void {\n  trackEvent({\n    event_type: 'click',\n    event_name: name,\n    event_category: category,\n    event_data: data,\n  });\n}\n\nexport function trackView(name: string, category?: string, data?: Record<string, unknown>): void {\n  trackEvent({\n    event_type: 'view',\n    event_name: name,\n    event_category: category,\n    event_data: data,\n  });\n}\n\nexport function trackAction(name: string, category?: string, data?: Record<string, unknown>): void {\n  trackEvent({\n    event_type: 'action',\n    event_name: name,\n    event_category: category,\n    event_data: data,\n  });\n}\n\n// ============================================\n// ADMIN ACCESS CHECK\n// ============================================\n\nconst ADMIN_EMAILS = [\n  'dan@theswitchison.org',\n  'admin@theswitchison.org',\n];\n\nexport function isAdminEmail(email: string): boolean {\n  return ADMIN_EMAILS.includes(email.toLowerCase());\n}\n\n// ============================================\n// ADMIN DATA CLEANUP\n// ============================================\n\nconst SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL;\nconst SUPABASE_ANON_KEY = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\nexport interface AdminProject {\n  id: string;\n  project_name: string | null;\n  status: string;\n  created_at: string;\n  updated_at: string;\n  notification_email: string | null;\n  pdf_uploads: Array<{ id: string; filename: string; status: string; created_at: string }>;\n  bids: Array<{ id: string; contractor_name: string; created_at: string }>;\n}\n\nexport interface CleanupResult {\n  success: boolean;\n  message?: string;\n  projects?: AdminProject[];\n  results?: Array<{ success: boolean; projectId: string; error?: string }>;\n}\n\nasync function callAdminCleanup(body: Record<string, unknown>): Promise<CleanupResult> {\n  try {\n    const response = await fetch(`${SUPABASE_URL}/functions/v1/admin-cleanup`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,\n        'apikey': SUPABASE_ANON_KEY,\n      },\n      body: JSON.stringify(body),\n    });\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      return { success: false, message: data.error || 'Request failed' };\n    }\n\n    return { success: true, ...data };\n  } catch (error) {\n    console.error('Admin cleanup error:', error);\n    return { success: false, message: 'Network error' };\n  }\n}\n\nexport async function listAllProjects(userEmail: string): Promise<CleanupResult> {\n  return callAdminCleanup({ action: 'list_projects', userEmail });\n}\n\nexport async function listFailedProjects(userEmail: string): Promise<CleanupResult> {\n  return callAdminCleanup({ action: 'list_failed', userEmail });\n}\n\nexport async function deleteProject(projectId: string, userEmail: string): Promise<CleanupResult> {\n  return callAdminCleanup({ action: 'delete_project', projectId, userEmail });\n}\n\nexport async function deleteProjectsBatch(projectIds: string[], userEmail: string): Promise<CleanupResult> {\n  return callAdminCleanup({ action: 'delete_projects_batch', projectIds, userEmail });\n}\n","import { useState, useEffect } from 'react';\nimport { \n  BarChart3, \n  Users, \n  FileText, \n  ThumbsUp,\n  Lightbulb,\n  Bug,\n  ArrowLeft,\n  RefreshCw,\n  Activity,\n  Trash2,\n  AlertTriangle,\n  CheckCircle2\n} from 'lucide-react';\nimport { \n  getAdminStats, \n  getFeatureUsageStats, \n  getUserFeedback,\n  listAllProjects,\n  listFailedProjects,\n  deleteProjectsBatch,\n  type AdminStats,\n  type FeatureUsageStat,\n  type UserFeedback,\n  type AdminProject\n} from '../lib/services/adminService';\n\ninterface AdminDashboardProps {\n  onBack: () => void;\n  userEmail: string;\n}\n\ninterface StatCardProps {\n  title: string;\n  value: number | string;\n  subtitle?: string;\n  icon: React.ReactNode;\n  trend?: { value: number; label: string };\n  color?: 'green' | 'blue' | 'amber' | 'red' | 'gray';\n}\n\nfunction StatCard({ title, value, subtitle, icon, trend, color = 'gray' }: StatCardProps) {\n  const colorClasses = {\n    green: 'bg-green-50 text-green-600 border-green-200',\n    blue: 'bg-blue-50 text-blue-600 border-blue-200',\n    amber: 'bg-amber-50 text-amber-600 border-amber-200',\n    red: 'bg-red-50 text-red-600 border-red-200',\n    gray: 'bg-gray-50 text-gray-600 border-gray-200',\n  };\n\n  return (\n    <div className={`rounded-xl border p-6 ${colorClasses[color]}`}>\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className=\"w-10 h-10 rounded-lg bg-white/50 flex items-center justify-center\">\n          {icon}\n        </div>\n        {trend && (\n          <span className=\"text-xs font-medium\">\n            +{trend.value} {trend.label}\n          </span>\n        )}\n      </div>\n      <div className=\"text-3xl font-bold mb-1\">{value}</div>\n      <div className=\"text-sm font-medium\">{title}</div>\n      {subtitle && <div className=\"text-xs opacity-75 mt-1\">{subtitle}</div>}\n    </div>\n  );\n}\n\nexport function AdminDashboard({ onBack, userEmail }: AdminDashboardProps) {\n  const [stats, setStats] = useState<AdminStats | null>(null);\n  const [featureStats, setFeatureStats] = useState<FeatureUsageStat[]>([]);\n  const [feedback, setFeedback] = useState<UserFeedback[]>([]);\n  const [projects, setProjects] = useState<AdminProject[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState<'overview' | 'features' | 'feedback' | 'cleanup'>('overview');\n  const [selectedProjects, setSelectedProjects] = useState<Set<string>>(new Set());\n  const [deleting, setDeleting] = useState(false);\n  const [deleteMessage, setDeleteMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\n  const [showAllProjects, setShowAllProjects] = useState(false);\n\n  const loadData = async () => {\n    setLoading(true);\n    try {\n      const [statsData, featureData, feedbackData] = await Promise.all([\n        getAdminStats(),\n        getFeatureUsageStats(),\n        getUserFeedback(),\n      ]);\n      setStats(statsData);\n      setFeatureStats(featureData);\n      setFeedback(feedbackData);\n    } catch (error) {\n      console.error('Error loading admin data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadProjects = async () => {\n    const result = showAllProjects \n      ? await listAllProjects(userEmail)\n      : await listFailedProjects(userEmail);\n    if (result.success && result.projects) {\n      setProjects(result.projects);\n    }\n  };\n\n  const handleDeleteSelected = async () => {\n    if (selectedProjects.size === 0) return;\n    \n    const confirmed = window.confirm(\n      `Are you sure you want to delete ${selectedProjects.size} project(s)? This cannot be undone.`\n    );\n    if (!confirmed) return;\n\n    setDeleting(true);\n    setDeleteMessage(null);\n    \n    const result = await deleteProjectsBatch(Array.from(selectedProjects), userEmail);\n    \n    if (result.success) {\n      setDeleteMessage({ type: 'success', text: result.message || 'Projects deleted successfully' });\n      setSelectedProjects(new Set());\n      await loadProjects();\n    } else {\n      setDeleteMessage({ type: 'error', text: result.message || 'Failed to delete projects' });\n    }\n    \n    setDeleting(false);\n  };\n\n  const toggleProjectSelection = (projectId: string) => {\n    const newSelected = new Set(selectedProjects);\n    if (newSelected.has(projectId)) {\n      newSelected.delete(projectId);\n    } else {\n      newSelected.add(projectId);\n    }\n    setSelectedProjects(newSelected);\n  };\n\n  const selectAllProjects = () => {\n    if (selectedProjects.size === projects.length) {\n      setSelectedProjects(new Set());\n    } else {\n      setSelectedProjects(new Set(projects.map(p => p.id)));\n    }\n  };\n\n  useEffect(() => {\n    if (activeTab === 'cleanup') {\n      loadProjects();\n    }\n  }, [activeTab, showAllProjects]);\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <RefreshCw className=\"w-8 h-8 text-switch-green-600 animate-spin mx-auto mb-4\" />\n          <p className=\"text-gray-600\">Loading admin dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white border-b border-gray-200\">\n        <div className=\"max-w-7xl mx-auto px-4 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-4\">\n              <button\n                onClick={onBack}\n                className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n              >\n                <ArrowLeft className=\"w-5 h-5 text-gray-600\" />\n              </button>\n              <div>\n                <h1 className=\"text-xl font-bold text-gray-900\">Admin Dashboard</h1>\n                <p className=\"text-sm text-gray-500\">BidSmart Platform Analytics</p>\n              </div>\n            </div>\n            <button\n              onClick={loadData}\n              className=\"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-sm font-medium\"\n            >\n              <RefreshCw className=\"w-4 h-4\" />\n              Refresh\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"bg-white border-b border-gray-200\">\n        <div className=\"max-w-7xl mx-auto px-4\">\n          <div className=\"flex gap-1\">\n            {(['overview', 'features', 'feedback', 'cleanup'] as const).map((tab) => (\n              <button\n                key={tab}\n                onClick={() => setActiveTab(tab)}\n                className={`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${\n                  activeTab === tab\n                    ? 'border-switch-green-600 text-switch-green-600'\n                    : 'border-transparent text-gray-600 hover:text-gray-900'\n                }`}\n              >\n                {tab.charAt(0).toUpperCase() + tab.slice(1)}\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\n        {activeTab === 'overview' && stats && (\n          <>\n            {/* Key Metrics */}\n            <div className=\"mb-8\">\n              <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Key Metrics</h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                <StatCard\n                  title=\"Total Runs\"\n                  value={stats.total_runs}\n                  subtitle=\"Analyses started\"\n                  icon={<Activity className=\"w-5 h-5\" />}\n                  trend={{ value: stats.projects_24h, label: 'today' }}\n                  color=\"green\"\n                />\n                <StatCard\n                  title=\"Total Bids Analyzed\"\n                  value={stats.total_bids}\n                  subtitle={`${stats.unique_contractors} contractors`}\n                  icon={<FileText className=\"w-5 h-5\" />}\n                  trend={{ value: stats.bids_24h, label: 'today' }}\n                  color=\"blue\"\n                />\n                <StatCard\n                  title=\"PDFs Processed\"\n                  value={stats.total_pdfs}\n                  subtitle={`${stats.extracted_pdfs} extracted, ${stats.failed_pdfs} failed`}\n                  icon={<BarChart3 className=\"w-5 h-5\" />}\n                  color=\"amber\"\n                />\n                <StatCard\n                  title=\"Total Users\"\n                  value={stats.total_users}\n                  subtitle={`${stats.active_users_7d} active this week`}\n                  icon={<Users className=\"w-5 h-5\" />}\n                  color=\"gray\"\n                />\n              </div>\n            </div>\n\n            {/* Project Status */}\n            <div className=\"mb-8\">\n              <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Project Status</h2>\n              <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\n                <div className=\"bg-white rounded-lg border border-gray-200 p-4 text-center\">\n                  <div className=\"text-2xl font-bold text-gray-400\">{stats.draft_projects}</div>\n                  <div className=\"text-sm text-gray-600\">Draft</div>\n                </div>\n                <div className=\"bg-white rounded-lg border border-gray-200 p-4 text-center\">\n                  <div className=\"text-2xl font-bold text-amber-600\">{stats.analyzing_projects}</div>\n                  <div className=\"text-sm text-gray-600\">Analyzing</div>\n                </div>\n                <div className=\"bg-white rounded-lg border border-gray-200 p-4 text-center\">\n                  <div className=\"text-2xl font-bold text-blue-600\">{stats.comparing_projects}</div>\n                  <div className=\"text-sm text-gray-600\">Comparing</div>\n                </div>\n                <div className=\"bg-white rounded-lg border border-gray-200 p-4 text-center\">\n                  <div className=\"text-2xl font-bold text-green-600\">{stats.completed_projects}</div>\n                  <div className=\"text-sm text-gray-600\">Completed</div>\n                </div>\n                <div className=\"bg-white rounded-lg border border-gray-200 p-4 text-center\">\n                  <div className=\"text-2xl font-bold text-gray-900\">{stats.total_projects}</div>\n                  <div className=\"text-sm text-gray-600\">Total</div>\n                </div>\n              </div>\n            </div>\n\n            {/* User Feedback Summary */}\n            <div className=\"mb-8\">\n              <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">User Feedback Summary</h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div className=\"bg-green-50 rounded-lg border border-green-200 p-6\">\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <ThumbsUp className=\"w-5 h-5 text-green-600\" />\n                    <span className=\"text-2xl font-bold text-green-700\">{stats.feedback_liked}</span>\n                  </div>\n                  <div className=\"text-sm text-green-700\">Positive Feedback</div>\n                </div>\n                <div className=\"bg-blue-50 rounded-lg border border-blue-200 p-6\">\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <Lightbulb className=\"w-5 h-5 text-blue-600\" />\n                    <span className=\"text-2xl font-bold text-blue-700\">{stats.feedback_wishlist}</span>\n                  </div>\n                  <div className=\"text-sm text-blue-700\">Feature Requests</div>\n                </div>\n                <div className=\"bg-red-50 rounded-lg border border-red-200 p-6\">\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <Bug className=\"w-5 h-5 text-red-600\" />\n                    <span className=\"text-2xl font-bold text-red-700\">{stats.feedback_bugs}</span>\n                  </div>\n                  <div className=\"text-sm text-red-700\">Bug Reports</div>\n                </div>\n              </div>\n            </div>\n\n            {/* Homeowner Value Proposition */}\n            <div className=\"bg-gradient-to-br from-switch-green-50 to-blue-50 rounded-xl border border-switch-green-200 p-6\">\n              <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">\n                 Data Helping Homeowners\n              </h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                <div className=\"text-center\">\n                  <div className=\"text-4xl font-bold text-switch-green-600 mb-2\">\n                    {stats.total_bids}\n                  </div>\n                  <div className=\"text-sm text-gray-700\">\n                    Contractor bids analyzed to build pricing intelligence\n                  </div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-4xl font-bold text-switch-green-600 mb-2\">\n                    {stats.unique_contractors}\n                  </div>\n                  <div className=\"text-sm text-gray-700\">\n                    Unique contractors in our database\n                  </div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-4xl font-bold text-switch-green-600 mb-2\">\n                    {stats.total_users}\n                  </div>\n                  <div className=\"text-sm text-gray-700\">\n                    Homeowners helped with bid comparisons\n                  </div>\n                </div>\n              </div>\n            </div>\n          </>\n        )}\n\n        {activeTab === 'features' && (\n          <div>\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Feature Usage</h2>\n            {featureStats.length === 0 ? (\n              <div className=\"bg-white rounded-lg border border-gray-200 p-8 text-center\">\n                <Activity className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n                <p className=\"text-gray-600\">No feature tracking data yet.</p>\n                <p className=\"text-sm text-gray-500 mt-2\">\n                  Events will appear here as users interact with features.\n                </p>\n              </div>\n            ) : (\n              <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-gray-50 border-b border-gray-200\">\n                    <tr>\n                      <th className=\"text-left px-4 py-3 text-sm font-medium text-gray-700\">Event</th>\n                      <th className=\"text-left px-4 py-3 text-sm font-medium text-gray-700\">Category</th>\n                      <th className=\"text-right px-4 py-3 text-sm font-medium text-gray-700\">Total</th>\n                      <th className=\"text-right px-4 py-3 text-sm font-medium text-gray-700\">24h</th>\n                      <th className=\"text-right px-4 py-3 text-sm font-medium text-gray-700\">7d</th>\n                      <th className=\"text-right px-4 py-3 text-sm font-medium text-gray-700\">Sessions</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-gray-100\">\n                    {featureStats.map((feat, idx) => (\n                      <tr key={idx} className=\"hover:bg-gray-50\">\n                        <td className=\"px-4 py-3 text-sm font-medium text-gray-900\">{feat.event_name}</td>\n                        <td className=\"px-4 py-3 text-sm text-gray-600\">{feat.event_category || '-'}</td>\n                        <td className=\"px-4 py-3 text-sm text-gray-900 text-right font-mono\">{feat.total_count}</td>\n                        <td className=\"px-4 py-3 text-sm text-gray-600 text-right font-mono\">{feat.count_24h}</td>\n                        <td className=\"px-4 py-3 text-sm text-gray-600 text-right font-mono\">{feat.count_7d}</td>\n                        <td className=\"px-4 py-3 text-sm text-gray-600 text-right font-mono\">{feat.unique_sessions}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </div>\n        )}\n\n        {activeTab === 'feedback' && (\n          <div>\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">User Feedback</h2>\n            {feedback.length === 0 ? (\n              <div className=\"bg-white rounded-lg border border-gray-200 p-8 text-center\">\n                <ThumbsUp className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\n                <p className=\"text-gray-600\">No feedback submitted yet.</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {feedback.map((item) => (\n                  <div\n                    key={item.id}\n                    className={`bg-white rounded-lg border p-4 ${\n                      item.type === 'liked'\n                        ? 'border-green-200'\n                        : item.type === 'wishlist'\n                        ? 'border-blue-200'\n                        : 'border-red-200'\n                    }`}\n                  >\n                    <div className=\"flex items-start gap-3\">\n                      <div\n                        className={`w-8 h-8 rounded-full flex items-center justify-center ${\n                          item.type === 'liked'\n                            ? 'bg-green-100'\n                            : item.type === 'wishlist'\n                            ? 'bg-blue-100'\n                            : 'bg-red-100'\n                        }`}\n                      >\n                        {item.type === 'liked' && <ThumbsUp className=\"w-4 h-4 text-green-600\" />}\n                        {item.type === 'wishlist' && <Lightbulb className=\"w-4 h-4 text-blue-600\" />}\n                        {item.type === 'bug' && <Bug className=\"w-4 h-4 text-red-600\" />}\n                      </div>\n                      <div className=\"flex-1\">\n                        <p className=\"text-gray-900\">{item.message}</p>\n                        <div className=\"flex items-center gap-4 mt-2 text-xs text-gray-500\">\n                          <span>{new Date(item.created_at).toLocaleString()}</span>\n                          {item.url && <span className=\"truncate max-w-xs\">{item.url}</span>}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {activeTab === 'cleanup' && (\n          <div>\n            <div className=\"flex items-center justify-between mb-4\">\n              <div>\n                <h2 className=\"text-lg font-semibold text-gray-900\">Data Cleanup</h2>\n                <p className=\"text-sm text-gray-500\">Delete failed or test projects and their related data</p>\n              </div>\n              <div className=\"flex items-center gap-4\">\n                <label className=\"flex items-center gap-2 text-sm\">\n                  <input\n                    type=\"checkbox\"\n                    checked={showAllProjects}\n                    onChange={(e) => setShowAllProjects(e.target.checked)}\n                    className=\"rounded border-gray-300\"\n                  />\n                  Show all projects\n                </label>\n                <button\n                  onClick={loadProjects}\n                  className=\"flex items-center gap-2 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm\"\n                >\n                  <RefreshCw className=\"w-4 h-4\" />\n                  Refresh\n                </button>\n              </div>\n            </div>\n\n            {deleteMessage && (\n              <div className={`mb-4 p-4 rounded-lg flex items-center gap-3 ${\n                deleteMessage.type === 'success' \n                  ? 'bg-green-50 border border-green-200' \n                  : 'bg-red-50 border border-red-200'\n              }`}>\n                {deleteMessage.type === 'success' \n                  ? <CheckCircle2 className=\"w-5 h-5 text-green-600\" />\n                  : <AlertTriangle className=\"w-5 h-5 text-red-600\" />\n                }\n                <span className={deleteMessage.type === 'success' ? 'text-green-800' : 'text-red-800'}>\n                  {deleteMessage.text}\n                </span>\n              </div>\n            )}\n\n            {selectedProjects.size > 0 && (\n              <div className=\"mb-4 p-4 bg-amber-50 border border-amber-200 rounded-lg flex items-center justify-between\">\n                <span className=\"text-amber-800 font-medium\">\n                  {selectedProjects.size} project(s) selected\n                </span>\n                <button\n                  onClick={handleDeleteSelected}\n                  disabled={deleting}\n                  className=\"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium disabled:opacity-50\"\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                  {deleting ? 'Deleting...' : 'Delete Selected'}\n                </button>\n              </div>\n            )}\n\n            {projects.length === 0 ? (\n              <div className=\"bg-white rounded-lg border border-gray-200 p-8 text-center\">\n                <CheckCircle2 className=\"w-12 h-12 text-green-300 mx-auto mb-4\" />\n                <p className=\"text-gray-600\">\n                  {showAllProjects ? 'No projects found.' : 'No failed or stuck projects found.'}\n                </p>\n              </div>\n            ) : (\n              <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-gray-50 border-b border-gray-200\">\n                    <tr>\n                      <th className=\"text-left px-4 py-3 w-10\">\n                        <input\n                          type=\"checkbox\"\n                          checked={selectedProjects.size === projects.length && projects.length > 0}\n                          onChange={selectAllProjects}\n                          className=\"rounded border-gray-300\"\n                        />\n                      </th>\n                      <th className=\"text-left px-4 py-3 text-sm font-medium text-gray-700\">Project</th>\n                      <th className=\"text-left px-4 py-3 text-sm font-medium text-gray-700\">Status</th>\n                      <th className=\"text-left px-4 py-3 text-sm font-medium text-gray-700\">PDFs</th>\n                      <th className=\"text-left px-4 py-3 text-sm font-medium text-gray-700\">Bids</th>\n                      <th className=\"text-left px-4 py-3 text-sm font-medium text-gray-700\">Created</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-gray-100\">\n                    {projects.map((project) => (\n                      <tr key={project.id} className=\"hover:bg-gray-50\">\n                        <td className=\"px-4 py-3\">\n                          <input\n                            type=\"checkbox\"\n                            checked={selectedProjects.has(project.id)}\n                            onChange={() => toggleProjectSelection(project.id)}\n                            className=\"rounded border-gray-300\"\n                          />\n                        </td>\n                        <td className=\"px-4 py-3\">\n                          <div className=\"text-sm font-medium text-gray-900\">\n                            {project.project_name || 'Unnamed Project'}\n                          </div>\n                          <div className=\"text-xs text-gray-500 font-mono\">{project.id.slice(0, 8)}...</div>\n                        </td>\n                        <td className=\"px-4 py-3\">\n                          <span className={`inline-flex px-2 py-1 text-xs font-medium rounded-full ${\n                            project.status === 'completed' ? 'bg-green-100 text-green-700' :\n                            project.status === 'comparing' ? 'bg-blue-100 text-blue-700' :\n                            project.status === 'analyzing' ? 'bg-amber-100 text-amber-700' :\n                            'bg-gray-100 text-gray-700'\n                          }`}>\n                            {project.status}\n                          </span>\n                        </td>\n                        <td className=\"px-4 py-3 text-sm text-gray-600\">\n                          {project.pdf_uploads?.length || 0}\n                        </td>\n                        <td className=\"px-4 py-3 text-sm text-gray-600\">\n                          {project.bids?.length || 0}\n                        </td>\n                        <td className=\"px-4 py-3 text-sm text-gray-500\">\n                          {new Date(project.created_at).toLocaleDateString()}\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Footer */}\n      <div className=\"bg-white border-t border-gray-200 py-4\">\n        <div className=\"max-w-7xl mx-auto px-4 text-center text-sm text-gray-500\">\n          {stats && (\n            <span>\n              Last updated: {new Date(stats.generated_at).toLocaleString()}\n            </span>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { Lock, Mail, Loader2, AlertCircle } from 'lucide-react';\n\ninterface AdminLoginProps {\n  onLoginSuccess: (admin: AdminUser) => void;\n}\n\nexport interface AdminUser {\n  id: string;\n  email: string;\n  name: string | null;\n  is_super_admin: boolean;\n  session_token: string;\n}\n\nconst SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL;\nconst SUPABASE_ANON_KEY = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\nexport function AdminLogin({ onLoginSuccess }: AdminLoginProps) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch(`${SUPABASE_URL}/functions/v1/admin-login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,\n          'apikey': SUPABASE_ANON_KEY,\n        },\n        body: JSON.stringify({ email, password }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Login failed');\n      }\n\n      // Store session in localStorage\n      localStorage.setItem('admin_session', JSON.stringify({\n        token: data.session_token,\n        expires_at: data.expires_at,\n        admin: data.admin,\n      }));\n\n      onLoginSuccess({\n        ...data.admin,\n        session_token: data.session_token,\n      });\n\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Login failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-4\">\n      <div className=\"bg-white rounded-2xl shadow-lg max-w-md w-full p-8\">\n        <div className=\"text-center mb-8\">\n          <div className=\"w-16 h-16 bg-switch-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <Lock className=\"w-8 h-8 text-switch-green-600\" />\n          </div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Admin Login</h1>\n          <p className=\"text-gray-600 mt-2\">Sign in to access the admin dashboard</p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Email\n            </label>\n            <div className=\"relative\">\n              <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n              <input\n                id=\"email\"\n                type=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                placeholder=\"admin@example.com\"\n                required\n                className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Password\n            </label>\n            <div className=\"relative\">\n              <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n              <input\n                id=\"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                placeholder=\"\"\n                required\n                className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-switch-green-500 focus:border-transparent\"\n              />\n            </div>\n          </div>\n\n          {error && (\n            <div className=\"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg\">\n              <AlertCircle className=\"w-5 h-5 text-red-600 flex-shrink-0\" />\n              <p className=\"text-sm text-red-700\">{error}</p>\n            </div>\n          )}\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full py-3 bg-switch-green-600 hover:bg-switch-green-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center gap-2\"\n          >\n            {loading ? (\n              <>\n                <Loader2 className=\"w-5 h-5 animate-spin\" />\n                Signing in...\n              </>\n            ) : (\n              'Sign In'\n            )}\n          </button>\n        </form>\n\n        <p className=\"text-center text-xs text-gray-500 mt-6\">\n          Contact your administrator if you need access.\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport function getStoredAdminSession(): AdminUser | null {\n  try {\n    const stored = localStorage.getItem('admin_session');\n    if (!stored) return null;\n\n    const session = JSON.parse(stored);\n    \n    // Check if session is expired\n    if (new Date(session.expires_at) < new Date()) {\n      localStorage.removeItem('admin_session');\n      return null;\n    }\n\n    return {\n      ...session.admin,\n      session_token: session.token,\n    };\n  } catch {\n    return null;\n  }\n}\n\nexport function clearAdminSession(): void {\n  localStorage.removeItem('admin_session');\n}\n","import { useState, useEffect } from 'react';\nimport { useUser } from './hooks/useUser';\nimport { UnifiedHomePage } from './components/UnifiedHomePage';\nimport { BidSmartFlow } from './components/BidSmartFlow';\nimport { AdminDashboard } from './components/AdminDashboard';\nimport { AdminLogin, getStoredAdminSession, clearAdminSession, type AdminUser } from './components/AdminLogin';\nimport { supabase } from './lib/supabaseClient';\n\nconst ACTIVE_PROJECT_KEY = 'bidsmart_active_project';\nconst PROCESSING_PROJECT_KEY = 'bidsmart_processing_project';\n\nfunction setStoredProjectId(projectId: string | null): void {\n  try {\n    if (projectId) {\n      localStorage.setItem(ACTIVE_PROJECT_KEY, projectId);\n    } else {\n      localStorage.removeItem(ACTIVE_PROJECT_KEY);\n    }\n  } catch {\n  }\n}\n\ninterface ProcessingProject {\n  id: string;\n  email?: string;\n}\n\nfunction App() {\n  const { user, loading, error } = useUser();\n  const [activeProjectId, setActiveProjectId] = useState<string | null>(null);\n  const [processingProject, setProcessingProject] = useState<ProcessingProject | null>(null);\n  const [adminUser, setAdminUser] = useState<AdminUser | null>(() => getStoredAdminSession());\n  \n  // Initialize state based on URL path\n  const initialPath = window.location.pathname;\n  const [showAdmin, setShowAdmin] = useState(initialPath === '/admin');\n  const [showHome, setShowHome] = useState(initialPath !== '/admin');\n\n  // Check for processing project in localStorage and verify it's still processing\n  useEffect(() => {\n    const checkProcessingProject = async () => {\n      try {\n        const stored = localStorage.getItem(PROCESSING_PROJECT_KEY);\n        if (!stored) return;\n\n        const parsed = JSON.parse(stored) as ProcessingProject;\n        \n        // Verify the project is still in analyzing status\n        const { data: project } = await supabase\n          .from('projects')\n          .select('id, status, notification_email')\n          .eq('id', parsed.id)\n          .single();\n\n        if (project && (project.status === 'analyzing' || project.status === 'uploading')) {\n          setProcessingProject({\n            id: project.id,\n            email: project.notification_email,\n          });\n        } else {\n          // Project is no longer processing, clear it\n          localStorage.removeItem(PROCESSING_PROJECT_KEY);\n          setProcessingProject(null);\n        }\n      } catch {\n        // Ignore errors\n      }\n    };\n\n    checkProcessingProject();\n  }, []);\n\n  const handleSelectProject = (projectId: string) => {\n    setActiveProjectId(projectId);\n    setStoredProjectId(projectId);\n    setShowHome(false);\n  };\n\n  const handleNavigateHome = () => {\n    setActiveProjectId(null);\n    setStoredProjectId(null);\n    setShowHome(true);\n    setShowAdmin(false);\n    window.history.pushState({}, '', '/');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-switch-green-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading BidSmart...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center max-w-md mx-auto px-4\">\n          <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <span className=\"text-2xl text-red-600\">!</span>\n          </div>\n          <h1 className=\"text-xl font-semibold text-gray-900 mb-2\">Unable to Load</h1>\n          <p className=\"text-gray-600 mb-4\">\n            There was a problem connecting to the database. Please try refreshing the page.\n          </p>\n          <button\n            onClick={() => window.location.reload()}\n            className=\"btn btn-primary\"\n          >\n            Refresh Page\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Admin dashboard (accessible via /admin with login)\n  if (showAdmin) {\n    if (!adminUser) {\n      return <AdminLogin onLoginSuccess={(admin) => setAdminUser(admin)} />;\n    }\n    return (\n      <AdminDashboard \n        onBack={() => {\n          clearAdminSession();\n          setAdminUser(null);\n          handleNavigateHome();\n        }} \n        userEmail={adminUser.email} \n      />\n    );\n  }\n\n  if (showHome || !activeProjectId) {\n    return (\n      <UnifiedHomePage\n        user={user}\n        onSelectProject={handleSelectProject}\n      />\n    );\n  }\n\n  return <BidSmartFlow user={user} projectId={activeProjectId} onNavigateHome={handleNavigateHome} processingProject={processingProject} />;\n}\n\nexport default App;\n","// Version: 2.0.3 - Base64 Upload - Build 20260206-1517\n// Force new bundle hash to bypass aggressive browser caching\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\nimport './index.css';\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","supabaseUrl","supabaseAnonKey","supabase","createClient","getAuthTokenFromUrl","token","parts","payloadB64","payloadJson","base64UrlDecode","payload","now","error","str","base64","padded","AUTH_TOKEN_STORAGE_KEY","storeAuthToken","getStoredAuthToken","getAuthHeaders","userEmail","headers","STORAGE_KEY","DEFAULT_EMAIL","DEFAULT_NAME","getUrlParams","authToken","params","email","name","getStoredUser","stored","storeUser","user","getOrCreateUserByEmail","fullName","existing","fetchError","created","createError","useUser","setUser","useState","loading","setLoading","isReturningUser","setIsReturningUser","setError","useEffect","initializeUser","urlParams","storedUser","userInfo","dbUser","isExisting","err","defaultAttributes","toKebabCase","string","createLucideIcon","iconName","iconNode","Component","forwardRef","color","size","strokeWidth","absoluteStrokeWidth","className","children","rest","ref","createElement","tag","attrs","Activity","AlertCircle","AlertTriangle","ArrowLeft","ArrowRight","Award","BarChart3","BellOff","Bell","BookOpen","Bug","Calendar","CheckCircle2","CheckCircle","CheckSquare","Check","ChevronDown","ChevronRight","ChevronUp","ClipboardCheck","Clock","Copy","DollarSign","Download","ExternalLink","Eye","FileCheck2","FileText","FlaskConical","Globe","HelpCircle","Info","Lightbulb","Loader2","Lock","Mail","MapPin","MessageSquare","MicOff","Mic","Phone","Play","RefreshCw","Save","Search","Send","Shield","Square","Star","ThumbsUp","Trash2","Upload","Users","Volume2","VolumeX","XCircle","X","Zap","createProject","userId","projectData","data","getProject","projectId","getPublicDemoProjects","getProjectsWithPublicDemos","updateProject","updates","updateProjectDataSharingConsent","consent","updateProjectNotificationSettings","notifyOnCompletion","getProjectsByNotificationEmail","normalizedEmail","getProjectBySessionId","sessionId","createDraftProject","createBidStub","pdfUploadId","requestId","storageKey","v1ToBid","row","v1ToScope","v1ToContractor","v1ToScore","_v2Available","isV2Schema","getV1BidsByProject","getV1BidById","bidId","getBid","getBidsByProject","getBidCountByProject","table","count","getBidWithChildren","bid","scope","contractor","scores","equipment","questions","getBidScope","getBidContractor","getBidScore","getEquipmentByBid","createPdfUpload","uploadData","getPdfUploadsByProject","updatePdfUploadStatus","uploadId","status","additionalData","updateData","getIncentivesByZip","_zip","stateCode","MAX_PDF_SIZE_BYTES","ALLOWED_PDF_EXTENSIONS","ALLOWED_PDF_MIME_TYPES","validatePdfFile","file","fileExt","_a","uploadPdfToStorage","validationError","fileName","filePath","uploadError","urlData","urlError","getProjectRequirements","createProjectRequirements","requirements","updateProjectRequirements","saveProjectRequirements","updated","getFaqsByBid","getFaqsByProject","bids","overallFaqsPromise","bidFaqsPromises","bidData","index","faqs","overallResult","bidFaqResults","formatCurrency","amount","formatDate","dateString","ReturningUserSection","onSelectProject","setEmail","searching","setSearching","searched","setSearched","projects","setProjects","handleSearch","foundProjects","projectsWithCounts","project","bidCount","getStatusDisplay","statusConfig","jsx","config","isProjectReady","isProjectInProgress","jsxs","Fragment","TryTheToolSection","onSelectDemo","demos","setDemos","loadDemos","demoProjects","demosWithCounts","demo","FeedbackPanel","isOpen","onClose","feedbackType","setFeedbackType","message","setMessage","submitting","setSubmitting","submitted","setSubmitted","handleSubmit","option","AlphaBanner","dismissible","variant","dismissed","setDismissed","showFeedback","setShowFeedback","ZIP_PREFIX_TO_STATE","zipToState","zip","prefix","getDisplayAmount","incentive","getStatusBadge","until","daysLeft","formatRequirements","items","key","val","IncentivesPanel","userZip","userState","zipInput","setZipInput","activeZip","setActiveZip","isEditing","setIsEditing","incentives","setIncentives","zipError","setZipError","expandedRows","setExpandedRows","cache","loadIncentives","useCallback","state","cacheKey","results","handleSubmitZip","handleKeyDown","toggleExpand","id","prev","next","totalPotentialSavings","sum","inc","renderZipBar","isExpanded","statusBadge","req","i","POLLING_DELAY_MS","POLLING_INTERVAL_MS","playNotificationSound","audioContext","oscillator","gainNode","AnalysisSuccessScreen","onViewDemo","onReturnHome","onViewResults","isComplete","setIsComplete","soundEnabled","setSoundEnabled","emailEnabled","setEmailEnabled","pollingActive","setPollingActive","timeRemaining","setTimeRemaining","pollingIntervalRef","useRef","countdownIntervalRef","hasPlayedSound","checkProjectStatus","delayTimeout","formatTime","seconds","mins","secs","handlePreviewSound","SUPABASE_URL","SUPABASE_ANON_KEY","authHeaders","getParentAuthHeaders","uploadPdfFile","path","db.uploadPdfToStorage","pdfUpload","db.createPdfUpload","effectiveRequestId","bidStub","db.createBidStub","db.updatePdfUploadStatus","startBatchAnalysis","pdfUploadIds","userPriorities","projectDetails","documents","prioritiesPayload","requestBody","response","text","getBatchExtractionStatus","pdfUploads","db.getPdfUploadsByProject","pdfStatuses","pdf","completedPdfs","failedPdfs","processingPdfs","allSuccessful","pollBatchExtractionStatus","options","intervalMs","maxAttempts","onProgress","attempts","resolve","reject","poll","SpeechRecognition","useSpeechToText","onResult","onInterimResult","continuous","language","isListening","setIsListening","transcript","setTranscript","interimTranscript","setInterimTranscript","recognitionRef","isSupported","recognition","event","finalTranscript","interimText","result","startListening","stopListening","toggleListening","SwitchLogo","SESSION_ID_KEY","getOrCreateSessionId","PHASES","PrioritySlider","label","value","onChange","description","UnifiedHomePage","uploadedPdfs","setUploadedPdfs","dragActive","setDragActive","fileInputRef","priorities","setPriorities","setProjectDetails","dataSharingConsent","setDataSharingConsent","showPrivacyDetails","setShowPrivacyDetails","notificationEmail","setNotificationEmail","analysisState","setAnalysisState","analysisError","setAnalysisError","analysisElapsedSeconds","setAnalysisElapsedSeconds","analysisTimerRef","draftProjectId","setDraftProjectId","demoProjectId","setDemoProjectId","showPriorities","setShowPriorities","showProjectDetails","setShowProjectDetails","isHeaderSticky","setIsHeaderSticky","heroSectionRef","isSpeechSupported","speechError","checkForDraftProject","loadDemoProject","handleScroll","handleReturnToDashboard","existingDraft","ensureDraftProject","canContinue","isEmailValid","handleFiles","files","fileArray","validFiles","handleDrag","handleDrop","handleFileSelect","removeFile","getStatusIcon","formatFileSize","bytes","formatElapsedTime","handleAnalyze","batchRequestId","uploadResult","analysisResult","phase","isActive","v","PHASE_LABELS","PhaseContext","createContext","loadStoredState","saveStoredState","PhaseProvider","initialProjectId","setState","initializeProject","storedState","existingProjects","foundProject","bidsWithEquipment","questionsData","currentPhase","phaseStatus","canAccessPhase","goToPhase","newState","completePhase","newPhaseStatus","nextPhase","newCurrentPhase","refreshBids","refreshRequirements","refreshQuestions","getPhaseLabel","ensureProjectExists","bidIdsRef","interval","currentBidIds","timer","usePhase","context","useContext","PhaseLayout","onNavigateHome","projectName","isDemoMode","questionsLoading","item","isClickable","AnalysisSubmissionInterstitial","onEmailChange","onZipChange","onNotifyChange","enableSound","onEnableSoundChange","onRequestNotificationPermission","notificationPermission","onSaveAndContinue","isSaving","emailError","setEmailError","showPermissionInfo","setShowPermissionInfo","validateEmail","emailRegex","handleEmailChange","handleContinue","isValid","useAnalysisNotification","audioRef","lastNotifiedProjectRef","initAudio","beepSound","playSound","requestPermission","showBrowserNotification","title","body","notification","notify","shouldPlaySound","shouldShowBrowser","reset","toggleSound","enabled","NotificationToast","show","autoClose","isVisible","setIsVisible","GatherPhase","analysisProgress","setAnalysisProgress","setNotifyOnCompletion","savingNotification","setSavingNotification","notificationSaved","setNotificationSaved","setEnableSound","showCompletionToast","setShowCompletionToast","zipCode","setZipCode","permission","existingBidsCount","validPendingCount","handleConfirmSubmission","activeProjectId","pollResult","handleSaveNotification","showLongWaitMessage","LABEL_COL_WIDTH","BID_COL_MIN_WIDTH","ComparePhase","activeTab","setActiveTab","showMoreEquipment","setShowMoreEquipment","showMoreContractors","setShowMoreContractors","showFinancingDetails","setShowFinancingDetails","downloadingReport","setDownloadingReport","emailingReport","setEmailingReport","reportSent","setReportSent","formatDateDisplay","getHighestValue","values","higherIsBetter","validValues","isHighlighted","bestValue","tabs","deduplicatedBids","seen","existingHasScope","incomingHasScope","winner","existingAmount","_b","getEquipmentData","mainEquipment","getContractorData","sc","getCostData","getScopeData","equipmentData","contractorData","costData","scopeData","bestSeer","bestHspf","bestYears","bestRating","lowestPrice","bestLaborWarranty","bestEquipmentWarranty","fastestTimeline","handleDownloadReport","errorData","blob","url","handleEmailReport","tableMinWidth","labelCellStyle","bidCellStyle","scopeItems","tab","t","idx","dedupBid","cert","s","rowIdx","detail","IncentivesTable","rebatePrograms","selectedIncentives","onToggleIncentive","incentiveId","newExpanded","getAmount","totalSelectedAmount","isSelected","OverallFaqsCard","expandedFaqs","setExpandedFaqs","faqId","faq","hasAnswer","BidSpecificFaqsCard","bidFaqSets","switchPreferredBids","activeTabIndex","setActiveTabIndex","getConfidenceBadge","confidence","Icon","activeBidFaqSet","bidFaqSet","isPreferred","DecidePhase","setRebatePrograms","setSelectedIncentives","selectedContractor","setSelectedContractor","copiedContractor","setCopiedContractor","expandedBids","setExpandedBids","projectFaqData","setProjectFaqData","loadRebatePrograms","loadAllFaqs","faqData","toggleIncentive","programId","newSelected","getTotalSelectedRebates","program","toggleQuestionAnswered","question","getQuestionsForBid","copyQuestionsToClipboard","contractorName","unansweredQuestions","textArea","getPriorityColor","priority","toggleBidExpanded","totalSelectedRebates","totalAmount","netCost","_c","_d","_e","_f","_g","_h","_i","_j","_k","_l","_m","_n","lowestNetCost","bestWarranty","toggleSelection","handleDownloadChecklist","flag","indicator","bidQuestions","answeredCount","isBestPrice","isBestNetCost","isBestRating","isBestEfficiency","totalWarranty","isBestWarranty","ISSUE_OPTIONS","ContractorReviewSurvey","contractorBidId","onSubmitSuccess","existingReview","setExistingReview","overallRating","setOverallRating","qualityRating","setQualityRating","professionalismRating","setProfessionalismRating","communicationRating","setCommunicationRating","timelinessRating","setTimelinessRating","usedChecklist","setUsedChecklist","checklistCompletenessRating","setChecklistCompletenessRating","wouldRecommend","setWouldRecommend","completedOnTime","setCompletedOnTime","stayedWithinBudget","setStayedWithinBudget","criticalItemsVerified","setCriticalItemsVerified","photoDocumentationProvided","setPhotoDocumentationProvided","issuesEncountered","setIssuesEncountered","positiveComments","setPositiveComments","improvementSuggestions","setImprovementSuggestions","errors","setErrors","loadExistingReview","validateForm","newErrors","StarRating","YesNoQuestion","issue","required","star","VerifyPhase","selectedBid","setSelectedBid","loadProjectData","bidWithChildren","DemoBanner","onStartOwn","ProcessingBanner","PhaseContentWrapper","processingProject","content","PhaseContent","BidSmartFlow","getAdminStats","getFeatureUsageStats","getUserFeedback","callAdminCleanup","listAllProjects","listFailedProjects","deleteProjectsBatch","projectIds","StatCard","subtitle","icon","trend","colorClasses","AdminDashboard","onBack","stats","setStats","featureStats","setFeatureStats","feedback","setFeedback","selectedProjects","setSelectedProjects","deleting","setDeleting","deleteMessage","setDeleteMessage","showAllProjects","setShowAllProjects","loadData","statsData","featureData","feedbackData","loadProjects","handleDeleteSelected","toggleProjectSelection","selectAllProjects","feat","AdminLogin","onLoginSuccess","password","setPassword","getStoredAdminSession","session","clearAdminSession","ACTIVE_PROJECT_KEY","PROCESSING_PROJECT_KEY","setStoredProjectId","App","setActiveProjectId","setProcessingProject","adminUser","setAdminUser","initialPath","showAdmin","setShowAdmin","showHome","setShowHome","parsed","handleSelectProject","handleNavigateHome","admin","ReactDOM","React"],"mappings":"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AM,MAAO,KAEzI,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAE/G,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAC5H,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAAM,MAAO,KAE5H,MAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KACzI,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAE5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAErF,IAAO,KAAM,IAAO,KAAM,IAAO,KAEjC,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAE3D,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAEnK,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KACzI,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAErF,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KACnK,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAE/G,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAE5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAE5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAE5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAErF,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC/G,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAE5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAExE,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAEtJ,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAE/G,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAE/G,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAE5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAE5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAExE,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAClG,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAE5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC/G,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAElG,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAElG,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAE/G,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAE5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAE/G,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC/G,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAClG,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAE/G,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC/G,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAE5H,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAC/G,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAE9C,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAAO,KAAM,IAA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","x_google_ignoreList":[0,1,2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65]}